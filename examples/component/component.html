<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="viewport"
	content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=320, height=device-height , target-densitydpi=142" />
<title>组件实例</title> 
<link rel="stylesheet" type="text/css"
	href="../../src/css/reset.css" />
<link rel="stylesheet" type="text/css"
	href="../../src/css/common.css" />
<link rel="stylesheet" type="text/css"
	href="../../src/css/icon.css" />
<link rel="stylesheet" type="text/css"
	href="../../src/css/widget.css" />
<style type="text/css">
	html,body{
		overflow:auto;
		height:auto;
	}
	body{
		padding:60px 20px;
	}
	h3{
		margin:20px 0;
		padding:5px;
		background:#ccc;
	}
</style>
</head>
<body>
	<h3>图标：</h3>
	<div id="iconDv"></div>
	<br/>
	<div id="iconsDv"></div>
	<!-- E 图标 -->
	
	<br/><br/><br/><br/>
	
	<h3>按钮：</h3>
	<div id="buttonDv"></div>
	<br/><br/><br/><br/>
	
	<h3>控制组：</h3>
	<div id="controlGroupDv"></div>
	<br/><br/><br/><br/>
	
	<h3>单选框：</h3>
	<div id="radioDv"></div>
	<br/><br/><br/><br/>
	
	<h3>复选框：</h3>
	<div id="checkboxDv"></div>
	<br/><br/><br/><br/>
	
	<h3>菜单：</h3>
	<div id="menuDv"></div>
	<br/><br/><br/><br/>
	
	<h3>下拉选择框：</h3>
	<div id="selectDv"></div>
	<br/><br/><br/><br/>
	
	<h3>输入框：</h3>
	<div id="inputDv"></div>
	<br/><br/><br/><br/>
	
	<h3>表单：</h3>
	<div id="formDv"></div>
	<br/><br/><br/><br/>
	
	<h3>标签栏：</h3>
	<div id="tabDv"></div>
	<br/><br/><br/><br/>
	
	<h3>工具栏：</h3>
	<div id="toolbarDv"></div>
	<br/><br/><br/><br/>
	
	<h3>提示：</h3>
	<div id="tipsDv"></div>
	<br/><br/><br/><br/>
	
	<h3>对话框：</h3>
	<div id="dialogDv"></div>
	<br/><br/><br/><br/>
	
	<h3>列表：</h3>
	<br/><br/><br/><br/>
	
</body>
<script type="text/javascript"
	src="../../lib/modernizr.js"></script>
<script type="text/javascript"
	src="../../lib/jquery.js"></script>
<script type="text/javascript"
	src="../../src/js/base/base.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Json.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Object.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Browser.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Debug.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Function.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Class.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Loader.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Events.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Date.js"></script>
<script type="text/javascript"
	src="../../src/js/base/String.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Cookie.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Util.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Support.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Template.js"></script>
<script type="text/javascript"
	src="../../src/js/base/HashChange.js"></script>
<script type="text/javascript"
	src="../../src/js/base/Validator.js"></script>
<script type="text/javascript"
	src="../../src/js/base/adapt.js"></script>
<script type="text/javascript">
$H.Loader.rootPath={
	'handy'        : '../../src/js'
}
$Require([
"C.ComponentManager",
"C.Icon",
"C.Button",
"C.ControlGroup",
"C.Radio",
"C.Checkbox",
"C.Label",
"C.RowItem",
"C.Menu",
"C.Select",
"C.Input",
"C.Set",
"C.Field",
"C.Form",
"C.Tab",
"C.Toolbar",
"C.Tips",
"C.Dialog"],
function(CM,Icon,Button,ControlGroup,Radio,Checkbox,Label,RowItem,Menu,Select,Input,
		Set,Field,Form,Tab,Toolbar,Tips,Dialog){
	
	function example(){
	
		$('#iconDv').append(Icon.html({
			//这里因为性能测试循环注释掉
			//cid:'icon',
			name:'edit',
			renderTo:'#iconDv',
			listeners:[
			           {
			        	   type:'afterRender',
			        	   data:'message',
			        	   custom:true,
			        	   handler:function(oEvt){
			        		   $D.log(oEvt.data);
			        	   }
			           }
			]
		}));
		/* 这里因为性能测试循环注释掉 
		var icon=CM.get('icon');
		icon.afterRender();
		console.log(icon); 
		*/
		
		var aIcons=["action","arrow-d-l","arrow-d-r","arrow-d","arrow-l","arrow-r","arrow-u-l","arrow-u-r",
		            "arrow-u","audio","calendar","camera","carat-d","carat-l","carat-r","carat-u","check",
		            "clock","cloud","grid","mail","eye","gear","heart","home","info","bullets","bars",
		            "navigation","lock","search","location","minus","forbidden","edit","user","phone",
		            "plus","power","recycle","forward","refresh","shop","comment","star","tag","back",
		            "video","alert","delete"];
		for(var i=0;i<aIcons.length;i++){
			new Icon({
				renderTo:'#iconsDv',
				name:aIcons[i]
			});
			$("#iconsDv").append('<span style="display:inline-block;width:100px;margin-left:10px;line-height:30px;">'+aIcons[i]+'</span>'+(i%5==4?'<br/>':''));
		}
		
		//全局变量，便于测试
		button=new Button({
			renderTo:'#buttonDv',
			text:'按钮',
			color:'blue',
			radius:'normal',
			click:function(){
		  		  $D.log(1);
		  	  }
		})
		
		new Button({
			renderTo:'#buttonDv',
			text:'图标按钮',
			items:{
				xtype:"Icon",
				name:"carat-l"
			}
		})
		
		new Button({
			renderTo:'#buttonDv',
			items:{
				xtype:"Icon",
				name:"carat-l"
			}
		})
		
		var oControl=new ControlGroup({
			renderTo:'#controlGroupDv',
			direction:'h',
			items:[{
				xtype:'Button',
				text:'按钮一'
			},{
				xtype:'Button',
				text:'按钮二'
			},{
				xtype:'Button',
				text:'按钮三'
			}]
		});
		
		$('#controlGroupDv').append("<br/>");
		
		new Button({
			renderTo:'#controlGroupDv',
			text:'更新第二个按钮',
			click:function(){
				var oBtn=oControl.children[1];
				var oNew=oBtn.update({cid:'newBtn123',text:'新按钮'});
			}
		});
		
		//单选框
		var radios=new ControlGroup({
			renderTo:'#radioDv',
			defItem:{
				xtype:'Radio',
				name:'radio'
			},
			items:[{
				value:'1',
				text:'选项一'
			},{
				value:'2',
				selected:true,
				text:'选项二'
			},{
				value:'3',
				text:'选项三'
			}]
		});
		
		new Button({
			renderTo:'#radioDv',
			text:'获取选中值',
			click:function(){
				alert(radios.val());
			}
		})
		
		new Button({
			renderTo:'#radioDv',
			text:'选中第一个',
			click:function(){
				radios.val('1');
			}
		})
		
		//多选框
		var checkboxs=new ControlGroup({
			renderTo:'#checkboxDv',
			defItem:{
				xtype:'Checkbox',
				name:'checkbox'
			},
			items:[{
				value:'1',
				text:'选项一'
			},{
				value:'2',
				selected:true,
				text:'选项二'
			},{
				value:'3',
				selected:true,
				text:'选项三'
			}]
		});
		
		new Button({
			renderTo:'#checkboxDv',
			text:'获取选中值',
			click:function(){
				alert(checkboxs.val());
			}
		})
		
		new Button({
			renderTo:'#checkboxDv',
			text:'选中前两个',
			click:function(){
				checkboxs.val('1,2');
			}
		})
		
		//菜单
		new Button({
			renderTo:"#menuDv",
			text:"普通菜单",
			click:function(){
				if(this.menu){
					this.menu.show();
				}else{
					this.menu=new Menu({
						itemClick:function(menuItem){
							alert(menuItem.value);
						},
						items:[{
							text:"菜单一",
							value:"1"
						},{
							text:"菜单二",
							value:"2"
						}]
					})
				}
			}
		})
		
		new Button({
			renderTo:"#menuDv",
			text:"active选中效果菜单",
			click:function(){
				if(this.menu){
					this.menu.show();
				}else{
					this.menu=new Menu({
						markType:'active',
						items:[{
							text:"菜单一",
							value:"1"
						},{
							text:"菜单二",
							value:"2"
						}]
					})
				}
			}
		})
		
		new Button({
			renderTo:"#menuDv",
			text:"点选效果菜单",
			click:function(){
				if(this.menu){
					this.menu.show();
				}else{
					this.menu=new Menu({
						markType:'dot',
						items:[{
							text:"菜单一",
							value:"1"
						},{
							text:"菜单二",
							value:"2"
						}]
					})
				}
			}
		})
		
		//下拉选择框
		var select=new Select({
			renderTo:'#selectDv',
			name:'select',
			value:'1',
			width:150,
			defItem:{
				showPos:'followEl'
			},
			options:[{
				text:"选项一",
				value:"1"
			},{
				text:"选项二",
				value:"2"
			}],
			change:function(){
				console.log(this);
				console.log(arguments);
			}
		});
		new Button({
			renderTo:'#selectDv',
			text:'获取选中值',
			click:function(){
				alert(select.val());
			}
		})
		
		//输入框
		new Input({
			renderTo:'#inputDv',
			placeholder:'placeholder'
		});
		$('#inputDv').append('<br/>');
		new Input({
			type:'search',
			value:'默认值',
			renderTo:'#inputDv'
		});
		$('#inputDv').append('<br/>');
		new Input({
			renderTo:'#inputDv',
			withClear:true
		});
		$('#inputDv').append('<br/>');
		new Input({
			renderTo:'#inputDv',
			disabled:true,
			items:{
				xtype:'Button',
				radius:'big',
				items:{
					xtype:"Icon",
					name:'edit'
				}
			}
		});
		$('#inputDv').append('<br/>');
		var input=new Input({
			type:'textarea',
			placeholder:'textarea自适应高度',
			renderTo:'#inputDv'
		});
		
		//表单
		var form=new Form({
			renderTo:'#formDv',
			width:400,
			items:[{
				xtype:'Set',
				title:'资料',
				items:[{
					xtype:'Field',
					title:'用户名：',
					content:{
						text:'xiaoxiao',
						click:function(){
							alert('详情')
						}
					}
				},{
					xtype:'Field',
					title:'昵称：',
					content:{
						underline:false,
						text:'bb'
					}
				},{
					xtype:'Field',
					title:'头像：',
					content:{
						hasArrow:true,
						underline:true,
						icon:'user'
					}
				},{
					xtype:'Field',
					title:'邮箱：',
					labelColor:'gray',
					labelAlign:'right',
					items:{
						xtype:'Input',
						name:'email',
						validator:{
							name:'邮箱',
							rules:{
								required:true,
								email:true
							}
						}
					}
				},{
					xtype:'Field',
					title:'性别：',
					items:{
						xtype:'Select',
						name:'level',
						options:[{
							text:'男',
							value:'0'
						},{
							text:'女',
							value:'1'
						}],
						validator:{
							rules:{
								required:true
							},
							messages:{
								required:'请选择性别'
							}
						}
					}
				},{
					xtype:"Field",
					title:'描述：',
					items:{
						xtype:'Input',
						type:'textarea',
						validator:{
							name:'描述',
							rules:{
								required:true,
								rangelength:[1,10]
							}
						}
					}
				}]
			}]
		});
		new Button({
			renderTo:'#formDv',
			text:'校验表单',
			click:function(){
				if(form.valid()){
					new Tips('校验通过');
				}
			}
		})
		
		//标签栏
		new Tab({
			renderTo:'#tabDv',
			hasContent:true,
			items:[
				{
					title:{
						text:'一',
						color:'black',
						icon:'edit'
					},
					selected:true,
					content:'内容1'
				},
				{
					title:{
						text:'二',
						color:'black',
						icon:'edit'
					},
					content:'内容2',
					click:function(){
						$D.log(this.index());
					}
				},
				{
					title:{
						text:'三',
						color:'black',
						icon:'edit'
					},
					content:'内容3'
				}
			]
		});
		
		//工具栏
		new Toolbar({
			renderTo:'#toolbarDv',
			title:'header标题',
			type:'header',
			items:[{
				xtype:'Button',
				isBack:true,
				text:'后退',
				isMini:true,
				pos:'left',
				color:'blue',
				click:function(){
					$D.log(1);
				}
			},{
				xtype:'Button',
				text:'按钮',
				isMini:true,
				pos:'right',
				color:'black'
			}]
		})
		
		var toolbar=new Toolbar({
			renderTo:'#toolbarDv',
			items:[{
				xtype:'Tab',
				activeType:'b',
				items:[
						{
							selected:true,
							items:{
								text:'一',
								color:'black',
								icon:'edit'
							}
						},
						{
							items:{
								text:'二',
								color:'black',
								icon:'edit'
							}
						},
						{
							items:{
								text:'三',
								color:'black',
								icon:'edit'
							}
						}
					]
			}]
		});
		
		//提示
		new Button({
			renderTo:'#tipsDv',
			text:'默认提示',
			click:function(){
				new Tips({
					text:'默认提示'
				})
			}
		})
		new Button({
			renderTo:'#tipsDv',
			text:'错误提示',
			click:function(){
				new Tips({
					text:'提示',
					theme:'error'
				})
			}
		})
		new Button({
			renderTo:'#tipsDv',
			text:'loading提示',
			click:function(){
				new Tips({
					text:'提示',
					theme:'black',
					icon:'loading'
				})
			}
		})
		new Button({
			renderTo:'#tipsDv',
			text:'无文字loading无timeout提示',
			click:function(){
				new Tips({
					timeout:null,
					shadowOverlay:null,
					icon:'loading'
				})
			}
		})
		new Button({
			renderTo:'#tipsDv',
			text:'无遮罩层自定义timeout提示',
			click:function(){
				new Tips({
					noMask:true,
					timeout:3000,
					shadowOverlay:null,
					icon:'loading'
				})
			}
		})
		
		//对话框
		var dialog;
		new Button({
			renderTo:'#dialogDv',
			text:'普通对话框',
			click:function(){
				if(dialog){
					dialog.show();
					return;
				}
				dialog=new Dialog({
					title:'警告',
					notDestroy:true,
					contentTitle:'注意!',
					activeBtn:2,
					contentMsg:'内容内容内容内容内容内容内容内容内容',
					okCall:function(){
						$D.log('click ok');
						//不关闭弹窗
						return false;
					}
				});
			}
		})
		
		new Button({
			renderTo:'#dialogDv',
			text:'alert',
			click:function(){
				Dialog.alert('我是alert！')
			}
		})
		
		new Button({
			renderTo:'#dialogDv',
			text:'confirm',
			click:function(){
				Dialog.confirm('我是confirm！',function(result){
					alert('您点击的是'+(result?'确定':'取消')+'，返回：'+result);
				})
			}
		})
		
		new Button({
			renderTo:'#dialogDv',
			text:'prompt',
			click:function(){
				Dialog.prompt('请输入:','123',function(result){
					alert('您输入的是：'+result);
				})
			}
		})
		
		new Button({
			renderTo:'#dialogDv',
			text:'自定义对话框',
			click:function(){
				new Dialog({
					title:'警告',
					contentTitle:'注意!',
					contentMsg:'我是自定义对话框',
					items:[{
						xtype:'Select',
						xrole:'dialog-content',
						name:'dialogSelect',
						value:'1',
						width:150,
						options:[{
							text:"选项一",
							value:"1"
						},{
							text:"选项二",
							value:"2"
						}],
						change:function(){
							console.log(this);
							console.log(arguments);
						}
					},{
						xtype:'Tab',
						theme:'border-top',
						xrole:'dialog-action',
						notSelect:true,
						items:[{
							title:{
								xtype:'Button',
								text:'取消',
								click:function(){
									alert('取消');
									this.parents().hide();
								}
							}
						},{
							title:{
								xtype:'Button',
								text:'不保存',
								click:function(){
									alert('不保存');
									this.parents().hide();
								}
							}
						},{
							title:{
								xtype:'Button',
								isActive:true,
								text:'保存',
								click:function(){
									alert('保存');
									this.parents().hide();
								}
							}
						}]
					}]
				});
			}
		});
	
	}
	
	$D.time()
	for(var i=0;i<1;i++){
		example();
	}
	
	$D.time(true,'组件初始化时间：');
	var num=0;
	$CM.eachInEl($(document.body),function(){
		num++;
	})
	$D.log('组件数目：'+num);
	
});
</script>
</html>