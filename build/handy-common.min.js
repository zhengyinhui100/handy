/* Handy v1.0.0-dev | 2014-03-02 | zhengyinhui100@gmail.com */
$Define("cm.AbstractView",function(){var g=$HO.createClass(),h=/^(<[a-zA-Z]+)/,f=/^[^>]+class=/,c=/(class=")/;$HO.extend(g.prototype,{xtype:"AbstractView",autoRender:!0,renderBy:"append",_customEvents:"beforeRender render afterRender beforeShow afterShow hide destroy".split(" "),_defaultEvents:["click","mouseover","focus"],initialize:function(a){this.doConfig(a);this.beforeRender();!1!=this.autoRender&&(this.render(),this.afterRender())},doConfig:function(a){var b=this;b.params=a;b.settings=$HO.clone(a);
b.renderTo=a.renderTo?$(a.renderTo):$(document.body);var d=b.listeners||[];a.listeners&&(d=d.concat(a.listeners));b._listeners=d;$HO.extend(b,a,{notCover:function(d){var e=b[d],c=$HO.contains(b._customEvents,d),j=$HO.contains(b._defaultEvents,d);(c||j)&&b._listeners.push({type:d,notEl:c,handler:a[d]});if(null!=e&&"object"==typeof e||$HO.isFunction(e))return!0}})},getEl:function(){return this._container},getId:function(){return this._id},initHtml:function(){"string"!=typeof this.tmpl&&(this.tmpl=this.constructor.prototype.tmpl=
this.tmpl.join(""));return $H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this)},getHtml:function(){var a=this.getId(),b;b="visibility"==this.displayMode?"visibility:hidden;":"display:none;";var d=this.initHtml(),l=f.test(d),e=this.extCls+" ";l&&(d=d.replace(c,"$1"+e));return d=d.replace(h,'$1 id="'+a+'" style="'+b+'"'+(l?"":' class="'+e+'"'))},initStyle:function(){var a=this.getEl(),b=this.style||{};void 0!=this.width&&(b.width=this.width);void 0!=this.height&&(b.height=this.height);a.css(b)},beforeRender:function(){this.fire("beforeRender")},
render:function(){this.fire("render");var a=this.getHtml();this.renderTo[this.renderBy](a)},afterRender:function(){if(this.rendered)return!1;this._container=$("#"+this.getId());this.rendered=!0;this.initStyle();!0!=this.notListen&&this.initListeners();this.disabled&&this.disable();this.fire("afterRender");this.hidden||this.show()},hide:function(){if(!this.showed)return!1;this.showed=!1;var a=this.getEl();"visibility"==this.displayMode?a.css({visibility:"hidden"}):a.hide();this.fire("hide")},show:function(){if(this.showed)return!1;
this.fire("beforeShow");this.showed=!0;var a=this.getEl();"visibility"==this.displayMode?a.css({visibility:"visible"}):a.show();this.afterShow()},afterShow:function(){this.fire("afterShow")},enable:function(){this.resumeListeners();this.getEl().removeClass("hui-disable").find("input,textarea,select").removeAttr("disabled")},disable:function(){this.suspendListeners();this.getEl().addClass("hui-disable").find("input,textarea,select").attr("disabled","disabled")},fire:function(a,b){for(var d=this._listeners.length-
1;0<=d;d--){var c=this._listeners[d];if(c.type==a){var e=c.delegation;b?e.apply(null,b.shift(c)):e(c)}}},listen:function(a){var b=this,d=a.type,c=b._listeners,e=a.el,k=a.method||"bind",j=a.selector,f=a.data,g=a.delegation=function(){if(!0!=b.isSuspend)return a.handler.apply(a.scope||b,arguments)};$H.Browser.mobile()&&"click"==d&&(d="touchend");e=e?"string"==typeof e?b.find(e):e:b.getEl();if(!a.notEl)if(j)if(f)e[k](j,d,f,g);else e[k](j,d,g);else if(f)e[k](d,f,g);else e[k](d,g);c.push(a)},unlisten:function(a){var b=
a.type,d=a.el,c="delegate"==a.method?"undelegate":"unbind",e=a.selector,f;$H.Browser.mobile()&&"click"==b&&(b="touchend");for(var d=d?"string"==typeof d?this.find(d):d:this.getEl(),g=this._listeners.length-1;0<=g;g--){var h=this._listeners[g];if(h.handler==a.handler){f=h.delegation;this._listeners.splice(g,1);break}}if(!a.notEl)if(e)d[c](e,b,f);else d[c](b,f)},initListeners:function(){if(this.listened)return!1;this.listened=!0;var a=this._listeners;this._listeners=[];for(var b=a.length-1;0<=b;b--)this.listen(a[b])},
clearListeners:function(){for(var a=this._listeners,b=a.length-1;0<=b;b--)this.unlisten(a[b])},suspendListeners:function(){if(this.isSuspend)return!1;this.isSuspend=!0},resumeListeners:function(){if(!this.isSuspend)return!1;this.isSuspend=!1},destroy:function(){if(this.destroyed)return!1;this.fire("destroy");this.clearListeners();this.getEl().remove();this.destroyed=!0}});return g});
$Define("cm.AbstractManager",function(){var g=$HO.createClass(),h={},f={};$HO.extend(g.prototype,{type:"manager",registerType:function(c,a){h[c]=a;a.prototype.xtype=c;$C[c]=a},getClass:function(c){return h[c]},register:function(c){f[c.getId()]=c},unregister:function(c){delete f[c.getId()]},eachInEl:function(c,a){var b=this;c.find(".js-"+b.type).each(function(d,c){c=$(c);var e=c.attr("id");(e=b.get(e))&&a(e)})},generateId:function(c,a){var b=$H.expando+"_"+this.type+"_"+(c||$H.Util.getUuid());if(!0!=
a&&f[b])$D.error("id\u91cd\u590d:"+b);else return b},get:function(c){return f[c]||f[this.generateId(c,!0)]}});return g});
