/* Handy v1.0.0-dev | 2014-03-25 | zhengyinhui100@gmail.com */
$Define("CM.AbstractEvents",function(){var h=$H.createClass();$H.extend(h.prototype,$H.Events);$H.extend(h.prototype,{_eventCache:{},_listenTo:[],_parseListenToEvents:function(e,b,d,a){var c=this,f=$H.toArray(arguments,3);return c._parseEvents(d,function(a){a.unshilft(b);c[e].apply(c,a.concat(f))})},listenTo:function(e,b,d,a,c){if(!this._parseListenToEvents("listenTo",e,b,d,a,c)){"number"==typeof a&&(c=a,a=null);var f=this._delegateHandler(d,a);this._listenTo.push({target:e,name:b,delegation:f,handler:d});
e.on(b,f,a||this,c)}},unlistenTo:function(e,b,d){if(!this._parseListenToEvents("unlistenTo",e,b,d))for(var a=this._listenTo,c="all"==e,f,r=0,j=a.length;r<j;r++)if(f=a[r],c||f.name==b&&f.handler==d&&f.target==e)e.off(b,f.delegation),a.splice(r,1)}});return h});
$Define("CM.AbstractDao","B.LocalStorage",function(h){var e=$H.createClass();$H.extend(e.prototype,{ajax:function(b){this.beforeSend(b);b.error=$H.intercept(this.error,b.error);b.success=$H.intercept(this.success,b.success);return $.ajax(b)},beforeSend:$H.noop,error:$H.noop,success:$H.noop,get:function(){},set:function(){},remove:function(){},sync:function(b){b=b||{};var d=b.type||"remote";b=b.param;if("remote"==d)this.ajax(b);else h[d+"Item"](b)}});return e});
$Define("CM.AbstractManager",function(){var h=$H.createClass();$H.extend(h.prototype,{_types:{},_all:{},type:"manager",registerType:function(e,b){this._types[e]=b;b.prototype.xtype=e},getClass:function(e){return $H.isClass(e)?e:this._types[e]||$H.namespace(e)},register:function(e){this._all[e.getId()]=e},unregister:function(e){var b=this._all,d=e.getId();b[d]==e&&delete b[d]},eachInEl:function(e,b){var d=this;e.find(".js-"+d.type).each(function(a,c){c=$(c);var f=c.attr("id");(f=d.get(f))&&b(f)})},
generateId:function(e,b){var d=$H.expando+"_"+this.type+"_"+(e||$H.Util.getUuid());if(!0!=b&&this._all[d])$D.error("id\u91cd\u590d:"+d);else return d},get:function(e){var b=this._all;return b[e]||b[this.generateId(e,!0)]}});return h});
$Define("CM.ViewManager","CM.AbstractManager",function(h){var e=$H.createClass();$H.inherit(e,h,{type:"view",initialize:function(){var b=this;$H.on("afterRender",function(d){b.afterRender(d)});$H.on("removeEl",function(d){b.destroy(d)})},afterRender:function(b){this.eachInEl(b,function(b){b.afterRender()})},destroy:function(b){this.eachInEl(b,function(b){b.destroy(!0)})}});$V=$H.getSingleton(e);return e});
$Define("CM.View",["CM.ViewManager","CM.AbstractEvents","B.Template"],function(h,e){var b=/^(<[a-zA-Z]+)/,d=/^[^>]+class=/,a=/(class=")/,c=e.extend({xtype:"View",_placeholder:'<script id="" type="text/x-placeholder">\x3c/script>',autoRender:!0,renderBy:"append",listeners:[],items:[],children:[],_customEvents:"beforeRender render afterRender beforeShow show afterShow beforeHide hide afterHide beforeUpdate update afterUpdate beforeDestroy destroy afterDestroy add remove".split(" "),_defaultEvents:"mousedown mouseup mouseover mousemove mouseenter mouseleave dragstart drag dragenter dragleave dragover drop dragend touchstart touchmove touchend touchcancel keydown keyup keypress click dblclick focus focusin focusout contextmenu change submit".split(" "),
_applyArray:function(f,a){var c=arguments,b=c.callee.caller,d=b.$owner.prototype;0==c.length?(c=b.arguments,c=$H.toArray(c),f=b.$name,a=c.shift()):c=$H.toArray(c,2);if($H.isArray(a)){for(var b=0,g=a.length;b<g;b++)d[f].apply(this,[a[b]].concat(c));return!0}return!1},_parseListenEvents:function(f,a){var c=this;return c._parseEvents(a.name,function(b){a.name=b[0];2==b.length&&(a.handler=b[0]);c[f].call(c,a)})},initialize:function(f){this.manager||(this.manager=this.constructor.manager||$H.getSingleton(h));
this.lazy?this.lazyInit():(this.doConfig(f),this.parseItems(),!1!=this.autoRender&&this.render(),this.manager.register(this),this.inited=!0)},lazyInit:function(){this.getId();this.renderTo;this.renderBy},doConfig:function(f){var a=this;f=a.initParam=$H.clone(f||{});$H.extend(a,f,{notCover:function(c,b){var d=$H.contains(a._customEvents,c);if($H.contains(a._defaultEvents,c))return a.listeners.push({name:c,handler:f[c]}),!0;if(d)return a.on(c,f[c]),!0;if("defItem"==c)return $H.extend(a[c],b),!0;if("listener"==
c)return a.listeners=a.listeners.concat($H.isArray(b)?b:[b]),!0;if("items"==c)return a.add(b),!0}});a.renderTo=f.renderTo?$(f.renderTo):$(document.body)},getEl:function(){return this._container},getId:function(){return this._id||(this._id=this.manager.generateId(this.cid))},initHtml:function(){"string"!=typeof this.tmpl&&(this.tmpl=this.constructor.prototype.tmpl=this.tmpl.join(""));return $H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this)},getHtml:function(){var f=this.getId(),c;c="visibility"==
this.displayMode?"visibility:hidden;":"display:none;";var j=this.initHtml(),w=d.test(j),k="js-"+this.manager.type+" js-"+this.xtype+" "+this.extCls+" ";w&&(j=j.replace(a,"$1"+k));return j=j.replace(b,'$1 id="'+f+'" style="'+c+'"'+(w?"":' class="'+k+'"'))},findHtml:function(f){0!=f.indexOf("$")&&(f="$"+f);f="$>*"==f?this.children:this.find(f);for(var a=[],c=0;c<f.length;c++)a.push(f[c].getHtml());return a.join("")},initStyle:function(){var f=this.getEl(),a=this.style||{};void 0!=this.width&&(a.width=
this.width);void 0!=this.height&&(a.height=this.height);f.css(a)},beforeRender:function(){return this.trigger("beforeRender")},render:function(){if(!1==this.beforeRender())return!1;this.trigger("render");var f=this.getHtml();this.renderTo[this.renderBy](f);this.afterRender()},afterRender:function(){if(this.rendered)return!1;this.callChild();this._container=$("#"+this.getId());this.rendered=!0;this.initStyle();!0!=this.notListen&&this.initListeners();this.disabled&&this.disable();this.trigger("afterRender");
this.hidden||this.show()},beforeShow:function(){return this.trigger("beforeShow")},show:function(f,a){var b=this;if(!1==b.beforeShow()||b.showed||a&&b.hidden)return!1;if(!f&&b.delayShow)setTimeout(function(){c.prototype.show.call(b,!0)},0);else{b.trigger("show");b.showed=!0;var d=b.getEl();"visibility"==b.displayMode?d.css({visibility:"visible"}):d.show();b.callChild([null,!0]);b.afterShow()}},afterShow:function(){this.trigger("afterShow")},beforeHide:function(){return this.trigger("beforeHide")},
hide:function(){if(!1==this.beforeHide()||!this.showed)return!1;this.showed=!1;var f=this.getEl();"visibility"==this.displayMode?f.css({visibility:"hidden"}):f.hide();this.trigger("hide");this.afterHide()},afterHide:function(){this.trigger("afterHide")},enable:function(){this.resume();this.getEl().removeClass("hui-disable").find("input,textarea,select").removeAttr("disabled")},disable:function(){this.suspend();this.getEl().addClass("hui-disable").find("input,textarea,select").attr("disabled","disabled")},
getContent:function(f){var a=this.children;return!1==f?a:this.getEl().html()},setContent:function(f){var a=this.getEl();a.remove();"string"==typeof f?a.html(f):this.add(f)},listen:function(f){if(!this._parseListenEvents("listen",f)){var a=f.name,c=f.context,b=f.times,d=f.target,g=f.custom,e=f.handler;if(d||g)f=$H.removeUndefined([d,a,e,c,b]),this[g?"on":"listenTo"].apply(this,f);else if(f.custom)this.on.apply(this,a,e,c,b);else{var g=this._listeners,b=f.el,d=f.method||"bind",h=f.selector,m=f.data,
c=f.delegation=this._delegateHandler(e,c);$H.mobile()&&"click"==a&&(a="touchend");b=b?"string"==typeof b?this.find(b):b:this.getEl();if(h)if(m)b[d](h,a,m,c);else b[d](h,a,c);else if(m)b[d](a,m,c);else b[d](a,c);g.push(f)}}},unlisten:function(f){if(!this._parseListenEvents("unlisten",f)){var a=f.name,c=f.handler;if(f.custom)this.off(a,c);else{var b=f.el,d="delegate"==f.method?"undelegate":"unbind";f=f.selector;var g;$H.mobile()&&"click"==a&&(a="touchend");for(var b=b?"string"==typeof b?this.find(b):
b:this.getEl(),e=this._listeners.length-1;0<=e;e--){var h=this._listeners[e];if(h.handler==c){g=h.delegation;this._listeners.splice(e,1);break}}if(f)b[d](f,a,g);else b[d](a,g)}}},initListeners:function(){if(this.listened)return!1;this.listened=!0;var f=this.listeners;this._listeners=[];for(var a=f.length-1;0<=a;a--)this.listen(f[a]);this.callChild()},clearListeners:function(){for(var a=this._listeners,c=a.length-1;0<=c;c--)this.unlisten(a[c]);this.off("all");this.unlistenTo("all");this.callChild()},
suspend:function(){if(this.isSuspend)return!1;this.isSuspend=!0;this.callChild()},resume:function(){if(!this.isSuspend)return!1;this.isSuspend=!1;this.callChild()},each:function(a,c){for(var b=this.children,d=b.length,e,g=0;g<d;){e=b[g];e=c?a.apply(e,c):a(g,e);if(!1===e)break;d==b.length?g++:d=b.length}},match:function(a,c){if("*"==a)return!0;var b=c||this,d,e,g;a=a.replace(/^([^\[]+)/,'[xtype="$1"]');for(var h=/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;d=h.exec(a);)if(e=d[1],g=d[2],d=eval(d[3]),"="===g?b[e]!=
d:b[e]==d)return!1;return!0},find:function(a,c){var b=this;if("number"==typeof a)return b.children[a];if(0!=a.indexOf("$"))return b.getEl().find(a);c=c||[];if(0<a.indexOf(","))return $H.each(a.split(","),function(a,f){c=c.concat(b.find(f))}),c;var d=1==a.indexOf(">"),e=a.replace(/^\$>?\s?/,""),g=e.search(/\s|>/),h;0<g&&(h=e.substring(g),e=e.substring(0,g));b.each(function(b,j){j.match(e)&&(h?j.find("$"+h,c):c.push(j));d||j.find(a,c)});return c},parents:function(a){if(a&&0!=a.indexOf("$"))return this.getEl().parents(a);
for(var c=this;c.parent;)if(c=c.parent,a&&this.match(a,c))return c;return a||c===this?null:c},index:function(){var a=this,c=a.parent;if(c){var b;c.each(function(c,d){if(d==a)return b=c,!1});return b}return null},callChild:function(a,c){0!=this.children.length&&(a&&"string"!=typeof a&&(c=a,a=null),a=a||arguments.callee.caller.$name,this.each(function(b,d){c?d[a].apply(d,c):d[a].call(d)}))},add:function(a,b){if(!this._applyArray()){var d=void 0==b;if(this.startParseItems){if(a instanceof c)a.parent=
this;else{this.defItem&&$H.extend(a,this.defItem,{notCover:!0});this.parseItem(a);var e=this.manager.getClass(a.xtype);e?(a.renderTo||(this.inited?a.renderTo=this.getEl():a.autoRender=!1),a.parent=this,a=new e(a)):$D.error("xtype:"+a.xtype+"\u672a\u627e\u5230")}e=this.children;d?e.push(a):e.splice(b,0,a);this.trigger("add",a);return a}e=this.items;d?e.push(a):e.splice(b,0,a)}},remove:function(a){var b=this.children,d=!1,e;if("number"==typeof a)e=a,a=b[e];else if("string"==typeof a){a=this.find(a);
for(var k=0,g=a.length;k<g;k++){if(!1==this.remove(a))return!1;d=!0}}else if(a instanceof c)if(a.parent==this){k=0;for(g=b.length;k<g;k++)if(b[k]==a){e=k;break}}else return a.parent.remove(a);void 0!=e&&!1!=a.destroy(!0)&&(b.splice(e,1),d=!0);this.trigger("remove",a);return d},parseItem:function(){},parseItems:function(){this.startParseItems=!0;var a=this.items;if(a)for(var a=$H.isArray(a)?a:[a],c=0,b=a.length;c<b;c++)this.add(a[c])},beforeUpdate:function(){return this.trigger("beforeUpdate")},update:function(a){if(!1==
this.beforeUpdate())return!1;var c=this.parent,b=$("<span></span>").insertBefore(this.getEl());a=$H.extend({xtype:this.xtype,renderBy:"replaceWith",renderTo:b},a);if(!a.cid||a.cid==this.cid)a._id=this._id;if(c){var d=this.index();if(!1==c.remove(this))return b.remove(),!1;a=c.add(a,d)}else{if(!1==this.destroy())return b.remove(),!1;a=new this.constructor(a)}this.trigger("update",a);this.afterUpdate(a);return a},afterUpdate:function(a){this.trigger("afterUpdate",a)},beforeDestroy:function(){return this.trigger("beforeDestroy")},
destroy:function(a){if(!1==this.beforeDestroy())return!1;if(!this.destroyed)return this.callChild(),this.trigger("destroy"),this.clearListeners(),this.getEl().remove(),this.destroyed=!0,!a&&this.parent&&this.parent.remove(this),this.manager.unregister(this),delete this.initParam,delete this._container,delete this.renderTo,delete this._listeners,delete this.children,this.afterDestroy(),!0},afterDestroy:function(){this.trigger("afterDestroy")}},{extend:function(a){var c=this.prototype;$H.extend(c,a,
{notCover:function(b){if($H.contains(["_customEvents","listeners"],b))return c[b]=(a[b]||[]).concat(c[b]||[]),!0;if("xtype"==b||"constructor"==b)return!0}})},html:function(a){return(new this($H.extend({autoRender:!1},a))).getHtml()}});return c});
$Define("CM.Model",["CM.AbstractDao","CM.AbstractEvents"],function(h,e){return e.extend({_pending:!1,idAttribute:"id",_validate:function(b,d){if(!d.validate||!this.validate)return!0;b=$H.extend({},this.attributes,b);var a=this.validationError=this.validate(b,d)||null;if(!a)return!0;this.trigger("invalid",this,a,$H.extend(d,{validationError:a}));return!1},initialize:function(b,d){this.dao=this.dao||$H.getSingleton(h);var a=b||{};d||(d={});this.cid=$H.Util.getUuid();this.attributes={};d.collection&&
(this.collection=d.collection);d.parse&&(a=this.parse(a,d)||{});a=$H.extend(a,$H.Util.result(this,"defaults"),{notCover:!0});this.set(a,d);this.changed={}},toJson:function(){return $H.clone(this.attributes)},sync:function(b,d,a){return this.dao.sync.apply(this,arguments)},get:function(b){return this.attributes[b]},escape:function(b){return $H.String.escapeHTML(this.get(b))},has:function(b){b=this.get(b);return null!=b&&void 0!=b},set:function(b,d,a){var c;"object"===typeof b?(c=b,a=d):(c={})[b]=d;
a||(a={});if(!this._validate(c,a))return!1;var f=a.unset;b=a.silent;var e=[],j=this._changing;this._changing=!0;j||(this._previousAttributes=$H.Object.clone(this.attributes),this.changed={});var h=this.attributes,k=this._previousAttributes;this.idAttribute in c&&(this.id=c[this.idAttribute]);for(var g in c)d=c[g],$H.equals(h[g],d)||e.push(g),$H.equals(k[g],d)?delete this.changed[g]:this.changed[g]=d,f?delete h[g]:h[g]=d;if(!b){e.length&&(this._pending=a);d=0;for(c=e.length;d<c;d++)this.trigger("change:"+
e[d],this,h[e[d]],a)}if(j)return this;if(!b)for(;this._pending;)a=this._pending,this._pending=!1,this.trigger("change",this,a);this._changing=this._pending=!1;return this},unset:function(b,d){d=d||{};d.unset=!0;return this.set(b,void 0,d)},clear:function(b){var d={},a;for(a in this.attributes)d[a]=void 0;b=b||{};b.unset=!0;return this.set(d,b)},hasChanged:function(b){var d=this.changed;return null==b?!$H.isEmpty(d):$H.contains(d,b)},changedAttrbutes:function(b){if(!b)return this.hasChanged()?$H.clone(this.changed):
!1;var d,a=!1,c=this._changing?this._previousAttributes:this.attributes,f;for(f in b)if(!$H.equals(c[f],d=b[f]))(a||(a={}))[f]=d;return a},previous:function(b){return null==b||!this._previousAttributes?null:this._previousAttributes[b]},fetch:function(b){var d=this;b=b?$H.clone(b):{};void 0===b.parse&&(b.parse=!0);var a=b.success;b.success=function(c){if(!d.set(d.parse(c,b),b))return!1;a&&a(d,c,b);d.trigger("sync",d,c,b)};(void 0)(d,b);return d.sync("read",d,b)},save:function(b,d,a){var c,f=this.attributes;
null==b||"object"===typeof b?(c=b,a=d):(c={})[b]=d;a=$H.extend({validate:!0},a);if(c&&!a.wait){if(!this.set(c,a))return!1}else if(!this._validate(c,a))return!1;c&&a.wait&&(this.attributes=$H.extend({},f,c));void 0===a.parse&&(a.parse=!0);var e=this,j=a.success;a.success=function(b){e.attributes=f;var d=e.parse(b,a);a.wait&&(d=$H.extend(c||{},d));if($H.isObject(d)&&!e.set(d,a))return!1;j&&j(e,b,a);e.trigger("sync",e,b,a)};(void 0)(this,a);b=this.isNew()?"create":a.patch?"patch":"update";"patch"===
b&&(a.oAttrs=c);b=this.sync(b,this,a);c&&a.wait&&(this.attributes=f);return b},destroy:function(b){b=b?$H.clone(b):{};var d=this,a=b.success,c=function(){d.trigger("destroy",d,d.collection,b)};b.success=function(f){(b.wait||d.isNew())&&c();a&&a(d,f,b);d.isNew()||d.trigger("sync",d,f,b)};if(this.isNew())return b.success(),!1;(void 0)(this,b);var f=this.sync("delete",this,b);b.wait||c();return f},url:function(){var b=$H.Util.result(this,"urlRoot")||$H.Util.result(this.collection,"url");b||$D.error(Error("\u5fc5\u987b\u8bbe\u7f6e\u4e00\u4e2aurl\u5c5e\u6027\u6216\u8005\u51fd\u6570"));
return this.isNew()?b:b.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(b){return b},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(b){return this._validate({},$H.extend(b||{},{validate:!0}))}})});
$Define("CM.Collection",["CM.AbstractDao","CM.AbstractEvents","CM.Model"],function(h,e,b){var d=e.extend({_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,c){if(a instanceof b)return a;c=c?$H.clone(c):{};c.collection=this;var d=new this.model(a,c);if(!d.validationError)return d;this.trigger("invalid",this,d.validationError,c);return!1},_addReference:function(a){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=this);a.on("all",this._onModelEvent,
this)},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,c,b,d){("add"===a||"remove"===a)&&b!==this||("destroy"===a&&this.remove(c,d),c&&a==="change:"+c.idAttribute&&(delete this._byId[c.previous(c.idAttribute)],null!=c.id&&(this._byId[c.id]=c)),this.trigger.apply(this,arguments))},initialize:function(a,c){this.dao=this.dao||$H.getSingleton(h);c||(c={});c.model&&(this.model=c.model);void 0!==c.comparator&&(this.comparator=
c.comparator);this._reset();a&&this.reset(a,$H.extend({silent:!0},c))},toJSON:function(a){return $H.Collection.map(this,function(c){return c.toJSON(a)})},sync:function(a,c,b){return this.dao.sync({method:a,param:b})},add:function(a,c){$H.extend(c,{add:!0,remove:!1,merge:!1});return this.set(a,c)},remove:function(a,c){var b=!$H.isArray(a);a=b?[a]:$H.clone(a);c||(c={});var d,e,h,k;d=0;for(e=a.length;d<e;d++)if(k=a[d]=this.get(a[d]))delete this._byId[k.id],delete this._byId[k.cid],h=this.indexOf(k),
this.models.splice(h,1),this.length--,c.silent||(c.index=h,k.trigger("remove",k,this,c)),this._removeReference(k,c);return b?a[0]:a},set:function(a,c){c=$H.Util.extend(c,{add:!0,remove:!0,merge:!0});c.parse&&(a=this.parse(a,c));var d=!$H.isArray(a),e=d?a?[a]:[]:$H.clone(a),j,h,k,g,l,q,m=c.at,y=this.model,t=this.comparator&&null==m&&!1!==c.sort,z="string"==typeof this.comparator?this.comparator:null,n=[],u=[],s={},x=c.add,A=c.merge,v=c.remove,p=!t&&x&&v?[]:!1;j=0;for(h=e.length;j<h;j++){l=e[j]||{};
k=l instanceof b?g=l:l[y.prototype.idAttribute||"id"];if(k=this.get(k))v&&(s[k.cid]=!0),A&&(l=l===g?g.attributes:l,c.parse&&(l=k.parse(l,c)),k.set(l,c),t&&(!q&&k.hasChanged(z))&&(q=!0)),e[j]=k;else if(x){g=e[j]=this._prepareModel(l,c);if(!g)continue;n.push(g);this._addReference(g,c)}g=k||g;p&&(g.isNew()||!s[g.id])&&p.push(g);s[g.id]=!0}if(v){j=0;for(h=this.length;j<h;++j)s[(g=this.models[j]).cid]||u.push(g);u.length&&this.remove(u,c)}if(n.length||p&&p.length)if(t&&(q=!0),this.length+=n.length,null!=
m){j=0;for(h=n.length;j<h;j++)this.models.splice(m+j,0,n[j])}else{p&&(this.models.length=0);l=p||n;j=0;for(h=l.length;j<h;j++)this.models.push(l[j])}q&&this.sort({silent:!0});if(!c.silent){j=0;for(h=n.length;j<h;j++)(g=n[j]).trigger("add",g,this,c);(q||p&&p.length)&&this.trigger("sort",this,c)}return d?e[0]:e},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d],b);b.previousModels=this.models;this._reset();a=this.add(a,$H.extend({silent:!0},
b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,$H.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,$H.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return Array.prototype.slice.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},
where:function(a,b){return $H.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){this.comparator||$D.error(Error("\u6ca1\u6709\u6bd4\u8f83\u5668"));a||(a={});"string"==typeof this.comparator||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort($H.Function.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return $H.Collection.invoke(this.models,
"get",a)},fetch:function(a){var b=this;a=a?$H.clone(a):{};a.url||(a.url=b.url);void 0===a.parse&&(a.parse=!0);var d=a.success;a.success=function(e){b[a.reset?"reset":"set"](e,a);d&&d(b,e,a);b.trigger("sync",b,e,a)};return b.sync("get",b,a)},create:function(a,b){var d=this;b=b?$H.clone(b):{};if(!(a=d._prepareModel(a,b)))return!1;b.wait||d.add(a,b);var e=b.success;b.success=function(a,h){b.wait&&d.add(a,b);e&&e(a,h,b)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)}});
$H.each(["some","every","find","filter","invoke"],function(a){d.prototype[a]=function(){var b=Array.prototype.slice.call(arguments),d=$H.Collection;b.unshift(this.models);return d[a].apply(d,b)}});return d});
