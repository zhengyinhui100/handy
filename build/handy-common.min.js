/* Handy v1.0.0-dev | 2014-03-03 | zhengyinhui100@gmail.com */
$Define("cm.AbstractView",function(){var h=$HO.createClass(),d=/^(<[a-zA-Z]+)/,e=/^[^>]+class=/,g=/(class=")/;$HO.extend(h.prototype,{xtype:"AbstractView",autoRender:!0,renderBy:"append",_customEvents:"beforeRender render afterRender beforeShow afterShow hide destroy".split(" "),_defaultEvents:["click","mouseover","focus"],initialize:function(a){this.doConfig(a);this.beforeRender();!1!=this.autoRender&&(this.render(),this.afterRender())},doConfig:function(a){var b=this;b.params=a;b.settings=$HO.clone(a);
b.renderTo=a.renderTo?$(a.renderTo):$(document.body);var c=b.listeners||[];a.listeners&&(c=c.concat(a.listeners));b._listeners=c;$HO.extend(b,a,{notCover:function(c){var f=b[c],d=$HO.contains(b._customEvents,c),e=$HO.contains(b._defaultEvents,c);(d||e)&&b._listeners.push({type:c,notEl:d,handler:a[c]});if(null!=f&&"object"==typeof f||$HO.isFunction(f))return!0}})},getEl:function(){return this._container},getId:function(){return this._id},initHtml:function(){"string"!=typeof this.tmpl&&(this.tmpl=this.constructor.prototype.tmpl=
this.tmpl.join(""));return $H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this)},getHtml:function(){var a=this.getId(),b;b="visibility"==this.displayMode?"visibility:hidden;":"display:none;";var c=this.initHtml(),k=e.test(c),f=this.extCls+" ";k&&(c=c.replace(g,"$1"+f));return c=c.replace(d,'$1 id="'+a+'" style="'+b+'"'+(k?"":' class="'+f+'"'))},initStyle:function(){var a=this.getEl(),b=this.style||{};void 0!=this.width&&(b.width=this.width);void 0!=this.height&&(b.height=this.height);a.css(b)},beforeRender:function(){this.fire("beforeRender")},
render:function(){this.fire("render");var a=this.getHtml();this.renderTo[this.renderBy](a)},afterRender:function(){if(this.rendered)return!1;this._container=$("#"+this.getId());this.rendered=!0;this.initStyle();!0!=this.notListen&&this.initListeners();this.disabled&&this.disable();this.fire("afterRender");this.hidden||this.show()},hide:function(){if(!this.showed)return!1;this.showed=!1;var a=this.getEl();"visibility"==this.displayMode?a.css({visibility:"hidden"}):a.hide();this.fire("hide")},show:function(){if(this.showed)return!1;
this.fire("beforeShow");this.showed=!0;var a=this.getEl();"visibility"==this.displayMode?a.css({visibility:"visible"}):a.show();this.afterShow()},afterShow:function(){this.fire("afterShow")},enable:function(){this.resumeListeners();this.getEl().removeClass("hui-disable").find("input,textarea,select").removeAttr("disabled")},disable:function(){this.suspendListeners();this.getEl().addClass("hui-disable").find("input,textarea,select").attr("disabled","disabled")},fire:function(a,b){for(var c=this._listeners.length-
1;0<=c;c--){var d=this._listeners[c];if(d.type==a){var f=d.delegation;b?f.apply(null,b.shift(d)):f(d)}}},listen:function(a){var b=this,c=a.type,d=b._listeners,f=a.el,e=a.method||"bind",g=a.selector,j=a.data,h=a.delegation=function(){if(!0!=b.isSuspend)return a.handler.apply(a.scope||b,arguments)};$H.Browser.mobile()&&"click"==c&&(c="touchend");f=f?"string"==typeof f?b.find(f):f:b.getEl();if(!a.notEl)if(g)if(j)f[e](g,c,j,h);else f[e](g,c,h);else if(j)f[e](c,j,h);else f[e](c,h);d.push(a)},unlisten:function(a){var b=
a.type,c=a.el,d="delegate"==a.method?"undelegate":"unbind",f=a.selector,e;$H.Browser.mobile()&&"click"==b&&(b="touchend");for(var c=c?"string"==typeof c?this.find(c):c:this.getEl(),g=this._listeners.length-1;0<=g;g--){var h=this._listeners[g];if(h.handler==a.handler){e=h.delegation;this._listeners.splice(g,1);break}}if(!a.notEl)if(f)c[d](f,b,e);else c[d](b,e)},initListeners:function(){if(this.listened)return!1;this.listened=!0;var a=this._listeners;this._listeners=[];for(var b=a.length-1;0<=b;b--)this.listen(a[b])},
clearListeners:function(){for(var a=this._listeners,b=a.length-1;0<=b;b--)this.unlisten(a[b])},suspendListeners:function(){if(this.isSuspend)return!1;this.isSuspend=!0},resumeListeners:function(){if(!this.isSuspend)return!1;this.isSuspend=!1},destroy:function(){if(this.destroyed)return!1;this.fire("destroy");this.clearListeners();this.getEl().remove();this.destroyed=!0}});return h});
$Define("cm.AbstractManager",function(){var h=$HO.createClass();$HO.extend(h.prototype,{_types:{},_all:{},type:"manager",registerType:function(d,e){this._types[d]=e;e.prototype.xtype=d;$C[d]=e},getClass:function(d){return this._types[d]},register:function(d){this._all[d.getId()]=d},unregister:function(d){delete this._all[d.getId()]},eachInEl:function(d,e){var g=this;d.find(".js-"+g.type).each(function(a,b){b=$(b);var c=b.attr("id");(c=g.get(c))&&e(c)})},generateId:function(d,e){var g=$H.expando+"_"+
this.type+"_"+(d||$H.Util.getUuid());if(!0!=e&&this._all[g])$D.error("id\u91cd\u590d:"+g);else return g},get:function(d){var e=this._all;return e[d]||e[this.generateId(d,!0)]}});return h});
