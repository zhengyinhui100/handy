/* Handy v1.0.0-dev | 2014-02-18 | zhengyinhui100@gmail.com */
(function(){var e=window.handy,a=window.$,d=window.handy=window.$=function(){};d.version="1.0.0";d.expando="handy"+(d.version+Math.random()).replace(/\D/g,"");d.add=function(b,c,f){f||(f=c,c=null);if(!c||!d.Loader){d.base||(d.base={});var g=[];if(c)if("string"==typeof c)g.push(d.base.Object.namespace(c));else for(var a=0;a<c.length;a++)g.push(d.base.Object.namespace(c[a]));g.push(d);d.base[b]=d[b]=f.apply(window,g)}else d.Loader.require(c,function(){Array.prototype.push.call(arguments,d);d.base[b]=
d[b]=f.apply(window,arguments)})};d.noConflict=function(b){window.$===d&&(window.$=a);b&&window.handy===d&&(window.handy=e);return d};d.noop=function(){}})();
handy.add("Json",function(){var e;e||(e={});(function(){function a(b){return 10>b?"0"+b:b}function d(b){f.lastIndex=0;return f.test(b)?'"'+b.replace(f,function(b){var f=k[b];return"string"===typeof f?f:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function b(f,c){var a,e,k,x,y=g,u,p=c[f];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(f));"function"===typeof h&&(p=h.call(c,f,p));switch(typeof p){case "string":return d(p);case "number":return isFinite(p)?
String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";g+=j;u=[];if("[object Array]"===Object.prototype.toString.apply(p)){x=p.length;for(a=0;a<x;a+=1)u[a]=b(a,p)||"null";k=0===u.length?"[]":g?"[\n"+g+u.join(",\n"+g)+"\n"+y+"]":"["+u.join(",")+"]";g=y;return k}if(h&&"object"===typeof h){x=h.length;for(a=0;a<x;a+=1)"string"===typeof h[a]&&(e=h[a],(k=b(e,p))&&u.push(d(e)+(g?": ":":")+k))}else for(e in p)Object.prototype.hasOwnProperty.call(p,e)&&(k=b(e,p))&&u.push(d(e)+
(g?": ":":")+k);k=0===u.length?"{}":g?"{\n"+g+u.join(",\n"+g)+"\n"+y+"}":"{"+u.join(",")+"}";g=y;return k}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,j,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof e.stringify&&(e.stringify=function(f,c,d){var a;j=g="";if("number"===typeof d)for(a=0;a<d;a+=1)j+=" ";else"string"===typeof d&&(j=d);if((h=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return b("",{"":f})});"function"!==
typeof e.parse&&(e.parse=function(b,f){function d(b,c){var g,a,e=b[c];if(e&&"object"===typeof e)for(g in e)Object.prototype.hasOwnProperty.call(e,g)&&(a=d(e,g),void 0!==a?e[g]=a:delete e[g]);return f.call(b,c,e)}var g;b=String(b);c.lastIndex=0;c.test(b)&&(b=b.replace(c,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return g=eval("("+b+")"),"function"===typeof f?d({"":g},""):g;throw new SyntaxError("JSON.parse");})})();return e});
handy.add("Object",function(e){function a(){var b=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return b&&9>parseInt(b[0])?function(b,f,g){var d=[];if(b.length){f=f||0;for(g=g||b.length;f<g;f++)d.push(b[f])}return d}:function(b,f,g){return Array.prototype.slice.call(b,f||0,g||b.length)}}var d={_alias:{b:"handy.base",c:"handy.component",m:"handy.module",cm:"handy.common"},namespace:function(b,c){var f=null,g,a,e,h;b=d.alias(b);a=b.split(".");f=a[0];f=(e=2==arguments.length)?eval("(function(){if (typeof "+
f+' == "undefined"){'+f+" = {};}return "+f+";})()"):eval("(function(){if (typeof "+f+' != "undefined")return '+f+";})()");g=1;for(h=a.length;g<h;++g){if(g==h-1&&e)f[a[g]]=c;else if(e||f&&f[a[g]])f[a[g]]=f[a[g]]||{};else return;f=f[a[g]]}return f},alias:function(b,c){var f=d._alias;if(c)f[b]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+b+":"+f[b]):f[b]=c;else{if(b){var g=b,a=b.length-1;do{if(f[g])return f[g]+b.substring(a);a=g.lastIndexOf(".")}while(0<a&&(g=g.substring(0,a)));return b}return f}},
createClass:function(b){var c=function(){var b,g;b=this.constructor==c?this:arguments.callee;if(g=b.initialize)return g.apply(b,arguments)};c.prototype.callSuper=function(b,c){d.isArray(b)&&(c=b,b=null);b=b?b.prototype:this.constructor.superProt;var a=arguments.callee.caller.$name;if(b&&(a=b[a],d.isFunction(a)))return a.apply(this,c)};b&&this.namespace(b,c);return c},extend:function(b,c,f){var a=f?f.notCover:!1,e=f?f.cover:null;f=f?f.notClone:!1;var k=!!b.callSuper,h;for(h in c)if((!e||d.contains(e,
h))&&c.hasOwnProperty(h)){var l=b.hasOwnProperty(h),s=!0===a?l:!1;d.isArray(a)?s=d.contains(a,h)&&l:d.isFunction(a)&&(s=a(h));s||(l=f?c[h]:d.clone(c[h]),k&&d.isFunction(l)&&(l.$name=h),b[h]=l)}return b},mix:function(b,c,f,a){b.superProt||(b.superProt={});for(var e in c)b.superProt[e]=d.isFunction(c[e])?b.superProt[e]?function(b,f){return function(){f.apply(this,arguments);c[b].apply(this,arguments)}}(e,b.superProt[e]):c[e]:c[e],b[e]||(b[e]=c[e]);f&&d.extend(b,f);c.toString!=c.constructor.prototype.toString&&
(b.superProt.toString=function(){c.toString.apply(b,arguments)});a&&(b.prototype&&c.prototype)&&d.inherit(b,c,null,a);return b},inherit:function(b,c,f,a,j){var k=function(){};k.prototype=c.prototype;j=j||{notCover:!0};d.extend(b,c,j);b.prototype=new k;b.prototype.constructor=b;b.superClass=c;b.superProt=c.prototype;if(c._onInherit)try{c._onInherit(b)}catch(h){e.Debug.error("_onInherit error",h)}f&&d.extend(b,f);a&&d.extend(b.prototype,a)},isFunction:function(b){return"[object Function]"===window.Object.prototype.toString.call(b)},
isArray:function(b){return"[object Array]"===window.Object.prototype.toString.call(b)},equals:function(b,c){if(typeof b==typeof c){if("object"!=typeof b)return b===c;if(b===c)return!0;if(d.isArray(b)&&d.isArray(c)){if(b.length!=c.length)return!1;for(var f=0,a=b.length;f<a;f++)if(!d.equals(b[f],c[f]))return!1;return!0}if(!d.isArray(b)&&!d.isArray(c)){if(d.count(b)!=d.count(c))return!1;for(f in b)if(void 0==c[f]||!d.equals(b[f],c[f]))return!1;return!0}}return!1},clone:function(b){if(null==b||"object"!=
typeof b)return b;var c=b.constructor;if(c!=window.Object&&c!=window.Array)return b;if(c==window.Date||c==window.RegExp||c==window.Function||c==window.String||c==window.Number||c==window.Boolean)return new c(b);try{var f=new c,a;for(a in b)f[a]=d.clone(b[a]);return f}catch(e){return b}},isEmpty:function(b){if(d.isArray(b))return 0==b.length;for(var c in b)return!1;return!0},each:function(b,c,f){var a,e=0,k=b.length,h=void 0===k||d.isFunction(b);if(f)if(h)for(a in b){if(!1===c.apply(b[a],f))break}else for(;e<
k&&!1!==c.apply(b[e++],f););else if(h)for(a in b){if(!1===c.call(b[a],a,b[a]))break}else for(;e<k&&!1!==c.call(b[e],e,b[e++]););return b},contains:function(b,c){var f=!1;d.each(b,function(b,a){if(d.equals(a,c))return f=!0,!1});return f},largeThan:function(b,c){if("object"==typeof b&&"object"==typeof c){var f=!0;d.each(c,function(a){if(!d.equals(c[a],b[a]))return f=!1});return f}},count:function(b){if(d.isArray(b))return b.length;var c=0,f;for(f in b)c++;return c},toArray:a,generateMethod:function(b,
c,f){c=d.isArray(c)?c:c.split(",");for(var a=0;a<c.length;a++){var e=c[a];b[e]=f(e)}}},a=a();return d});
handy.add("Browser","handy.base.Object",function(e){var a={},d={};e.generateMethod(d,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(f){var c=a[b];return!f&&"string"===typeof c&&/^[\d\.]+$/.test(c)?parseInt(c):c}});e=window.navigator.userAgent;var b;(b=e.match(/MSIE ([\d.]+)/))?a.ie=b[1]:(b=e.match(/Firefox\/([\d.]+)/))?a.firefox=b[1]:(b=e.match(/Chrome\/([\d.]+)/))?
a.chrome=b[1]:(b=e.match(/Opera.([\d.]+)/))?a.opera=b[1]:(b=e.match(/Version\/([\d.]+).*Safari/))?a.safari=b[1]:0;/windows|win32/i.test(e)?a.windows=!0:/linux/i.test(e)?a.linux=!0:/macintosh/i.test(e)?a.mac=!0:0;/trident/i.test(e)?a.trident=!0:/webkit/i.test(e)?a.webkit=!0:/gecko/i.test(e)?a.gecko=!0:/presto/i.test(e)?a.presto=!0:0;/MetaSr/i.test(e)?a.sogou=!0:/Maxthon/i.test(e)?a.maxthon=!0:/TencentTraveler/i.test(e)?a.tt=!0:/TheWorld/i.test(e)?a.theWorld=!0:/360[S|E]E/i.test(e)?a.is360=!0:0;var c;
if((c=e.match(/AppleWebKit\/([\d.]*)/))&&c[1])if(/ Mobile\//.test(e)&&e.match(/iPad|iPod|iPhone/)){a.mobile="ios";if((c=e.match(/OS ([^\s]*)/))&&c[1])a.ios=c[1].replace("_",".");if((c=e.match(/iPad|iPod|iPhone/))&&c[0])a[c[0].toLowerCase()]=a.ios}else if(/ Android/i.test(e)){if(/Mobile/.test(e)&&(a.mobile="android"),(c=e.match(/Android ([^\s]*);/))&&c[1])a.android=c[1]}else if(c=e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))a.mobile=c[0].toLowerCase();var f;try{if(a.ie){var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
g&&(f=g.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(g=navigator.plugins["Shockwave Flash"])){var j=g.description.split(" ");b=0;for(var k=j.length;b<k;b++)if(0<parseInt(j[b])){f=j[b];break}}}catch(h){}a.flash=f?f:null;return d});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(e,a,d){function b(b,a,e){e=e||"log";if(a||c.showInPage){var k=d.expando+"debugDiv",h=top.document;(a=h.getElementById(k))?a.style.display="block":(a=h.createElement("DIV"),a.id=k,a.innerHTML='<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\''+
h.body.offsetHeight+'px\';">\u5168\u5c4f</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\'100px\';">\u6536\u8d77</a><div style="padding-top:5px"></div>',a.style.position="absolute",a.style.width=h.body.offsetWidth-20+"px",a.style.left=0,a.style.top=0,a.style.right=0,a.style.height="100px",a.style.backgroundColor="#aaa",a.style.fontSize="12px",a.style.padding="10px",a.style.overflow="auto",a.style.zIndex=9999999,a.style.opacity=0.5,a.style.filter="alpha(opacity=50)",h.body.appendChild(a));
k=h.createElement("DIV");k.innerHTML=e+" : "+JSON.stringify(b,null,"<br/>");a=a.getElementsByTagName("DIV")[0];a.innerHTML=a.innerHTML+k.innerHTML+"<br/>"}try{console[e](b)}catch(l){}}var c={level:0,LOG_LEVEL:1,INFO_LEVEL:2,WARN_LEVEL:3,ERROR_LEVEL:4,DEBUG_LEVEL:5,log:function(a,d){c.level>c.LOG_LEVEL||b(a,!!d,"log")},info:function(a,d){this.level>c.INFO_LEVEL||b(a,!!d,"info")},warn:function(a,d){c.level>c.WARN_LEVEL||b(a,!!d,"warn")},error:function(a,d,e){if(!(c.level>c.ERROR_LEVEL)&&("boolean"==
typeof d&&(e=d),b(a,!!e,"error"),"object"==typeof d))throw d;},time:function(a,d,e){c.level>c.INFO_LEVEL||(d?b((a||"")+", \u6d88\u8017\u65f6\u95f4:"+((new Date).getTime()-(c.lastTime||0)),!!e):c.lastTime=(new Date).getTime())},debug:function(b){if(!(c.level>c.DEBUG_LEVEL)&&!1!==b)debugger}};return c});
handy.add("Function",function(e){return{bind:function(a,d,b){var c=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(c,arguments);return a.apply(d,c)}},intercept:function(a,d,b,c){return e.Object.isFunction(a)&&e.Object.isFunction(d)?function(){var f=b||this,e={},j=arguments;e.scope=c;e.target=f;e.method=a;return!1!=d.apply(e,j)?a.apply(f,j):!1}:a}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(e,a,d,b){function c(b){function c(b){return/\.(css|js)$/.test(b)?w[b]&&"loaded"==w[b].status:n.urlMap&&n.urlMap[b]?n.urlMap[b].chkExist():a.namespace(b)}if("string"==typeof b)return c(b);for(var f=[],d=0,e=b.length;d<e;d++){var g=c(b[d]);if(g)f.push(g);else return!1}return f}function f(b,a){function c(){c.isCalled||(c.isCalled=!0,clearTimeout(k),a())}if("SCRIPT"===b.nodeName){var f=b,d=c;f.onload=f.onerror=
f.onreadystatechange=function(){/loaded|complete|undefined/.test(f.readyState)&&(f.onload=f.onerror=f.onreadystatechange=null,h.removeChild(f),f=null,setTimeout(d,0))}}else{var j=c;window.hasOwnProperty("attachEvent")?b.attachEvent("onload",j):setTimeout(function(){g(b,j)},0)}var k=setTimeout(function(){e.error("Time is out:",b.src);c()},n.timeout)}function g(b,a){if(!a.isCalled){var c;if(l)b.sheet&&(c=!0);else if(b.sheet)try{b.sheet.cssRules&&(c=!0)}catch(f){if("SecurityError"===f.name||"NS_ERROR_DOM_SECURITY_ERR"===
f.name)c=!0}setTimeout(function(){c?a():g(b,a)},1)}}function j(b){n.showLoading(!1);w[b].status="loaded";n.traceLog&&e.info("Loader Response: "+b);k()}function k(){for(var b=s.length-1;0<=b;b--){var a=s[b],f=c(a.deps);if(f){s.splice(b,1);a.callback.apply(null,f);k();break}}}var h=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=navigator.userAgent.indexOf("AppleWebKit"),s=[],w={},n={traceLog:!0,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,
c,f){2==arguments.length&&(f=c,c=[]);n.require(c,function(){var c;if("function"==typeof f)try{c=f.apply(null,arguments),e.info("Loader define: "+b)}catch(d){e.error("Loader "+b+":factory define error:"+d.message,d);return}else c=f;a.namespace(b,c)})},require:function(a,g){for(var k="string"==typeof a?[a]:a,l=[],p=[],q=!0,r=0,v=k.length;r<v;r++){var m=k[r],t=c(m);t?p.push(t):(l.push(m),q&&(q=!1,s.push({deps:k,callback:g})),n.traceLog&&e.info("Resource not found: "+m))}if(0==l.length)return g&&g.apply(null,
p),0==p.length?p[0]:p;q=!1;k=0;for(p=l.length;k<p;k++)if(r=l[k],!w[r]){q=r;m=n.urlMap&&n.urlMap[q]&&n.urlMap[q].url;if(!m){v="";q=b.Object.alias(q);m=n.rootPath;if("string"==typeof m)v=m;else if("object"==typeof m)for(t in t=void 0,m)0==q.indexOf(t)&&(v=m[t],q=q.replace(t,""));else v="";m=/.css$/.test(q)?0==q.indexOf("/")?q:"/css/"+q:/.js$/.test(q)?q:q.replace(/\./g,"/")+".js";0!=m.indexOf("/")&&(m="/"+m);m=v+m}q=!0;w[r]={id:r,status:"loading"};v=d.bind(j,null,r);if(/.css$/.test(m))a:{r=m;m=h.getElementsByTagName("link");
for(t=0;t<m.length;t++){var z=m[t].href;!n.skinNode&&0<=z.indexOf(n.skinName)&&(n.skinNode=m[t]);if(0<=z.indexOf(r)||0<=r.indexOf(z))break a}m=document.createElement("link");m.rel="stylesheet";m.href=r;f(m,v);h.insertBefore(m,n.skinNode);n.traceLog&&e.info("Loader request:"+r)}else r=m,m=document.createElement("script"),m.async="async",m.src=r,m.type="text/javascript",f(m,v),h.appendChild(m),n.traceLog&&e.info("Loader request:"+r)}q&&n.showLoading(!0)}};return n});
handy.add("Listener",function(){var e={};return{add:function(a,d){var b=e[a];b||(b=e[a]=[]);b.push(d)},remove:function(a,d){var b=e[a];if(!b)return!1;if(d)for(var c=0,f=b.length;c<f;c++){if(b[c]==d)return b.splice(c,1),!0}else delete e[a];return!1},fire:function(a,d){var b=e[a];if(!b)return!1;for(var c=Array.prototype.slice.call(arguments,1),f=0,g=b.length;f<g;f++){if(f==g-1)return b[f].apply(null,c);b[f].apply(null,c)}}}});
handy.add("Date",function(){var e=window.Date,a={getWeek:function(a,b){var c=a.getDay();b&&(c=(c+(b%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[c]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new e(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var b=new e(a.getFullYear(),0,0);a=new e(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-b.getTime())/864E5)},getDayIndexOfYear:function(a){var b=new e("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-b.getTime())/864E5)},format:function(d,b){b=b||"yyyy-MM-dd HH:mm:ss";d=d||new e;var c=d.getHours(),f=Math.floor((d.getMonth()+3)/3),c={"y+":d.getFullYear(),"M+":d.getMonth()+1,"d+":d.getDate(),"h+":0==c%12?12:c%12,"H+":c,"m+":d.getMinutes(),"s+":d.getSeconds(),"w+":a.getWeek(d),"q+":f,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][f-1],"S+":d.getMilliseconds()},g;for(g in c)RegExp("("+g+")").test(b)&&(f=RegExp.$1.length,b=b.replace(RegExp.$1,1==f?c[g]:("00"+
c[g]).slice(-f)));return b},parse:function(a,b){for(var c=(b||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),f=a.match(/\d+/g),g=new e,j=0;j<f.length;j++){var k=c[j],h=parseInt(f[j]);switch(k){case "yyyy":g.setFullYear(h);break;case "MM":g.setMonth(h-1);break;case "dd":g.setDate(h);break;case "HH":g.setHours(h);break;case "mm":g.setMinutes(h);break;case "ss":g.setSeconds(h);break;case "SS":g.setMilliseconds(h)}}return g},parseObject:function(a){return new e(a.year+1900,a.month,a.date,a.hours,a.minutes,
a.seconds)}};return a});
handy.add("String",function(){var e={stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(a){var d=document.createElement("div");a=document.createTextNode(a);d.appendChild(a);return d.innerHTML},unescapeHTML:function(a){var d=document.createElement("div");d.innerHTML=e.stripTags(a);return d.childNodes[0].nodeValue},decodeHTML:function(a){a=a.replace(/&lt;/gi,"<");a=a.replace(/&gt;/gi,">");a=a.replace(/&quot;/gi,'"');a=a.replace(/&apos;/gi,"'");a=a.replace(/<\/?br>/gi,"\n");
a=a.replace(/&amp;/gi,"&");return a=a.replace(/&nbsp;/gi," ")},encodeHTML:function(a){a=a.replace(/&/gi,"&amp;");a=a.replace(/</gi,"&lt;");a=a.replace(/>/gi,"&gt;");a=a.replace(/\"/gi,"&quot;");a=a.replace(/\'/gi,"&apos;");a=a.replace(/\n/gi,"</br>");return a=a.replace(/ /gi,"&nbsp;")},trim:function(a){return a=a.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(a,d){d||(d=/[,%\'\"\/\\;|\<\>\^]/);return-1<a.search(d)},len:function(a){return a.replace(/[^\x00-\xff]/g,"**").length},left:function(a,
d,b){if(e.len(a)>d){!0===b?b=2:0<b||(b=0);var c=0,f=0;for(d-=b;f<d;)255<a.charCodeAt(c)?f+=2:f++,c++;a=a.substring(0,c);for(c=0;c<b;c++)a+="."}return a},isNumber:function(a){return 0==a.search(/^\d+$/g)},hasChn:function(a){return/[\u4E00-\u9FA5]+/.test(a)},isChn:function(a){return/^[\u4E00-\u9FA5]+$/.test(a)},addParam:function(a,d){d&&(a+=(-1<a.indexOf("?")?"&":"?")+d);return a}};return e});
handy.add("Cookie",function(){return{get:function(e,a){var d=e+"=",b="",c=document.cookie;if(0<c.length){var f=c.indexOf(d);-1!=f&&(f+=d.length,d=c.indexOf(";",f),-1==d&&(d=c.length),b=c.substring(f,d),a||(b=unescape(b)))}return b},set:function(e,a,d){var b=[];void 0!=e&&void 0!=a&&b.push(e+"="+escape(a));d&&(void 0!=d.path&&b.push("path="+d.path),void 0!=d.domain&&b.push("domain="+d.domain),void 0!=d.expires&&b.push("expires="+d.expires),d.secure&&b.push("secure"));document.cookie=b.join(";")},del:function(e){var a=
new Date;a.setTime(a.getTime()-1);document.cookie=e+"=;expires="+a.toGMTString()}}});handy.add("Util",function(){var e=0;return{isWindow:function(a){return null!=a&&a==a.window},getUuid:function(){return e++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(a){var d=top.location.hash;0<=d.indexOf("#")&&(a=d.replace(/#[^\?]*/,a));top.location.hash=a}}});
handy.add("Template",function(e){var a={},d=/^=/,b="".trim,c={openTag:"<%",closeTag:"%>",_add:function(a){return b?"$r+="+a+";\n":"$r.push("+a+");\n"},_parseHtml:function(b){b=b.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return c._add('"'+b+'"')},_parseScript:function(b){b=b.replace(/this/g,"$data");0==b.indexOf("=")&&(b=c._add(b.replace(d,"")+'||""'));return b+"\n"},_compile:function(a){var d="var $r="+(b?'""':"[]")+";\n";e.Object.each(a.split(c.openTag),function(b,a){var f=
a.split(c.closeTag);1==f.length?d+=c._parseHtml(f[0]):(d+=c._parseScript(f[0]),f[1]&&(d+=c._parseHtml(f[1])))});d+="return "+(b?"$r;":'$r.join("");');return new Function("$data",d)},tmpl:function(b,d){var j,k,h;if("string"==typeof b)j=b;else if(j=b.tmpl,h=b.id)if(a[h])k=a[h];else{var l=document.getElementById(h);l&&(j=(l.value||l.innerHTML).replace(/\s/g,""))}if(!k){if(!j){e.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}k=c._compile(j);h&&(a[h]=k)}return d?k(d):k}};return c});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(e,a,d){function b(b){if(b==l)return!1;var a=h.contentWindow.document;a.open();a.write("<!doctype html><html><body>"+b+"</body></html>");a.close();l=b;e.log("set:"+h.contentWindow.document.body.innerText)}function c(){var c=a.getHash(),d=h.contentWindow.document.body.innerText;c!=l?(b(c),f(c)):d!=l&&(e.log("update:"+h.contentWindow.document.body.innerText),a.setHash(d))}function f(b){var a=n.listeners,c;for(c in a)a[c](b)}var g,
j=0,k=document,h,l,s=k.documentMode,w="onhashchange"in window&&(void 0===s||7<s),n={delay:50,listen:function(e,l){if(!g)if(g=!0,n.listeners={},w)$(window).on("hashchange",function(){f(a.getHash())});else h=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(k.body)[0],$(h).one("load",function(){b(a.getHash());setInterval(c,n.delay)});if(l in n.listeners)throw Error("Duplicate name");l=l||d.expando+ ++j;n.listeners[l]=e;return l},unListen:function(b){for(var a in n.listeners)(!b||
b==a)&&delete n.listeners[a]}};return n});
handy.add("Support",function(e){var a={mediaQuery:function(){var b;b=e.Browser.mobile()?"hui-mobile":"hui-pc";document.documentElement.className+=b}};a.mediaQuery();if(6==e.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){}return a})(function(e){Hui=H=$H=e.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HL=$H.Listener;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};e=window.$;
e.fn.remove=$HF.intercept(e.fn.remove,function(){$HL.fire("removeEl",this.target)})})(handy);
$Define("c.ComponentManager",function(){var e=$HO.createClass(),a=$H.expando+"_cmp_",d={},b={};$C=e;$HO.extend(e,{init:function(){$HL.add("afterRender",function(b){e.afterRender(b)});$HL.add("removeEl",function(b){e.destroy(b)})},registerType:function(b,a){d[b]=a;a.prototype.xtype=b;$C[b]=a},getClass:function(b){return d[b]},register:function(a){b[a.getId()]=a},unregister:function(a){delete b[a.getId()]},eachInEl:function(b,a){b.find(".js-component").each(function(b,c){c=$(c);var d=c.attr("id"),d=
e.get(d);a(d)})},afterRender:function(b){e.eachInEl(b,function(b){b.parent||b.afterRender()})},destroy:function(b){e.eachInEl(b,function(b){b.parent||b.destroy(!0)})},generateId:function(c,f){var d=a+(c||$H.Util.getUuid());if(!0!=f&&b[d])$D.error("id\u91cd\u590d:"+d);else return d},get:function(a){return b[a]||b[e.generateId(a,!0)]}});e.init();return e});
$Define("c.AbstractComponent",["c.ComponentManager","cm.AbstractView"],function(e,a){var d=$HO.createClass(),b=/^(<[a-zA-Z]+)/,c=/(class=")/;$C.AbstractComponent=d;$HO.inherit(d,a,{define:function(b,a){var c=$HO.createClass();$HO.inherit(c,a||d,null,null,{notCover:function(b){return"define"==b}});e.registerType(b,c);return c},extend:function(b){var a=this.prototype;$HO.extend(a,b,{notCover:function(c){if("_customEvents"==c||"listeners"==c)return a[c]=(b[c]||[]).concat(a[c]||[]),!0;if("xtype"==c||
"constructor"==c)return!0}})},html:function(b){b.autoRender=!1;return(new this(b)).getHtml()}},{xtype:"AbstractComponent",autoRender:!0,renderBy:"append",activeCls:"hui-active",_customEvents:["beforeRender","afterRender","show","hide","destroy"],_defaultEvents:["click","mouseover","focus"],initialize:function(b){this.doConfig(b);this.parseItems();this.initHtml();this.fire("beforeRender");!1!=this.autoRender&&(this.renderTo[this.renderBy](this.getHtml()),this.afterRender());e.register(this)},doConfig:function(b){var a=
this;a.params=b;a.settings=$HO.clone(b);var c=a.listeners?a.listeners.concat():[];b.listeners&&(c=c.concat(b.listeners));a._listeners=c;$HO.extend(a,b,{notCover:function(c){var d=a[c],e=$HO.contains(a._customEvents,c),j=$HO.contains(a._defaultEvents,c);(e||j)&&a._listeners.push({type:c,notEl:e,handler:b[c]});if(null!=d&&"object"==typeof d||$HO.isFunction(d))return!0}});a.cls||(a.cls=a.xtype.toLowerCase());b.defItem&&$HO.extend(a.defItem,b.defItem);a.renderTo=b.renderTo?$(b.renderTo):$(document.body);
a.children=[]},initHtml:function(){"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));var a=$H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this),d=this.getId(),a=a.replace(b,'$1 id="'+d+'" style="'+("visibility"==this.displayMode?"visibility:hidden;":"display:none;")+'"');this.html=a=a.replace(c,"$1"+this.getExtCls())},initStyle:function(){var b=this.getEl(),a=this.style||{};void 0!=this.width&&(a.width=this.width);void 0!=this.height&&(a.height=this.height);b.css(a)},
getId:function(){return this._id||(this._id=e.generateId(this.cid))},getEl:function(){return this._container},getHtml:function(b){if(!b)return this.html;b=">*"==b?this.children:this.find(b);for(var a=[],c=0;c<b.length;c++)a.push(b[c].getHtml());return a.join("")},getExtCls:function(){var b=["js-component"];this.extCls&&b.push(this.extCls);this.theme&&b.push("hui-"+this.cls+"-"+this.theme);this.disabled&&b.push("hui-disable");this.radius&&b.push("hui-radius-"+this.radius);this.isMini&&b.push("hui-mini");
this.shadow&&b.push("hui-shadow");this.shadowSurround&&b.push("hui-shadow-surround");this.shadowOverlay&&b.push("hui-shadow-overlay");this.shadowInset&&b.push("hui-shadow-inset");this.isActive&&b.push(this.activeCls);this.isFocus&&b.push("hui-focus");this.isInline&&b.push("hui-inline");return 0<b.length?b.join(" ")+" ":""},afterRender:function(){this.rendered||(this.callChild(),this._container=$("#"+this.getId()),this.rendered=!0,this.initStyle(),!0!=this.notListen&&this.initListeners(),this.disabled&&
this.suspendListeners(),this.fire("afterRender"),this.hidden||this.show(),delete this.html)},hide:function(){if(this.showed){this.showed=!1;var b=this.getEl();"visibility"==this.displayMode?b.css({visibility:"hidden"}):b.hide();this.withMask&&this.unmask();this.fire("hide")}},show:function(b,a){var c=this;if(!c.showed&&(!a||!c.hidden))if(!b&&c.delayShow)setTimeout(function(){d.prototype.show.call(c,!0)},0);else{c.showed=!0;var e=c.getEl();"visibility"==c.displayMode?e.css({visibility:"visible"}):
e.show();c.withMask&&c.mask();c.fire("show");c.callChild([null,!0])}},enable:function(){this.resumeListeners();this.getEl().removeClass("hui-disable")},disable:function(){this.suspendListeners();this.getEl().addClass("hui-disable")},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},mask:function(){d.mask||(d.mask=$('<div class="hui-mask" style="display:none;"></div>').appendTo(document.body));d.mask.show()},unmask:function(){d.mask&&
d.mask.hide()},txt:function(b){var a=this.find(".js-"+this.cls+"-txt");0==a.length&&(a=this.find(".hui-"+this.cls+"-txt"));if(void 0!=b)a.text(b);else return a.text()},initListeners:function(){!1!=this.callSuper(a)&&this.callChild()},clearListeners:function(){!1!=this.callSuper(a)&&this.callChild()},suspendListeners:function(){!1!=this.callSuper(a)&&this.callChild()},resumeListeners:function(){!1!=this.callSuper(a)&&this.callChild()},each:function(b,a){$HO.each(this.children,b,a)},match:function(b){if("*"==
b)return!0;var a,c,d;b=b.replace(/^([^\[]+)/,'[xtype="$1"]');for(var e=/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;a=e.exec(b);)if(c=a[1],d=a[2],a=eval(a[3]),"="===d?this[c]!=a:this[c]==a)return!1;return!0},find:function(b,a){var c=this;if(0!=b.indexOf("$"))return c.getEl().find(b);a=a||[];if(0<b.indexOf(","))return $HO.each(b.split(","),function(b,d){a=a.concat(c.find(d))}),a;var d=1==b.indexOf(">"),e=b.replace(/^\$>?\s?/,""),l=e.search(/\s|>/),s;0<l&&(s=e.substring(l),e=e.substring(0,l));c.each(function(c,
j){j.match(e)&&(s?j.find("$"+s,a):a.push(j));d||j.find(b,a)});return a},index:function(){var b=this,a=b.parent;if(a){var c;a.each(function(a,d){if(d==b)return c=a,!1});return c}return null},callChild:function(b,a){var c=this.children;$HO.isArray(b)&&(a=b,b=null);b=b||arguments.callee.caller.$name;for(var d=0,e=c.length;d<e;d++){var l=c[d];a?l[b].apply(l,a):l[b].call(l)}},add:function(b){this.children.push(b);b.parent=this},remove:function(b){for(var a=this.children,c=!1,d=0,e=a.length;d<e;d++)a[d]==
b&&(a.splice(d,1),b.destroy(),c=!0);return c},addItem:function(b){var a=this.settings,c=a.items;c?$HO.isArray(c)||(a.items=[c]):a.items=[];a.items.push(b)},parseItem:function(){},parseItems:function(){this.icon&&this.addItem({xtype:"Icon",name:this.icon});var b=this.settings.items;if(b)for(var b=b.length?b:[b],a=0,c=b.length;a<c;a++){var d=b[a];this.defItem&&$HO.extend(d,this.defItem,{notCover:!0});this.parseItem(d);var h=e.getClass(d.xtype);h?(d.renderTo||(d.autoRender=!1),d=new h(d),this.add(d)):
$D.error("xtype:"+d.xtype+"\u672a\u627e\u5230")}},destroy:function(){this.callChild();this.fire("destroy");this.clearListeners();e.unregister(this);this.getEl().remove();delete this.params;delete this.settings;delete this._container;delete this.renderTo;delete this._listeners;delete this.children;this.destroyed=!0}});return d});
$Define("c.Popup","c.AbstractComponent",function(e){var a=e.define("Popup");a.extend({delayShow:!0,clickHide:!0,showPos:"center",withMask:!0,shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.getHtml("$>*")%></div>'],listeners:[{type:"click",el:$(document),handler:function(){this.clickHide&&this.hide()}}],show:function(){var d=this,b=d.showPos;if("string"==typeof b)d[b]();else"function"==typeof b&&b.call(d);d.callSuper(a.superClass,arguments);d.timeout&&setTimeout(function(){d.destroyed||d.hide()},
d.timeout)},center:function(){var a=this.getEl(),b=document,c=((b.documentElement.offsetWidth||b.body.offsetWidth)-a.width())/2,b=((b.documentElement.clientHeight||b.body.clientHeight)-a.height())/2+b.body.scrollTop,b=10>b?window.screen.height/2-200:b;a.css({left:c+"px",top:b-(this.offsetTop||0)+"px"})},underEl:function(a){var b=a.position();b.width=this.width||a.outerWidth();this.getEl().css(b)}});return a});
$Define("c.ControlGroup",["c.ComponentManager","c.AbstractComponent"],function(e,a){var d=a.define("ControlGroup");d.extend({radius:"little",multi:!1,defItem:{xtype:"Button",extCls:"js-item",radius:null,shadow:!1,isInline:!1},tmpl:['<div class="hui-ctrlgp<%if(this.direction=="h"){%> hui-ctrlgp-h<%}else{%> hui-ctrlgp-v<%}%>">','<%=this.getHtml("$>*")%>',"</div>"],listeners:[{type:"click",selector:".js-item",method:"delegate",handler:function(b){var a=$(b.currentTarget),a=e.get(a.attr("id")).index();
this.onItemClick(b,a)}}],select:function(b){b="number"==typeof b?this.children[b]:"string"==typeof b?this.find(b)[0]:b;if(!this.multi&&!b.multi){var a=this.getSelected();a&&this.selectItem(a,!1);this.selectItem(b)}else this.selectItem(b,!b.selected)},getSelected:function(b){var a=[];this.each(function(d,e){e.selected&&a.push(b?d:e)});return 0<a.length?this.multi?a:a[0]:null},selectItem:function(b,a){(a=!1!=a)?(b.selected=a,b.select?b.select():b.active()):(b.selected=a,b.select?b.select(a):b.unactive())},
val:function(b){if(b){var a=b.split(",");this.each(function(b,d){d.select($HO.contains(a,d.value))})}else return b=this.find("$>[selected=true]"),a=[],$HO.each(b,function(b,d){a.push(d.value)}),a.join(",")},onItemClick:function(b,a){this.select(a);this.itemClick&&this.itemClick(this.children[a],a)}});return d});
$Define("c.Icon","c.AbstractComponent",function(e){e=e.define("Icon");e.extend({hasBg:!0,tmpl:['<span class="hui-icon hui-icon-<%=this.name%><%if(this.hasBg){%> hui-icon-bg<%}%>"></span>']});return e});
$Define("c.Button","c.AbstractComponent",function(e){e=e.define("Button");e.extend({iconPos:"left",theme:"gray",activeCls:"hui-btn-blue",cls:"btn",defItem:{xtype:"Icon",hasBg:!0},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a href="javascript:;" hidefocus="true" class="hui-btn,<%if(!this.text){%> hui-btn-icon-notxt<%},if(this.isBack){%> hui-btn-back<%},if(this.hasIcon&&this.text){%> hui-btn-icon-<%=this.iconPos%><%}%>">,<span class="hui-btn-txt"><%=this.text%></span>,<%=this.getHtml(">*")%>,</a>'.split(","),parseItem:function(a){"Icon"==
a.xtype&&(this.hasIcon=!0)}});return e});
$Define("c.Radio","c.AbstractComponent",function(e){e=e.define("Radio");e.extend({tmpl:'<div class="hui-radio hui-btn hui-btn-gray<%if(this.selected){%> hui-radio-on<%}%>">;<span class="hui-icon hui-icon-radio"></span>;<input type="radio"<%if(this.selected){%> checked=true<%}%>;<%if(this.disabled){%> disabled="<%=this.disabled%>"<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-radio-txt"><%=this.text%></span>;</div>'.split(";"),select:function(a){this.selected=
a=!1!=a;var d=this.find("input"),b=this.getEl();a?(d.attr("checked",!0),b.addClass("hui-radio-on")):(d.removeAttr("checked"),b.removeClass("hui-radio-on"))},val:function(a){if(a)this.value=a,this.find("input").val(a);else return this.value}});return e});
$Define("c.Checkbox","c.AbstractComponent",function(e){e=e.define("Checkbox");e.extend({text:"",value:"",selected:!1,multi:!0,cls:"chkbox",tmpl:'<div class="hui-chkbox hui-btn hui-btn-gray<%if(this.selected){%> hui-chkbox-on<%}%>">;<span class="hui-icon hui-icon-chkbox"></span>;<input type="checkbox"<%if(this.selected){%> checked=true<%}%>;<%if(this.disabled){%> disabled="<%=this.disabled%>"<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-chkbox-txt"><%=this.text%></span>;</div>'.split(";"),select:function(a){this.selected=
a=!1!=a;var d=this.find("input"),b=this.getEl();a?(d.attr("checked",!0),b.addClass("hui-chkbox-on")):(d.removeAttr("checked"),b.removeClass("hui-chkbox-on"))},val:function(a){if(a)this.value=a,this.find("input").val(a);else return this.value}});return e});
$Define("c.Select","c.AbstractComponent",function(e){e=e.define("Select");e.extend({text:"\u8bf7\u9009\u62e9...",value:"",optionClick:function(){},defItem:{xtype:"Menu",hidden:!0,markType:"dot",renderTo:"body",showPos:function(){this.underEl(this.parent.getEl())}},_customEvents:["change"],tmpl:['<div class="hui-select hui-btn hui-btn-gray hui-btn-icon-right">','<span class="hui-icon hui-icon-carat-d hui-icon-bg"></span>','<input value="<%=this.value%>" name="<%=this.name%>"/>','<span class="hui-btn-txt js-select-txt"><%=this.text%></span>',
"</div>"],listeners:[{type:"click",handler:function(){this.showOptions()}}],doConfig:function(a){var d=this;d.callSuper([a]);for(var b=a.options,c=0,e=b.length;c<e;c++){var g=b[c];if(g.value==a.value){d.text=g.text;g.selected=!0;break}}d.addItem({itemClick:function(b){d.val(b.value)},items:b})},showOptions:function(){this.children[0].show()},val:function(a){if(a){if(this.value!=a){var d=this.children[0],b=d.find('$>[value="'+a+'"]');0<b.length&&(this.fire("change"),b=b[0],this.value=a,this.find("input").attr("value",
a),this.txt(b.text),d.select(b))}}else return this.value}});return e});
$Define("c.Input","c.AbstractComponent",function(e){e=e.define("Input");e.extend({radius:"little",iconPos:"left",btnPos:"right",tmpl:'<div class="hui-input;<%if(this.hasIcon){%>; hui-input-icon-<%=this.iconPos%>;<%}%>;<%if(this.hasBtn){%>; hui-input-btn-<%=this.btnPos%>;<%}%>">;<%=this.getHtml(">*")%>;<%if(this.type=="textarea"){%>;<textarea class="js-input";<%}else{%>;<input type="text" class="js-input hui-input-txt";<%}%> ; name="<%=this.name%>";<%if(this.placeholder){%>; placeholder="<%=this.placeholder%>;<%}%>";<%if(this.type=="textarea"){%>;><%=this.value%></textarea>;<%}else{%>; value="<%=this.value%>"/>;<%}%> ;</div>'.split(";"),listeners:[{type:"focus",
el:".js-input",handler:function(){this.getEl().addClass("hui-focus")}},{type:"blur",el:".js-input",handler:function(){this.getEl().removeClass("hui-focus")}}],doConfig:function(a){var d=this;d.callSuper([a]);"search"==d.type?d.icon="search":"textarea"==d.type&&d._listeners.push({type:"input propertychange",el:".js-input",handler:function(){var b=d.find(".js-input");b.css("height",b[0].scrollHeight)}});d.withClear&&d.addItem({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.find("input").val("").focus()}})},
parseItem:function(a){"Icon"==a.xtype?this.hasIcon=!0:"Button"==a.xtype&&(this.hasBtn=!0)},val:function(a){var d=this.find("input");if(a)d.val(a);else return d.val()},focus:function(){this.find("input").focus()}});return e});
$Define("c.Tab",["c.AbstractComponent","c.ControlGroup"],function(e,a){var d=e.define("Tab",a);d.extend({defItem:{xtype:"Button",radius:null,isInline:!1,extCls:"js-item",iconPos:"top",shadow:!1},tmpl:['<div class="hui-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-tab-item" style="width:<%=100/len%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].selected){%> style="display:none"<%}%>>',
"<%=this.children[i].content%>","</div>","<%}%>","</div>"],parseItem:function(b){b.selected&&(b.isActive=!0)},onItemClick:function(b,a){this.find(".js-tab-content").hide().eq(a).show();this.callSuper([b,a])}});return d});
$Define("c.Toolbar","c.AbstractComponent",function(e){e=e.define("Toolbar");e.extend({cls:"tbar",defItem:{xtype:"Button",theme:"black",pos:"right",isMini:!0},tmpl:['<div class="hui-tbar<%if(this.type=="header"){%> hui-header<%}else if(this.type=="footer"){%> hui-footer<%}%>">','<%=this.getHtml(">*")%>','<%if(this.title){%><h1 class="hui-tbar-title js-tbar-txt"><%=this.title%></h1><%}%>',"</div>"],parseItem:function(a){"Button"==a.xtype&&(a.shadowSurround=!0,"left"==a.pos?a.extCls=(a.extCls||"")+"hui-tbar-btn-left":
"right"==a.pos&&(a.extCls=(a.extCls||"")+"hui-tbar-btn-right"))}});return e});$Define("c.Tips",["c.AbstractComponent","c.Popup","c.ControlGroup"],function(e,a){var d=e.define("Tips",a);d.extend({theme:"black",timeout:2E3,radius:"normal",tmpl:['<div class="hui-tips<%if(!this.text){%> hui-tips-notxt<%}%>">','<%=this.getHtml("$>*")%>','<%if(this.text){%><span class="hui-tips-txt"><%=this.text%></span><%}%>',"</div>"]});return d});
$Define("c.Dialog",["c.AbstractComponent","c.Popup"],function(e,a){var d=e.define("Dialog",a);$HO.extend(d,{alert:function(b){return new d({title:"&nbsp;",contentMsg:b,noClose:!0,noCancel:!0})},confirm:function(b,a){return new d({title:"&nbsp;",contentMsg:b,noClose:!0,okCall:function(){return a&&a(!0)},cancelCall:function(){return a&&a(!1)}})},prompt:function(b,a,e){e||(e=a,a="");return new d({title:"&nbsp;",contentMsg:b,noClose:!0,items:{xtype:"Input",role:"content",value:a},okCall:function(){var b=
this.find("$Input")[0].val();return e&&e(b)}})}});d.extend({okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",clickHide:!1,radius:"normal",tmpl:'<div class="hui-dialog">;<%=this.getHtml("$>Toolbar")%>;<div class="hui-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="hui-body-content">;<h1 class="hui-content-title"><%=this.contentTitle%></h1>;<div class="hui-content-msg"><%=this.contentMsg%></div>;<%=this.getHtml("$>[role=\'content\']")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="hui-body-action">;<%=this.getHtml("$>Button")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(b){var a=this;a.callSuper([b]);a.title&&a.addItem({xtype:"Toolbar",title:a.title,theme:"gray",extCls:"hui-dialog-header",items:!a.noClose&&{xtype:"Button",radius:"big",extCls:"hui-tbar-btn-left",icon:"delete",click:function(){a.hide()}}});a.noAction||(a.noOk||a.addItem({xtype:"Button",isActive:!0,text:a.okTxt,isInline:!1,click:function(){!1!=(a.okCall&&a.okCall())&&a.hide()}}),a.noCancel||a.addItem({xtype:"Button",isInline:!1,text:a.cancelTxt,click:function(){!1!=(a.cancelCall&&
a.cancelCall())&&a.hide()}}))}});return d});
$Define("c.Menu",["c.AbstractComponent","c.Popup","c.ControlGroup"],function(e,a,d){e=e.define("Menu",a);e.extend(d.prototype);e.extend({tmpl:['<div class="hui-menu<%if(this.markType=="dot"){%> hui-menu-mark<%}%>">',"<ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-menu-item<%if(this.children[i].selected){%> hui-item-mark<%}%>">',"<%=this.children[i].getHtml()%>",'<%if(this.markType=="dot"){%><span class="hui-icon-mark"></span><%}%>',"</li>","<%}%>","</ul>","</div>"],selectItem:function(b,
a){a=!1!=a;"dot"==this.markType?(b.selected=a,b.getEl().parent()[!1==a?"removeClass":"addClass"]("hui-item-mark")):"active"==this.markType?d.prototype.selectItem.call(this,b,a):b.selected=a}});return e});$Define("c.List",["c.AbstractComponent","c.ControlGroup"],function(e,a){var d=e.define("List",a);d.extend({tmpl:['<div class="hui-list">','<div class="hui-list-item c-clear">',"</div>","</div>"]});return d});
$Define("m.AbstractModule","cm.AbstractView",function(e){var a=$HO.createClass();$HO.inherit(a,e,null,{useCache:!0,initialize:function(a){this.conf=a},cache:function(){},init:function(){},beforeRender:function(){},render:function(){},afterRender:function(){},reset:function(){},exit:function(){return!0},destroy:function(){this.getEl().remove()},getHtml:function(){if(!this.tmpl)return"";"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));return $H.Template.tmpl({id:this.name,
tmpl:this.tmpl},this)},getEl:function(){return this._container}});return a});$Define("m.AbstractDao",function(){var e=$HO.createClass();$HO.extend(e,{ajax:function(a){this.beforeSend(a);a.error=$HF.intercept(this.error,a.error);a.success=$HF.intercept(this.success,a.success);return $.ajax(a)},beforeSend:$H.noop,error:$H.noop,success:$H.noop});return e});$Define("m.AbstractView",function(){var e=$HO.createClass();$HO.extend(e.prototype,{})});
$Define("m.AbstractNavigator","handy.base.Object",function(e){var a=e.createClass();e.extend(a.prototype,{navigate:function(){}});return a});
$Define("m.History","handy.base.HashChange",function(e){var a=$HO.createClass(),d=0;$HO.extend(a.prototype,{initialize:function(a){this.key=a||"handy";this.states=[];e.listen($H.Function.bind(this.stateChange,this))},stateChange:function(){var a=this.getHashParam().hKey;if(a=this.states[a])a.onStateChange(a.param,!0)},saveState:function(a){var c=this.key+ ++d;this.states.push(c);this.states[c]=a;$HU.setHash("#"+JSON.stringify({hKey:c,param:a.param}))},getHashParam:function(){try{var a=$HU.getHash().replace("#",
"");return JSON.parse(a)}catch(d){$H.Debug.warn("History.getCurrentState:parse hash error:"+d.message)}},getCurrentState:function(){try{var a=this.getHashParam();return this.states[a.hKey]}catch(d){$H.Debug.warn("History.getCurrentState:parse hash error:"+d.message)}},getPreState:function(){try{for(var a=JSON.parse($HU.getHash().replace("#","")).hKey,d=this.states,e=d.length,g=0;g++;g<e)if(d[g]==a)return 0<g?d[d[--g]]:null}catch(j){$H.Debug.error("History.getPreState error:"+j.message,j)}},back:function(){var a=
this.getPreState();if(a)a.onStateChange(a.param)}});return a});
$Define("m.ModuleManager","m.History",function(e){var a=$HO.createClass();$HO.extend(a.prototype,{_getModWrapper:function(a){a="modWrapper_"+a;var b=$("#"+a);0==b.length&&(b=$('<div id="'+a+'" class="js-module m-module"></div>'));return b},_createMod:function(a){var b=this,c=a.modName;b.modules[c]={waiting:!0};$Require(b.defModPackage+c,function(e){e=new e;e.name=c;e.mType=c;e.initParam=a;b.modules[c]=e;e.init(a);e.beforeRender();var g=b._getModWrapper(c);e._container=g;var j=e.renderTo?$(e.renderTo):
b.container;g.html(e.getHtml());j.append(g);$HL.fire("afterRender",g);e.render(g);b.currentMod==c&&b._showMod(e);e.afterRender()})},_showMod:function(a){if(this.navigator&&this.navigator.navigate(a,this))return!1;this._hideAll();a._container.show();a.isActive=!0},_hideAll:function(){var a=this.modules,b;for(b in a)a[b]._container.hide(),a[b].isActive=!1},_destroy:function(a){var b=this.modules,c;for(c in b)if(a.name==c){delete b[c];break}a.destroy()},initialize:function(a){a&&(this.conf=a,$HO.extend(this,
a),this.container=a.container?$(a.container):$(document.body));this.defModPackage+=".";this.history=new e;this.modules={}},go:function(a,b){var c=a.modName,e=this.currentMod,g=this.modules,j=g[e];if(e==c)j.waiting||j.reset();else{if(j&&!j.waiting&&!j.exit())return!1;(e=g[c])?e.useCache?(this._showMod(e),e.cache(a)):e.waiting||(this._destroy(e),this._createMod(a)):this._createMod(a);!0!=b&&this.history.saveState({onStateChange:$H.Function.bind(this.go,this),param:a});this.currentMod=c}}});return a});
