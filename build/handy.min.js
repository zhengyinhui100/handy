/* Handy v1.0.0-dev | 2014-03-18 | zhengyinhui100@gmail.com */
(function(){var e=window.handy,c=window.$,b=window.handy=window.$=function(){};b.version="1.0.0";b.expando="handy"+(b.version+Math.random()).replace(/\D/g,"");b.add=function(a,d,f){f||(f=d,d=null);if(!d||!b.Loader){b.base||(b.base={});var j=[];if(d)if("string"==typeof d)j.push(b.base.Object.namespace(d));else for(var c=0;c<d.length;c++)j.push(b.base.Object.namespace(d[c]));j.push(b);d=f.apply(window,j);b.base[a]=b[a]=d;if(0<="Browser,Events,Function,Object,String,Template,Util".indexOf(a)){for(var g in d)"undefined"!=
typeof b[g]&&("undefined"!=typeof console&&!Function[g])&&(console.log(b[g]),console.log(a+"\u547d\u540d\u51b2\u7a81:"+g)),b[g]=d[g];"Events"==a&&(b._eventCache={})}}else b.Loader.require(d,function(){Array.prototype.push.call(arguments,b);b.base[a]=b[a]=f.apply(window,arguments)})};b.noConflict=function(a){window.$===b&&(window.$=c);a&&window.handy===b&&(window.handy=e);return b};b.noop=function(){}})();
handy.add("Json",function(){function e(f){a.lastIndex=0;a.test(f)&&(f=f.replace(a,function(a){var f=d[a];return"string"===typeof f?f:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));return'"'+f+'"'}function c(a,d){var b,g,l,k,m=j,r,q=d[a];q&&("object"===typeof q&&"function"===typeof q.toJSON)&&(q=q.toJSON(a));"function"===typeof f&&(q=f.call(d,a,q));switch(typeof q){case "string":return e(q);case "number":return isFinite(q)?String(q):"null";case "boolean":case "null":return String(q);case "object":if(!q)return"null";
j+=h;r=[];if("[object Array]"===Object.prototype.toString.apply(q)){k=q.length;for(b=0;b<k;b+=1)r[b]=c(b,q)||"null";l=0===r.length?"[]":j?"[\n"+j+r.join(",\n"+j)+"\n"+m+"]":"["+r.join(",")+"]";j=m;return l}if(f&&"object"===typeof f){k=f.length;for(b=0;b<k;b+=1)"string"===typeof f[b]&&(g=f[b],(l=c(g,q))&&r.push(e(g)+(j?": ":":")+l))}else for(g in q)Object.prototype.hasOwnProperty.call(q,g)&&(l=c(g,q))&&r.push(e(g)+(j?": ":":")+l);l=0===r.length?"{}":j?"{\n"+j+r.join(",\n"+j)+"\n"+m+"}":"{"+r.join(",")+
"}";j=m;return l}}var b="JSON"in window,a,d,f,j,h,g,l,k,m,s;b&&(a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l=/^[\],:{}\s]*$/,k=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
s=/(?:^|:|,)(?:\s*\[)+/g);return{stringify:function(a,d,g){if(b)return JSON.stringify.apply(null,arguments);var e;h=j="";if("number"===typeof g)for(e=0;e<g;e+=1)h+=" ";else"string"===typeof g&&(h=g);if((f=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))$D.error(Error("Json.stringify:\u66ff\u6362\u53c2\u6570\u53ea\u80fd\u662f\u51fd\u6570\u6216\u8005\u6570\u7ec4"));else return c("",{"":a})},parse:function(a,f){function d(a,b){var j,c,h=a[b];if(h&&"object"===typeof h)for(j in h)Object.prototype.hasOwnProperty.call(h,
j)&&(c=d(h,j),void 0!==c?h[j]=c:delete h[j]);return f.call(a,b,h)}if(b)return JSON.parse.apply(null,arguments);var j;a=String(a);g.lastIndex=0;g.test(a)&&(a=a.replace(g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(l.test(a.replace(k,"@").replace(m,"]").replace(s,"")))return j=eval("("+a+")"),"function"===typeof f?d({"":j},""):j;$D.error(new SyntaxError("JSON.parse"))}}});
handy.add("Object",function(e){var c;c=(c=window.navigator.userAgent.match(/MSIE ([\d.]+)/))&&9>parseInt(c[0])?function(a,d,f){var b=[];if(a.length){d=d||0;for(f=f||a.length;d<f;d++)b.push(a[d])}return b}:function(a,d,f){return Array.prototype.slice.call(a,d||0,f||a.length)};var b={_alias:{B:"handy.base",C:"handy.component",M:"handy.module",CM:"handy.common"},namespace:function(a,d){var f=null,j,c,g,e;a=b.alias(a);c=a.split(".");f=c[0];f=(g=2==arguments.length)?eval("(function(){if (typeof "+f+' == "undefined"){'+
f+" = {};}return "+f+";})()"):eval("(function(){if (typeof "+f+' != "undefined")return '+f+";})()");j=1;for(e=c.length;j<e;++j){if(j==e-1&&g)f[c[j]]=d;else if(g||f&&f[c[j]])f[c[j]]=f[c[j]]||{};else return;f=f[c[j]]}return f},alias:function(a,d){var f=b._alias;if(d)f[a]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+a+":"+f[a]):f[a]=d;else{if(a){var j=a,c=a.length-1;do{if(f[j])return f[j]+a.substring(c);c=j.lastIndexOf(".")}while(0<c&&(j=j.substring(0,c)));return a}return f}},createClass:function(a){var d=
function(){var a,j;a=this.constructor==d?this:arguments.callee;if(j=a.initialize){for(var c in a)"object"==typeof a[c]&&(a[c]=b.clone(a[c]));return j.apply(a,arguments)}};d.$isClass=!0;d.prototype.callSuper=function(a,d){a&&(!a.$isClass&&void 0!=a.length)&&(d=a,a=null);var c=arguments.callee.caller,g=c.$owner.superProto;a=a?a.prototype:g||this.constructor.superProto;c=c.$name;if(a&&(c=a[c],b.isFunction(c)))return d?c.apply(this,d):c.call(this)};a&&this.namespace(a,d);return d},extend:function(a,d,
f){var j=f?f.notCover:!1,c=f?f.cover:null;f=f?f.notClone:!1;a=a||{};var g=a.constructor,e=g.$isClass,k;for(k in d)if((!c||b.contains(c,k))&&d.hasOwnProperty(k)){var m=a.hasOwnProperty(k),s=!0===j?m:!1;b.isArray(j)?s=b.contains(j,k)&&m:b.isFunction(j)&&(s=j(k));s||(m=f?d[k]:b.clone(d[k]),e&&b.isFunction(m)&&(m.$name=k,m.$owner=g),a[k]=m)}return a},mix:function(a,d,f,j){a.superProto||(a.superProto={});for(var c in d)a.superProto[c]=b.isFunction(d[c])?a.superProto[c]?function(a,b){return function(){b.apply(this,
arguments);d[a].apply(this,arguments)}}(c,a.superProto[c]):d[c]:d[c],a[c]||(a[c]=d[c]);f&&b.extend(a,f);d.toString!=d.constructor.prototype.toString&&(a.superProto.toString=function(){d.toString.apply(a,arguments)});j&&(a.prototype&&d.prototype)&&b.inherit(a,d,null,j);return a},inherit:function(a,d,f,c,h){var g=function(){};g.prototype=d.prototype;h=h||{notCover:!0};b.extend(a,d,h);a.prototype=new g;a.prototype.constructor=a;a.superClass=d;a.superProto=d.prototype;if(d._onInherit)try{d._onInherit(a)}catch(l){e.Debug.error(l)}c&&
b.extend(a,c);f&&b.extend(a.prototype,f)},isFunction:function(a){return"[object Function]"===window.Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===window.Object.prototype.toString.call(a)},equals:function(a,d){if(typeof a==typeof d){if("object"!=typeof a)return a===d;if(a===d)return!0;if(b.isArray(a)&&b.isArray(d)){if(a.length!=d.length)return!1;for(var f=0,c=a.length;f<c;f++)if(!b.equals(a[f],d[f]))return!1;return!0}if(!b.isArray(a)&&!b.isArray(d)){if(b.count(a)!=
b.count(d))return!1;for(f in a)if(void 0==d[f]||!b.equals(a[f],d[f]))return!1;return!0}}return!1},clone:function(a){if(null==a||"object"!=typeof a)return a;var d=a.constructor;if(d!=window.Object&&d!=window.Array)return a;if(d==window.Date||d==window.RegExp||d==window.Function||d==window.String||d==window.Number||d==window.Boolean)return new d(a);try{var f=new d,c;for(c in a)f[c]=b.clone(a[c]);return f}catch(h){return a}},isEmpty:function(a){if(b.isArray(a))return 0==a.length;for(var d in a)return!1;
return!0},each:function(a,d,f){var c,h=0,g=a.length,e=void 0===g||b.isFunction(a);if(f)if(e)for(c in a){if(!1===d.apply(a[c],f))break}else for(;h<g&&!1!==d.apply(a[h++],f););else if(e)for(c in a){if(!1===d.call(a[c],c,a[c]))break}else for(;h<g&&!1!==d.call(a[h],h,a[h++]););return a},contains:function(a,d){var f=!1;b.each(a,function(a,c){if(b.equals(c,d))return f=!0,!1});return f},largeThan:function(a,d){if("object"==typeof a&&"object"==typeof d){var f=!0;b.each(d,function(c){if(!b.equals(d[c],a[c]))return f=
!1});return f}},count:function(a){if(b.isArray(a))return a.length;var d=0,f;for(f in a)d++;return d},toArray:c,getSingleton:function(a){a="string"==typeof a?b.namespace(a):a;return a._singleton||(a._singleton=new a)},generateMethod:function(a,d,f){d=b.isArray(d)?d:d.split(",");for(var c=0;c<d.length;c++){var h=d[c];a[h]=f(h)}}};return b});
handy.add("Browser","handy.base.Object",function(e){var c={},b={};e.generateMethod(b,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(a){return function(d){var b=c[a];return!d&&"string"===typeof b&&/^[\d\.]+$/.test(b)?parseInt(b):b}});e=window.navigator.userAgent;var a;(a=e.match(/MSIE ([\d.]+)/))?c.ie=a[1]:(a=e.match(/Firefox\/([\d.]+)/))?c.firefox=a[1]:(a=e.match(/Chrome\/([\d.]+)/))?
c.chrome=a[1]:(a=e.match(/Opera.([\d.]+)/))?c.opera=a[1]:(a=e.match(/Version\/([\d.]+).*Safari/))?c.safari=a[1]:0;/windows|win32/i.test(e)?c.windows=!0:/linux/i.test(e)?c.linux=!0:/macintosh/i.test(e)?c.mac=!0:0;/trident/i.test(e)?c.trident=!0:/webkit/i.test(e)?c.webkit=!0:/gecko/i.test(e)?c.gecko=!0:/presto/i.test(e)?c.presto=!0:0;/MetaSr/i.test(e)?c.sogou=!0:/Maxthon/i.test(e)?c.maxthon=!0:/TencentTraveler/i.test(e)?c.tt=!0:/TheWorld/i.test(e)?c.theWorld=!0:/360[S|E]E/i.test(e)?c.is360=!0:0;var d;
if((d=e.match(/AppleWebKit\/([\d.]*)/))&&d[1])if(/ Mobile\//.test(e)&&e.match(/iPad|iPod|iPhone/)){c.mobile="ios";if((d=e.match(/OS ([^\s]*)/))&&d[1])c.ios=d[1].replace("_",".");if((d=e.match(/iPad|iPod|iPhone/))&&d[0])c[d[0].toLowerCase()]=c.ios}else if(/ Android/i.test(e)){if(/Mobile/.test(e)&&(c.mobile="android"),(d=e.match(/Android ([^\s]*);/))&&d[1])c.android=d[1]}else if(d=e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))c.mobile=d[0].toLowerCase();var f;try{if(c.ie){var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
j&&(f=j.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(j=navigator.plugins["Shockwave Flash"])){var h=j.description.split(" ");a=0;for(var g=h.length;a<g;a++)if(0<parseInt(h[a])){f=h[a];break}}}catch(l){}c.flash=f?f:null;return b});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(e,c,b){var a={level:0,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:!("console"in window)||!!c.mobile(),out:function(d,f,c){c=c||"log";if(f||a.showInPage){f=b.expando+"debugDiv";var h=top.document,g=h.getElementById(f);g?g.style.display="block":(g=h.createElement("DIV"),g.id=f,g.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+h.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',g.style.position="fixed",g.style.width=h.body.offsetWidth-20+"px",g.style.left=0,g.style.top=0,g.style.right=0,g.style.height="150px",g.style.backgroundColor="#aaa",g.style.fontSize="12px",g.style.padding="10px",g.style.zIndex=9999999999,g.style.opacity=0.8,g.style.filter="alpha(opacity=80)",h.body.appendChild(g));f=g.getElementsByTagName("DIV")[0];f.innerHTML+=c+" : "+b.Json.stringify(d,null,"<br/>")+"<br/>";f.scrollTop=f.scrollHeight}try{console[c](d)}catch(e){}},
log:function(d,b){a.level>a.LOG_LEVEL||a.out(d,!!b,"log")},info:function(d,b){this.level>a.INFO_LEVEL||a.out(d,!!b,"info")},warn:function(d,b){a.level>a.WARN_LEVEL||a.out(d,!!b,"warn")},error:function(d,b){if(!(a.level>a.ERROR_LEVEL)&&(a.out(d,!!b,"error"),d instanceof Error))throw d;},time:function(b,f,c){a.level>a.INFO_LEVEL||(b?("boolean"==typeof f&&(c=f,f=""),a.out((f||"")+((new Date).getTime()-(a.lastTime||0)),!!c)):a.lastTime=(new Date).getTime())},debug:function(b){if(!(a.level>a.DEBUG_LEVEL)&&
!1!==b)debugger}};return a});handy.add("Function",function(e){return{bind:function(c,b,a){var d=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(d,arguments);return c.apply(b,d)}},intercept:function(c,b,a,d){return e.Object.isFunction(c)&&e.Object.isFunction(b)?function(){var f=a||this,j={},h=arguments;j.scope=d;j.target=f;j.method=c;return!1!=b.apply(j,h)?c.apply(f,h):!1}:c}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(e,c,b,a){function d(a){function b(a){return/\.(css|js)$/.test(a)?s[a]&&"loaded"==s[a].status:p.urlMap&&p.urlMap[a]?p.urlMap[a].chkExist():c.namespace(a)}if("string"==typeof a)return b(a);for(var d=[],f=0,j=a.length;f<j;f++){var h=b(a[f]);if(h)d.push(h);else return!1}return d}function f(a,b){function d(){d.isCalled||(d.isCalled=!0,clearTimeout(g),b())}if("SCRIPT"===a.nodeName){var f=a,c=d;f.onload=f.onerror=
f.onreadystatechange=function(){/loaded|complete|undefined/.test(f.readyState)&&(f.onload=f.onerror=f.onreadystatechange=null,l.removeChild(f),f=null,setTimeout(c,0))}}else{var h=d;window.hasOwnProperty("attachEvent")?a.attachEvent("onload",h):setTimeout(function(){j(a,h)},0)}var g=setTimeout(function(){e.error("Time is out:"+a.src);d()},p.timeout)}function j(a,b){if(!b.isCalled){var d;if(k)a.sheet&&(d=!0);else if(a.sheet)try{a.sheet.cssRules&&(d=!0)}catch(f){if("SecurityError"===f.name||"NS_ERROR_DOM_SECURITY_ERR"===
f.name)d=!0}setTimeout(function(){d?b():j(a,b)},1)}}function h(a){p.showLoading(!1);s[a].status="loaded";p.traceLog&&e.info("Loader Response: "+a);g()}function g(){for(var a=m.length-1;0<=a;a--){var b=m[a],f=d(b.deps);if(f){m.splice(a,1);b.callback.apply(null,f);g();break}}}var l=document.head||document.getElementsByTagName("head")[0]||document.documentElement,k=navigator.userAgent.indexOf("AppleWebKit"),m=[],s={},p={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(a,
b,d){2==arguments.length&&(d=b,b=[]);p.require(b,function(){var b;if("function"==typeof d)try{b=d.apply(null,arguments),p.traceLog&&e.info("Loader define: "+a)}catch(f){e.error("Loader "+a+":factory define error:"+f.message,f);return}else b=d;c.namespace(a,b);var j=typeof b;if("object"==j||"Function"==j)b.$ns=a})},require:function(c,j){for(var g="string"==typeof c?[c]:c,k=[],u=[],t=!0,r=0,q=g.length;r<q;r++){var n=g[r],v=d(n);v?u.push(v):(k.push(n),t&&(t=!1,m.push({deps:g,callback:j})),p.traceLog&&
e.info("Resource not found: "+n))}if(0==k.length)return j&&j.apply(null,u),0==u.length?u[0]:u;t=!1;g=0;for(u=k.length;g<u;g++)if(r=k[g],!s[r]){t=r;n=p.urlMap&&p.urlMap[t]&&p.urlMap[t].url;if(!n){q="";t=a.Object.alias(t);n=p.rootPath;if("string"==typeof n)q=n;else if("object"==typeof n)for(v in v=void 0,n)0==t.indexOf(v)&&(q=n[v],t=t.replace(v,""));else q="";n=/.css$/.test(t)?0==t.indexOf("/")?t:"/css/"+t:/.js$/.test(t)?t:t.replace(/\./g,"/")+".js";0!=n.indexOf("/")&&(n="/"+n);n=q+n}t=!0;s[r]={id:r,
status:"loading"};q=b.bind(h,null,r);if(/.css$/.test(n))a:{r=n;n=l.getElementsByTagName("link");for(v=0;v<n.length;v++){var A=n[v].href;!p.skinNode&&0<=A.indexOf(p.skinName)&&(p.skinNode=n[v]);if(0<=A.indexOf(r)||0<=r.indexOf(A))break a}n=document.createElement("link");n.rel="stylesheet";n.href=r;f(n,q);l.insertBefore(n,p.skinNode);p.traceLog&&e.info("Loader request:"+r)}else r=n,n=document.createElement("script"),n.async="async",n.src=r,n.type="text/javascript",f(n,q),l.appendChild(n),p.traceLog&&
e.info("Loader request:"+r)}t&&p.showLoading(!0)}};return p});
handy.add("Events",function(){var e=Array.prototype;return{_eventCache:{},_parseEvents:function(c,b,a){var d=/\s+/,f=e.slice.call(arguments,2);if("object"==typeof b){for(var j in b)this[c].apply(this,[j,b[j]].concat(f));return!0}if(d.test(b)){d=b.split(d);j=0;for(var h=d.length;j<h;j++)this[c].apply(this,[d[j]].concat(f));return!0}return!1},on:function(c,b,a,d){var f=this;if(!f._parseEvents("on",c,b,a,d)){var j=f._eventCache,h=j[c];h||(h=j[c]=[]);h.push({times:d,handler:b,context:a,delegation:function(){if(!0!=
f.isSuspend)return b.apply(a||f,arguments)}})}},once:function(c,b,a){if(!this._parseEvents("once",c,b,a,1))this.on(c,b,a,1)},off:function(c,b){if("all"==c)return this._eventCache={},!0;if(!this._parseEvents("off",c,b)){var a=this._eventCache,d=c.indexOf(".");if(!b&&0>=d){for(var f in a)(f.split(".")[0]==c||0==d&&0<=f.indexOf(c))&&delete a[f];return!0}d=a[c];if(!d)return!1;if(b){a=0;for(f=d.length;a<f;a++)if(d[a].handler==b)return d.splice(a,1),!0}else return delete a[c],!0;return!1}},suspend:function(){if(this.isSuspend)return!1;
this.isSuspend=!0},resume:function(){if(!this.isSuspend)return!1;this.isSuspend=!1},trigger:function(c,b){function a(a){if(a)for(var b=0,f=a.length;b<f;b++){var c=a[b],g=c.delegation;"number"==typeof c.times&&(1<c.times?c.times--:d.off(l,c.handler));h=g.apply(null,j)}}var d=this,f=$HO.toArray(arguments);f.unshift("trigger");if(!d._parseEvents.apply(d,f)){var f=d._eventCache,j=e.slice.call(arguments,1),h,g;if(0<c.indexOf("."))g=f[c],a(g);else for(var l in f)if(g=c.indexOf("."),l.split(".")[0]==c||
0==g&&0<=l.indexOf(c))g=f[l],a(g);a(f.all);return h}}}});
handy.add("Date",function(){var e=window.Date,c={getWeek:function(b,a){var d=b.getDay();a&&(d=(d+(a%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[d]},isWeeken:function(b){return 0==b.getDay()||6==b.getDay()},getDaysInMonth:function(b){b=new e(b.getFullYear(),b.getMonth()+1,0);return b.getDate()},getDaysInYear:function(b){var a=new e(b.getFullYear(),0,0);b=new e(b.getFullYear()+1,0,0);return Math.floor((b.getTime()-a.getTime())/864E5)},getDayIndexOfYear:function(b){var a=new e("1/1/"+
b.getFullYear());return Math.ceil((b.getTime()-a.getTime())/864E5)},format:function(b,a){a=a||"yyyy-MM-dd HH:mm:ss";b=b||new e;var d=b.getHours(),f=Math.floor((b.getMonth()+3)/3),d={"y+":b.getFullYear(),"M+":b.getMonth()+1,"d+":b.getDate(),"h+":0==d%12?12:d%12,"H+":d,"m+":b.getMinutes(),"s+":b.getSeconds(),"w+":c.getWeek(b),"q+":f,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][f-1],"S+":b.getMilliseconds()},j;for(j in d)RegExp("("+j+")").test(a)&&(f=RegExp.$1.length,a=a.replace(RegExp.$1,1==f?d[j]:("00"+
d[j]).slice(-f)));return a},parse:function(b,a){for(var d=(a||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),f=b.match(/\d+/g),c=new e,h=0;h<f.length;h++){var g=d[h],l=parseInt(f[h]);switch(g){case "yyyy":c.setFullYear(l);break;case "MM":c.setMonth(l-1);break;case "dd":c.setDate(l);break;case "HH":c.setHours(l);break;case "mm":c.setMinutes(l);break;case "ss":c.setSeconds(l);break;case "SS":c.setMilliseconds(l)}}return c},parseObject:function(b){return new e(b.year+1900,b.month,b.date,b.hours,b.minutes,
b.seconds)}};return c});
handy.add("String",function(){var e={stripTags:function(c){return c.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(c){var b=document.createElement("div");c=document.createTextNode(c);b.appendChild(c);return b.innerHTML},unescapeHTML:function(c){var b=document.createElement("div");b.innerHTML=e.stripTags(c);return b.childNodes[0].nodeValue},decodeHTML:function(c){c=c.replace(/&lt;/gi,"<");c=c.replace(/&gt;/gi,">");c=c.replace(/&quot;/gi,'"');c=c.replace(/&apos;/gi,"'");c=c.replace(/<\/?br>/gi,"\n");
c=c.replace(/&amp;/gi,"&");return c=c.replace(/&nbsp;/gi," ")},encodeHTML:function(c){c=c.replace(/&/gi,"&amp;");c=c.replace(/</gi,"&lt;");c=c.replace(/>/gi,"&gt;");c=c.replace(/\"/gi,"&quot;");c=c.replace(/\'/gi,"&apos;");c=c.replace(/\n/gi,"</br>");return c=c.replace(/ /gi,"&nbsp;")},trim:function(c){return c=c.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(c,b){b||(b=/[,%\'\"\/\\;|\<\>\^]/);return-1<c.search(b)},len:function(c){return c.replace(/[^\x00-\xff]/g,"**").length},left:function(c,
b,a){if(e.len(c)>b){!0===a?a=2:0<a||(a=0);var d=0,f=0;for(b-=a;f<b;)255<c.charCodeAt(d)?f+=2:f++,d++;c=c.substring(0,d);for(d=0;d<a;d++)c+="."}return c},isNumber:function(c){return 0==c.search(/^\d+$/g)},hasChn:function(c){return/[\u4E00-\u9FA5]+/.test(c)},isChn:function(c){return/^[\u4E00-\u9FA5]+$/.test(c)},addParam:function(c,b){b&&(c+=(-1<c.indexOf("?")?"&":"?")+b);return c}};return e});
handy.add("Cookie",function(){return{get:function(e,c){var b=e+"=",a="",d=document.cookie;if(0<d.length){var f=d.indexOf(b);-1!=f&&(f+=b.length,b=d.indexOf(";",f),-1==b&&(b=d.length),a=d.substring(f,b),c||(a=unescape(a)))}return a},set:function(e,c,b){var a=[];void 0!=e&&void 0!=c&&a.push(e+"="+escape(c));b&&(void 0!=b.path&&a.push("path="+b.path),void 0!=b.domain&&a.push("domain="+b.domain),void 0!=b.expires&&a.push("expires="+b.expires),b.secure&&a.push("secure"));document.cookie=a.join(";")},del:function(e){var c=
new Date;c.setTime(c.getTime()-1);document.cookie=e+"=;expires="+c.toGMTString()}}});handy.add("Util",function(e){var c=0;return{isWindow:function(b){return null!=b&&b==b.window},getUuid:function(){return c++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(b){var a=top.location.hash;0<=a.indexOf("#")&&(b=a.replace(/#[^\?]*/,b));top.location.hash=b},result:function(b,a){var d=b[a];return e.Object.isFunction(d)?d():d}}});
handy.add("Collection","B.Object",function(e){function c(a){return a}function b(a){return function(b){return b[a]}}function a(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}}return{map:function(a,b,c){var h=[];if(null==a)return h;var g=Array.prototype.map;if(g&&a.map===g)return a.map(b,c);e.each(a,function(a,d){h.push(b.call(c,d,a))});return h},pluck:function(a,f){return this.map(a,b(f))},some:function(a,b,c){var h=!1;if(null==a||!b)return h;var g=Array.prototype.some;
if(g&&a.some===g)return a.some(b,c);$HO.each(a,function(a,d,g){if(h||(h=b.call(c,d,a,g)))return!1});return!!h},every:function(a,b,c){var h=!0;if(null==a||!b)return h;var g=Array.prototype.every;if(g&&a.every===g)return a.every(b,c);$HO.each(a,function(a,d,g){if(!(h=b.call(c,d,a,g)))return!1});return!!h},find:function(a,b,c){var h;this.some(a,function(a,d,e){if(b.call(c,a,d,e))return h=a,!0});return h},filter:function(a,b,c){var h=[];if(null==a)return h;var g=Array.prototype.filter;if(g&&a.filter===
g)return a.filter(b,c);$HO.each(a,function(a,d,g){b.call(c,d,a,g)&&h.push(d)});return h},where:function(b,f){return this.filter(b,a(f))},findWhere:function(b,f){return this.find(b,a(f))},invoke:function(a,b){var c=Array.prototype.slice.call(arguments,2),h=e.isFunction(b);return this.map(a,function(a){return(h?b:a[b]).apply(a,c)})},sortBy:function(a,f,j){var h=f;f=null==h?c:$HO.isFunction(h)?h:b(h);return this.pluck(this.map(a,function(a,b,d){return{value:a,index:b,criteria:f.call(j,a,b,d)}}).sort(function(a,
b){var d=a.criteria,f=b.criteria;if(d!==f){if(d>f||void 0===d)return 1;if(d<f||void 0===f)return-1}return a.index-b.index}),"value")}}});
handy.add("Template",function(e){var c={},b=/^=/,a="".trim,d={openTag:"<%",closeTag:"%>",_add:function(b){return a?"$r+="+b+";\n":"$r.push("+b+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return d._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=d._add(a.replace(b,"")+'||""'));return a+"\n"},_compile:function(b){var c="var $r="+(a?'""':"[]")+";\n";e.Object.each(b.split(d.openTag),function(a,b){var f=
b.split(d.closeTag);1==f.length?c+=d._parseHtml(f[0]):(c+=d._parseScript(f[0]),f[1]&&(c+=d._parseHtml(f[1])))});c+="return "+(a?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(a,b){var h,g,l;if("string"==typeof a)h=a;else if(h=a.tmpl,l=a.id)if(c[l])g=c[l];else{var k=document.getElementById(l);k&&(h=(k.value||k.innerHTML).replace(/\s/g,""))}if(!g){if(!h){e.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}g=d._compile(h);l&&(c[l]=g)}return b?g(b):g}};return d});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(e,c,b){function a(a){if(a==k)return!1;var b=l.contentWindow.document;b.open();b.write("<!doctype html><html><body>"+a+"</body></html>");b.close();k=a;e.log("set:"+l.contentWindow.document.body.innerText)}function d(){var b=c.getHash(),d=l.contentWindow.document.body.innerText;b!=k?(a(b),f(b)):d!=k&&(e.log("update:"+l.contentWindow.document.body.innerText),c.setHash(d))}function f(a){var b=p.listeners,d;for(d in b)b[d](a)}var j,
h=0,g=document,l,k,m=g.documentMode,s="onhashchange"in window&&(void 0===m||7<m),p={delay:50,listen:function(e,k){if(!j&&!j)if(j=!0,p.listeners={},s)$(window).on("hashchange",function(){f(c.getHash())});else l=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(g.body)[0],$(l).one("load",function(){a(c.getHash());setInterval(d,p.delay)});if(k in p.listeners)$D.error(Error("Duplicate name"));else return k=k||b.expando+ ++h,p.listeners[k]=e,k},unListen:function(a){for(var b in p.listeners)(!a||
a==b)&&delete p.listeners[b]}};return p});handy.add("Support",function(e){var c={mediaQuery:function(){var a;if(e.Browser.mobile())a="hui-mobile";else{a="hui-pc";var b=e.Browser.ie();b&&(a+=" ie"+b)}document.documentElement.className+=" "+a}};c.mediaQuery();if(6==e.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(b){}return c});
handy.add("Validator",["B.String","B.Object"],function(e,c){var b={messages:{required:"{name}\u4e0d\u80fd\u4e3a\u7a7a",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94fe\u63a5\u5730\u5740",date:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f",number:"{name}\u987b\u662f\u6570\u5b57",digits:"{name}\u987b\u662f\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u7528\u5361\u53f7\u7801",
equalTo:"\u8bf7\u8f93\u5165\u76f8\u540c\u7684{name}",min:"{name}\u4e0d\u80fd\u5c0f\u4e8e{0}",max:"{name}\u4e0d\u80fd\u5927\u4e8e{0}",range:"{name}\u8981\u5728{0}\u5230{1}\u4e4b\u95f4",maxlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7{0}",minlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e{0}",rangelength:"{name}\u957f\u5ea6\u8981\u5728{0}\u5230{1}\u4e4b\u95f4"},valid:function(a,d){var f=d.rules,c;for(c in f){var h=f[c],g=("function"==typeof h?h:b[c])(a,h);if(!g)return f=d.error||b.error,c=d.messages&&
d.messages[c]||b.messages[c],c=c.replace(/\{([^\}]+)\}/g,function(a,b){return h[b]||0==b&&h||d[b]||h||""}),f&&f(c),g}return!0},required:function(a){return 0<e.trim(""+a).length},email:function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a){return!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a){return/^\d+$/.test(a)},creditcard:function(a){if(/[^0-9 \-]+/.test(a))return!1;var b=0,f=0,c=!1;a=a.replace(/\D/g,"");for(var h=a.length-1;0<=h;h--){f=a.charAt(h);f=parseInt(f,10);if(c&&9<(f*=2))f-=9;b+=f;c=!c}return 0===b%10},min:function(a,b){return a>=b},max:function(a,
b){return a<=b},range:function(a,b){return a>=b[0]&&a<=b[1]},minlength:function(a,b){return(c.isArray(a)?a.length:e.trim(""+a).length)>=b},maxlength:function(a,b){return(c.isArray(a)?a.length:e.trim(""+a).length)<=b},rangelength:function(a,b){var f=c.isArray(a)?a.length:e.trim(""+a).length;return f>=b[0]&&f<=b[1]},equalTo:function(a,b){return a===b}};return b});
handy.add("LocalStorage",["B.Browser","B.Events","B.Json"],function(e,c,b){c={_init:function(){!a&&e.ie()&&(f=document.getElementById("LocalStorageUserDataDiv"),f||(f=document.createElement("DIV"),f.style.display="none",f.id="LocalStorageUserDataDiv",f.addBehavior("#default#userData"),document.body.appendChild(f),f.load(j)))},getItem:function(c){c=a?d.getItem(c):f.getAttribute(c);return c=b.parse(c)},setItem:function(c,g){g=b.stringify(g);try{a?d.setItem(c,g):(f.setAttribute(c,g),f.save(j))}catch(e){return $D.error(e),
!1}return!0},removeItem:function(b){a?d.removeItem(b):(f.removeAttribute(b),f.save(j))},clear:function(){a?d.clear():f.unload()}};var a=window.localStorage&&window.localStorage.getItem,d=window.localStorage,f,j=document.domain;c._init();return c})(function(e){Hui=H=$H=e.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HE=$H.Events;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};e=window.$;e.fn.remove=$HF.intercept(e.fn.remove,
function(){$H.trigger("removeEl",this.target)})})(handy);
$Define("CM.AbstractManager",function(){var e=$HO.createClass();$HO.extend(e.prototype,{_types:{},_all:{},type:"manager",registerType:function(c,b){this._types[c]=b;b.prototype.xtype=c},getClass:function(c){return this._types[c]},register:function(c){this._all[c.getId()]=c},unregister:function(c){var b=this._all,a=c.getId();b[a]==c&&delete b[a]},eachInEl:function(c,b){var a=this;c.find(".js-"+a.type).each(function(d,c){c=$(c);var j=c.attr("id");(j=a.get(j))&&b(j)})},generateId:function(c,b){var a=
$H.expando+"_"+this.type+"_"+(c||$H.Util.getUuid());if(!0!=b&&this._all[a])$D.error("id\u91cd\u590d:"+a);else return a},get:function(c){var b=this._all;return b[c]||b[this.generateId(c,!0)]}});return e});
$Define("CM.ViewManager","CM.AbstractManager",function(e){var c=$HO.createClass();$HO.inherit(c,e,{type:"view",initialize:function(){var b=this;$H.on("afterRender",function(a){b.afterRender(a)});$H.on("removeEl",function(a){b.destroy(a)})},afterRender:function(b){this.eachInEl(b,function(a){a.afterRender()})},destroy:function(b){this.eachInEl(b,function(a){a.destroy(!0)})}});$V=$HO.getSingleton(c);return c});
$Define("CM.AbstractView","CM.ViewManager",function(e){var c=$HO.createClass(),b=/^(<[a-zA-Z]+)/,a=/^[^>]+class=/,d=/(class=")/;$HO.extend(c,{extend:function(a){var b=this.prototype;$HO.extend(b,a,{notCover:function(c){if($HO.contains(["_customEvents","listeners"],c))return b[c]=(a[c]||[]).concat(b[c]||[]),!0;if("xtype"==c||"constructor"==c)return!0}})},html:function(a){return(new this($HO.extend({autoRender:!1},a))).getHtml()}});$HO.extend(c.prototype,$H.Events);$HO.extend(c.prototype,{xtype:"AbstractView",
autoRender:!0,renderBy:"append",children:[],_customEvents:"beforeRender render afterRender beforeShow show afterShow beforeHide hide afterHide beforeUpdate update afterUpdate beforeDestroy destroy afterDestroy".split(" "),_defaultEvents:"mousedown mouseup mouseover mousemove mouseenter mouseleave dragstart drag dragenter dragleave dragover drop dragend touchstart touchmove touchend touchcancel keydown keyup keypress click dblclick focus focusin focusout contextmenu change submit".split(" "),initialize:function(a){this.manager=
this.constructor.manager||$HO.getSingleton(e);this.doConfig(a);this.parseItems();!1!=this.autoRender&&this.render();this.manager.register(this)},doConfig:function(a){var b=this;b.params=a;b.settings=$HO.clone(a);b.renderTo=a.renderTo?$(a.renderTo):$(document.body);var c=b.listeners||[];a.listeners&&(c=c.concat(a.listeners));b._listeners=c;$HO.extend(b,a,{notCover:function(c){var d=b[c],e=$HO.contains(b._customEvents,c);if($HO.contains(b._defaultEvents,c))b._listeners.push({name:c,handler:a[c]});else if(e)b.on(c,
a[c]);if(null!=d&&"object"==typeof d||$HO.isFunction(d))return!0}});a.defItem&&$HO.extend(b.defItem,a.defItem)},getEl:function(){return this._container},getId:function(){return this._id||(this._id=this.manager.generateId(this.cid))},initHtml:function(){"string"!=typeof this.tmpl&&(this.tmpl=this.constructor.prototype.tmpl=this.tmpl.join(""));return $H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this)},getHtml:function(){var c=this.getId(),j;j="visibility"==this.displayMode?"visibility:hidden;":"display:none;";
var e=this.initHtml(),g=a.test(e),l="js-"+this.manager.type+" "+this.extCls+" ";g&&(e=e.replace(d,"$1"+l));return e=e.replace(b,'$1 id="'+c+'" style="'+j+'"'+(g?"":' class="'+l+'"'))},findHtml:function(a){a=">*"==a?this.children:this.find(a);for(var b=[],c=0;c<a.length;c++)b.push(a[c].getHtml());return b.join("")},initStyle:function(){var a=this.getEl(),b=this.style||{};void 0!=this.width&&(b.width=this.width);void 0!=this.height&&(b.height=this.height);a.css(b)},beforeRender:function(){return this.trigger("beforeRender")},
render:function(){if(!1==this.beforeRender())return!1;this.trigger("render");var a=this.getHtml();this.renderTo[this.renderBy](a);this.afterRender()},afterRender:function(){if(this.rendered)return!1;this.callChild();this._container=$("#"+this.getId());this.rendered=!0;this.initStyle();!0!=this.notListen&&this.initListeners();this.disabled&&this.disable();this.trigger("afterRender");this.hidden||this.show()},beforeShow:function(){return this.trigger("beforeShow")},show:function(a,b){var d=this;if(!1==
d.beforeShow()||d.showed||b&&d.hidden)return!1;if(!a&&d.delayShow)setTimeout(function(){c.prototype.show.call(d,!0)},0);else{d.trigger("show");d.showed=!0;var e=d.getEl();"visibility"==d.displayMode?e.css({visibility:"visible"}):e.show();d.callChild([null,!0]);d.afterShow()}},afterShow:function(){this.trigger("afterShow")},beforeHide:function(){return this.trigger("beforeHide")},hide:function(){if(!1==this.beforeHide()||!this.showed)return!1;this.showed=!1;var a=this.getEl();"visibility"==this.displayMode?
a.css({visibility:"hidden"}):a.hide();this.trigger("hide");this.afterHide()},afterHide:function(){this.trigger("afterHide")},enable:function(){this.resume();this.getEl().removeClass("hui-disable").find("input,textarea,select").removeAttr("disabled")},disable:function(){this.suspend();this.getEl().addClass("hui-disable").find("input,textarea,select").attr("disabled","disabled")},listen:function(a){var b=this,c=a.name,d=a.context,e=a.handler;if(a.custom)b.on(c,e,d);else{var k=b._listeners,m=a.el,s=
a.method||"bind",p=a.selector,w=a.data,y=a.delegation=function(){if(!0!=b.isSuspend)return e.apply(d||b,arguments)};$H.Browser.mobile()&&"click"==c&&(c="touchend");m=m?"string"==typeof m?b.find(m):m:b.getEl();if(p)if(w)m[s](p,c,w,y);else m[s](p,c,y);else if(w)m[s](c,w,y);else m[s](c,y);k.push(a)}},unlisten:function(a){var b=a.name,c=a.handler;if(a.custom)this.off(b,c);else{var d=a.el,e="delegate"==a.method?"undelegate":"unbind";a=a.selector;var k;$H.Browser.mobile()&&"click"==b&&(b="touchend");for(var d=
d?"string"==typeof d?this.find(d):d:this.getEl(),m=this._listeners.length-1;0<=m;m--){var s=this._listeners[m];if(s.handler==c){k=s.delegation;this._listeners.splice(m,1);break}}if(a)d[e](a,b,k);else d[e](b,k)}},initListeners:function(){if(this.listened)return!1;this.listened=!0;var a=this._listeners;this._listeners=[];for(var b=a.length-1;0<=b;b--)this.listen(a[b]);this.callChild()},clearListeners:function(){for(var a=this._listeners,b=a.length-1;0<=b;b--)this.unlisten(a[b]);this.off("all");this.callChild()},
suspend:function(){if(this.isSuspend)return!1;this.isSuspend=!0;this.callChild()},resume:function(){if(!this.isSuspend)return!1;this.isSuspend=!1;this.callChild()},each:function(a,b){for(var c=this.children,d=c.length,e,k=0;k<d;){e=c[k];e=b?a.apply(e,b):a(k,e);if(!1===e)break;d==c.length?k++:d=c.length}},match:function(a,b){if("*"==a)return!0;var c=b||this,d,e,k;a=a.replace(/^([^\[]+)/,'[xtype="$1"]');for(var m=/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;d=m.exec(a);)if(e=d[1],k=d[2],d=eval(d[3]),"="===k?c[e]!=
d:c[e]==d)return!1;return!0},find:function(a,b){var c=this;if(0!=a.indexOf("$"))return c.getEl().find(a);b=b||[];if(0<a.indexOf(","))return $HO.each(a.split(","),function(a,d){b=b.concat(c.find(d))}),b;var d=1==a.indexOf(">"),e=a.replace(/^\$>?\s?/,""),k=e.search(/\s|>/),m;0<k&&(m=e.substring(k),e=e.substring(0,k));c.each(function(c,h){h.match(e)&&(m?h.find("$"+m,b):b.push(h));d||h.find(a,b)});return b},parents:function(a){if(a&&0!=a.indexOf("$"))return this.getEl().parents(a);for(var b=this;b.parent;)if(b=
b.parent,a&&this.match(a,b))return b;return a||b===this?null:b},index:function(){var a=this,b=a.parent;if(b){var c;b.each(function(b,d){if(d==a)return c=b,!1});return c}return null},callChild:function(a,b){0!=this.children.length&&(a&&"string"!=typeof a&&(b=a,a=null),a=a||arguments.callee.caller.$name,this.each(function(c,d){b?d[a].apply(d,b):d[a].call(d)}))},add:function(a){this.children.push(a);a.parent=this},remove:function(a){for(var b=this.children,c=!1,d=0,e=b.length;d<e;d++)b[d]==a&&(b.splice(d,
1),a.destroy(),c=!0);return c},addItem:function(a){var b=this.settings,c=b.items;c?$HO.isArray(c)||(b.items=[c]):b.items=[];b.items.push(a)},parseItem:function(){},parseItems:function(){var a=this.settings.items;if(a)for(var a=a.length?a:[a],b=0,c=a.length;b<c;b++){var d=a[b];this.defItem&&$HO.extend(d,this.defItem,{notCover:!0});this.parseItem(d);var e=this.manager.getClass(d.xtype);e?(d.renderTo||(d.autoRender=!1),d=new e(d),this.add(d)):$D.error("xtype:"+d.xtype+"\u672a\u627e\u5230")}},beforeUpdate:function(){return this.trigger("beforeUpdate")},
update:function(a){var b=this;if(!1==b.beforeUpdate())return!1;var d=b.parent;a=$HO.extend({renderBy:"before",renderTo:b.getEl()},a);d&&(a=$HO.extend(d.defItem,a),d.parseItem(a));if(!a.cid||a.cid==b.cid)a._id=b._id;var c=new b.constructor(a);d&&(c.parent=d,d.each(function(a,f){if(f==b)return d.children.splice(a,1,c),!1}));b.destroy();b.trigger("update");b.afterUpdate(c);return c},afterUpdate:function(a){this.trigger("afterUpdate",a)},beforeDestroy:function(){return this.trigger("beforeDestroy")},
destroy:function(){if(!1==this.beforeDestroy()||this.destroyed)return!1;this.callChild();this.trigger("destroy");this.clearListeners();this.getEl().remove();this.destroyed=!0;this.parent&&this.parent.remove(this);this.manager.unregister(this);delete this.params;delete this.settings;delete this._container;delete this.renderTo;delete this._listeners;delete this.children;this.afterDestroy()},afterDestroy:function(){this.trigger("afterDestroy")}});return c});
$Define("C.Model",function(){var e=$HO.createClass();$HO.extend(e.prototype,$H.Events);$HO.extend(e.prototype,{_pending:!1,idAttribute:"id",_validate:function(b,a){if(!a.validate||!this.validate)return!0;b=$HO.extend({},this.attributes,b);var d=this.validationError=this.validate(b,a)||null;if(!d)return!0;this.trigger("invalid",this,d,$HO.extend(a,{validationError:d}));return!1},initialize:function(b,a){var d=b||{};a||(a={});this.cid=$H.Util.getUuid();this.attributes={};a.collection&&(this.collection=
a.collection);a.parse&&(d=this.parse(d,a)||{});d=$HO.extend(d,$H.Util.result(this,"defaults"),{notCover:!0});this.set(d,a);this.changed={}},toJson:function(){return $HO.clone(this.attributes)},get:function(b){return this.attributes[b]},escape:function(b){return $H.String.escapeHTML(this.get(b))},has:function(b){b=this.get(b);return null!=b&&void 0!=b},set:function(b,a,d){var c;"object"===typeof b?(c=b,d=a):(c={})[b]=a;d||(d={});if(!this._validate(c,d))return!1;var e=d.unset;b=d.silent;var h=[],g=
this._changing;this._changing=!0;g||(this._previousAttributes=$H.Object.clone(this.attributes),this.changed={});var l=this.attributes,k=this._previousAttributes;this.idAttribute in c&&(this.id=c[this.idAttribute]);for(var m in c)a=c[m],$HO.equals(l[m],a)||h.push(m),$HO.equals(k[m],a)?delete this.changed[m]:this.changed[m]=a,e?delete l[m]:l[m]=a;if(!b){h.length&&(this._pending=d);a=0;for(c=h.length;a<c;a++)this.trigger("change:"+h[a],this,l[h[a]],d)}if(g)return this;if(!b)for(;this._pending;)d=this._pending,
this._pending=!1,this.trigger("change",this,d);this._changing=this._pending=!1;return this},unset:function(b,a){a=a||{};a.unset=!0;return this.set(b,void 0,a)},clear:function(b){var a={},c;for(c in this.attributes)a[c]=void 0;b=b||{};b.unset=!0;return this.set(a,b)},hasChanged:function(b){var a=this.changed;return null==b?!$HO.isEmpty(a):$HO.contains(a,b)},changedAttrbutes:function(b){if(!b)return this.hasChanged()?$HO.clone(this.changed):!1;var a,c=!1,f=this._changing?this._previousAttributes:this.attributes,
e;for(e in b)if(!$HO.equals(f[e],a=b[e]))(c||(c={}))[e]=a;return c},previous:function(b){return null==b||!this._previousAttributes?null:this._previousAttributes[b]},fetch:function(b){var a=this;b=b?$HO.clone(b):{};void 0===b.parse&&(b.parse=!0);var d=b.success;b.success=function(c){if(!a.set(a.parse(c,b),b))return!1;d&&d(a,c,b);a.trigger("sync",a,c,b)};c(a,b);return a.sync("read",a,b)},save:function(b,a,d){var f,e=this.attributes;null==b||"object"===typeof b?(f=b,d=a):(f={})[b]=a;d=$HO.extend({validate:!0},
d);if(f&&!d.wait){if(!this.set(f,d))return!1}else if(!this._validate(f,d))return!1;f&&d.wait&&(this.attributes=$HO.extend({},e,f));void 0===d.parse&&(d.parse=!0);var h=this,g=d.success;d.success=function(a){h.attributes=e;var b=h.parse(a,d);d.wait&&(b=$HO.extend(f||{},b));if($HO.isObject(b)&&!h.set(b,d))return!1;g&&g(h,a,d);h.trigger("sync",h,a,d)};c(this,d);b=this.isNew()?"create":d.patch?"patch":"update";"patch"===b&&(d.oAttrs=f);b=this.sync(b,this,d);f&&d.wait&&(this.attributes=e);return b},destroy:function(b){b=
b?$HO.clone(b):{};var a=this,d=b.success,f=function(){a.trigger("destroy",a,a.collection,b)};b.success=function(c){(b.wait||a.isNew())&&f();d&&d(a,c,b);a.isNew()||a.trigger("sync",a,c,b)};if(this.isNew())return b.success(),!1;c(this,b);var e=this.sync("delete",this,b);b.wait||f();return e},url:function(){var b=$H.Util.result(this,"urlRoot")||$H.Util.result(this.collection,"url");b||$D.error(Error("\u5fc5\u987b\u8bbe\u7f6e\u4e00\u4e2aurl\u5c5e\u6027\u6216\u8005\u51fd\u6570"));return this.isNew()?b:
b.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(b){return b},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(b){return this._validate({},$HO.extend(b||{},{validate:!0}))}});var c;return e});
$Define("C.Collection","C.Model",function(e){var c=$HO.createClass();$HO.extend(c.prototype,$H.Events);$HO.extend(c.prototype,{_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(b,a){if(b instanceof e)return b;a=a?$HO.clone(a):{};a.collection=this;var c=new this.model(b,a);if(!c.validationError)return c;this.trigger("invalid",this,c.validationError,a);return!1},_addReference:function(b){this._byId[b.cid]=b;null!=b.id&&(this._byId[b.id]=b);b.collection||(b.collection=
this);b.on("all",this._onModelEvent,this)},_removeReference:function(b){this===b.collection&&delete b.collection;b.off("all",this._onModelEvent,this)},_onModelEvent:function(b,a,c,f){("add"===b||"remove"===b)&&c!==this||("destroy"===b&&this.remove(a,f),a&&b==="change:"+a.idAttribute&&(delete this._byId[a.previous(a.idAttribute)],null!=a.id&&(this._byId[a.id]=a)),this.trigger.apply(this,arguments))},initialize:function(b,a){a||(a={});a.model&&(this.model=a.model);void 0!==a.comparator&&(this.comparator=
a.comparator);this._reset();this.initialize.apply(this,arguments);b&&this.reset(b,$HO.extend({silent:!0},a))},toJSON:function(b){return $H.Collection.map(this,function(a){return a.toJSON(b)})},add:function(b,a){$HO.extend(a,{add:!0,remove:!1,merge:!1});return this.set(b,a)},remove:function(b,a){var c=!$HO.isArray(b);b=c?[b]:$HO.clone(b);a||(a={});var f,e,h,g;f=0;for(e=b.length;f<e;f++)if(g=b[f]=this.get(b[f]))delete this._byId[g.id],delete this._byId[g.cid],h=this.indexOf(g),this.models.splice(h,
1),this.length--,a.silent||(a.index=h,g.trigger("remove",g,this,a)),this._removeReference(g,a);return c?b[0]:b},set:function(b,a){a=$H.Util.extend(a,{add:!0,remove:!0,merge:!0});a.parse&&(b=this.parse(b,a));var c=!$HO.isArray(b),f=c?b?[b]:[]:$HO.clone(b),j,h,g,l,k,m,s=a.at,p=this.model,w=this.comparator&&null==s&&!1!==a.sort,y="string"==typeof this.comparator?this.comparator:null,x=[],z=[],u={},t=a.add,r=a.merge,q=a.remove,n=!w&&t&&q?[]:!1;j=0;for(h=f.length;j<h;j++){k=f[j]||{};g=k instanceof e?l=
k:k[p.prototype.idAttribute||"id"];if(g=this.get(g))q&&(u[g.cid]=!0),r&&(k=k===l?l.attributes:k,a.parse&&(k=g.parse(k,a)),g.set(k,a),w&&(!m&&g.hasChanged(y))&&(m=!0)),f[j]=g;else if(t){l=f[j]=this._prepareModel(k,a);if(!l)continue;x.push(l);this._addReference(l,a)}l=g||l;n&&(l.isNew()||!u[l.id])&&n.push(l);u[l.id]=!0}if(q){j=0;for(h=this.length;j<h;++j)u[(l=this.models[j]).cid]||z.push(l);z.length&&this.remove(z,a)}if(x.length||n&&n.length)if(w&&(m=!0),this.length+=x.length,null!=s){j=0;for(h=x.length;j<
h;j++)this.models.splice(s+j,0,x[j])}else{n&&(this.models.length=0);k=n||x;j=0;for(h=k.length;j<h;j++)this.models.push(k[j])}m&&this.sort({silent:!0});if(!a.silent){j=0;for(h=x.length;j<h;j++)(l=x[j]).trigger("add",l,this,a);(m||n&&n.length)&&this.trigger("sort",this,a)}return c?f[0]:f},reset:function(b,a){a||(a={});for(var c=0,f=this.models.length;c<f;c++)this._removeReference(this.models[c],a);a.previousModels=this.models;this._reset();b=this.add(b,$HO.extend({silent:!0},a));a.silent||this.trigger("reset",
this,a);return b},push:function(b,a){return this.add(b,$HO.extend({at:this.length},a))},pop:function(b){var a=this.at(this.length-1);this.remove(a,b);return a},unshift:function(b,a){return this.add(b,$HO.extend({at:0},a))},shift:function(b){var a=this.at(0);this.remove(a,b);return a},slice:function(){return Array.prototype.slice.apply(this.models,arguments)},get:function(b){return null==b?void 0:this._byId[b]||this._byId[b.id]||this._byId[b.cid]},at:function(b){return this.models[b]},where:function(b,
a){return $HO.isEmpty(b)?a?void 0:[]:this[a?"find":"filter"](function(a){for(var c in b)if(b[c]!==a.get(c))return!1;return!0})},findWhere:function(b){return this.where(b,!0)},sort:function(b){this.comparator||$D.error(Error("\u6ca1\u6709\u6bd4\u8f83\u5668"));b||(b={});"string"==typeof this.comparator||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort($H.Function.bind(this.comparator,this));b.silent||this.trigger("sort",this,b);return this},pluck:function(b){return $H.Collection.invoke(this.models,
"get",b)},parse:function(b){return b},clone:function(){return new this.constructor(this.models)}});$HO.each(["some","every","find","filter","invoke"],function(b){c.prototype[b]=function(){var a=Array.prototype.slice.call(arguments),c=$H.Collection;a.unshift(this.models);return c[b].apply(c,a)}});return c});
$Define("C.AbstractComponent",["CM.ViewManager","CM.AbstractView"],function(e,c){var b=$HO.createClass();$C=$H.component;$HO.inherit(b,c,{xtype:"AbstractComponent",activeCls:"hui-active",hasConfig:function(a,b){if(!b)return!1;if($HO.isArray(b))for(var c=0,e=b.length;c<e;c++){if(this.match(a,b[c]))return!0}else if(this.match(a,b))return!0;return!1},doConfig:function(a){this.callSuper([a]);this.cls||(this.cls=this.xtype.toLowerCase());this.extCls=this.getExtCls();this.icon&&this.addItem({xtype:"Icon",
name:this.icon});this.isMini&&(this.defItem=$HO.extend({isMini:!0},this.defItem))},getExtCls:function(){var a=["js-component"];this.extCls&&a.push(this.extCls);this.theme&&a.push("hui-"+this.cls+"-"+this.theme);this.radius&&a.push("hui-radius-"+this.radius);this.isMini&&a.push("hui-mini");this.shadow&&a.push("hui-shadow");this.shadowSurround&&a.push("hui-shadow-surround");this.shadowOverlay&&a.push("hui-shadow-overlay");this.shadowInset&&a.push("hui-shadow-inset");this.isActive&&a.push(this.activeCls);
this.isFocus&&a.push("hui-focus");this.isInline&&a.push("hui-inline");return 0<a.length?a.join(" "):""},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},txt:function(a){var b=this.find(".js-"+this.cls+"-txt");0==b.length&&(b=this.find(".hui-"+this.cls+"-txt"));if(void 0!=a)b.text(a);else return b.text()},valid:function(){var a=this.settings.validator;if(a){var b=this.val();a.error||(a.error=function(a){new $C.Tips({text:a,theme:"error"})});
return a=$H.Validator.valid(b,a)}for(var b=this.children,c=0,e=b.length;c<e;c++)if(a=b[c].valid(),!a)return a;return!0}},{define:function(a,c){var f=$HO.createClass();$HO.inherit(f,c||b,null,null,{notCover:function(a){return"define"==a}});$HO.getSingleton(e).registerType(a,f);return $C[a]=f}});return b});
$Define("C.Popup","C.AbstractComponent",function(e){e=e.define("Popup");var c=0,b;e.extend({delayShow:!0,clickHide:!0,showPos:"center",shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.findHtml("$>*")%></div>'],doConfig:function(a){this.callSuper([a]);this.clickHide&&this._listeners.push({name:"click",el:$(document),handler:function(){this.hide()}});$H.Browser.android()&&(this._listeners.push({name:"show",custom:!0,handler:function(){!0!=$H.Events.trigger("component.popup.show")&&$("input,textarea,select").attr("disabled",
"disabled")}}),this._listeners.push({name:"hide",custom:!0,handler:function(){!0!=$H.Events.trigger("component.popup.hide")&&setTimeout(function(){$("input,textarea,select").removeAttr("disabled")},500)}}))},afterShow:function(){var a=this,b=a.getEl();b.css("z-index",1E3*c+1E3);if(!a.width&&a.parent){var f=a.width=a.parent.getEl().outerWidth();b.css("width",f)}b=a.showPos;if("string"==typeof b)a[b]();else"function"==typeof b&&b.call(a);a.noMask||a.mask();a.timeout&&setTimeout(function(){a.destroyed||
a.hide()},a.timeout)},hide:function(){!1!=this.callSuper()&&(this.noMask||this.unmask(),this.notDestroy||this.destroy())},center:function(){var a=this.getEl(),b=this.width||a.width(),c=this.height||a.height(),e=document,b=((e.documentElement.offsetWidth||e.body.offsetWidth)-b)/2,c=((e.documentElement.clientHeight||e.body.clientHeight)-c)/2+(e.documentElement.scrollTop||e.body.scrollTop),c=10>c?window.screen.height/2-200:c;a.css({left:b+"px",top:c-(this.offsetTop||0)+"px"})},followEl:function(a){a=
(a||this.parent.getEl()).position();this.getEl().css(a)},mask:function(){b||(b=$('<div class="hui-mask" style="display:none;"></div>').appendTo(document.body));b.css("z-index",1E3*c+998);0==c&&b.show();c++},unmask:function(){c--;0==c?b.hide():b.css("z-index",1E3*(c-1)+998)}});return e});
$Define("C.ControlGroup","C.AbstractComponent",function(e){e=e.define("ControlGroup");e.extend({multi:!1,defItem:{xtype:"Button",extCls:"js-item",radius:null,shadow:!1,isInline:!1},tmpl:['<div class="hui-ctrlgp<%if(this.direction=="h"){%> hui-ctrlgp-h<%}else{%> hui-ctrlgp-v<%}%>">','<%=this.findHtml("$>*")%>',"</div>"],listeners:[{name:"click",selector:".js-item",method:"delegate",handler:function(c){var b=$(c.currentTarget),b=$V.get(b.attr("id")).index();this.onItemClick(c,b)}}],select:function(c){if(!this.notSelect&&
(c="number"==typeof c?this.children[c]:"string"==typeof c?this.find(c)[0]:c))if(!this.multi&&!c.multi){var b=this.getSelected();b&&this.selectItem(b,!1);this.selectItem(c)}else this.selectItem(c,!c.selected)},getSelected:function(c){var b=[];this.each(function(a,d){d.selected&&b.push(c?a:d)});return 0<b.length?this.multi?b:b[0]:null},selectItem:function(c,b){(b=!1!=b)?(c.selected=b,c.select?c.select():c.active()):(c.selected=b,c.select?c.select(b):c.unactive())},val:function(c){if(c){var b=c.split(",");
this.each(function(a,c){c.select($HO.contains(b,c.value))})}else return c=this.find("$>[selected=true]"),b=[],$HO.each(c,function(a,c){b.push(c.value)}),b.join(",")},onItemClick:function(c,b){this.select(b);this.itemClick&&this.itemClick(this.children[b],b)}});return e});
$Define("C.Icon","C.AbstractComponent",function(e){e=e.define("Icon");e.extend({tmpl:'<span class="hui-icon;<%if(this.isAlt){%>; hui-alt-icon;<%}%>; hui-icon-<%=this.name%>;<%if(!this.noBg){%>; hui-icon-bg;<%}%>"></span>'.split(";")});return e});
$Define("C.Button","C.AbstractComponent",function(e){e=e.define("Button");e.extend({iconPos:"left",theme:"gray",activeCls:"hui-btn-blue",cls:"btn",defItem:{xtype:"Icon"},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a href="javascript:;" hidefocus="true" class="hui-btn,<%if(!this.text){%> hui-btn-icon-notxt<%},if(this.isBack){%> hui-btn-back<%},if(this.hasIcon&&this.text){%> hui-btn-icon-<%=this.iconPos%><%}%>">,<span class="hui-btn-txt"><%=this.text%></span>,<%=this.findHtml("$>*")%>,</a>'.split(","),parseItem:function(c){"Icon"==
c.xtype&&(this.hasIcon=!0)}});return e});
$Define("C.Radio","C.AbstractComponent",function(e){e=e.define("Radio");e.extend({tmpl:'<div class="hui-radio hui-btn hui-btn-gray<%if(this.selected){%> hui-radio-on<%}%>">;<span class="hui-icon hui-icon-radio"></span>;<input type="radio"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-radio-txt"><%=this.text%></span>;</div>'.split(";"),select:function(c){this.selected=c=!1!=c;var b=this.find("input"),
a=this.getEl();c?(b.attr("checked",!0),a.addClass("hui-radio-on")):(b.removeAttr("checked"),a.removeClass("hui-radio-on"))},val:function(c){if(c)this.value=c,this.find("input").val(c);else return this.value}});return e});
$Define("C.Checkbox","C.AbstractComponent",function(e){e=e.define("Checkbox");e.extend({text:"",value:"",selected:!1,multi:!0,cls:"chkbox",tmpl:'<div class="hui-chkbox hui-btn hui-btn-gray<%if(this.selected){%> hui-chkbox-on<%}%>">;<span class="hui-icon hui-icon-chkbox"></span>;<input type="checkbox"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-chkbox-txt"><%=this.text%></span>;</div>'.split(";"),select:function(c){this.selected=
c=!1!=c;var b=this.find("input"),a=this.getEl();c?(b.attr("checked",!0),a.addClass("hui-chkbox-on")):(b.removeAttr("checked"),a.removeClass("hui-chkbox-on"))},val:function(c){if(c)this.value=c,this.find("input").val(c);else return this.value}});return e});
$Define("C.Select","C.AbstractComponent",function(e){e=e.define("Select");e.extend({text:"\u8bf7\u9009\u62e9...",value:"",radius:"little",optionClick:function(){},defItem:{xtype:"Menu",hidden:!0,markType:"dot",renderTo:"body"},_customEvents:["change"],tmpl:['<div class="hui-select hui-btn hui-btn-gray hui-btn-icon-right">','<span class="hui-icon hui-alt-icon hui-icon-carat-d hui-light"></span>','<input value="<%=this.value%>" name="<%=this.name%>"/>','<span class="hui-btn-txt js-select-txt"><%=this.text%></span>',
"</div>"],listeners:[{name:"click",handler:function(){this.showOptions()}}],doConfig:function(c){var b=this;b.callSuper([c]);for(var a=c.options,d=0,f=a.length;d<f;d++){var e=a[d];if(e.value==c.value){b.text=e.text;e.selected=!0;break}}b.addItem({itemClick:function(a){b.val(a.value)},width:b.width,items:a})},showOptions:function(){this.children[0].show()},val:function(c){if(c){if(this.value!=c){var b=this.children[0],a=b.find('$>[value="'+c+'"]');0<a.length&&(this.trigger("change"),a=a[0],this.value=
c,this.find("input").attr("value",c),this.txt(a.text),b.select(a))}}else return this.value}});return e});
$Define("C.Input","C.AbstractComponent",function(e){e=e.define("Input");e.extend({radius:"little",iconPos:"left",btnPos:"right",tmpl:'<div class="hui-input;<%if(this.hasIcon){%>; hui-input-icon-<%=this.iconPos%>;<%}%>;<%if(this.hasBtn){%>; hui-input-btn-<%=this.btnPos%>;<%}%>">;<%=this.findHtml("$>*")%>;<%if(this.type=="textarea"){%>;<textarea class="js-input";<%}else{%>;<input type="text" class="js-input hui-input-txt";<%}%> ; name="<%=this.name%>";<%if(this.placeholder){%>; placeholder="<%=this.placeholder%>";<%}%>;<%if(this.type=="textarea"){%>;><%=this.value%></textarea>;<%}else{%>; value="<%=this.value%>"/>;<%}%> ;</div>'.split(";"),listeners:[{name:"focus",
el:".js-input",handler:function(){this.getEl().addClass("hui-focus")}},{name:"blur",el:".js-input",handler:function(){this.getEl().removeClass("hui-focus")}}],doConfig:function(c){var b=this;b.callSuper([c]);"search"==b.type?b.icon="search":"textarea"==b.type&&b._listeners.push({name:"input propertychange",el:".js-input",handler:function(){var a=b.find(".js-input");a.css("height",a[0].scrollHeight)}});b.withClear&&b.addItem({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.find("input").val("").focus()}})},
parseItem:function(c){"Icon"==c.xtype?this.hasIcon=!0:"Button"==c.xtype&&(this.hasBtn=!0)},val:function(c){var b=this.find("input,textarea");if(c)b.val(c);else return b.val()},focus:function(){this.find("input").focus()}});return e});$Define("C.Set","C.AbstractComponent",function(e){e=e.define("Set");e.extend({tmpl:'<div class="hui-set">;<h1 class="hui-set-title"><%=this.title%></h1>;<div class="hui-set-content">;<%=this.findHtml("$>*")%>;</div>;</div>'.split(";")});return e});
$Define("C.Field","C.AbstractComponent",function(e){e=e.define("Field");e.extend({tmpl:'<div class="hui-form-field">;<label class="hui-form-left" for="<%=this.forName%>"><%=this.label%></label>;<div class="hui-form-right">;<%=this.text%>;<%=this.findHtml("$>*")%>;</div>;</div>'.split(";")});return e});
$Define("C.Form","C.AbstractComponent",function(e){e=e.define("Form");e.extend({tmpl:'<div class="hui-form">;<form action="">;<div class="hui-form-tips c-error"></div>;<%=this.findHtml("$>*")%>;</form>;</div>'.split(";")});return e});
$Define("C.Tab",["C.AbstractComponent","C.ControlGroup"],function(e,c){var b=e.define("Tab",c);b.extend({defItem:{xtype:"Button",radius:null,isInline:!1,extCls:"js-item",iconPos:"top",shadow:!1},tmpl:['<div class="hui-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){","var width=Math.floor(100/len);%>",'<li class="hui-tab-item" style="width:<%=(i==len-1)?(100-width*(len-1)):width%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%if(this.hasContent){%>",
"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].selected){%> style="display:none"<%}%>>',"<%=this.children[i].content%>","</div>","<%}%>","<%}%>","</div>"],doConfig:function(a){this.callSuper([a]);this.activeType&&(this.defItem.activeCls="hui-btn-active-"+this.activeType)},parseItem:function(a){a.selected&&(a.isActive=!0)},onItemClick:function(a,b){this.hasContent&&this.find(".js-tab-content").hide().eq(b).show();this.callSuper([a,b])},setContent:function(a,
b){a=a||this.getSelected(!0);this.find("js-tab-content").index(a).html(b)}});return b});
$Define("C.Toolbar","C.AbstractComponent",function(e){e=e.define("Toolbar");e.extend({cls:"tbar",defItem:{xtype:"Button",theme:"black",pos:"right",isMini:!0},tmpl:['<div class="hui-tbar<%if(this.type=="header"){%> hui-header<%}else if(this.type=="footer"){%> hui-footer<%}%>">','<%=this.findHtml(">*")%>','<%if(this.title){%><h1 class="hui-tbar-title js-tbar-txt"><%=this.title%></h1><%}%>',"</div>"],parseItem:function(c){"Button"==c.xtype&&(c.shadowSurround=!0,"left"==c.pos?c.extCls=(c.extCls||"")+
" hui-tbar-btn-left":"right"==c.pos&&(c.extCls=(c.extCls||"")+" hui-tbar-btn-right"))}});return e});$Define("C.Tips",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(e,c){var b=e.define("Tips",c);b.extend({theme:"black",timeout:2E3,radius:"normal",tmpl:['<div class="hui-tips<%if(!this.text){%> hui-tips-notxt<%}%>">','<%=this.findHtml("$>*")%>','<%if(this.text){%><span class="hui-tips-txt"><%=this.text%></span><%}%>',"</div>"]});return b});
$Define("C.Dialog",["C.AbstractComponent","C.Popup"],function(e,c){var b=e.define("Dialog",c);$HO.extend(b,{alert:function(a){return new b({contentMsg:a,noClose:!0,noCancel:!0})},confirm:function(a,c){return new b({contentMsg:a,noClose:!0,okCall:function(){return c&&c(!0)},cancelCall:function(){return c&&c(!1)}})},prompt:function(a,c,f){f||(f=c,c="");return new b({contentMsg:a,noClose:!0,items:{xtype:"Input",xrole:"dialog-content",value:c},okCall:function(){var a=this.find("$Input")[0].val();return f&&
f(a)}})}});b.extend({okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",clickHide:!1,radius:"little",tmpl:'<div class="hui-dialog">;<%=this.findHtml("$>[xrole=\'dialog-header\']")%>;<div class="hui-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="hui-body-content">;<h1 class="hui-content-title"><%=this.contentTitle%></h1>;<div class="hui-content-msg"><%=this.contentMsg%></div>;<%=this.findHtml("$>[xrole=\'dialog-content\']")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="hui-body-action">;<%=this.findHtml("$>[xrole=\'dialog-action\']")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(a){var b=this;b.callSuper([a]);a=a.items;b.title&&!b.hasConfig('[xrole="dialog-header"]',a)&&b.addItem({xtype:"Toolbar",title:b.title,theme:"gray",xrole:"dialog-header",extCls:"hui-dialog-header",items:!b.noClose&&{xtype:"Button",radius:"big",icon:"delete",isMini:!1,theme:"gray",pos:"left",click:function(){b.hide()}}});!b.noAction&&!b.hasConfig('[xrole="dialog-action"]',a)&&(a=[],b.noCancel||a.push({xtype:"Button",radius:null,isActive:1==b.activeBtn,text:b.cancelTxt,click:function(){!1!=
(b.cancelCall&&b.cancelCall())&&b.hide()}}),b.noOk||a.push({xtype:"Button",text:b.okTxt,isActive:2==b.activeBtn,radius:null,click:function(){!1!=(b.okCall&&b.okCall())&&b.hide()}}),b.addItem({xtype:"Tab",xrole:"dialog-action",theme:"border-top",notSelect:!0,items:a}))}});return b});
$Define("C.Menu",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(e,c,b){e=e.define("Menu",c);e.extend(b.prototype);e.extend({notDestroy:!0,tmpl:['<div class="hui-menu<%if(this.markType=="dot"){%> hui-menu-mark<%}%>">',"<ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-menu-item<%if(this.children[i].selected){%> hui-item-mark<%}%>">',"<%=this.children[i].getHtml()%>",'<%if(this.markType=="dot"){%><span class="hui-icon-mark"></span><%}%>',"</li>","<%}%>","</ul>",
"</div>"],selectItem:function(a,c){c=!1!=c;"dot"==this.markType?(a.selected=c,a.getEl().parent()[!1==c?"removeClass":"addClass"]("hui-item-mark")):"active"==this.markType?b.prototype.selectItem.call(this,a,c):a.selected=c}});return e});$Define("C.List",["C.AbstractComponent","C.ControlGroup"],function(e,c){var b=e.define("List",c);b.extend({tmpl:['<div class="hui-list">','<div class="hui-list-item c-clear">',"</div>","</div>"]});return b});
$Define("M.AbstractModule","CM.AbstractView",function(e){var c=$HO.createClass();$HO.inherit(c,e,{useCache:!0,cache:function(){},init:function(){},reset:function(){},exit:function(){return!0}});return c});$Define("M.AbstractDao",function(){var e=$HO.createClass();$HO.extend(e.prototype,{ajax:function(c){this.beforeSend(c);c.error=$HF.intercept(this.error,c.error);c.success=$HF.intercept(this.success,c.success);return $.ajax(c)},beforeSend:$H.noop,error:$H.noop,success:$H.noop});return e});
$Define("M.AbstractNavigator","handy.base.Object",function(e){var c=e.createClass();e.extend(c.prototype,{navigate:function(){}});return c});
$Define("M.History","handy.base.HashChange",function(e){var c=$HO.createClass(),b=0;$HO.extend(c.prototype,{initialize:function(a,b){"function"==typeof a&&(b=a,a=null);this.error=b||$H.noop;this.key=a||"handy";this.states=[];e.listen($H.Function.bind(this.stateChange,this))},stateChange:function(){var a=this.getHashParam(),b=a.hKey,c=this.currentKey,e=this.states,h=e[c];if(b==c&&$HO.equals(a.param,h.param))return!1;(e=e[b])?a=e.onStateChange(e.param,!0):($D.warn("hisory state not found"),a=this.error("stateNotFound",
a));!0!=a?(a={hKey:c,param:h.param},this.saveHash(a)):this.currentKey=b},saveState:function(a){var c=this.currentKey=this.key+ ++b;this.states.push(c);this.states[c]=a;this.saveHash({hKey:c,param:a.param})},saveHash:function(a){$HU.setHash("#"+$H.Json.stringify(a))},getHashParam:function(){try{var a=$HU.getHash().replace("#","");return $H.Json.parse(a)}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+b.message)}},getCurrentState:function(){try{var a=this.getHashParam();return this.states[a.hKey]}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+
b.message)}},getPreState:function(){try{for(var a=this.getHashParam().hKey,b=this.states,c=b.length,e=0;e++;e<c)if(b[e]==a)return 0<e?b[b[--e]]:null}catch(h){$H.Debug.error("History.getPreState error:"+h.message,h)}},back:function(){var a=this.getPreState();if(a)a.onStateChange(a.param)}});return c});
$Define("M.ModuleManager",["M.History","CM.AbstractManager"],function(e,c){var b=$HO.createClass();$HO.inherit(b,c,{type:"module",_createMod:function(a){var b=this,c=a.modName;b.modules[c]={waiting:!0};$Require(b.defModPackage+c,function(e){e=new e({renderTo:a.renderTo||b.container,name:c,xtype:c,_id:b.generateId(),extCls:"js-module m-module",hidden:!0});b.modules[c]=e;$H.trigger("afterRender",e.getEl());b.requestMod==c&&b._showMod(e)})},_showMod:function(a){var b=this.modules[this.currentMod];if(!this.navigator||
!this.navigator.navigate(a,b,this))b&&b.hide(),a.show();b&&(b.isActive=!1);a.isActive=!0;this.currentMod=a.name},_destroy:function(a){a.destroy();delete this.modules[a.name]},initialize:function(a){var b=this;a&&(b.conf=a,$HO.extend(b,a),b.container=a.container?$(a.container):$(document.body));b.defModPackage+=".";b.history=new e(function(a,c){b.go(c.param)});b.modules={}},go:function(a,b){"string"==typeof a&&(a={modName:a});var c=a.modName,e=this.currentMod,h=this.modules,g=h[e];if(e==c)g.waiting||
g.reset();else{if(g&&!g.waiting)if(g._forceExit)g._forceExit=!1;else if(!1==g.exit())return!1;this.requestMod=c;(c=h[c])?c.useCache?(this._showMod(c),c.cache(a)):c.waiting||(this._destroy(c),this._createMod(a)):this._createMod(a);!0!=b&&this.history.saveState({onStateChange:$H.Function.bind(this.go,this),param:a});return!0}},back:function(a){a&&(this.modules[this.currentMod]._forceExit=!0);history.back()}});return b});
