/* Handy v1.0.0-dev | 2014-02-03 | zhengyinhui100@gmail.com */
(function(){var d=window.handy,a=window.$,c=window.handy=window.$=function(){};c.version="1.0.0";c.expando="handy"+(c.version+Math.random()).replace(/\D/g,"");c.add=function(e,b,f){f||(f=b,b=null);if(!b||!c.Loader){c.base||(c.base={});var a=[];if(b)if("string"==typeof b)a.push(c.base.Object.namespace(b));else for(var d=0;d<b.length;d++)a.push(c.base.Object.namespace(b[d]));a.push(c);c.base[e]=c[e]=f.apply(window,a)}else c.Loader.require(b,function(){Array.prototype.push.call(arguments,c);c.base[e]=
c[e]=f.apply(window,arguments)})};c.noConflict=function(e){window.$===c&&(window.$=a);e&&window.handy===c&&(window.handy=d);return c};c.noop=function(){}})();
handy.add("Json",function(){var d;d||(d={});(function(){function a(b){return 10>b?"0"+b:b}function c(b){f.lastIndex=0;return f.test(b)?'"'+b.replace(f,function(b){var f=k[b];return"string"===typeof f?f:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function e(b,f){var a,d,k,x,u=g,q,l=f[b];l&&("object"===typeof l&&"function"===typeof l.toJSON)&&(l=l.toJSON(b));"function"===typeof h&&(l=h.call(f,b,l));switch(typeof l){case "string":return c(l);case "number":return isFinite(l)?
String(l):"null";case "boolean":case "null":return String(l);case "object":if(!l)return"null";g+=j;q=[];if("[object Array]"===Object.prototype.toString.apply(l)){x=l.length;for(a=0;a<x;a+=1)q[a]=e(a,l)||"null";k=0===q.length?"[]":g?"[\n"+g+q.join(",\n"+g)+"\n"+u+"]":"["+q.join(",")+"]";g=u;return k}if(h&&"object"===typeof h){x=h.length;for(a=0;a<x;a+=1)"string"===typeof h[a]&&(d=h[a],(k=e(d,l))&&q.push(c(d)+(g?": ":":")+k))}else for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&(k=e(d,l))&&q.push(c(d)+
(g?": ":":")+k);k=0===q.length?"{}":g?"{\n"+g+q.join(",\n"+g)+"\n"+u+"}":"{"+q.join(",")+"}";g=u;return k}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,j,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof d.stringify&&(d.stringify=function(b,f,c){var a;j=g="";if("number"===typeof c)for(a=0;a<c;a+=1)j+=" ";else"string"===typeof c&&(j=c);if((h=f)&&"function"!==typeof f&&("object"!==typeof f||"number"!==typeof f.length))throw Error("JSON.stringify");return e("",{"":b})});"function"!==
typeof d.parse&&(d.parse=function(f,c){function a(b,f){var e,g,d=b[f];if(d&&"object"===typeof d)for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(g=a(d,e),void 0!==g?d[e]=g:delete d[e]);return c.call(b,f,d)}var e;f=String(f);b.lastIndex=0;b.test(f)&&(f=f.replace(b,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(f.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return e=eval("("+f+")"),"function"===typeof c?a({"":e},""):e;throw new SyntaxError("JSON.parse");})})();return d});
handy.add("Object",function(){function d(){var c=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return c&&9>parseInt(c[0])?function(c,b,f){var a=[];if(c.length){b=b||0;for(f=f||c.length;b<f;b++)a.push(c[b])}return a}:function(c,b,f){return Array.prototype.slice.call(c,b||0,f||c.length)}}var a={_alias:{b:"handy.base",c:"handy.component",m:"handy.module"},namespace:function(c,e){var b=null,f,g,d,k;c=a.alias(c);g=c.split(".");b=g[0];b=(d=2==arguments.length)?eval("(function(){if (typeof "+b+' == "undefined"){'+
b+" = {};}return "+b+";})()"):eval("(function(){if (typeof "+b+' != "undefined")return '+b+";})()");f=1;for(k=g.length;f<k;++f){if(f==k-1&&d)b[g[f]]=e;else if(d||b&&b[g[f]])b[g[f]]=b[g[f]]||{};else return;b=b[g[f]]}return b},alias:function(c,e){var b=a._alias;if(e)b[c]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+c+":"+b[c]):b[c]=e;else{if(c){var f=c,g=c.length-1;do{if(b[f])return b[f]+c.substring(g);g=f.lastIndexOf(".")}while(0<g&&(f=f.substring(0,g)));return c}return b}},createClass:function(c){var e=
function(){var b,f;b=this.constructor==e?this:arguments.callee;if(f=b.initialize)return f.apply(b,arguments)};e.prototype.callSuper=function(b,f){a.isArray(b)&&(f=b,b=null);b=b?b.prototype:this.constructor.superProt;var c=arguments.callee.caller.$name;if(b&&(c=b[c],a.isFunction(c)))return c.apply(this,f)};c&&this.namespace(c,e);return e},extend:function(c,e,b){var f=b?b.notCover:!1;b=b?b.notClone:!1;var g=!!c.callSuper,d;for(d in e)if(e.hasOwnProperty(d)){var k=c.hasOwnProperty(d),h=!0===f?k:!1;a.isArray(f)?
h=a.contains(f,d)&&k:a.isFunction(f)&&(h=f(d));h||(k=b?e[d]:a.clone(e[d]),g&&a.isFunction(k)&&(k.$name=d),c[d]=k)}return c},mix:function(c,e,b,f){c.superProt||(c.superProt={});for(var g in e)c.superProt[g]=a.isFunction(e[g])?c.superProt[g]?function(b,f){return function(){f.apply(this,arguments);e[b].apply(this,arguments)}}(g,c.superProt[g]):e[g]:e[g],c[g]||(c[g]=e[g]);b&&a.extend(c,b);e.toString!=e.constructor.prototype.toString&&(c.superProt.toString=function(){e.toString.apply(c,arguments)});f&&
(c.prototype&&e.prototype)&&a.inherit(c,e,null,f);return c},inherit:function(c,e,b,f,g){var d=function(){};d.prototype=e.prototype;g=g||{notCover:!0};a.extend(c,e,g);c.prototype=new d;c.prototype.constructor=c;c.superClass=e;c.superProt=e.prototype;if(e._onInherit)try{e._onInherit(c)}catch(k){}b&&a.extend(c,b);f&&a.extend(c.prototype,f)},isFunction:function(c){return"[object Function]"===window.Object.prototype.toString.call(c)},isArray:function(c){return"[object Array]"===window.Object.prototype.toString.call(c)},
equals:function(c,e){if(typeof c==typeof e){if("object"!=typeof c)return c===e;if(c===e)return!0;if(a.isArray(c)&&a.isArray(e)){if(c.length!=e.length)return!1;for(var b=0,f=c.length;b<f;b++)if(!a.equals(c[b],e[b]))return!1;return!0}if(!a.isArray(c)&&!a.isArray(e)){if(a.count(c)!=a.count(e))return!1;for(b in c)if(void 0==e[b]||!a.equals(c[b],e[b]))return!1;return!0}}return!1},clone:function(c){if(null==c||"object"!=typeof c)return c;var e=c.constructor;if(e!=window.Object&&e!=window.Array)return c;
if(e==window.Date||e==window.RegExp||e==window.Function||e==window.String||e==window.Number||e==window.Boolean)return new e(c);try{var b=new e,f;for(f in c)b[f]=a.clone(c[f]);return b}catch(g){return c}},isEmpty:function(c){if(a.isArray(c))return 0==c.length;for(var e in c)return!1;return!0},each:function(c,e,b){var f,g=0,d=c.length,k=void 0===d||a.isFunction(c);if(b)if(k)for(f in c){if(!1===e.apply(c[f],b))break}else for(;g<d&&!1!==e.apply(c[g++],b););else if(k)for(f in c){if(!1===e.call(c[f],f,
c[f]))break}else for(;g<d&&!1!==e.call(c[g],g,c[g++]););return c},contains:function(c,e){var b=!1;a.each(c,function(f,c){if(a.equals(c,e))return b=!0,!1});return b},largeThan:function(c,e){if("object"==typeof c&&"object"==typeof e){var b=!0;a.each(e,function(f){if(!a.equals(e[f],c[f]))return b=!1});return b}},count:function(c){if(a.isArray(c))return c.length;var e=0,b;for(b in c)e++;return e},toArray:d,generateMethod:function(c,e,b){e=a.isArray(e)?e:e.split(",");for(var f=0;f<e.length;f++){var g=
e[f];c[g]=b(g)}}},d=d();return a});
handy.add("Browser","handy.base.Object",function(d){var a={},c={};d.generateMethod(c,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(f){var c=a[b];return!f&&"string"===typeof c&&/^[\d\.]+$/.test(c)?parseInt(c):c}});d=window.navigator.userAgent;var e;(e=d.match(/MSIE ([\d.]+)/))?a.ie=e[1]:(e=d.match(/Firefox\/([\d.]+)/))?a.firefox=e[1]:(e=d.match(/Chrome\/([\d.]+)/))?
a.chrome=e[1]:(e=d.match(/Opera.([\d.]+)/))?a.opera=e[1]:(e=d.match(/Version\/([\d.]+).*Safari/))?a.safari=e[1]:0;/windows|win32/i.test(d)?a.windows=!0:/linux/i.test(d)?a.linux=!0:/macintosh/i.test(d)?a.mac=!0:0;/trident/i.test(d)?a.trident=!0:/webkit/i.test(d)?a.webkit=!0:/gecko/i.test(d)?a.gecko=!0:/presto/i.test(d)?a.presto=!0:0;/MetaSr/i.test(d)?a.sogou=!0:/Maxthon/i.test(d)?a.maxthon=!0:/TencentTraveler/i.test(d)?a.tt=!0:/TheWorld/i.test(d)?a.theWorld=!0:/360[S|E]E/i.test(d)?a.is360=!0:0;var b;
if((b=d.match(/AppleWebKit\/([\d.]*)/))&&b[1])if(/ Mobile\//.test(d)&&d.match(/iPad|iPod|iPhone/)){a.mobile="ios";if((b=d.match(/OS ([^\s]*)/))&&b[1])a.ios=b[1].replace("_",".");if((b=d.match(/iPad|iPod|iPhone/))&&b[0])a[b[0].toLowerCase()]=a.ios}else if(/ Android/i.test(d)){if(/Mobile/.test(d)&&(a.mobile="android"),(b=d.match(/Android ([^\s]*);/))&&b[1])a.android=b[1]}else if(b=d.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))a.mobile=b[0].toLowerCase();var f;try{if(a.ie){var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
g&&(f=g.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(g=navigator.plugins["Shockwave Flash"])){var j=g.description.split(" ");e=0;for(var k=j.length;e<k;e++)if(0<parseInt(j[e])){f=j[e];break}}}catch(h){}a.flash=f?f:null;return c});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(d,a,c){function e(f,a,e){e=e||"log";if(a||b.showInPage){var d=c.expando+"debugDiv",h=top.document;(a=h.getElementById(d))?a.style.display="block":(a=h.createElement("DIV"),a.id=d,a.innerHTML='<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\''+
h.body.offsetHeight+'px\';">\u5168\u5c4f</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\'100px\';">\u6536\u8d77</a><div style="padding-top:5px"></div>',a.style.position="absolute",a.style.width=h.body.offsetWidth-20+"px",a.style.left=0,a.style.top=0,a.style.right=0,a.style.height="100px",a.style.backgroundColor="#aaa",a.style.fontSize="12px",a.style.padding="10px",a.style.overflow="auto",a.style.zIndex=9999999,a.style.opacity=0.5,a.style.filter="alpha(opacity=50)",h.body.appendChild(a));
d=h.createElement("DIV");d.innerHTML=e+" : "+JSON.stringify(f,null,"<br/>");a=a.getElementsByTagName("DIV")[0];a.innerHTML=a.innerHTML+d.innerHTML+"<br/>"}try{console[e](f)}catch(n){}}var b={level:0,LOG_LEVEL:1,INFO_LEVEL:2,WARN_LEVEL:3,ERROR_LEVEL:4,DEBUG_LEVEL:5,log:function(f,a){b.level>b.LOG_LEVEL||e(f,!!a,"log")},info:function(a,c){this.level>b.INFO_LEVEL||e(a,!!c,"info")},warn:function(a,c){b.level>b.WARN_LEVEL||e(a,!!c,"warn")},error:function(a,c){b.level>b.ERROR_LEVEL||e(a,!!c,"error")},time:function(a,
c,d){b.level>b.INFO_LEVEL||(c?e((a||"")+", \u6d88\u8017\u65f6\u95f4:"+((new Date).getTime()-(b.lastTime||0)),!!d):b.lastTime=(new Date).getTime())},debug:function(a){if(!(b.level>b.DEBUG_LEVEL)&&!1!==a)debugger}};return b});
handy.add("Function",function(d){return{bind:function(a,c,e){var b=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(b,arguments);return a.apply(c,b)}},intercept:function(a,c,e,b){return d.Object.isFunction(a)&&d.Object.isFunction(c)?function(){var f=e||this,d={},j=arguments;d.scope=b;d.target=f;d.method=a;return!1!=c.apply(d,j)?a.apply(f,j):!1}:a}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(d,a,c,e){function b(b){function c(b){return/\.(css|js)$/.test(b)?s[b]&&"loaded"==s[b].status:p.urlMap&&p.urlMap[b]?p.urlMap[b].chkExist():a.namespace(b)}if("string"==typeof b)return c(b);for(var f=[],e=0,d=b.length;e<d;e++){var g=c(b[e]);if(g)f.push(g);else return!1}return f}function f(b,a){function c(){c.isCalled||(c.isCalled=!0,clearTimeout(h),a())}if("SCRIPT"===b.nodeName){var f=b,e=c;f.onload=f.onerror=
f.onreadystatechange=function(){/loaded|complete|undefined/.test(f.readyState)&&(f.onload=f.onerror=f.onreadystatechange=null,k.removeChild(f),f=null,setTimeout(e,0))}}else{var j=c;window.hasOwnProperty("attachEvent")?b.attachEvent("onload",j):setTimeout(function(){g(b,j)},0)}var h=setTimeout(function(){d.error("Time is out:",b.src);c()},p.timeout)}function g(b,a){if(!a.isCalled){var c;if(h)b.sheet&&(c=!0);else if(b.sheet)try{b.sheet.cssRules&&(c=!0)}catch(f){if("SecurityError"===f.name||"NS_ERROR_DOM_SECURITY_ERR"===
f.name)c=!0}setTimeout(function(){c?a():g(b,a)},1)}}function j(a){p.showLoading(!1);s[a].status="loaded";p.traceLog&&d.info("Loader Response: "+a);for(a=n.length-1;0<=a;a--){var c=n[a],f=b(c.deps);f&&(n.splice(a,1),c.callback.apply(null,f))}}var k=document.head||document.getElementsByTagName("head")[0]||document.documentElement,h=navigator.userAgent.indexOf("AppleWebKit"),n=[],s={},p={traceLog:!0,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,c,f){2==arguments.length&&(f=
c,c=[]);p.require(c,function(){var c;if("function"==typeof f)try{c=f.apply(null,arguments)}catch(e){d.error("Loader "+b+":factory define error:"+e.message);return}else c=f;a.namespace(b,c)})},require:function(a,g){for(var h="string"==typeof a?[a]:a,u=[],q=[],l=!0,r=0,v=h.length;r<v;r++){var m=h[r],t=b(m);t?q.push(t):(u.push(m),l&&(l=!1,n.push({deps:h,callback:g})),p.traceLog&&d.info("Resource not found: "+m))}if(0==u.length)return g&&g.apply(null,q),0==q.length?q[0]:q;l=!1;h=0;for(q=u.length;h<q;h++)if(r=
u[h],!s[r]){l=r;m=p.urlMap&&p.urlMap[l]&&p.urlMap[l].url;if(!m){v="";l=e.Object.alias(l);m=p.rootPath;if("string"==typeof m)v=m;else if("object"==typeof m)for(t in t=void 0,m)0==l.indexOf(t)&&(v=m[t],l=l.replace(t,""));else v="";m=/.css$/.test(l)?0==l.indexOf("/")?l:"/css/"+l:/.js$/.test(l)?l:l.replace(/\./g,"/")+".js";0!=m.indexOf("/")&&(m="/"+m);m=v+m}l=!0;s[r]={id:r,status:"loading"};v=c.bind(j,null,r);if(/.css$/.test(m))a:{r=m;m=k.getElementsByTagName("link");for(t=0;t<m.length;t++){var y=m[t].href;
!p.skinNode&&0<=y.indexOf(p.skinName)&&(p.skinNode=m[t]);if(0<=y.indexOf(r)||0<=r.indexOf(y))break a}m=document.createElement("link");m.rel="stylesheet";m.href=r;f(m,v);k.insertBefore(m,p.skinNode);p.traceLog&&d.info("Loader request:"+r)}else r=m,m=document.createElement("script"),m.async="async",m.src=r,m.type="text/javascript",f(m,v),k.appendChild(m),p.traceLog&&d.info("Loader request:"+r)}l&&p.showLoading(!0)}};return p});
handy.add("Listener",function(){var d={};return{add:function(a,c){var e=d[a];e||(e=d[a]=[]);e.push(c)},remove:function(a,c){var e=d[a];if(!e)return!1;if(c)for(var b=0,f=e.length;b<f;b++){if(e[b]==c)return e.splice(b,1),!0}else delete d[a];return!1},fire:function(a,c){var e=d[a];if(!e)return!1;for(var b=Array.prototype.slice.call(arguments,1),f=0,g=e.length;f<g;f++){if(f==g-1)return e[f].apply(null,b);e[f].apply(null,b)}}}});
handy.add("Date",function(){var d=window.Date,a={getWeek:function(a,e){var b=a.getDay();e&&(b=(b+(e%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[b]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new d(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var e=new d(a.getFullYear(),0,0);a=new d(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-e.getTime())/864E5)},getDayIndexOfYear:function(a){var e=new d("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-e.getTime())/864E5)},format:function(c,e){e=e||"yyyy-MM-dd HH:mm:ss";c=c||new d;var b=c.getHours(),f=Math.floor((c.getMonth()+3)/3),b={"y+":c.getFullYear(),"M+":c.getMonth()+1,"d+":c.getDate(),"h+":0==b%12?12:b%12,"H+":b,"m+":c.getMinutes(),"s+":c.getSeconds(),"w+":a.getWeek(c),"q+":f,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][f-1],"S+":c.getMilliseconds()},g;for(g in b)RegExp("("+g+")").test(e)&&(f=RegExp.$1.length,e=e.replace(RegExp.$1,1==f?b[g]:("00"+
b[g]).slice(-f)));return e},parse:function(a,e){for(var b=(e||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),f=a.match(/\d+/g),g=new d,j=0;j<f.length;j++){var k=b[j],h=parseInt(f[j]);switch(k){case "yyyy":g.setFullYear(h);break;case "MM":g.setMonth(h-1);break;case "dd":g.setDate(h);break;case "HH":g.setHours(h);break;case "mm":g.setMinutes(h);break;case "ss":g.setSeconds(h);break;case "SS":g.setMilliseconds(h)}}return g}};return a});
handy.add("String",function(){var d={stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(a){var c=document.createElement("div");a=document.createTextNode(a);c.appendChild(a);return c.innerHTML},unescapeHTML:function(a){var c=document.createElement("div");c.innerHTML=d.stripTags(a);return c.childNodes[0].nodeValue},decodeHTML:function(a){a=a.replace(/&lt;/gi,"<");a=a.replace(/&gt;/gi,">");a=a.replace(/&quot;/gi,'"');a=a.replace(/&apos;/gi,"'");a=a.replace(/<\/?br>/gi,"\n");
a=a.replace(/&amp;/gi,"&");return a=a.replace(/&nbsp;/gi," ")},encodeHTML:function(a){a=a.replace(/&/gi,"&amp;");a=a.replace(/</gi,"&lt;");a=a.replace(/>/gi,"&gt;");a=a.replace(/\"/gi,"&quot;");a=a.replace(/\'/gi,"&apos;");a=a.replace(/\n/gi,"</br>");return a=a.replace(/ /gi,"&nbsp;")},trim:function(a){return a=a.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(a,c){c||(c=/[,%\'\"\/\\;|\<\>\^]/);return-1<a.search(c)},len:function(a){return a.replace(/[^\x00-\xff]/g,"**").length},left:function(a,
c,e){if(d.len(a)>c){!0===e?e=2:0<e||(e=0);var b=0,f=0;for(c-=e;f<c;)255<a.charCodeAt(b)?f+=2:f++,b++;a=a.substring(0,b);for(b=0;b<e;b++)a+="."}return a},isNumber:function(a){return 0==a.search(/^\d+$/g)},hasChn:function(a){return/[\u4E00-\u9FA5]+/.test(a)},isChn:function(a){return/^[\u4E00-\u9FA5]+$/.test(a)},addParam:function(a,c){c&&(a+=(-1<a.indexOf("?")?"&":"?")+c);return a}};return d});
handy.add("Cookie",function(){return{get:function(d,a){var c=d+"=",e="",b=document.cookie;if(0<b.length){var f=b.indexOf(c);-1!=f&&(f+=c.length,c=b.indexOf(";",f),-1==c&&(c=b.length),e=b.substring(f,c),a||(e=unescape(e)))}return e},set:function(d,a,c){var e=[];void 0!=d&&void 0!=a&&e.push(d+"="+escape(a));c&&(void 0!=c.path&&e.push("path="+c.path),void 0!=c.domain&&e.push("domain="+c.domain),void 0!=c.expires&&e.push("expires="+c.expires),c.secure&&e.push("secure"));document.cookie=e.join(";")},del:function(d){var a=
new Date;a.setTime(a.getTime()-1);document.cookie=d+"=;expires="+a.toGMTString()}}});handy.add("Util",function(){var d=0;return{isWindow:function(a){return null!=a&&a==a.window},getUuid:function(){return d++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(a){var c=top.location.hash;0<=c.indexOf("#")&&(a=c.replace(/#[^\?]*/,a));top.location.hash=a}}});
handy.add("Template",function(d){var a={},c=/^=/,e="".trim,b={openTag:"<%",closeTag:"%>",_add:function(b){return e?"$r+="+b+";\n":"$r.push("+b+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return b._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=b._add(a.replace(c,"")+'||""'));return a+"\n"},_compile:function(a){var c="var $r="+(e?'""':"[]")+";\n";d.Object.each(a.split(b.openTag),function(a,f){var e=
f.split(b.closeTag);1==e.length?c+=b._parseHtml(e[0]):(c+=b._parseScript(e[0]),e[1]&&(c+=b._parseHtml(e[1])))});c+="return "+(e?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(c,e){var j,k,h;if("string"==typeof c)j=c;else if(j=c.tmpl,h=c.id)if(a[h])k=a[h];else{var n=document.getElementById(h);n&&(j=(n.value||n.innerHTML).replace(/\s/g,""))}if(!k){if(!j){d.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}k=b._compile(j);h&&(a[h]=k)}return e?k(e):k}};return b});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(d,a,c){function e(b){if(b==n)return!1;var a=h.contentWindow.document;a.open();a.write("<!doctype html><html><body>"+b+"</body></html>");a.close();n=b;d.log("set:"+h.contentWindow.document.body.innerText)}function b(){var b=a.getHash(),c=h.contentWindow.document.body.innerText;b!=n?(e(b),f(b)):c!=n&&(d.log("update:"+h.contentWindow.document.body.innerText),a.setHash(c))}function f(b){var a=w.listeners,c;for(c in a)a[c](b)}var g,
j=0,k=document,h,n,s=k.documentMode,p="onhashchange"in window&&(void 0===s||7<s),w={delay:50,listen:function(d,n){if(!g)if(g=!0,w.listeners={},p)$(window).on("hashchange",function(){f(a.getHash())});else h=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(k.body)[0],$(h).one("load",function(){e(a.getHash());setInterval(b,w.delay)});if(n in w.listeners)throw Error("Duplicate name");n=n||c.expando+ ++j;w.listeners[n]=d;return n},unListen:function(b){for(var a in w.listeners)(!b||
b==a)&&delete w.listeners[a]}};return w});handy.add("Support",function(d){if(6==d.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}return{}})(function(d){Hui=H=$H=d.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HL=$H.Listener;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};d=window.$;d.fn.remove=$HF.intercept(d.fn.remove,function(){$HL.fire("removeEl",this.target)})})(handy);
$Define("c.ComponentManager",function(){var d=$HO.createClass(),a=$H.expando+"_cmp_",c={},e={};$C=d;$HO.extend(d,{init:function(){$HL.add("afterRender",function(b){d.afterRender(b)});$HL.add("removeEl",function(b){d.destroy(b)})},registerType:function(b,a){c[b]=a;a.prototype.xtype=b;$C[b]=a},getClass:function(b){return c[b]},register:function(b){e[b.getId()]=b},unregister:function(b){delete e[b.getId()]},eachInEl:function(b,a){b.find(".js-component").each(function(b,c){c=$(c);var e=c.attr("id"),e=
d.get(e);a(e)})},afterRender:function(b){d.eachInEl(b,function(b){b.afterRender()})},destroy:function(b){d.eachInEl(b,function(b){b.destroy(!0)})},generateId:function(b,c){var d=a+(b||$H.Util.getUuid());if(!0!=c&&e[d])$D.error("id\u91cd\u590d:"+d);else return d},get:function(b){return e[b]||e[d.generateId(b,!0)]}});d.init();return d});
$Define("c.AbstractComponent","c.ComponentManager",function(d){var a=$HO.createClass(),c=/^(<[a-zA-Z]+)/,e=/(class=")/;$H.CM=a;$HO.extend(a,{define:function(b,c){var e=$HO.createClass();$HO.inherit(e,c||a,null,null,{notCover:function(b){return"define"==b}});d.registerType(b,e);return e},html:function(b){b.autoRender=!1;return(new this(b)).getHtml()}});$HO.extend(a.prototype,{xtype:"AbstractComponent",autoRender:!0,renderBy:"append",activeCls:"hui-active",_customEvents:["beforeRender","afterRender",
"show","hide","destroy"],_defaultEvents:["click","mouseover","focus"],initialize:function(b){this.doConfig(b);this.parseItems();this.initHtml();this.fire("beforeRender");!1!=this.autoRender&&(this.renderTo[this.renderBy](this.getHtml()),this.afterRender(),this.hidden||this.show());d.register(this)},doConfig:function(b){var a=this;a.params=b;a.settings=$HO.extend({},b);var c=a.listeners?a.listeners.concat():[];b.listeners&&(c=c.concat(b.listeners));for(var e=a.constructor.superClass;e;){var d=e.prototype.listeners;
d&&(c=c.concat(d));e=e.superClass}a._listeners=c;$HO.extend(a,b,{notCover:function(c){var e=a[c],d=$HO.contains(a._customEvents,c),g=$HO.contains(a._defaultEvents,c);(d||g)&&a._listeners.push({type:c,notEl:d,handler:b[c]});if(null!=e&&"object"==typeof e||$HO.isFunction(e))return!0}});b.defItem&&$HO.extend(a.defItem,b.defItem);a.renderTo=b.renderTo?$(b.renderTo):$(document.body);a.children=[]},initHtml:function(){"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));var b=
$H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this),a=this.getId(),b=b.replace(c,'$1 id="'+a+'"'),b=b.replace(e,"$1"+this.getExtCls()),a="",a="visibility"==this.displayMode?a+"visibility:hidden;":a+"display:none;";void 0!=this.width&&(a+="width:"+this.width+("number"==typeof this.width?"px;":";"));void 0!=this.height&&(a+="height:"+("number"==typeof this.height?"px;":";"));a&&(b=b.replace(c,'$1 style="'+a+'"'));this.html=b},getId:function(){return this._id||(this._id=d.generateId(this.cid))},getEl:function(){return this._container},
getHtml:function(b){if(!b)return this.html;b=">*"==b?this.children:this.find(b);for(var a=[],c=0;c<b.length;c++)a.push(b[c].getHtml());return a.join("")},getExtCls:function(){var b=["js-component"];this.extCls&&b.push(this.extCls);this.theme&&b.push("hui-"+this.cls+"-"+this.theme);this.disabled&&b.push("hui-disable");this.radius&&b.push("hui-radius-"+this.radius);this.isMini&&b.push("hui-mini");this.shadow&&b.push("hui-shadow");this.shadowSurround&&b.push("hui-shadow-surround");this.shadowOverlay&&
b.push("hui-shadow-overlay");this.shadowInset&&b.push("hui-shadow-inset");this.isActive&&b.push(this.activeCls);this.isFocus&&b.push("hui-focus");this.isInline&&b.push("hui-inline");return 0<b.length?b.join(" ")+" ":""},afterRender:function(){this.rendered||(this.callChild(),this._container=$("#"+this.getId()),this.rendered=!0,!0!=this.notListen&&this.initListeners(),this.disabled&&this.suspendListeners(),this.fire("afterRender"),delete this.html)},hide:function(){if(this.showed){this.showed=!1;var b=
this.getEl();"visibility"==this.displayMode?b.css({visibility:"hidden"}):b.hide();this.withMask&&this.unmask();this.fire("hide")}},show:function(b){var c=this;c.showed||(!b&&c.delayShow?setTimeout(function(){a.prototype.show.call(c,!0)},0):(c.showed=!0,b=c.getEl(),"visibility"==c.displayMode?b.css({visibility:"visible"}):b.show(),c.withMask&&c.mask(),c.fire("show"),c.callChild()))},enable:function(){this.resumeListeners();this.getEl().removeClass("hui-disable")},disable:function(){this.suspendListeners();
this.getEl().addClass("hui-disable")},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},mask:function(){a.mask||(a.mask=$('<div class="hui-mask" style="display:none;"></div>').appendTo(document.body));a.mask.show()},unmask:function(){a.mask&&a.mask.hide()},fire:function(b){for(var a=this._listeners.length-1;0<=a;a--){var c=this._listeners[a];if(c.type==b){var e=c.delegation;e({obj:this,data:c.data})}}},listen:function(b){var a=this,
c=b.type,e=a._listeners,d=b.el,h=b.method||"bind",n=b.selector,s=b.data,p=b.delegation=function(){if(!0!=a.isSuspend)return b.handler.apply(b.scope||a,arguments)};$H.Browser.mobile()&&"click"==c&&(c="touchend");d=d?"string"==typeof d?a.find(d):d:a.getEl();if(!b.notEl)if(n)if(s)d[h](n,c,s,p);else d[h](n,c,p);else if(s)d[h](c,s,p);else d[h](c,p);e.push(b)},unlisten:function(b){var a=b.type,c=b.el||this.getEl(),e="delegate"==b.method?"undelegate":"unbind",d=b.selector,h;$H.Browser.mobile()&&"click"==
a&&(a="touchend");for(var n=this._listeners.length-1;0<=n;n--){var s=this._listeners[n];if(s.handler==b.handler){h=s.delegation;this._listeners.splice(n,1);break}}if(!b.notEl)if(d)c[e](d,a,h);else c[e](a,h)},initListeners:function(){if(!this.listened){this.listened=!0;var b=this._listeners;this._listeners=[];for(var a=b.length-1;0<=a;a--)this.listen(b[a]);this.callChild()}},clearListeners:function(){for(var b=this._listeners,a=b.length-1;0<=a;a--)this.unlisten(b[a]);this.callChild()},suspendListeners:function(){this.isSuspend||
(this.isSuspend=!0,this.callChild())},resumeListeners:function(){this.isSuspend&&(this.isSuspend=!1,this.callChild())},each:function(b,a){$HO.each(this.children,b,a)},match:function(b){if("*"==b)return!0;var a,c,e;b=b.replace(/^([^\[]+)/,'[xtype="$1"]');for(var d=/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;a=d.exec(b);)if(c=a[1],e=a[2],a=eval(a[3]),"="===e?this[c]!=a:this[c]==a)return!1;return!0},find:function(b,a){var c=this;if(0!=b.indexOf("$"))return c.getEl().find(b);a=a||[];if(0<b.indexOf(","))return $HO.each(b.split(","),
function(b,e){a=a.concat(c.find(e))}),a;var e=1==b.indexOf(">"),d=b.replace(/^\$>?\s?/,""),h=d.search(/\s|>/),n;0<h&&(n=d.substring(h),d=d.substring(0,h));c.each(function(c,g){g.match(d)&&(n?g.find("$"+n,a):a.push(g));e||g.find(b,a)});return a},index:function(){var b=this,a=b.parent;if(a){var c;a.each(function(a,e){if(e==b)return c=a,!1});return c}return null},callChild:function(b,a){var c=this.children;$HO.isArray(b)&&(a=b,b=null);b=b||arguments.callee.caller.$name;for(var e=0,d=c.length;e<d;e++){var h=
c[e];h[b].apply(h,a)}},add:function(a){this.children.push(a);a.parent=this},remove:function(a){for(var c=this.children,e=!1,d=0,k=c.length;d<k;d++)c[d]==a&&(c.splice(d,1),a.destroy(),e=!0);return e},addItem:function(a){var c=this.settings,e=c.items;e?$HO.isArray(e)||(c.items=[e]):c.items=[];c.items.push(a)},parseItem:function(){},parseItems:function(){this.icon&&this.addItem({xtype:"Icon",name:this.icon});var a=this.settings.items;if(a)for(var a=a.length?a:[a],c=0,e=a.length;c<e;c++){var j=a[c];this.defItem&&
$HO.extend(j,this.defItem,{notCover:!0});this.parseItem(j);var k=d.getClass(j.xtype);j.autoRender=!1;j=new k(j);this.add(j)}},destroy:function(a){d.unregister(this);this.fire("destroy");this.clearListeners();a||(this.callChild(),this.getEl().remove());delete this.params;delete this.settings;delete this._container;delete this.renderTo;delete this._listeners;delete this.children}});return a});
$Define("c.Popup","c.AbstractComponent",function(d){var a=d.define("Popup");$HO.extend(a.prototype,{delayShow:!0,clickHide:!0,withMask:!0,shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.getHtml("$>*")%></div>'],listeners:[{type:"click",el:$(document),handler:function(){this.clickHide&&this.hide()}}],show:function(){this.showAtCenter();this.callSuper(a.superClass)},showAtCenter:function(){var a=this.getEl(),e=document,b=((e.documentElement.offsetWidth||e.body.offsetWidth)-a.width())/2,e=((e.documentElement.clientHeight||
e.body.clientHeight)-a.height())/2+e.body.scrollTop,e=10>e?window.screen.height/2-200:e;a.css({left:b+"px",top:e-(this.offsetTop||0)+"px"})}});return a});
$Define("c.ControlGroup",["c.ComponentManager","c.AbstractComponent"],function(d,a){var c=a.define("ControlGroup");$HO.extend(c.prototype,{radius:"little",defItem:{xtype:"Button",extCls:"js-item",radius:null,shadow:!1,isInline:!1},tmpl:['<div class="hui-ctrlgp<%if(this.direction=="h"){%> hui-ctrlgp-h<%}else{%> hui-ctrlgp-v<%}%>">','<%=this.getHtml("$>*")%>',"</div>"],listeners:[{type:"click",selector:".js-item",method:"delegate",handler:function(a){var b=$(a.currentTarget),b=d.get(b.attr("id")).index();
this.onItemClick(a,b)}}],setActiveItem:function(a){this.callChild("unactive");("number"==typeof a?this.children[a]:this.find(a)[0]).active()},getActiveItem:function(a){var b,c;this.each(function(a,e){if(e.isActive)return c=e,b=a,!1});return a?b:c},val:function(a){if(a){var b=a.split(",");this.each(function(a,c){c.setChecked($HO.contains(b,c.value))})}else return a=this.find("$>[checked=true]"),b=[],$HO.each(a,function(a,c){b.push(c.value)}),b.join(",")},onItemClick:function(a,b){this.itemClick&&this.itemClick(this.children[b],
b)}});return c});$Define("c.Icon","c.AbstractComponent",function(d){d=d.define("Icon");$HO.extend(d.prototype,{hasBg:!0,tmpl:['<span class="hui-icon hui-icon-<%=this.name%><%if(this.hasBg){%> hui-icon-bg<%}%>"></span>']});return d});
$Define("c.Button","c.AbstractComponent",function(d){d=d.define("Button");$HO.extend(d.prototype,{iconPos:"left",theme:"gray",activeCls:"hui-btn-blue",cls:"btn",defItem:{xtype:"Icon",hasBg:!0},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a href="javascript:;" hidefocus="true" class="hui-btn,<%if(!this.text){%> hui-btn-icon-notxt<%},if(this.isBack){%> hui-btn-back<%},if(this.hasIcon&&this.text){%> hui-btn-icon-<%=this.iconPos%><%}%>">,<span class="hui-btn-txt"><%=this.text%></span>,<%=this.getHtml(">*")%>,</a>'.split(","),parseItem:function(a){"Icon"==
a.xtype&&(this.hasIcon=!0)}});return d});
$Define("c.Radio","c.AbstractComponent",function(d){d=d.define("Radio");$HO.extend(d.prototype,{text:"",value:"",checked:!1,tmpl:'<div class="hui-radio hui-btn hui-btn-gray<%if(this.checked){%> hui-radio-on<%}%>">;<span class="hui-icon hui-icon-radio"></span>;<input type="radio"<%if(this.checked){%> checked=true<%}%>;<%if(this.disabled){%> disabled="<%=this.disabled%>"<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-radio-txt"><%=this.text%></span>;</div>'.split(";"),listeners:[{type:"click",
handler:function(){this.setChecked()}}],setChecked:function(a){a=!1!=a;var c;a&&((c=this.parent)&&"ControlGroup"==c.xtype)&&c.callChild([!1]);this.checked=a;c=this.find("input");var e=this.getEl();a?(c.attr("checked",!0),e.addClass("hui-radio-on")):(c.removeAttr("checked"),e.removeClass("hui-radio-on"))},val:function(a){if(a)this.value=a,this.find("input").val(a);else return this.value}});return d});
$Define("c.Checkbox","c.AbstractComponent",function(d){d=d.define("Checkbox");$HO.extend(d.prototype,{text:"",value:"",checked:!1,cls:"chkbox",tmpl:'<div class="hui-chkbox hui-btn hui-btn-gray<%if(this.checked){%> hui-chkbox-on<%}%>">;<span class="hui-icon hui-icon-chkbox"></span>;<input type="checkbox"<%if(this.checked){%> checked=true<%}%>;<%if(this.disabled){%> disabled="<%=this.disabled%>"<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-chkbox-txt"><%=this.text%></span>;</div>'.split(";"),
listeners:[{type:"click",handler:function(){this.setChecked(!this.checked)}}],setChecked:function(a){this.checked=a=!1!=a;var c=this.find("input"),e=this.getEl();a?(c.attr("checked",!0),e.addClass("hui-chkbox-on")):(c.removeAttr("checked"),e.removeClass("hui-chkbox-on"))},val:function(a){if(a)this.value=a,this.find("input").val(a);else return this.value}});return d});
$Define("c.Select","c.AbstractComponent",function(d){d=d.define("Select");$HO.extend(d.prototype,{text:"\u8bf7\u9009\u62e9...",defaultValue:"",value:"",tmpl:['<div class="hui-select hui-btn hui-btn-gray hui-btn-icon-right">','<span class="hui-icon hui-icon-carat-d hui-icon-bg"></span>','<select value="<%=this.value%>"></select>','<span class="hui-btn-txt"><%=this.text%></span>',"</div>"],listeners:[{type:"click",handler:function(){this.showOptions()}}],showOptions:function(){},val:function(a){if(a)this.value=
a,this.find("input").val(a);else return this.value}});return d});
$Define("c.Input","c.AbstractComponent",function(d){d=d.define("Input");$HO.extend(d.prototype,{radius:"little",iconPos:"left",btnPos:"right",tmpl:['<div class="hui-input<%if(this.hasIcon){%> hui-input-icon-<%=this.iconPos%><%}%>','<%if(this.hasBtn){%> hui-input-btn-<%=this.btnPos%><%}%>">','<%=this.getHtml(">*")%>','<input type="text" class="js-input hui-input-txt" value="<%=this.value%>"<%if(this.placeholder){%> placeholder="<%=this.placeholder%><%}%>"/>',"</div>"],listeners:[{type:"focus",el:".js-input",
handler:function(){this.getEl().addClass("hui-focus")}},{type:"blur",el:".js-input",handler:function(){this.getEl().removeClass("hui-focus")}}],doConfig:function(a){this.callSuper([a]);"search"==this.type&&(this.icon="search");this.withClear&&this.addItem({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.find("input").val("").focus()}})},parseItem:function(a){"Icon"==a.xtype?this.hasIcon=!0:"Button"==a.xtype&&(this.hasBtn=!0)},val:function(a){var c=this.find("input");if(a)c.val(a);
else return c.val()},focus:function(){this.find("input").focus()}});return d});
$Define("c.Tab",["c.AbstractComponent","c.ControlGroup"],function(d,a){var c=d.define("Tab",a);$HO.extend(c.prototype,{defItem:{xtype:"Button",radius:null,isInline:!1,extCls:"js-item",iconPos:"top",shadow:!1},tmpl:['<div class="hui-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-tab-item" style="width:<%=100/len%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].active){%> style="display:none"<%}%>>',
"<%=this.children[i].content%>","</div>","<%}%>","</div>"],onItemClick:function(a,b){this.setActiveItem(b);this.find(".js-tab-content").hide().eq(b).show();this.callSuper([a,b])}});return c});
$Define("c.Toolbar","c.AbstractComponent",function(d){d=d.define("Toolbar");$HO.extend(d.prototype,{cls:"tbar",tmpl:['<div class="hui-tbar<%if(this.type=="header"){%> hui-header<%}else if(this.type=="footer"){%> hui-footer<%}%>">','<%=this.getHtml(">*")%>','<%if(this.title){%><h1 class="hui-tbar-title"><%=this.title%></h1><%}%>',"</div>"],parseItem:function(a){"Button"==a.xtype&&(a.shadowSurround=!0,"left"==a.pos?a.extCls=(a.extCls||"")+"hui-tbar-btn-left":"right"==a.pos&&(a.extCls=(a.extCls||"")+
"hui-tbar-btn-right"))}});return d});
$Define("c.Popup","c.AbstractComponent",function(d){var a=d.define("Popup");$HO.extend(a.prototype,{delayShow:!0,clickHide:!0,withMask:!0,shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.getHtml("$>*")%></div>'],listeners:[{type:"click",el:$(document),handler:function(){this.clickHide&&this.hide()}}],show:function(){this.showAtCenter();this.callSuper(a.superClass)},showAtCenter:function(){var a=this.getEl(),e=document,b=((e.documentElement.offsetWidth||e.body.offsetWidth)-a.width())/2,e=((e.documentElement.clientHeight||
e.body.clientHeight)-a.height())/2+e.body.scrollTop,e=10>e?window.screen.height/2-200:e;a.css({left:b+"px",top:e-(this.offsetTop||0)+"px"})}});return a});
$Define("c.Dialog",["c.AbstractComponent","c.Popup"],function(d,a){var c=d.define("Dialog",a);$HO.extend(c,{alert:function(a){return new c({title:"&nbsp;",contentMsg:a,noClose:!0,noCancel:!0})},confirm:function(a,b){return new c({title:"&nbsp;",contentMsg:a,noClose:!0,okCall:function(){return b&&b(!0)},cancelCall:function(){return b&&b(!1)}})},prompt:function(a,b,d){d||(d=b,b="");return new c({title:"&nbsp;",contentMsg:a,noClose:!0,items:{xtype:"Input",role:"content",value:b},okCall:function(){var a=
this.find("$Input")[0].val();return d&&d(a)}})}});$HO.extend(c.prototype,{okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",clickHide:!1,radius:"normal",cls:"dialog",tmpl:'<div class="hui-dialog">;<%=this.getHtml("$>Toolbar")%>;<div class="hui-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="hui-body-content">;<h1 class="hui-content-title"><%=this.contentTitle%></h1>;<div class="hui-content-msg"><%=this.contentMsg%></div>;<%=this.getHtml("$>[role=\'content\']")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="hui-body-action">;<%=this.getHtml("$>Button")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(a){var b=this;b.callSuper([a]);b.title&&b.addItem({xtype:"Toolbar",title:b.title,theme:"gray",extCls:"hui-dialog-header",items:!b.noClose&&{xtype:"Button",radius:"big",extCls:"hui-tbar-btn-left",icon:"delete",click:function(){b.hide()}}});b.noAction||(b.noOk||b.addItem({xtype:"Button",isActive:!0,text:b.okTxt,isInline:!1,click:function(){!1!=(b.okCall&&b.okCall())&&b.hide()}}),b.noCancel||b.addItem({xtype:"Button",isInline:!1,text:b.cancelTxt,click:function(){!1!=(b.cancelCall&&
b.cancelCall())&&b.hide()}}))}});return c});$Define("c.Menu",["c.AbstractComponent","c.Popup","c.ControlGroup"],function(d,a,c){d=d.define("Menu",a);$HO.extend(d.prototype,c.prototype,{notCover:!0});$HO.extend(d.prototype,{tmpl:['<div class="hui-menu">',"<ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-menu-item">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","</div>"]});return d});
$Define("m.AbstractModule","handy.base.Object",function(d){var a=d.createClass();d.extend(a.prototype,{useCache:!0,cache:function(){},init:function(){},beforeRender:function(){},render:function(){},afterRender:function(){},reset:function(){},exit:function(){return!0},destroy:function(){},initialize:function(a){this.conf=a},getHtml:function(){if(!this.tmpl)return"";"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));return $H.Template.tmpl({id:this.name,tmpl:this.tmpl},
this)},getEl:function(){return this._container}});return a});$Define("m.AbstractDao",function(){var d=$HO.createClass();$HO.extend(d.prototype,{ajax:function(a){this.beforeSend(a);a.error=$HF.intercept(this.error,a.error);a.success=$HF.intercept(this.success,a.error);return $.ajax(a)},beforeSend:$H.noop,error:$H.noop,success:$H.noop});return d});$Define("m.AbstractView",function(){var d=$HO.createClass();$HO.extend(d.prototype,{})});
$Define("m.AbstractNavigator","handy.base.Object",function(d){var a=d.createClass();d.extend(a.prototype,{navigate:function(){}});return a});
$Define("m.History","handy.base.HashChange",function(d){var a=$HO.createClass(),c=0;$HO.extend(a.prototype,{initialize:function(a){this.key=a||"handy";this.states=[];d.listen($H.Function.bind(this.stateChange,this))},stateChange:function(){var a=this.getHashParam().hKey;if(a=this.states[a])a.onStateChange(a.param,!0)},saveState:function(a){var b=this.key+ ++c;this.states.push(b);this.states[b]=a;$HU.setHash("#"+JSON.stringify({hKey:b,param:a.param}))},getHashParam:function(){try{var a=$HU.getHash().replace("#",
"");return JSON.parse(a)}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+b.message)}},getCurrentState:function(){try{var a=this.getHashParam();return this.states[a.hKey]}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+b.message)}},getPreState:function(){try{for(var a=JSON.parse($HU.getHash().replace("#","")).hKey,b=this.states,c=b.length,d=0;d++;d<c)if(b[d]==a)return 0<d?b[b[--d]]:null}catch(j){$H.Debug.error("History.getPreState error:"+j.message)}},back:function(){var a=
this.getPreState();if(a)a.onStateChange(a.param)}});return a});
$Define("m.ModuleManager","m.History",function(d){var a=$HO.createClass();$HO.extend(a.prototype,{_getModWrapper:function(a){a="modWrapper_"+a;var e=$("#"+a);0==e.length&&(e=$('<div id="'+a+'"></div>'));return e},_createMod:function(a){var e=this,b=a.modName;e.modules[b]={waiting:!0};$Require(e.defModPackage+b,function(d){d=new d;d.name=b;d.mType=b;d.initParam=a;e.modules[b]=d;d.init(a);d.beforeRender();var g=e._getModWrapper(b);d._container=g;var j=d.renderTo?$(d.renderTo):e.container;g.html(d.getHtml());
j.append(g);$HL.fire("afterRender",g);d.render(g);e.currentMod==b&&e._showMod(d);d.afterRender()})},_showMod:function(a){if(this.navigator&&this.navigator.navigate(a,this))return!1;this._hideAll();a._container.show();a.isActive=!0},_hideAll:function(){var a=this.modules,e;for(e in a)a[e]._container.hide(),a[e].isActive=!1},initialize:function(a){a&&(this.conf=a,$HO.extend(this,a),this.container=a.container?$(a.container):$(document.body));this.defModPackage+=".";this.history=new d;this.modules={}},
go:function(a,e){var b=a.modName,d=this.currentMod,g=this.modules,j=g[d];if(d==b)j.waiting||j.reset();else{if(j&&!j.waiting&&!j.exit())return!1;(d=g[b])?d.useCache?(this._showMod(d),d.cache(a)):d.waiting||(d.destroy(),this._createMod(a)):this._createMod(a);!0!=e&&this.history.saveState({onStateChange:$H.Function.bind(this.go,this),param:a});this.currentMod=b}}});return a});
