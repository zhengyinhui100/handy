/* Handy v1.0.0-dev | 2014-02-06 | zhengyinhui100@gmail.com */
(function(){var d=window.handy,c=window.$,b=window.handy=window.$=function(){};b.version="1.0.0";b.expando="handy"+(b.version+Math.random()).replace(/\D/g,"");b.add=function(a,e,c){c||(c=e,e=null);if(!e||!b.Loader){b.base||(b.base={});var g=[];if(e)if("string"==typeof e)g.push(b.base.Object.namespace(e));else for(var d=0;d<e.length;d++)g.push(b.base.Object.namespace(e[d]));g.push(b);b.base[a]=b[a]=c.apply(window,g)}else b.Loader.require(e,function(){Array.prototype.push.call(arguments,b);b.base[a]=
b[a]=c.apply(window,arguments)})};b.noConflict=function(a){window.$===b&&(window.$=c);a&&window.handy===b&&(window.handy=d);return b};b.noop=function(){}})();
handy.add("Json",function(){var d;d||(d={});(function(){function c(a){return 10>a?"0"+a:a}function b(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var e=j[a];return"string"===typeof e?e:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(e,c){var f,d,j,x,u=g,q,l=c[e];l&&("object"===typeof l&&"function"===typeof l.toJSON)&&(l=l.toJSON(e));"function"===typeof h&&(l=h.call(c,e,l));switch(typeof l){case "string":return b(l);case "number":return isFinite(l)?
String(l):"null";case "boolean":case "null":return String(l);case "object":if(!l)return"null";g+=k;q=[];if("[object Array]"===Object.prototype.toString.apply(l)){x=l.length;for(f=0;f<x;f+=1)q[f]=a(f,l)||"null";j=0===q.length?"[]":g?"[\n"+g+q.join(",\n"+g)+"\n"+u+"]":"["+q.join(",")+"]";g=u;return j}if(h&&"object"===typeof h){x=h.length;for(f=0;f<x;f+=1)"string"===typeof h[f]&&(d=h[f],(j=a(d,l))&&q.push(b(d)+(g?": ":":")+j))}else for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&(j=a(d,l))&&q.push(b(d)+
(g?": ":":")+j);j=0===q.length?"{}":g?"{\n"+g+q.join(",\n"+g)+"\n"+u+"}":"{"+q.join(",")+"}";g=u;return j}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,k,j={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof d.stringify&&(d.stringify=function(e,b,c){var f;k=g="";if("number"===typeof c)for(f=0;f<c;f+=1)k+=" ";else"string"===typeof c&&(k=c);if((h=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return a("",{"":e})});"function"!==
typeof d.parse&&(d.parse=function(a,b){function c(a,e){var f,g,d=a[e];if(d&&"object"===typeof d)for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&(g=c(d,f),void 0!==g?d[f]=g:delete d[f]);return b.call(a,e,d)}var f;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return f=eval("("+a+")"),"function"===typeof b?c({"":f},""):f;throw new SyntaxError("JSON.parse");})})();return d});
handy.add("Object",function(){function d(){var b=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return b&&9>parseInt(b[0])?function(a,e,b){var c=[];if(a.length){e=e||0;for(b=b||a.length;e<b;e++)c.push(a[e])}return c}:function(a,e,b){return Array.prototype.slice.call(a,e||0,b||a.length)}}var c={_alias:{b:"handy.base",c:"handy.component",m:"handy.module"},namespace:function(b,a){var e=null,f,g,d,j;b=c.alias(b);g=b.split(".");e=g[0];e=(d=2==arguments.length)?eval("(function(){if (typeof "+e+' == "undefined"){'+
e+" = {};}return "+e+";})()"):eval("(function(){if (typeof "+e+' != "undefined")return '+e+";})()");f=1;for(j=g.length;f<j;++f){if(f==j-1&&d)e[g[f]]=a;else if(d||e&&e[g[f]])e[g[f]]=e[g[f]]||{};else return;e=e[g[f]]}return e},alias:function(b,a){var e=c._alias;if(a)e[b]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+b+":"+e[b]):e[b]=a;else{if(b){var f=b,g=b.length-1;do{if(e[f])return e[f]+b.substring(g);g=f.lastIndexOf(".")}while(0<g&&(f=f.substring(0,g)));return b}return e}},createClass:function(b){var a=
function(){var e,b;e=this.constructor==a?this:arguments.callee;if(b=e.initialize)return b.apply(e,arguments)};a.prototype.callSuper=function(a,b){c.isArray(a)&&(b=a,a=null);a=a?a.prototype:this.constructor.superProt;var g=arguments.callee.caller.$name;if(a&&(g=a[g],c.isFunction(g)))return g.apply(this,b)};b&&this.namespace(b,a);return a},extend:function(b,a,e){var f=e?e.notCover:!1;e=e?e.notClone:!1;var g=!!b.callSuper,d;for(d in a)if(a.hasOwnProperty(d)){var j=b.hasOwnProperty(d),h=!0===f?j:!1;c.isArray(f)?
h=c.contains(f,d)&&j:c.isFunction(f)&&(h=f(d));h||(j=e?a[d]:c.clone(a[d]),g&&c.isFunction(j)&&(j.$name=d),b[d]=j)}return b},mix:function(b,a,e,f){b.superProt||(b.superProt={});for(var g in a)b.superProt[g]=c.isFunction(a[g])?b.superProt[g]?function(e,b){return function(){b.apply(this,arguments);a[e].apply(this,arguments)}}(g,b.superProt[g]):a[g]:a[g],b[g]||(b[g]=a[g]);e&&c.extend(b,e);a.toString!=a.constructor.prototype.toString&&(b.superProt.toString=function(){a.toString.apply(b,arguments)});f&&
(b.prototype&&a.prototype)&&c.inherit(b,a,null,f);return b},inherit:function(b,a,e,f,g){var d=function(){};d.prototype=a.prototype;g=g||{notCover:!0};c.extend(b,a,g);b.prototype=new d;b.prototype.constructor=b;b.superClass=a;b.superProt=a.prototype;if(a._onInherit)try{a._onInherit(b)}catch(j){}e&&c.extend(b,e);f&&c.extend(b.prototype,f)},isFunction:function(b){return"[object Function]"===window.Object.prototype.toString.call(b)},isArray:function(b){return"[object Array]"===window.Object.prototype.toString.call(b)},
equals:function(b,a){if(typeof b==typeof a){if("object"!=typeof b)return b===a;if(b===a)return!0;if(c.isArray(b)&&c.isArray(a)){if(b.length!=a.length)return!1;for(var e=0,f=b.length;e<f;e++)if(!c.equals(b[e],a[e]))return!1;return!0}if(!c.isArray(b)&&!c.isArray(a)){if(c.count(b)!=c.count(a))return!1;for(e in b)if(void 0==a[e]||!c.equals(b[e],a[e]))return!1;return!0}}return!1},clone:function(b){if(null==b||"object"!=typeof b)return b;var a=b.constructor;if(a!=window.Object&&a!=window.Array)return b;
if(a==window.Date||a==window.RegExp||a==window.Function||a==window.String||a==window.Number||a==window.Boolean)return new a(b);try{var e=new a,f;for(f in b)e[f]=c.clone(b[f]);return e}catch(g){return b}},isEmpty:function(b){if(c.isArray(b))return 0==b.length;for(var a in b)return!1;return!0},each:function(b,a,e){var f,g=0,d=b.length,j=void 0===d||c.isFunction(b);if(e)if(j)for(f in b){if(!1===a.apply(b[f],e))break}else for(;g<d&&!1!==a.apply(b[g++],e););else if(j)for(f in b){if(!1===a.call(b[f],f,
b[f]))break}else for(;g<d&&!1!==a.call(b[g],g,b[g++]););return b},contains:function(b,a){var e=!1;c.each(b,function(b,g){if(c.equals(g,a))return e=!0,!1});return e},largeThan:function(b,a){if("object"==typeof b&&"object"==typeof a){var e=!0;c.each(a,function(f){if(!c.equals(a[f],b[f]))return e=!1});return e}},count:function(b){if(c.isArray(b))return b.length;var a=0,e;for(e in b)a++;return a},toArray:d,generateMethod:function(b,a,e){a=c.isArray(a)?a:a.split(",");for(var f=0;f<a.length;f++){var g=
a[f];b[g]=e(g)}}},d=d();return c});
handy.add("Browser","handy.base.Object",function(d){var c={},b={};d.generateMethod(b,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(a){return function(e){var b=c[a];return!e&&"string"===typeof b&&/^[\d\.]+$/.test(b)?parseInt(b):b}});d=window.navigator.userAgent;var a;(a=d.match(/MSIE ([\d.]+)/))?c.ie=a[1]:(a=d.match(/Firefox\/([\d.]+)/))?c.firefox=a[1]:(a=d.match(/Chrome\/([\d.]+)/))?
c.chrome=a[1]:(a=d.match(/Opera.([\d.]+)/))?c.opera=a[1]:(a=d.match(/Version\/([\d.]+).*Safari/))?c.safari=a[1]:0;/windows|win32/i.test(d)?c.windows=!0:/linux/i.test(d)?c.linux=!0:/macintosh/i.test(d)?c.mac=!0:0;/trident/i.test(d)?c.trident=!0:/webkit/i.test(d)?c.webkit=!0:/gecko/i.test(d)?c.gecko=!0:/presto/i.test(d)?c.presto=!0:0;/MetaSr/i.test(d)?c.sogou=!0:/Maxthon/i.test(d)?c.maxthon=!0:/TencentTraveler/i.test(d)?c.tt=!0:/TheWorld/i.test(d)?c.theWorld=!0:/360[S|E]E/i.test(d)?c.is360=!0:0;var e;
if((e=d.match(/AppleWebKit\/([\d.]*)/))&&e[1])if(/ Mobile\//.test(d)&&d.match(/iPad|iPod|iPhone/)){c.mobile="ios";if((e=d.match(/OS ([^\s]*)/))&&e[1])c.ios=e[1].replace("_",".");if((e=d.match(/iPad|iPod|iPhone/))&&e[0])c[e[0].toLowerCase()]=c.ios}else if(/ Android/i.test(d)){if(/Mobile/.test(d)&&(c.mobile="android"),(e=d.match(/Android ([^\s]*);/))&&e[1])c.android=e[1]}else if(e=d.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))c.mobile=e[0].toLowerCase();var f;try{if(c.ie){var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
g&&(f=g.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(g=navigator.plugins["Shockwave Flash"])){var k=g.description.split(" ");a=0;for(var j=k.length;a<j;a++)if(0<parseInt(k[a])){f=k[a];break}}}catch(h){}c.flash=f?f:null;return b});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(d,c,b){function a(a,c,d){d=d||"log";if(c||e.showInPage){var j=b.expando+"debugDiv",h=top.document;(c=h.getElementById(j))?c.style.display="block":(c=h.createElement("DIV"),c.id=j,c.innerHTML='<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\''+
h.body.offsetHeight+'px\';">\u5168\u5c4f</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\'100px\';">\u6536\u8d77</a><div style="padding-top:5px"></div>',c.style.position="absolute",c.style.width=h.body.offsetWidth-20+"px",c.style.left=0,c.style.top=0,c.style.right=0,c.style.height="100px",c.style.backgroundColor="#aaa",c.style.fontSize="12px",c.style.padding="10px",c.style.overflow="auto",c.style.zIndex=9999999,c.style.opacity=0.5,c.style.filter="alpha(opacity=50)",h.body.appendChild(c));
j=h.createElement("DIV");j.innerHTML=d+" : "+JSON.stringify(a,null,"<br/>");c=c.getElementsByTagName("DIV")[0];c.innerHTML=c.innerHTML+j.innerHTML+"<br/>"}try{console[d](a)}catch(n){}}var e={level:0,LOG_LEVEL:1,INFO_LEVEL:2,WARN_LEVEL:3,ERROR_LEVEL:4,DEBUG_LEVEL:5,log:function(b,c){e.level>e.LOG_LEVEL||a(b,!!c,"log")},info:function(b,c){this.level>e.INFO_LEVEL||a(b,!!c,"info")},warn:function(b,c){e.level>e.WARN_LEVEL||a(b,!!c,"warn")},error:function(b,c){e.level>e.ERROR_LEVEL||a(b,!!c,"error")},time:function(b,
c,d){e.level>e.INFO_LEVEL||(c?a((b||"")+", \u6d88\u8017\u65f6\u95f4:"+((new Date).getTime()-(e.lastTime||0)),!!d):e.lastTime=(new Date).getTime())},debug:function(a){if(!(e.level>e.DEBUG_LEVEL)&&!1!==a)debugger}};return e});
handy.add("Function",function(d){return{bind:function(c,b,a){var e=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(e,arguments);return c.apply(b,e)}},intercept:function(c,b,a,e){return d.Object.isFunction(c)&&d.Object.isFunction(b)?function(){var f=a||this,d={},k=arguments;d.scope=e;d.target=f;d.method=c;return!1!=b.apply(d,k)?c.apply(f,k):!1}:c}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(d,c,b,a){function e(a){function e(a){return/\.(css|js)$/.test(a)?s[a]&&"loaded"==s[a].status:p.urlMap&&p.urlMap[a]?p.urlMap[a].chkExist():c.namespace(a)}if("string"==typeof a)return e(a);for(var b=[],f=0,d=a.length;f<d;f++){var g=e(a[f]);if(g)b.push(g);else return!1}return b}function f(a,e){function b(){b.isCalled||(b.isCalled=!0,clearTimeout(h),e())}if("SCRIPT"===a.nodeName){var c=a,f=b;c.onload=c.onerror=
c.onreadystatechange=function(){/loaded|complete|undefined/.test(c.readyState)&&(c.onload=c.onerror=c.onreadystatechange=null,j.removeChild(c),c=null,setTimeout(f,0))}}else{var k=b;window.hasOwnProperty("attachEvent")?a.attachEvent("onload",k):setTimeout(function(){g(a,k)},0)}var h=setTimeout(function(){d.error("Time is out:",a.src);b()},p.timeout)}function g(a,e){if(!e.isCalled){var b;if(h)a.sheet&&(b=!0);else if(a.sheet)try{a.sheet.cssRules&&(b=!0)}catch(c){if("SecurityError"===c.name||"NS_ERROR_DOM_SECURITY_ERR"===
c.name)b=!0}setTimeout(function(){b?e():g(a,e)},1)}}function k(a){p.showLoading(!1);s[a].status="loaded";p.traceLog&&d.info("Loader Response: "+a);for(a=n.length-1;0<=a;a--){var b=n[a],c=e(b.deps);c&&(n.splice(a,1),b.callback.apply(null,c))}}var j=document.head||document.getElementsByTagName("head")[0]||document.documentElement,h=navigator.userAgent.indexOf("AppleWebKit"),n=[],s={},p={traceLog:!0,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(a,e,b){2==arguments.length&&(b=
e,e=[]);p.require(e,function(){var e;if("function"==typeof b)try{e=b.apply(null,arguments)}catch(f){d.error("Loader "+a+":factory define error:"+f.message);return}else e=b;c.namespace(a,e)})},require:function(c,g){for(var h="string"==typeof c?[c]:c,u=[],q=[],l=!0,r=0,v=h.length;r<v;r++){var m=h[r],t=e(m);t?q.push(t):(u.push(m),l&&(l=!1,n.push({deps:h,callback:g})),p.traceLog&&d.info("Resource not found: "+m))}if(0==u.length)return g&&g.apply(null,q),0==q.length?q[0]:q;l=!1;h=0;for(q=u.length;h<q;h++)if(r=
u[h],!s[r]){l=r;m=p.urlMap&&p.urlMap[l]&&p.urlMap[l].url;if(!m){v="";l=a.Object.alias(l);m=p.rootPath;if("string"==typeof m)v=m;else if("object"==typeof m)for(t in t=void 0,m)0==l.indexOf(t)&&(v=m[t],l=l.replace(t,""));else v="";m=/.css$/.test(l)?0==l.indexOf("/")?l:"/css/"+l:/.js$/.test(l)?l:l.replace(/\./g,"/")+".js";0!=m.indexOf("/")&&(m="/"+m);m=v+m}l=!0;s[r]={id:r,status:"loading"};v=b.bind(k,null,r);if(/.css$/.test(m))a:{r=m;m=j.getElementsByTagName("link");for(t=0;t<m.length;t++){var y=m[t].href;
!p.skinNode&&0<=y.indexOf(p.skinName)&&(p.skinNode=m[t]);if(0<=y.indexOf(r)||0<=r.indexOf(y))break a}m=document.createElement("link");m.rel="stylesheet";m.href=r;f(m,v);j.insertBefore(m,p.skinNode);p.traceLog&&d.info("Loader request:"+r)}else r=m,m=document.createElement("script"),m.async="async",m.src=r,m.type="text/javascript",f(m,v),j.appendChild(m),p.traceLog&&d.info("Loader request:"+r)}l&&p.showLoading(!0)}};return p});
handy.add("Listener",function(){var d={};return{add:function(c,b){var a=d[c];a||(a=d[c]=[]);a.push(b)},remove:function(c,b){var a=d[c];if(!a)return!1;if(b)for(var e=0,f=a.length;e<f;e++){if(a[e]==b)return a.splice(e,1),!0}else delete d[c];return!1},fire:function(c,b){var a=d[c];if(!a)return!1;for(var e=Array.prototype.slice.call(arguments,1),f=0,g=a.length;f<g;f++){if(f==g-1)return a[f].apply(null,e);a[f].apply(null,e)}}}});
handy.add("Date",function(){var d=window.Date,c={getWeek:function(b,a){var e=b.getDay();a&&(e=(e+(a%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[e]},isWeeken:function(b){return 0==b.getDay()||6==b.getDay()},getDaysInMonth:function(b){b=new d(b.getFullYear(),b.getMonth()+1,0);return b.getDate()},getDaysInYear:function(b){var a=new d(b.getFullYear(),0,0);b=new d(b.getFullYear()+1,0,0);return Math.floor((b.getTime()-a.getTime())/864E5)},getDayIndexOfYear:function(b){var a=new d("1/1/"+
b.getFullYear());return Math.ceil((b.getTime()-a.getTime())/864E5)},format:function(b,a){a=a||"yyyy-MM-dd HH:mm:ss";b=b||new d;var e=b.getHours(),f=Math.floor((b.getMonth()+3)/3),e={"y+":b.getFullYear(),"M+":b.getMonth()+1,"d+":b.getDate(),"h+":0==e%12?12:e%12,"H+":e,"m+":b.getMinutes(),"s+":b.getSeconds(),"w+":c.getWeek(b),"q+":f,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][f-1],"S+":b.getMilliseconds()},g;for(g in e)RegExp("("+g+")").test(a)&&(f=RegExp.$1.length,a=a.replace(RegExp.$1,1==f?e[g]:("00"+
e[g]).slice(-f)));return a},parse:function(b,a){for(var e=(a||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),c=b.match(/\d+/g),g=new d,k=0;k<c.length;k++){var j=e[k],h=parseInt(c[k]);switch(j){case "yyyy":g.setFullYear(h);break;case "MM":g.setMonth(h-1);break;case "dd":g.setDate(h);break;case "HH":g.setHours(h);break;case "mm":g.setMinutes(h);break;case "ss":g.setSeconds(h);break;case "SS":g.setMilliseconds(h)}}return g}};return c});
handy.add("String",function(){var d={stripTags:function(c){return c.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(c){var b=document.createElement("div");c=document.createTextNode(c);b.appendChild(c);return b.innerHTML},unescapeHTML:function(c){var b=document.createElement("div");b.innerHTML=d.stripTags(c);return b.childNodes[0].nodeValue},decodeHTML:function(c){c=c.replace(/&lt;/gi,"<");c=c.replace(/&gt;/gi,">");c=c.replace(/&quot;/gi,'"');c=c.replace(/&apos;/gi,"'");c=c.replace(/<\/?br>/gi,"\n");
c=c.replace(/&amp;/gi,"&");return c=c.replace(/&nbsp;/gi," ")},encodeHTML:function(c){c=c.replace(/&/gi,"&amp;");c=c.replace(/</gi,"&lt;");c=c.replace(/>/gi,"&gt;");c=c.replace(/\"/gi,"&quot;");c=c.replace(/\'/gi,"&apos;");c=c.replace(/\n/gi,"</br>");return c=c.replace(/ /gi,"&nbsp;")},trim:function(c){return c=c.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(c,b){b||(b=/[,%\'\"\/\\;|\<\>\^]/);return-1<c.search(b)},len:function(c){return c.replace(/[^\x00-\xff]/g,"**").length},left:function(c,
b,a){if(d.len(c)>b){!0===a?a=2:0<a||(a=0);var e=0,f=0;for(b-=a;f<b;)255<c.charCodeAt(e)?f+=2:f++,e++;c=c.substring(0,e);for(e=0;e<a;e++)c+="."}return c},isNumber:function(c){return 0==c.search(/^\d+$/g)},hasChn:function(c){return/[\u4E00-\u9FA5]+/.test(c)},isChn:function(c){return/^[\u4E00-\u9FA5]+$/.test(c)},addParam:function(c,b){b&&(c+=(-1<c.indexOf("?")?"&":"?")+b);return c}};return d});
handy.add("Cookie",function(){return{get:function(d,c){var b=d+"=",a="",e=document.cookie;if(0<e.length){var f=e.indexOf(b);-1!=f&&(f+=b.length,b=e.indexOf(";",f),-1==b&&(b=e.length),a=e.substring(f,b),c||(a=unescape(a)))}return a},set:function(d,c,b){var a=[];void 0!=d&&void 0!=c&&a.push(d+"="+escape(c));b&&(void 0!=b.path&&a.push("path="+b.path),void 0!=b.domain&&a.push("domain="+b.domain),void 0!=b.expires&&a.push("expires="+b.expires),b.secure&&a.push("secure"));document.cookie=a.join(";")},del:function(d){var c=
new Date;c.setTime(c.getTime()-1);document.cookie=d+"=;expires="+c.toGMTString()}}});handy.add("Util",function(){var d=0;return{isWindow:function(c){return null!=c&&c==c.window},getUuid:function(){return d++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(c){var b=top.location.hash;0<=b.indexOf("#")&&(c=b.replace(/#[^\?]*/,c));top.location.hash=c}}});
handy.add("Template",function(d){var c={},b=/^=/,a="".trim,e={openTag:"<%",closeTag:"%>",_add:function(e){return a?"$r+="+e+";\n":"$r.push("+e+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return e._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=e._add(a.replace(b,"")+'||""'));return a+"\n"},_compile:function(b){var c="var $r="+(a?'""':"[]")+";\n";d.Object.each(b.split(e.openTag),function(a,b){var f=
b.split(e.closeTag);1==f.length?c+=e._parseHtml(f[0]):(c+=e._parseScript(f[0]),f[1]&&(c+=e._parseHtml(f[1])))});c+="return "+(a?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(a,b){var k,j,h;if("string"==typeof a)k=a;else if(k=a.tmpl,h=a.id)if(c[h])j=c[h];else{var n=document.getElementById(h);n&&(k=(n.value||n.innerHTML).replace(/\s/g,""))}if(!j){if(!k){d.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}j=e._compile(k);h&&(c[h]=j)}return b?j(b):j}};return e});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(d,c,b){function a(a){if(a==n)return!1;var e=h.contentWindow.document;e.open();e.write("<!doctype html><html><body>"+a+"</body></html>");e.close();n=a;d.log("set:"+h.contentWindow.document.body.innerText)}function e(){var e=c.getHash(),b=h.contentWindow.document.body.innerText;e!=n?(a(e),f(e)):b!=n&&(d.log("update:"+h.contentWindow.document.body.innerText),c.setHash(b))}function f(a){var e=w.listeners,b;for(b in e)e[b](a)}var g,
k=0,j=document,h,n,s=j.documentMode,p="onhashchange"in window&&(void 0===s||7<s),w={delay:50,listen:function(d,n){if(!g)if(g=!0,w.listeners={},p)$(window).on("hashchange",function(){f(c.getHash())});else h=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(j.body)[0],$(h).one("load",function(){a(c.getHash());setInterval(e,w.delay)});if(n in w.listeners)throw Error("Duplicate name");n=n||b.expando+ ++k;w.listeners[n]=d;return n},unListen:function(a){for(var e in w.listeners)(!a||
a==e)&&delete w.listeners[e]}};return w});handy.add("Support",function(d){if(6==d.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}return{}})(function(d){Hui=H=$H=d.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HL=$H.Listener;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};d=window.$;d.fn.remove=$HF.intercept(d.fn.remove,function(){$HL.fire("removeEl",this.target)})})(handy);
$Define("c.ComponentManager",function(){var d=$HO.createClass(),c=$H.expando+"_cmp_",b={},a={};$C=d;$HO.extend(d,{init:function(){$HL.add("afterRender",function(a){d.afterRender(a)});$HL.add("removeEl",function(a){d.destroy(a)})},registerType:function(a,c){b[a]=c;c.prototype.xtype=a;$C[a]=c},getClass:function(a){return b[a]},register:function(e){a[e.getId()]=e},unregister:function(e){delete a[e.getId()]},eachInEl:function(a,b){a.find(".js-component").each(function(a,e){e=$(e);var c=e.attr("id"),c=
d.get(c);b(c)})},afterRender:function(a){d.eachInEl(a,function(a){a.afterRender()})},destroy:function(a){d.eachInEl(a,function(a){a.destroy(!0)})},generateId:function(e,b){var d=c+(e||$H.Util.getUuid());if(!0!=b&&a[d])$D.error("id\u91cd\u590d:"+d);else return d},get:function(e){return a[e]||a[d.generateId(e,!0)]}});d.init();return d});
$Define("c.AbstractComponent","c.ComponentManager",function(d){var c=$HO.createClass(),b=/^(<[a-zA-Z]+)/;$C.AbstractComponent=c;$HO.extend(c,{define:function(a,e){var b=$HO.createClass();$HO.inherit(b,e||c,null,null,{notCover:function(a){return"define"==a}});d.registerType(a,b);return b},extend:function(a){var e=this.prototype;$HO.extend(e,a,{notCover:function(b){if("_customEvents"==b||"listeners"==b)return e[b]=(a[b]||[]).concat(e[b]||[]),!0;if("xtype"==b||"constructor"==b)return!0}})},html:function(a){a.autoRender=
!1;return(new this(a)).getHtml()}});$HO.extend(c.prototype,{xtype:"AbstractComponent",autoRender:!0,renderBy:"append",activeCls:"hui-active",_customEvents:["beforeRender","afterRender","show","hide","destroy"],_defaultEvents:["click","mouseover","focus"],initialize:function(a){this.doConfig(a);this.parseItems();this.initHtml();this.fire("beforeRender");!1!=this.autoRender&&(this.renderTo[this.renderBy](this.getHtml()),this.afterRender(),this.hidden||this.show());d.register(this)},doConfig:function(a){var e=
this;e.params=a;e.settings=$HO.clone(a);var b=e.listeners?e.listeners.concat():[];a.listeners&&(b=b.concat(a.listeners));e._listeners=b;$HO.extend(e,a,{notCover:function(b){var c=e[b],d=$HO.contains(e._customEvents,b),f=$HO.contains(e._defaultEvents,b);(d||f)&&e._listeners.push({type:b,notEl:d,handler:a[b]});if(null!=c&&"object"==typeof c||$HO.isFunction(c))return!0}});e.cls||(e.cls=e.xtype.toLowerCase());a.defItem&&$HO.extend(e.defItem,a.defItem);e.renderTo=a.renderTo?$(a.renderTo):$(document.body);
e.children=[]},initHtml:function(){"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));var a=$H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this),e=this.getId();this.html=a=a.replace(b,'$1 id="'+e+'"')},initStyle:function(){var a=this.getEl();a.addClass(this.getExtCls());var e=this.style||{};"visibility"==this.displayMode?e.visibility="hidden":e.display="none";void 0!=this.width&&(e.width=this.width);void 0!=this.height&&(e.height=this.height);a.css(e)},getId:function(){return this._id||
(this._id=d.generateId(this.cid))},getEl:function(){return this._container},getHtml:function(a){if(!a)return this.html;a=">*"==a?this.children:this.find(a);for(var e=[],b=0;b<a.length;b++)e.push(a[b].getHtml());return e.join("")},getExtCls:function(){var a=["js-component"];this.extCls&&a.push(this.extCls);this.theme&&a.push("hui-"+this.cls+"-"+this.theme);this.disabled&&a.push("hui-disable");this.radius&&a.push("hui-radius-"+this.radius);this.isMini&&a.push("hui-mini");this.shadow&&a.push("hui-shadow");
this.shadowSurround&&a.push("hui-shadow-surround");this.shadowOverlay&&a.push("hui-shadow-overlay");this.shadowInset&&a.push("hui-shadow-inset");this.isActive&&a.push(this.activeCls);this.isFocus&&a.push("hui-focus");this.isInline&&a.push("hui-inline");return 0<a.length?a.join(" ")+" ":""},afterRender:function(){this.rendered||(this.callChild(),this._container=$("#"+this.getId()),this.rendered=!0,this.initStyle(),!0!=this.notListen&&this.initListeners(),this.disabled&&this.suspendListeners(),this.fire("afterRender"),
delete this.html)},hide:function(){if(this.showed){this.showed=!1;var a=this.getEl();"visibility"==this.displayMode?a.css({visibility:"hidden"}):a.hide();this.withMask&&this.unmask();this.fire("hide")}},show:function(a,e){var b=this;if(!b.showed&&(!e||!b.hidden))if(!a&&b.delayShow)setTimeout(function(){c.prototype.show.call(b,!0)},0);else{b.showed=!0;var d=b.getEl();"visibility"==b.displayMode?d.css({visibility:"visible"}):d.show();b.withMask&&b.mask();b.fire("show");b.callChild([null,!0])}},enable:function(){this.resumeListeners();
this.getEl().removeClass("hui-disable")},disable:function(){this.suspendListeners();this.getEl().addClass("hui-disable")},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},mask:function(){c.mask||(c.mask=$('<div class="hui-mask" style="display:none;"></div>').appendTo(document.body));c.mask.show()},unmask:function(){c.mask&&c.mask.hide()},txt:function(a){var e=this.find(".js-"+this.cls+"-txt");0==e.length&&(e=this.find(".hui-"+this.cls+
"-txt"));if(void 0!=a)e.text(a);else return e.text()},fire:function(a,e){for(var b=this._listeners.length-1;0<=b;b--){var c=this._listeners[b];if(c.type==a){var d=c.delegation;e?d.apply(null,e.shift(c)):d(c)}}},listen:function(a){var e=this,b=a.type,c=e._listeners,d=a.el,j=a.method||"bind",h=a.selector,n=a.data,s=a.delegation=function(){if(!0!=e.isSuspend)return a.handler.apply(a.scope||e,arguments)};$H.Browser.mobile()&&"click"==b&&(b="touchend");d=d?"string"==typeof d?e.find(d):d:e.getEl();if(!a.notEl)if(h)if(n)d[j](h,
b,n,s);else d[j](h,b,s);else if(n)d[j](b,n,s);else d[j](b,s);c.push(a)},unlisten:function(a){var b=a.type,c=a.el||this.getEl(),d="delegate"==a.method?"undelegate":"unbind",k=a.selector,j;$H.Browser.mobile()&&"click"==b&&(b="touchend");for(var h=this._listeners.length-1;0<=h;h--){var n=this._listeners[h];if(n.handler==a.handler){j=n.delegation;this._listeners.splice(h,1);break}}if(!a.notEl)if(k)c[d](k,b,j);else c[d](b,j)},initListeners:function(){if(!this.listened){this.listened=!0;var a=this._listeners;
this._listeners=[];for(var b=a.length-1;0<=b;b--)this.listen(a[b]);this.callChild()}},clearListeners:function(){for(var a=this._listeners,b=a.length-1;0<=b;b--)this.unlisten(a[b]);this.callChild()},suspendListeners:function(){this.isSuspend||(this.isSuspend=!0,this.callChild())},resumeListeners:function(){this.isSuspend&&(this.isSuspend=!1,this.callChild())},each:function(a,b){$HO.each(this.children,a,b)},match:function(a){if("*"==a)return!0;var b,c,d;a=a.replace(/^([^\[]+)/,'[xtype="$1"]');for(var k=
/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;b=k.exec(a);)if(c=b[1],d=b[2],b=eval(b[3]),"="===d?this[c]!=b:this[c]==b)return!1;return!0},find:function(a,b){var c=this;if(0!=a.indexOf("$"))return c.getEl().find(a);b=b||[];if(0<a.indexOf(","))return $HO.each(a.split(","),function(a,d){b=b.concat(c.find(d))}),b;var d=1==a.indexOf(">"),k=a.replace(/^\$>?\s?/,""),j=k.search(/\s|>/),h;0<j&&(h=k.substring(j),k=k.substring(0,j));c.each(function(c,f){f.match(k)&&(h?f.find("$"+h,b):b.push(f));d||f.find(a,b)});return b},
index:function(){var a=this,b=a.parent;if(b){var c;b.each(function(b,e){if(e==a)return c=b,!1});return c}return null},callChild:function(a,b){var c=this.children;$HO.isArray(a)&&(b=a,a=null);a=a||arguments.callee.caller.$name;for(var d=0,k=c.length;d<k;d++){var j=c[d];j[a].apply(j,b)}},add:function(a){this.children.push(a);a.parent=this},remove:function(a){for(var b=this.children,c=!1,d=0,k=b.length;d<k;d++)b[d]==a&&(b.splice(d,1),a.destroy(),c=!0);return c},addItem:function(a){var b=this.settings,
c=b.items;c?$HO.isArray(c)||(b.items=[c]):b.items=[];b.items.push(a)},parseItem:function(){},parseItems:function(){this.icon&&this.addItem({xtype:"Icon",name:this.icon});var a=this.settings.items;if(a)for(var a=a.length?a:[a],b=0,c=a.length;b<c;b++){var g=a[b];this.defItem&&$HO.extend(g,this.defItem,{notCover:!0});this.parseItem(g);var k=d.getClass(g.xtype);g.renderTo||(g.autoRender=!1);g=new k(g);this.add(g)}},destroy:function(a){d.unregister(this);this.fire("destroy");this.clearListeners();a||(this.callChild(),
this.getEl().remove());delete this.params;delete this.settings;delete this._container;delete this.renderTo;delete this._listeners;delete this.children}});return c});
$Define("c.Popup","c.AbstractComponent",function(d){var c=d.define("Popup");c.extend({delayShow:!0,clickHide:!0,showPos:"center",withMask:!0,shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.getHtml("$>*")%></div>'],listeners:[{type:"click",el:$(document),handler:function(){this.clickHide&&this.hide()}}],show:function(){var b=this.showPos;if("string"==typeof b)this[b]();else"function"==typeof b&&b.call(this);this.callSuper(c.superClass,arguments)},center:function(){var b=this.getEl(),a=document,
c=((a.documentElement.offsetWidth||a.body.offsetWidth)-b.width())/2,a=((a.documentElement.clientHeight||a.body.clientHeight)-b.height())/2+a.body.scrollTop,a=10>a?window.screen.height/2-200:a;b.css({left:c+"px",top:a-(this.offsetTop||0)+"px"})},underEl:function(b){var a=b.position();a.width=this.width||b.outerWidth();this.getEl().css(a)}});return c});
$Define("c.ControlGroup",["c.ComponentManager","c.AbstractComponent"],function(d,c){var b=c.define("ControlGroup");b.extend({radius:"little",multi:!1,defItem:{xtype:"Button",extCls:"js-item",radius:null,shadow:!1,isInline:!1},tmpl:['<div class="hui-ctrlgp<%if(this.direction=="h"){%> hui-ctrlgp-h<%}else{%> hui-ctrlgp-v<%}%>">','<%=this.getHtml("$>*")%>',"</div>"],listeners:[{type:"click",selector:".js-item",method:"delegate",handler:function(a){var b=$(a.currentTarget),b=d.get(b.attr("id")).index();
this.onItemClick(a,b)}}],select:function(a){a="number"==typeof a?this.children[a]:"string"==typeof a?this.find(a)[0]:a;if(!this.multi&&!a.multi){var b=this.getSelected();b&&this.selectItem(b,!1);this.selectItem(a)}else this.selectItem(a,!a.selected)},getSelected:function(a){var b=[];this.each(function(c,d){d.selected&&b.push(a?c:d)});return 0<b.length?this.multi?b:b[0]:null},selectItem:function(a,b){(b=!1!=b)?(a.selected=b,a.select?a.select():a.active()):(a.selected=b,a.select?a.select(b):a.unactive())},
val:function(a){if(a){var b=a.split(",");this.each(function(a,c){c.select($HO.contains(b,c.value))})}else return a=this.find("$>[selected=true]"),b=[],$HO.each(a,function(a,c){b.push(c.value)}),b.join(",")},onItemClick:function(a,b){this.select(b);this.itemClick&&this.itemClick(this.children[b],b)}});return b});
$Define("c.Icon","c.AbstractComponent",function(d){d=d.define("Icon");d.extend({hasBg:!0,tmpl:['<span class="hui-icon hui-icon-<%=this.name%><%if(this.hasBg){%> hui-icon-bg<%}%>"></span>']});return d});
$Define("c.Button","c.AbstractComponent",function(d){d=d.define("Button");d.extend({iconPos:"left",theme:"gray",activeCls:"hui-btn-blue",cls:"btn",defItem:{xtype:"Icon",hasBg:!0},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a href="javascript:;" hidefocus="true" class="hui-btn,<%if(!this.text){%> hui-btn-icon-notxt<%},if(this.isBack){%> hui-btn-back<%},if(this.hasIcon&&this.text){%> hui-btn-icon-<%=this.iconPos%><%}%>">,<span class="hui-btn-txt"><%=this.text%></span>,<%=this.getHtml(">*")%>,</a>'.split(","),parseItem:function(c){"Icon"==
c.xtype&&(this.hasIcon=!0)}});return d});
$Define("c.Radio","c.AbstractComponent",function(d){d=d.define("Radio");d.extend({text:"",value:"",selected:!1,tmpl:'<div class="hui-radio hui-btn hui-btn-gray<%if(this.selected){%> hui-radio-on<%}%>">;<span class="hui-icon hui-icon-radio"></span>;<input type="radio"<%if(this.selected){%> checked=true<%}%>;<%if(this.disabled){%> disabled="<%=this.disabled%>"<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-radio-txt"><%=this.text%></span>;</div>'.split(";"),select:function(c){this.selected=
c=!1!=c;var b=this.find("input"),a=this.getEl();c?(b.attr("checked",!0),a.addClass("hui-radio-on")):(b.removeAttr("checked"),a.removeClass("hui-radio-on"))},val:function(c){if(c)this.value=c,this.find("input").val(c);else return this.value}});return d});
$Define("c.Checkbox","c.AbstractComponent",function(d){d=d.define("Checkbox");d.extend({text:"",value:"",selected:!1,multi:!0,cls:"chkbox",tmpl:'<div class="hui-chkbox hui-btn hui-btn-gray<%if(this.selected){%> hui-chkbox-on<%}%>">;<span class="hui-icon hui-icon-chkbox"></span>;<input type="checkbox"<%if(this.selected){%> checked=true<%}%>;<%if(this.disabled){%> disabled="<%=this.disabled%>"<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-chkbox-txt"><%=this.text%></span>;</div>'.split(";"),select:function(c){this.selected=
c=!1!=c;var b=this.find("input"),a=this.getEl();c?(b.attr("checked",!0),a.addClass("hui-chkbox-on")):(b.removeAttr("checked"),a.removeClass("hui-chkbox-on"))},val:function(c){if(c)this.value=c,this.find("input").val(c);else return this.value}});return d});
$Define("c.Select","c.AbstractComponent",function(d){d=d.define("Select");d.extend({text:"\u8bf7\u9009\u62e9...",value:"",optionClick:function(){},defItem:{xtype:"Menu",hidden:!0,markType:"dot",renderTo:"body",showPos:function(){this.underEl(this.parent.getEl())}},_customEvents:["change"],tmpl:['<div class="hui-select hui-btn hui-btn-gray hui-btn-icon-right">','<span class="hui-icon hui-icon-carat-d hui-icon-bg"></span>','<select value="<%=this.value%>" name="<%=this.name%>"></select>','<span class="hui-btn-txt js-select-txt"><%=this.text%></span>',
"</div>"],listeners:[{type:"click",handler:function(){this.showOptions()}}],doConfig:function(c){var b=this;b.callSuper([c]);for(var a=c.options,e=0,d=a.length;e<d;e++){var g=a[e];if(g.value==c.value){b.text=g.text;g.selected=!0;break}}b.addItem({itemClick:function(a){b.val(a.value)},items:a})},showOptions:function(){this.children[0].show()},val:function(c){if(c){if(this.value!=c){var b=this.children[0],a=b.find('$>[value="'+c+'"]');0<a.length&&(this.fire("change"),a=a[0],this.value=c,this.find("select").attr("value",
c),this.txt(a.text),b.select(a))}}else return this.value}});return d});
$Define("c.Input","c.AbstractComponent",function(d){d=d.define("Input");d.extend({radius:"little",iconPos:"left",btnPos:"right",tmpl:['<div class="hui-input<%if(this.hasIcon){%> hui-input-icon-<%=this.iconPos%><%}%>','<%if(this.hasBtn){%> hui-input-btn-<%=this.btnPos%><%}%>">','<%=this.getHtml(">*")%>','<input type="text" class="js-input hui-input-txt" value="<%=this.value%>"<%if(this.placeholder){%> placeholder="<%=this.placeholder%><%}%>"/>',"</div>"],listeners:[{type:"focus",el:".js-input",handler:function(){this.getEl().addClass("hui-focus")}},
{type:"blur",el:".js-input",handler:function(){this.getEl().removeClass("hui-focus")}}],doConfig:function(c){this.callSuper([c]);"search"==this.type&&(this.icon="search");this.withClear&&this.addItem({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.find("input").val("").focus()}})},parseItem:function(c){"Icon"==c.xtype?this.hasIcon=!0:"Button"==c.xtype&&(this.hasBtn=!0)},val:function(c){var b=this.find("input");if(c)b.val(c);else return b.val()},focus:function(){this.find("input").focus()}});
return d});
$Define("c.Tab",["c.AbstractComponent","c.ControlGroup"],function(d,c){var b=d.define("Tab",c);b.extend({defItem:{xtype:"Button",radius:null,isInline:!1,extCls:"js-item",iconPos:"top",shadow:!1},tmpl:['<div class="hui-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-tab-item" style="width:<%=100/len%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].selected){%> style="display:none"<%}%>>',"<%=this.children[i].content%>",
"</div>","<%}%>","</div>"],parseItem:function(a){a.selected&&(a.isActive=!0)},onItemClick:function(a,b){this.find(".js-tab-content").hide().eq(b).show();this.callSuper([a,b])}});return b});
$Define("c.Toolbar","c.AbstractComponent",function(d){d=d.define("Toolbar");d.extend({cls:"tbar",tmpl:['<div class="hui-tbar<%if(this.type=="header"){%> hui-header<%}else if(this.type=="footer"){%> hui-footer<%}%>">','<%=this.getHtml(">*")%>','<%if(this.title){%><h1 class="hui-tbar-title js-tbar-txt"><%=this.title%></h1><%}%>',"</div>"],parseItem:function(c){"Button"==c.xtype&&(c.shadowSurround=!0,"left"==c.pos?c.extCls=(c.extCls||"")+"hui-tbar-btn-left":"right"==c.pos&&(c.extCls=(c.extCls||"")+"hui-tbar-btn-right"))}});
return d});
$Define("c.Popup","c.AbstractComponent",function(d){var c=d.define("Popup");c.extend({delayShow:!0,clickHide:!0,showPos:"center",withMask:!0,shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.getHtml("$>*")%></div>'],listeners:[{type:"click",el:$(document),handler:function(){this.clickHide&&this.hide()}}],show:function(){var b=this.showPos;if("string"==typeof b)this[b]();else"function"==typeof b&&b.call(this);this.callSuper(c.superClass,arguments)},center:function(){var b=this.getEl(),a=document,
c=((a.documentElement.offsetWidth||a.body.offsetWidth)-b.width())/2,a=((a.documentElement.clientHeight||a.body.clientHeight)-b.height())/2+a.body.scrollTop,a=10>a?window.screen.height/2-200:a;b.css({left:c+"px",top:a-(this.offsetTop||0)+"px"})},underEl:function(b){var a=b.position();a.width=this.width||b.outerWidth();this.getEl().css(a)}});return c});
$Define("c.Dialog",["c.AbstractComponent","c.Popup"],function(d,c){var b=d.define("Dialog",c);$HO.extend(b,{alert:function(a){return new b({title:"&nbsp;",contentMsg:a,noClose:!0,noCancel:!0})},confirm:function(a,c){return new b({title:"&nbsp;",contentMsg:a,noClose:!0,okCall:function(){return c&&c(!0)},cancelCall:function(){return c&&c(!1)}})},prompt:function(a,c,d){d||(d=c,c="");return new b({title:"&nbsp;",contentMsg:a,noClose:!0,items:{xtype:"Input",role:"content",value:c},okCall:function(){var a=
this.find("$Input")[0].val();return d&&d(a)}})}});b.extend({okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",clickHide:!1,radius:"normal",tmpl:'<div class="hui-dialog">;<%=this.getHtml("$>Toolbar")%>;<div class="hui-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="hui-body-content">;<h1 class="hui-content-title"><%=this.contentTitle%></h1>;<div class="hui-content-msg"><%=this.contentMsg%></div>;<%=this.getHtml("$>[role=\'content\']")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="hui-body-action">;<%=this.getHtml("$>Button")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(a){var b=this;b.callSuper([a]);b.title&&b.addItem({xtype:"Toolbar",title:b.title,theme:"gray",extCls:"hui-dialog-header",items:!b.noClose&&{xtype:"Button",radius:"big",extCls:"hui-tbar-btn-left",icon:"delete",click:function(){b.hide()}}});b.noAction||(b.noOk||b.addItem({xtype:"Button",isActive:!0,text:b.okTxt,isInline:!1,click:function(){!1!=(b.okCall&&b.okCall())&&b.hide()}}),b.noCancel||b.addItem({xtype:"Button",isInline:!1,text:b.cancelTxt,click:function(){!1!=(b.cancelCall&&
b.cancelCall())&&b.hide()}}))}});return b});
$Define("c.Menu",["c.AbstractComponent","c.Popup","c.ControlGroup"],function(d,c,b){d=d.define("Menu",c);d.extend(b.prototype);d.extend({tmpl:['<div class="hui-menu<%if(this.markType=="dot"){%> hui-menu-mark<%}%>">',"<ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-menu-item<%if(this.children[i].selected){%> hui-item-mark<%}%>">',"<%=this.children[i].getHtml()%>",'<%if(this.markType=="dot"){%><span class="hui-icon-mark"></span><%}%>',"</li>","<%}%>","</ul>","</div>"],selectItem:function(a,
c){c=!1!=c;"dot"==this.markType?(a.selected=c,a.getEl().parent()[!1==c?"removeClass":"addClass"]("hui-item-mark")):"active"==this.markType?b.prototype.selectItem.call(this,a,c):a.selected=c}});return d});$Define("c.List",["c.AbstractComponent","c.ControlGroup"],function(d,c){var b=d.define("List",c);b.extend({tmpl:['<div class="hui-list">','<div class="hui-list-item c-clear">',"</div>","</div>"]});return b});
$Define("m.AbstractModule","handy.base.Object",function(d){var c=d.createClass();d.extend(c.prototype,{useCache:!0,cache:function(){},init:function(){},beforeRender:function(){},render:function(){},afterRender:function(){},reset:function(){},exit:function(){return!0},destroy:function(){},initialize:function(b){this.conf=b},getHtml:function(){if(!this.tmpl)return"";"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));return $H.Template.tmpl({id:this.name,tmpl:this.tmpl},
this)},getEl:function(){return this._container}});return c});$Define("m.AbstractDao",function(){var d=$HO.createClass();$HO.extend(d.prototype,{ajax:function(c){this.beforeSend(c);c.error=$HF.intercept(this.error,c.error);c.success=$HF.intercept(this.success,c.error);return $.ajax(c)},beforeSend:$H.noop,error:$H.noop,success:$H.noop});return d});$Define("m.AbstractView",function(){var d=$HO.createClass();$HO.extend(d.prototype,{})});
$Define("m.AbstractNavigator","handy.base.Object",function(d){var c=d.createClass();d.extend(c.prototype,{navigate:function(){}});return c});
$Define("m.History","handy.base.HashChange",function(d){var c=$HO.createClass(),b=0;$HO.extend(c.prototype,{initialize:function(a){this.key=a||"handy";this.states=[];d.listen($H.Function.bind(this.stateChange,this))},stateChange:function(){var a=this.getHashParam().hKey;if(a=this.states[a])a.onStateChange(a.param,!0)},saveState:function(a){var c=this.key+ ++b;this.states.push(c);this.states[c]=a;$HU.setHash("#"+JSON.stringify({hKey:c,param:a.param}))},getHashParam:function(){try{var a=$HU.getHash().replace("#",
"");return JSON.parse(a)}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+b.message)}},getCurrentState:function(){try{var a=this.getHashParam();return this.states[a.hKey]}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+b.message)}},getPreState:function(){try{for(var a=JSON.parse($HU.getHash().replace("#","")).hKey,b=this.states,c=b.length,d=0;d++;d<c)if(b[d]==a)return 0<d?b[b[--d]]:null}catch(k){$H.Debug.error("History.getPreState error:"+k.message)}},back:function(){var a=
this.getPreState();if(a)a.onStateChange(a.param)}});return c});
$Define("m.ModuleManager","m.History",function(d){var c=$HO.createClass();$HO.extend(c.prototype,{_getModWrapper:function(b){b="modWrapper_"+b;var a=$("#"+b);0==a.length&&(a=$('<div id="'+b+'"></div>'));return a},_createMod:function(b){var a=this,c=b.modName;a.modules[c]={waiting:!0};$Require(a.defModPackage+c,function(d){d=new d;d.name=c;d.mType=c;d.initParam=b;a.modules[c]=d;d.init(b);d.beforeRender();var g=a._getModWrapper(c);d._container=g;var k=d.renderTo?$(d.renderTo):a.container;g.html(d.getHtml());
k.append(g);$HL.fire("afterRender",g);d.render(g);a.currentMod==c&&a._showMod(d);d.afterRender()})},_showMod:function(b){if(this.navigator&&this.navigator.navigate(b,this))return!1;this._hideAll();b._container.show();b.isActive=!0},_hideAll:function(){var b=this.modules,a;for(a in b)b[a]._container.hide(),b[a].isActive=!1},initialize:function(b){b&&(this.conf=b,$HO.extend(this,b),this.container=b.container?$(b.container):$(document.body));this.defModPackage+=".";this.history=new d;this.modules={}},
go:function(b,a){var c=b.modName,d=this.currentMod,g=this.modules,k=g[d];if(d==c)k.waiting||k.reset();else{if(k&&!k.waiting&&!k.exit())return!1;(d=g[c])?d.useCache?(this._showMod(d),d.cache(b)):d.waiting||(d.destroy(),this._createMod(b)):this._createMod(b);!0!=a&&this.history.saveState({onStateChange:$H.Function.bind(this.go,this),param:b});this.currentMod=c}}});return c});
