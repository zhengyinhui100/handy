/* Handy v1.0.0-dev | 2014-01-19 | zhengyinhui100@gmail.com */
(function(){var d=window.handy,b=window.$,a=window.handy=window.$=function(){};a.version="1.0.0";a.expando="handy"+(a.version+Math.random()).replace(/\D/g,"");a.add=function(b,c,f){f||(f=c,c=null);if(!c||!a.Loader){a.base||(a.base={});var g=[];if(c)if("string"==typeof c)g.push(a.base.Object.namespace(c));else for(var d=0;d<c.length;d++)g.push(a.base.Object.namespace(c[d]));g.push(a);a.base[b]=a[b]=f.apply(window,g)}else a.Loader.require(c,function(){Array.prototype.push.call(arguments,a);a.base[b]=
a[b]=f.apply(window,arguments)})};a.noConflict=function(e){window.$===a&&(window.$=b);e&&window.handy===a&&(window.handy=d);return a}})();
handy.add("Json",function(){var d;d||(d={});(function(){function b(c){return 10>c?"0"+c:c}function a(c){f.lastIndex=0;return f.test(c)?'"'+c.replace(f,function(c){var a=h[c];return"string"===typeof a?a:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function e(c,f){var b,d,h,t,r=g,p,m=f[c];m&&("object"===typeof m&&"function"===typeof m.toJSON)&&(m=m.toJSON(c));"function"===typeof j&&(m=j.call(f,c,m));switch(typeof m){case "string":return a(m);case "number":return isFinite(m)?
String(m):"null";case "boolean":case "null":return String(m);case "object":if(!m)return"null";g+=k;p=[];if("[object Array]"===Object.prototype.toString.apply(m)){t=m.length;for(b=0;b<t;b+=1)p[b]=e(b,m)||"null";h=0===p.length?"[]":g?"[\n"+g+p.join(",\n"+g)+"\n"+r+"]":"["+p.join(",")+"]";g=r;return h}if(j&&"object"===typeof j){t=j.length;for(b=0;b<t;b+=1)"string"===typeof j[b]&&(d=j[b],(h=e(d,m))&&p.push(a(d)+(g?": ":":")+h))}else for(d in m)Object.prototype.hasOwnProperty.call(m,d)&&(h=e(d,m))&&p.push(a(d)+
(g?": ":":")+h);h=0===p.length?"{}":g?"{\n"+g+p.join(",\n"+g)+"\n"+r+"}":"{"+p.join(",")+"}";g=r;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,k,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;"function"!==typeof d.stringify&&(d.stringify=function(c,a,b){var f;k=g="";if("number"===typeof b)for(f=0;f<b;f+=1)k+=" ";else"string"===typeof b&&(k=b);if((j=a)&&"function"!==typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw Error("JSON.stringify");return e("",{"":c})});"function"!==
typeof d.parse&&(d.parse=function(a,b){function f(c,a){var e,g,d=c[a];if(d&&"object"===typeof d)for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(g=f(d,e),void 0!==g?d[e]=g:delete d[e]);return b.call(c,a,d)}var e;a=String(a);c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return e=eval("("+a+")"),"function"===typeof b?f({"":e},""):e;throw new SyntaxError("JSON.parse");})})();return d});
handy.add("Object",function(){function d(){var a=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return a&&9>parseInt(a[0])?function(a,c,b){var g=[];if(a.length){c=c||0;for(b=b||a.length;c<b;c++)g.push(a[c])}return g}:function(a,c,b){return Array.prototype.slice.call(a,c||0,b||a.length)}}var b={namespace:function(a,b){var c=null,f,g,d,h;g=a.split(".");c=g[0];c=(d=2==arguments.length)?eval("(function(){if (typeof "+c+' == "undefined"){'+c+" = {};}return "+c+";})()"):eval("(function(){if (typeof "+
c+' != "undefined")return '+c+";})()");f=1;for(h=g.length;f<h;++f){if(f==h-1&&d)c[g[f]]=b;else if(d||c&&c[g[f]])c[g[f]]=c[g[f]]||{};else return;c=c[g[f]]}return c},createClass:function(a){var e=function(){var c,a;c=this.constructor==e?this:arguments.callee;if(a=c.initialize)return a.apply(c,arguments)};e.prototype.callSuper=function(){var c,a=arguments.callee.caller.$name;if(c=this.constructor.superProt)if(c=c[a],b.isFunction(c))return c.apply(this,arguments)};a&&this.namespace(a,e);return e},extend:function(a,
e,c){var f=c?c.notCover:!1;c=c?c.notClone:!1;var g=!!a.callSuper,d;for(d in e){var h=a.hasOwnProperty(d),j=!0===f?h:!1;b.isArray(f)?j=b.contains(f,d)&&h:b.isFunction(f)&&(j=f(d));j||(h=c?e[d]:b.clone(e[d]),g&&b.isFunction(h)&&(h.$name=d),a[d]=h)}return a},mix:function(a,e,c,f){a.superProt||(a.superProt={});for(var g in e)a.superProt[g]=b.isFunction(e[g])?a.superProt[g]?function(c,a){return function(){a.apply(this,arguments);e[c].apply(this,arguments)}}(g,a.superProt[g]):e[g]:e[g],a[g]||(a[g]=e[g]);
c&&b.extend(a,c);e.toString!=e.constructor.prototype.toString&&(a.superProt.toString=function(){e.toString.apply(a,arguments)});f&&(a.prototype&&e.prototype)&&b.inherit(a,e,null,f);return a},inherit:function(a,e,c,f,g){var d=function(){};d.prototype=e.prototype;g=g||{notCover:!0};b.extend(a,e,g);a.prototype=new d;a.prototype.constructor=a;a.superClass=e;a.superProt=e.prototype;if(e._onInherit)try{e._onInherit(a)}catch(h){}c&&b.extend(a,c);f&&b.extend(a.prototype,f)},isFunction:function(a){return"[object Function]"===
window.Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===window.Object.prototype.toString.call(a)},equals:function(a,e){if(typeof a==typeof e){if("object"!=typeof a)return a===e;if(a===e)return!0;if(b.isArray(a)&&b.isArray(e)){if(a.length!=e.length)return!1;for(var c=0,f=a.length;c<f;c++)if(!b.equals(a[c],e[c]))return!1;return!0}if(!b.isArray(a)&&!b.isArray(e)){if(b.count(a)!=b.count(e))return!1;for(c in a)if(void 0==e[c]||!b.equals(a[c],e[c]))return!1;return!0}}return!1},
clone:function(a){if(null==a||"object"!=typeof a)return a;var e=a.constructor;if(e!=window.Object&&e!=window.Array)return a;if(e==window.Date||e==window.RegExp||e==window.Function||e==window.String||e==window.Number||e==window.Boolean)return new e(a);try{var c=new e,f;for(f in a)c[f]=b.clone(a[f]);return c}catch(g){return a}},isEmpty:function(a){if(b.isArray(a))return 0==a.length;for(var e in a)return!1;return!0},each:function(a,e,c){var f,g=0,d=a.length,h=void 0===d||b.isFunction(a);if(c)if(h)for(f in a){if(!1===
e.apply(a[f],c))break}else for(;g<d&&!1!==e.apply(a[g++],c););else if(h)for(f in a){if(!1===e.call(a[f],f,a[f]))break}else for(;g<d&&!1!==e.call(a[g],g,a[g++]););return a},contains:function(a,e){var c=!1;b.each(a,function(a,g){if(b.equals(g,e))return c=!0,!1});return c},largeThan:function(a,e){if("object"==typeof a&&"object"==typeof e){var c=!0;b.each(e,function(f){if(!b.equals(e[f],a[f]))return c=!1});return c}},count:function(a){if(b.isArray(a))return a.length;var e=0,c;for(c in a)e++;return e},
toArray:d,genMethod:function(a,e,c){e=b.isArray(e)?e:e.split(",");for(var f=0;f<e.length;f++){var g=e[f];a[g]=c(g)}}},d=d();return b});
handy.add("Browser","handy.base.Object",function(d){var b={},a={};d.genMethod(a,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(c){return function(a){var f=b[c];return!a&&"string"===typeof f&&/^[\d\.]+$/.test(f)?parseInt(f):f}});d=window.navigator.userAgent;var e;(e=d.match(/MSIE ([\d.]+)/))?b.ie=e[1]:(e=d.match(/Firefox\/([\d.]+)/))?b.firefox=e[1]:(e=d.match(/Chrome\/([\d.]+)/))?
b.chrome=e[1]:(e=d.match(/Opera.([\d.]+)/))?b.opera=e[1]:(e=d.match(/Version\/([\d.]+).*Safari/))?b.safari=e[1]:0;/windows|win32/i.test(d)?b.windows=!0:/linux/i.test(d)?b.linux=!0:/macintosh/i.test(d)?b.mac=!0:0;/trident/i.test(d)?b.trident=!0:/webkit/i.test(d)?b.webkit=!0:/gecko/i.test(d)?b.gecko=!0:/presto/i.test(d)?b.presto=!0:0;/MetaSr/i.test(d)?b.sogou=!0:/Maxthon/i.test(d)?b.maxthon=!0:/TencentTraveler/i.test(d)?b.tt=!0:/TheWorld/i.test(d)?b.theWorld=!0:/360[S|E]E/i.test(d)?b.is360=!0:0;var c;
if((c=d.match(/AppleWebKit\/([\d.]*)/))&&c[1])if(/ Mobile\//.test(d)&&d.match(/iPad|iPod|iPhone/)){b.mobile="ios";if((c=d.match(/OS ([^\s]*)/))&&c[1])b.ios=c[1].replace("_",".");if((c=d.match(/iPad|iPod|iPhone/))&&c[0])b[c[0].toLowerCase()]=b.ios}else if(/ Android/i.test(d)){if(/Mobile/.test(d)&&(b.mobile="android"),(c=d.match(/Android ([^\s]*);/))&&c[1])b.android=c[1]}else if(c=d.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))b.mobile=c[0].toLowerCase();var f;try{if(b.ie){var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
g&&(f=g.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(g=navigator.plugins["Shockwave Flash"])){var k=g.description.split(" ");e=0;for(var h=k.length;e<h;e++)if(0<parseInt(k[e])){f=k[e];break}}}catch(j){}b.flash=f?f:null;return a});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(d,b,a){function e(b,e,d){d=d||"log";if(e||c.showInPage){var h=a.expando+"debugDiv",j=top.document;(e=j.getElementById(h))?e.style.display="block":(e=j.createElement("DIV"),e.id=h,e.innerHTML='<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\''+
j.body.offsetHeight+'px\';">\u5168\u5c4f</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\'100px\';">\u6536\u8d77</a><div style="padding-top:5px"></div>',e.style.position="absolute",e.style.width=j.body.offsetWidth-20+"px",e.style.left=0,e.style.top=0,e.style.right=0,e.style.height="100px",e.style.backgroundColor="#aaa",e.style.fontSize="12px",e.style.padding="10px",e.style.overflow="auto",e.style.zIndex=9999999,e.style.opacity=0.5,e.style.filter="alpha(opacity=50)",j.body.appendChild(e));
h=j.createElement("DIV");h.innerHTML=d+" : "+JSON.stringify(b,null,"<br/>");e=e.getElementsByTagName("DIV")[0];e.innerHTML=e.innerHTML+h.innerHTML+"<br/>"}try{console[d](b)}catch(q){}}var c={level:0,LOG_LEVEL:1,INFO_LEVEL:2,WARN_LEVEL:3,ERROR_LEVEL:4,DEBUG_LEVEL:5,showInPage:!("console"in window)||!!b.mobile(),log:function(a,b){c.level>c.LOG_LEVEL||e(a,!!b,"log")},info:function(a,b){this.level>c.INFO_LEVEL||e(a,!!b,"info")},warn:function(a,b){c.level>c.WARN_LEVEL||e(a,!!b,"warn")},error:function(a,
b){c.level>c.ERROR_LEVEL||e(a,!!b,"error")},time:function(a,b,d){c.level>c.INFO_LEVEL||(b?e((a||"")+", \u6d88\u8017\u65f6\u95f4:"+((new Date).getTime()-(c.lastTime||0)),!!d):c.lastTime=(new Date).getTime())},debug:function(a){if(!(c.level>c.DEBUG_LEVEL)&&!1!==a)debugger}};return c});
handy.add("Function","handy.base.Object",function(){return{bind:function(d,b,a){var e=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(e,arguments);return d.apply(b,e)}},intercept:function(d,b,a,e){a=a||window;e=e||a||window;if(Object.isFunction(b))return function(){var c=arguments;e.target=a;e.method=d;return!1!=b.apply(e,c)?d.apply(a,c):null}}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(d,b,a){function e(c){function a(c){return/\.(css|js)$/.test(c)?q[c]&&"loaded"==q[c].status:l.urlMap&&l.urlMap[c]?l.urlMap[c].chkExist():b.namespace(c)}if("string"==typeof c)return a(c);for(var e=[],f=0,d=c.length;f<d;f++){var g=a(c[f]);if(g)e.push(g);else return!1}return e}function c(c,a){function b(){b.isCalled||(b.isCalled=!0,clearTimeout(j),a())}if("SCRIPT"===c.nodeName){var e=c,g=b;e.onload=e.onerror=e.onreadystatechange=
function(){/loaded|complete|undefined/.test(e.readyState)&&(e.onload=e.onerror=e.onreadystatechange=null,k.removeChild(e),e=null,setTimeout(g,0))}}else{var h=b;window.hasOwnProperty("attachEvent")?c.attachEvent("onload",h):setTimeout(function(){f(c,h)},0)}var j=setTimeout(function(){d.error("Time is out:",c.src);b()},l.timeout)}function f(c,a){if(!a.isCalled){var b;if(h)c.sheet&&(b=!0);else if(c.sheet)try{c.sheet.cssRules&&(b=!0)}catch(e){if("SecurityError"===e.name||"NS_ERROR_DOM_SECURITY_ERR"===
e.name)b=!0}setTimeout(function(){b?a():f(c,a)},1)}}function g(c){l.showLoading(!1);q[c].status="loaded";for(var a=j.length-1;0<=a;a--){var b=j[a],f=e(b.deps);f&&(j.splice(a,1),b.callback.apply(null,f))}l.traceLog&&d.info("Loader Response: "+c)}var k=document.head||document.getElementsByTagName("head")[0]||document.documentElement,h=navigator.userAgent.indexOf("AppleWebKit"),j=[],q={},l={traceLog:!0,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(c,a,e){2==arguments.length&&
(e=a,a=[]);l.require(a,function(){var a;if("function"==typeof e)try{a=e.apply(null,arguments)}catch(f){d.error("Loader "+c+":factory define error:"+f.message);return}else a=e;b.namespace(c,a)})},require:function(b,f){for(var h="string"==typeof b?[b]:b,t=[],r=[],p=!0,m=0,u=h.length;m<u;m++){var n=h[m],s=e(n);s?r.push(s):(t.push(n),p&&(p=!1,j.push({deps:h,callback:f})),l.traceLog&&d.info("Resource not found: "+n))}if(0==t.length)return f&&f.apply(null,r),0==r.length?r[0]:r;p=!1;h=0;for(r=t.length;h<
r;h++)if(m=t[h],!q[m]){p=m;n=l.urlMap&&l.urlMap[p]&&l.urlMap[p].url;if(!n){u="";n=l.rootPath;if("string"==typeof n)u=n;else if("object"==typeof n)for(s in s=void 0,n)0==p.indexOf(s)&&(u=n[s],p=p.replace(s,""));else u="";n=/.css$/.test(p)?0==p.indexOf("/")?p:"/css/"+p:/.js$/.test(p)?p:p.replace(/\./g,"/")+".js";0!=n.indexOf("/")&&(n="/"+n);n=u+n}p=!0;q[m]={id:m,status:"loading"};u=a.bind(g,null,m);if(/.css$/.test(n))a:{m=n;n=k.getElementsByTagName("link");for(s=0;s<n.length;s++){var x=n[s].href;!l.skinNode&&
0<=x.indexOf(l.skinName)&&(l.skinNode=n[s]);if(0<=x.indexOf(m)||0<=m.indexOf(x))break a}n=document.createElement("link");n.rel="stylesheet";n.href=m;c(n,u);k.insertBefore(n,l.skinNode);l.traceLog&&d.info("Loader request:"+m)}else m=n,n=document.createElement("script"),n.async="async",n.src=m,n.type="text/javascript",c(n,u),k.appendChild(n),l.traceLog&&d.info("Loader request:"+m)}p&&l.showLoading(!0)}};return l});
handy.add("Date",function(){var d=window.Date,b={getWeek:function(a,b){var c=a.getDay();b&&(c=(c+(b%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[c]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new d(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var b=new d(a.getFullYear(),0,0);a=new d(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-b.getTime())/864E5)},getDayIndexOfYear:function(a){var b=new d("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-b.getTime())/864E5)},format:function(a,e){e=e||"yyyy-MM-dd HH:mm:ss";a=a||new d;var c=a.getHours(),f=Math.floor((a.getMonth()+3)/3),c={"y+":a.getFullYear(),"M+":a.getMonth()+1,"d+":a.getDate(),"h+":0==c%12?12:c%12,"H+":c,"m+":a.getMinutes(),"s+":a.getSeconds(),"w+":b.getWeek(a),"q+":f,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][f-1],"S+":a.getMilliseconds()},g;for(g in c)RegExp("("+g+")").test(e)&&(f=RegExp.$1.length,e=e.replace(RegExp.$1,1==f?c[g]:("00"+
c[g]).slice(-f)));return e},parse:function(a,b){for(var c=(b||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),f=a.match(/\d+/g),g=new d,k=0;k<f.length;k++){var h=c[k],j=parseInt(f[k]);switch(h){case "yyyy":g.setFullYear(j);break;case "MM":g.setMonth(j-1);break;case "dd":g.setDate(j);break;case "HH":g.setHours(j);break;case "mm":g.setMinutes(j);break;case "ss":g.setSeconds(j);break;case "SS":g.setMilliseconds(j)}}return g}};return b});
handy.add("String",function(){var d={stripTags:function(b){return b.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(b){var a=document.createElement("div");b=document.createTextNode(b);a.appendChild(b);return a.innerHTML},unescapeHTML:function(b){var a=document.createElement("div");a.innerHTML=d.stripTags(b);return a.childNodes[0].nodeValue},decodeHTML:function(b){b=b.replace(/&lt;/gi,"<");b=b.replace(/&gt;/gi,">");b=b.replace(/&quot;/gi,'"');b=b.replace(/&apos;/gi,"'");b=b.replace(/<\/?br>/gi,"\n");
b=b.replace(/&amp;/gi,"&");return b=b.replace(/&nbsp;/gi," ")},encodeHTML:function(b){b=b.replace(/&/gi,"&amp;");b=b.replace(/</gi,"&lt;");b=b.replace(/>/gi,"&gt;");b=b.replace(/\"/gi,"&quot;");b=b.replace(/\'/gi,"&apos;");b=b.replace(/\n/gi,"</br>");return b=b.replace(/ /gi,"&nbsp;")},trim:function(b){return b=b.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(b,a){a||(a=/[,%\'\"\/\\;|\<\>\^]/);return-1<b.search(a)},len:function(b){return b.replace(/[^\x00-\xff]/g,"**").length},left:function(b,
a,e){if(d.len(b)>a){!0===e?e=2:0<e||(e=0);var c=0,f=0;for(a-=e;f<a;)255<b.charCodeAt(c)?f+=2:f++,c++;b=b.substring(0,c);for(c=0;c<e;c++)b+="."}return b},isNumber:function(b){return 0==b.search(/^\d+$/g)},hasChn:function(b){return/[\u4E00-\u9FA5]+/.test(b)},isChn:function(b){return/^[\u4E00-\u9FA5]+$/.test(b)},addParam:function(b,a){a&&(b+=(-1<b.indexOf("?")?"&":"?")+a);return b}};return d});
handy.add("Cookie",function(){return{get:function(d,b){var a=d+"=",e="",c=document.cookie;if(0<c.length){var f=c.indexOf(a);-1!=f&&(f+=a.length,a=c.indexOf(";",f),-1==a&&(a=c.length),e=c.substring(f,a),b||(e=unescape(e)))}return e},set:function(d,b,a){var e=[];void 0!=d&&void 0!=b&&e.push(d+"="+escape(b));a&&(void 0!=a.path&&e.push("path="+a.path),void 0!=a.domain&&e.push("domain="+a.domain),void 0!=a.expires&&e.push("expires="+a.expires),a.secure&&e.push("secure"));document.cookie=e.join(";")},del:function(d){var b=
new Date;b.setTime(b.getTime()-1);document.cookie=d+"=;expires="+b.toGMTString()}}});handy.add("Util",function(){var d=0;return{isWindow:function(b){return null!=b&&b==b.window},getUuid:function(){return d++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(b){var a=top.location.hash;0<=a.indexOf("#")&&(b=a.replace(/#[^\?]*/,b));top.location.hash=b}}});
handy.add("Template",function(d){var b={},a=/^=/,e="".trim,c={openTag:"<%",closeTag:"%>",_setValue:function(c,b){return c.replace(a,function(c,a){return b&&b[a]||""})},_add:function(c){return e?"$r+="+c+";\n":"$r.push("+c+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return c._add('"'+a+'"')},_parseScript:function(b){b=b.replace(/this/g,"$data");0==b.indexOf("=")&&(b=c._add(b.replace(a,"")+'||""'));return b+"\n"},_compile:function(a){var b=
"var $r="+(e?'""':"[]")+";\n";d.Object.each(a.split(c.openTag),function(a,e){var f=e.split(c.closeTag);1==f.length?b+=c._parseHtml(f[0]):(b+=c._parseScript(f[0]),f[1]&&(b+=c._parseHtml(f[1])))});b+="return "+(e?"$r;":'$r.join("");');return new Function("$data",b)},tmpl:function(a,e){var k,h,j;if("string"==typeof a)k=a;else if(k=a.tmpl,j=a.id)if(b[j])h=b[j];else{var q=document.getElementById(j);q&&(k=(q.value||q.innerHTML).replace(/\s/g,""))}if(!h){if(!k){d.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");
return}h=c._compile(k);j&&(b[j]=h)}return e?h(e):h}};return c});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(d,b,a){function e(c){if(c==q)return!1;var a=j.contentWindow.document;a.open();a.write("<!doctype html><html><body>"+c+"</body></html>");a.close();q=c;d.log("set:"+j.contentWindow.document.body.innerText)}function c(){var c=b.getHash(),a=j.contentWindow.document.body.innerText;c!=q?(e(c),f(c)):a!=q&&(d.log("update:"+j.contentWindow.document.body.innerText),b.setHash(a))}function f(c){var a=v.listeners,b;for(b in a)a[b](c)}var g,
k=0,h=document,j,q,l=h.documentMode,w="onhashchange"in window&&(void 0===l||7<l),v={delay:50,listen:function(d,l){if(!g)if(g=!0,v.listeners={},w)$(window).on("hashchange",function(){f(b.getHash())});else j=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(h.body)[0],$(j).one("load",function(){e(b.getHash());setInterval(c,v.delay)});if(l in v.listeners)throw Error("Duplicate name");l=l||a.expando+ ++k;v.listeners[l]=d;return l},unListen:function(c){for(var a in v.listeners)(!c||
c==a)&&delete v.listeners[a]}};return v});
handy.add("Support",function(d){var b;if(6==d.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}return{testSvg:function(a){if(void 0!=b)a(b);else{var c=window,f=!!c.document.createElementNS&&!!c.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect&&!(c.opera&&-1===navigator.userAgent.indexOf("Chrome")),d=new c.Image;d.onerror=function(){b=!1;a(b)};d.onload=function(){b=!(1===d.width&&1===d.height)||!f?!1:!0;a(b)};d.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}}})(function(d){$H=
d.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}}})(handy);
$Define("handy.component.ComponentManager",function(){var d=$HO.createClass(),b=$H.expando+"_cmp_",a={},e={};$HO.extend(d,{registerType:function(c,b){a[c]=b;b.prototype.xtype=c},getClass:function(c){return a[c]},register:function(c){e[c.getId()]=c},unRegister:function(c){delete e[c.getId()]},destroy:function(){},generateId:function(c,a){var d=b+(c||$H.Util.getUuid());if(!0!=a&&e[d])$D.error("id\u91cd\u590d:"+d);else return d},get:function(c){return e[c]||e[d.generateId(c,!0)]}});return d});
$Define("handy.component.AbstractComponent","handy.component.ComponentManager",function(d){var b=$HO.createClass(),a=/^(<[a-zA-Z]+)/,e=/(class=")/;$HO.extend(b,{define:function(c){var a=$HO.createClass();$HO.inherit(a,b,null,null,{notCover:function(c){return"define"==c}});d.registerType(c,a);return a},html:function(c){c.autoRender=!1;return(new this(c)).getHtml()}});$HO.extend(b.prototype,{xtype:"AbstractComponent",autoRender:!0,renderBy:"append",activeCls:"w-active",_customEvents:["beforeRender",
"afterRender","show","hide","destroy"],_defaultEvents:["click","mouseover","focus"],initialize:function(c){this.doConfig(c);this.parseItems();this.initHtml();this.fire("beforeRender");!1!=this.autoRender&&(this.renderTo[this.renderBy](this.getHtml()),this.afterRender());d.register(this)},doConfig:function(c){var a=this;a.params=c;a.settings=$HO.extend({},c);var b=a.listeners||[];a._listeners=c.listeners?b.concat(c.listeners):b.concat();$HO.extend(a,c,{notCover:function(b){var e=a[b],d=$HO.contains(a._customEvents,
b),g=$HO.contains(a._defaultEvents,b);(d||g)&&a._listeners.push({type:b,notEl:d,handler:c[b]});if(null!=e&&"object"==typeof e||$HO.isFunction(e))return!0}});a.renderTo=c.renderTo?$(c.renderTo):$(document.body);a.children=[]},initHtml:function(){"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));var c=$H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this),b=this.getId(),c=c.replace(a,'$1 id="'+b+'"'),c=c.replace(e,"$1"+this.getExtCls());this.html=c=c.replace(a,'$1 style="'+
("visibility"==this.displayMode?"visibility:hidden":"display:none")+'"')},getId:function(){return this._id||(this._id=d.generateId(this.cid))},getEl:function(){return this._container},getHtml:function(c){if(!c)return this.html;c=">*"==c?this.children:this.find(c);for(var a=[],b=0;b<c.length;b++)a.push(c[b].getHtml());return a.join("")},getExtCls:function(){var c=[];this.extCls&&c.push(this.extCls);this.color&&c.push("w-"+this.cls+"-"+this.color);this.disabled&&c.push("w-disable");this.radius&&c.push("w-radius-"+
this.radius);this.isMini&&c.push("w-mini");this.shadow&&c.push("w-shadow");this.shadowSurround&&c.push("w-shadow-surround");this.shadowInset&&c.push("w-shadow-inset");this.isActive&&c.push(this.activeCls);this.isFocus&&c.push("w-focus");this.isInline&&c.push("w-inline");return 0<c.length?c.join(" ")+" ":""},afterRender:function(){this.callChild();this._container=$("#"+this.getId());this.rendered=!0;!0!=this.notListen&&this.initListeners();this.disabled&&this.suspendListeners();this.hidden||this.show();
this.fire("afterRender");delete this.html},hide:function(){if(this.showed){this.showed=!1;var c=this.getEl();"visibility"==this.displayMode?c.css({visibility:"hidden"}):c.hide();this.withMask&&this.unmask();this.fire("hide")}},show:function(){if(!this.showed){this.showed=!0;var c=this.getEl();"visibility"==this.displayMode?c.css({visibility:"visible"}):c.show();this.withMask&&this.mask();this.fire("show");this.callChild()}},enable:function(){this.resumeListeners();this.getEl().removeClass("w-disable")},
disable:function(){this.suspendListeners();this.getEl().addClass("w-disable")},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},mask:function(){b.mask||(b.mask=$(document.body).append('<div id="maskDv" class="w-mask" style="display:none;"></div>'));b.mask.show()},unmask:function(){b.mask&&b.mask.hide()},fire:function(c){for(var a=this._listeners.length-1;0<=a;a--){var b=this._listeners[a];if(b.type==c){var e=b.delegation;e({obj:this,
data:b.data})}}},listen:function(c){var a=this,b=c.type,e=a._listeners,d=c.el,j=c.method||"bind",q=c.selector,l=c.data,w=c.delegation=function(){if(!0!=a.isSuspend)return c.handler.apply(c.scope||a,arguments)},d=d?"string"==typeof d?a.find(d):d:a.getEl();if(!c.notEl)if(q)if(l)d[j](q,b,l,w);else d[j](q,b,w);else if(l)d[j](b,l,w);else d[j](b,w);e.push(c)},unlisten:function(c){for(var a=c.type,b=c.el||this.getEl(),e="delegate"==c.method?"undelegate":"unbind",d=c.selector,j,q=this._listeners.length-1;0<=
q;q--){var l=this._listeners[q];if(l.handler==c.handler){j=l.delegation;this._listeners.splice(q,1);break}}if(!c.notEl)if(d)b[e](d,a,j);else b[e](a,j)},initListeners:function(){if(!this.listened){this.listened=!0;var c=this._listeners;this._listeners=[];for(var a=c.length-1;0<=a;a--)this.listen(c[a]);this.callChild()}},clearListeners:function(){for(var c=this._listeners,a=c.length-1;0<=a;a--)this.unlisten(c[a]);this.callChild()},suspendListeners:function(){this.isSuspend||(this.isSuspend=!0,this.callChild())},
resumeListeners:function(){this.isSuspend&&(this.isSuspend=!1,this.callChild())},each:function(a,b){$HO.each(this.children,a,b)},match:function(a){if("*"==a)return!0;var b,e,d;a=a.replace(/^([^\[]+)/,'[xtype="$1"]');for(var h=/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;b=h.exec(a);)if(e=b[1],d=b[2],b=eval(b[3]),"="===d?this[e]!=b:this[e]==b)return!1;return!0},find:function(a,b){if(0!=a.indexOf("$"))return this.getEl().find(a);b=b||[];var e=1==a.indexOf(">"),d=a.replace(/^\$>?\s?/,""),h=d.search(/\s|>/),j;0<h&&
(j=d.substring(h),d=d.substring(0,h));this.each(function(h,l){l.match(d)&&(j?l.find("$"+j,b):b.push(l));e||l.find(a,b)});return b},index:function(){var a=this,b=a.parent;if(b){var e;b.each(function(b,d){if(d==a)return e=b,!1});return e}return null},callChild:function(a){var b=this.children;a=a||arguments.callee.caller.$name;for(var e=0,d=b.length;e<d;e++)b[e][a]()},add:function(a){this.children.push(a);a.parent=this},remove:function(a){for(var b=this.children,e=!1,d=0,h=b.length;d<h;d++)b[d]==a&&
(b.splice(d,1),a.destroy(),e=!0);return e},addItem:function(a){this.settings.items||(this.settings.items=[]);this.settings.items.push(a)},parseItem:function(){},parseItems:function(){this.icon&&this.addItem({xtype:"Icon",name:this.icon});var a=this.settings.items;if(a)for(var a=a.length?a:[a],b=0,e=a.length;b<e;b++){var k=a[b];this.defItem&&$HO.extend(k,this.defItem,{notCover:!0});this.parseItem(k);var h=d.getClass(k.xtype);k.autoRender=!1;k=new h(k);this.add(k)}},destroy:function(){d.unregister(this);
this.fire("destroy");this.clearListeners();this.callChild();this.getEl().remove();delete this._listeners;delete this._contianer;delete this.children}});return b});$Define("handy.component.Icon","handy.component.AbstractComponent",function(d){d=d.define("Icon");$H.Support.testSvg(function(b){b||$("html").addClass("w-nosvg")});$HO.extend(d.prototype,{hasBg:!0,tmpl:['<span class="w-icon w-icon-<%=this.name%><%if(this.hasBg){%> w-icon-bg<%}%>"></span>']});return d});
$Define("handy.component.Button","handy.component.AbstractComponent",function(d){d=d.define("Button");$HO.extend(d.prototype,{iconPos:"left",activeCls:"w-btn-blue",cls:"btn",defItem:{xtype:"Icon",hasBg:!0},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a class="w-btn;<%if(!this.text){%> w-btn-icon-notxt<%};if(this.hasIcon&&this.text){%> w-btn-icon-<%=this.iconPos%><%}%>">;<span class="w-btn-txt"><%=this.text%></span>;<%=this.getHtml(">*")%>;</a>'.split(";"),parseItem:function(b){"Icon"==b.xtype&&(this.hasIcon=
!0)}});return d});
$Define("handy.component.Input","handy.component.AbstractComponent",function(d){d=d.define("Input");$HO.extend(d.prototype,{radius:"normal",iconPos:"left",btnPos:"right",tmpl:['<div class="w-input<%if(this.hasIcon){%> w-input-icon-<%=this.iconPos%><%}%>','<%if(this.hasBtn){%> w-input-btn-<%=this.btnPos%><%}%>">','<%=this.getHtml(">*")%>','<input type="text" class="js-input w-input-txt"<%if(this.placeholder){%> placeholder="<%=this.placeholder%><%}%>"/>',"</div>"],listeners:[{type:"focus",el:".js-input",
handler:function(){this.getEl().addClass("w-focus")}},{type:"blur",el:".js-input",handler:function(){this.getEl().removeClass("w-focus")}}],doConfig:function(b){this.callSuper(b);"search"==this.type&&(this.icon="search")},parseItem:function(b){"Icon"==b.xtype?this.hasIcon=!0:"Button"==b.xtype&&(this.hasBtn=!0)}});return d});
$Define("handy.component.Tab","handy.component.AbstractComponent",function(d){d=d.define("Tab");$HO.extend(d.prototype,{defItem:{xtype:"Button",radius:null,isInline:!1,iconPos:"top",shadow:!1},tmpl:['<div class="w-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="js-tab-item w-tab-item" style="width:<%=100/len%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].active){%> style="display:none"<%}%>>',
"<%=this.children[i].content%>","</div>","<%}%>","</div>"],listeners:[{type:"click",selector:".js-tab-item",method:"delegate",handler:function(b){b=$(b.currentTarget);this.callChild("unactive");b=b.index();this.children[b].active();this.find(".js-tab-content").hide().eq(b).show()}}]});return d});
$Define("handy.component.Dialog","handy.component.AbstractComponent",function(d){d=d.define("Dialog");$HO.extend(d,{alert:function(){},confirm:function(){},prompt:function(){}});$HO.extend(d.prototype,{okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",radius:"normal",cls:"dialog",withMask:!0,tmpl:'<div class="w-dialog w-overlay-shadow">;<%=this.getHtml("$>Toolbar")%>;<div class="w-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="w-body-content">;<h1 class="w-content-title"><%=this.contentTitle%></h1>;<div class="w-content-msg"><%=this.contentMsg%></div>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="w-body-action">;<%=this.getHtml("$>Button")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(b){this.callSuper(b);this.title&&this.addItem({xtype:"Toolbar",title:this.title,color:"gray",extCls:"w-dialog-header",items:!this.noClose&&{xtype:"Button",radius:"big",extCls:"w-tbar-btn-left",icon:"delete"}});this.noAction||(this.noOk||this.addItem({xtype:"Button",isActive:!0,text:this.okTxt,isInline:!1,click:function(){this.hide()}}),this.noCancel||this.addItem({xtype:"Button",isInline:!1,text:this.cancelTxt}))},show:function(){var b=this.getEl(),a=document,e=((a.documentElement.offsetWidth||
a.body.offsetWidth)-b.width())/2,a=((a.documentElement.clientHeight||a.body.clientHeight)-b.height())/2+a.body.scrollTop,a=10>a?window.screen.height/2-200:a;b.css({left:e+"px",top:a-(this.offsetTop||0)+"px"});this.callParent()}});return d});
$Define("handy.module.AbstractModule","handy.base.Object",function(d){var b=d.createClass();d.extend(b.prototype,{isLoaded:!1,isActived:!1,useCache:!0,cache:function(){},init:function(){},beforeRender:function(){},render:function(){},afterRender:function(){},reset:function(){},exit:function(){return!0},initialize:function(a){this.conf=a}});return b});$Define("handy.module.AbstractNavigator","handy.base.Object",function(d){var b=d.createClass();d.extend(b.prototype,{navigate:function(){}});return b});
$Define("handy.module.History","handy.base.HashChange",function(d){var b=$HO.createClass(),a=0;$HO.extend(b.prototype,{initialize:function(a){this.key=a||"handy";this.states=[];d.listen($H.Function.bind(this.stateChange,this))},stateChange:function(){var a=this.getCurrentState();if(a)a.onStateChange(a.param,!0)},saveState:function(b){var c=this.key+ ++a;this.states.push(c);this.states[c]=b;$HU.setHash("#"+JSON.stringify({hKey:c,param:b.param}))},getCurrentState:function(){try{var a=JSON.parse($HU.getHash().replace("#",
""));return this.states[a.hKey]}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+b.message)}},getPreState:function(){try{for(var a=JSON.parse($HU.getHash().replace("#","")).hKey,b=this.states,d=b.length,g=0;g++;g<d)if(b[g]==a)return 0<g?b[b[--g]]:null}catch(k){$H.Debug.error("History.getPreState error:"+k.message)}},back:function(){var a=this.getPreState();if(a)a.onStateChange(a.param)}});return b});
$Define("handy.module.ModuleManager","handy.module.History",function(d){var b=$HO.createClass();$HO.extend(b.prototype,{initialize:function(a){a&&(this.conf=a,$HO.extend(this,a),this.container=a.container?$(a.container):$(document.body));this.defModPackage+=".";this.history=new d;this.modules={}},go:function(a,b){var c=a.modName,d=this.currentMod,g=this.modules,k=g[d];if(d==c)k.reset();else{if(k&&!k.exit())return!1;(c=g[c])&&c.useCache?(this.showMod(c),c.cache(a)):this.createMod(a);!0!=b&&this.history.saveState({onStateChange:$H.Function.bind(this.go,
this),param:a})}},createMod:function(a){var b=this,c=a.modName;$Require(b.defModPackage+c,function(d){d=new d;d.name=c;d.mType=c;d.initParam=a;d.init(a);d.beforeRender();var g=b.getModWrapper(c);d.wrapper=g;var k=d.container=d.container?$(d.container):b.container;d.getHtml&&(g.html(d.getHtml()),k.append(g));d.render(g);b.showMod(d);d.afterRender();b.modules[c]=d})},getModWrapper:function(a){a="modWrapper_"+a;var b=$("#"+a);0==b.length&&(b=$('<div id="'+a+'"></div>'));return b},showMod:function(a){if(this.navigator&&
this.navigator.navigate(a,this))return!1;this.hideAll();a.wrapper.show();a.isActive=!0},hideAll:function(){var a=this.modules,b;for(b in a)a[b].wrapper.hide(),a[b].isActive=!1}});return b});
