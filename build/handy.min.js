/* Handy v1.0.0-dev | 2014-03-19 | zhengyinhui100@gmail.com */
(function(){var d=window.handy,c=window.$,a=window.handy=window.$=function(){};a.version="1.0.0";a.expando="handy"+(a.version+Math.random()).replace(/\D/g,"");a.add=function(b,e,f){f||(f=e,e=null);if(!e||!a.Loader){a.base||(a.base={});var c=[];if(e)if("string"==typeof e)c.push(a.base.Object.namespace(e));else for(var g=0;g<e.length;g++)c.push(a.base.Object.namespace(e[g]));c.push(a);e=f.apply(window,c);a.base[b]=a[b]=e;if(0<="Class,Browser,Events,Function,Object,String,Template,Util".indexOf(b)){for(var d in e)"undefined"!=
typeof a[d]&&("console"in window&&!Function[d])&&(console.log(a[d]),console.log(b+"\u547d\u540d\u51b2\u7a81:"+d)),a[d]=e[d];"Events"==b&&(a._eventCache={})}}else a.Loader.require(e,function(){Array.prototype.push.call(arguments,a);a.base[b]=a[b]=f.apply(window,arguments)})};a.noConflict=function(b){window.$===a&&(window.$=c);b&&window.handy===a&&(window.handy=d);return a};a.noop=function(){}})();
handy.add("Json",function(){function d(b){h.lastIndex=0;h.test(b)&&(b=b.replace(h,function(b){var a=g[b];return"string"===typeof a?a:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));return'"'+b+'"'}function c(a,h){var g,j,k,l,m=e,r,q=h[a];q&&("object"===typeof q&&"function"===typeof q.toJSON)&&(q=q.toJSON(a));"function"===typeof b&&(q=b.call(h,a,q));switch(typeof q){case "string":return d(q);case "number":return isFinite(q)?String(q):"null";case "boolean":case "null":return String(q);case "object":if(!q)return"null";
e+=f;r=[];if("[object Array]"===Object.prototype.toString.apply(q)){l=q.length;for(g=0;g<l;g+=1)r[g]=c(g,q)||"null";k=0===r.length?"[]":e?"[\n"+e+r.join(",\n"+e)+"\n"+m+"]":"["+r.join(",")+"]";e=m;return k}if(b&&"object"===typeof b){l=b.length;for(g=0;g<l;g+=1)"string"===typeof b[g]&&(j=b[g],(k=c(j,q))&&r.push(d(j)+(e?": ":":")+k))}else for(j in q)Object.prototype.hasOwnProperty.call(q,j)&&(k=c(j,q))&&r.push(d(j)+(e?": ":":")+k);k=0===r.length?"{}":e?"{\n"+e+r.join(",\n"+e)+"\n"+m+"}":"{"+r.join(",")+
"}";e=m;return k}}var a="JSON"in window,b,e,f,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,t=/(?:^|:|,)(?:\s*\[)+/g;
return{stringify:function(h,g,d,j){if(a&&!j)return JSON.stringify.apply(null,arguments);var k;f=e="";if("number"===typeof d)for(k=0;k<d;k+=1)f+=" ";else"string"===typeof d&&(f=d);if((b=g)&&"function"!==typeof g&&("object"!==typeof g||"number"!==typeof g.length))$D.error(Error("Json.stringify:\u66ff\u6362\u53c2\u6570\u53ea\u80fd\u662f\u51fd\u6570\u6216\u8005\u6570\u7ec4"));else return c("",{"":h})},parse:function(b,e,f){function c(b,a){var f,h,g=b[a];if(g&&"object"===typeof g)for(f in g)Object.prototype.hasOwnProperty.call(g,
f)&&(h=c(g,f),void 0!==h?g[f]=h:delete g[f]);return e.call(b,a,g)}if(a&&!f)return JSON.parse.apply(null,arguments);var h;b=String(b);j.lastIndex=0;j.test(b)&&(b=b.replace(j,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(k.test(b.replace(l,"@").replace(m,"]").replace(t,"")))return h=eval("("+b+")"),"function"===typeof e?c({"":h},""):h;$D.error(new SyntaxError("JSON.parse"))}}});
handy.add("Object",function(){var d;d=(d=window.navigator.userAgent.match(/MSIE ([\d.]+)/))&&9>parseInt(d[0])?function(a,b,e){var f=[];if(a.length){b=b||0;for(e=e||a.length;b<e;b++)f.push(a[b])}return f}:function(a,b,e){return Array.prototype.slice.call(a,b||0,e||a.length)};var c={_alias:{B:"handy.base",C:"handy.component",M:"handy.module",CM:"handy.common"},namespace:function(a,b){var e=null,f,h,g,d;a=c.alias(a);h=a.split(".");e=h[0];e=(g=2==arguments.length)?eval("(function(){if (typeof "+e+' == "undefined"){'+
e+" = {};}return "+e+";})()"):eval("(function(){if (typeof "+e+' != "undefined")return '+e+";})()");f=1;for(d=h.length;f<d;++f){if(f==d-1&&g)e[h[f]]=b;else if(g||e&&e[h[f]])e[h[f]]=e[h[f]]||{};else return;e=e[h[f]]}return e},alias:function(a,b){var e=c._alias;if(b)e[a]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+a+":"+e[a]):e[a]=b;else{if(a){var f=a,h=a.length-1;do{if(e[f])return e[f]+a.substring(h);h=f.lastIndexOf(".")}while(0<h&&(f=f.substring(0,h)));return a}return e}},extend:function(a,b,
e){var f=e?e.notCover:!1,h=e?e.cover:null;e=e?e.notClone:!1;a=a||{};var g=a.constructor,d=g.$isClass,k;for(k in b)if((!h||c.contains(h,k))&&b.hasOwnProperty(k)){var l=a.hasOwnProperty(k),m=!0===f?l:!1;c.isArray(f)?m=c.contains(f,k)&&l:c.isFunction(f)&&(m=f(k));m||(l=e?b[k]:c.clone(b[k]),d&&c.isFunction(l)&&(l.$name=k,l.$owner=g),a[k]=l)}return a},mix:function(a,b,e){a.superProto||(a.superProto={});for(var f in b)a.superProto[f]=c.isFunction(b[f])?a.superProto[f]?function(a,e){return function(){e.apply(this,
arguments);b[a].apply(this,arguments)}}(f,a.superProto[f]):b[f]:b[f],a[f]||(a[f]=b[f]);e&&c.extend(a,e);b.toString!=b.constructor.prototype.toString&&(a.superProto.toString=function(){b.toString.apply(a,arguments)});return a},isFunction:function(a){return"[object Function]"===window.Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===window.Object.prototype.toString.call(a)},equals:function(a,b){if(typeof a==typeof b){if("object"!=typeof a)return a===b;if(a===b)return!0;
if(c.isArray(a)&&c.isArray(b)){if(a.length!=b.length)return!1;for(var e=0,f=a.length;e<f;e++)if(!c.equals(a[e],b[e]))return!1;return!0}if(!c.isArray(a)&&!c.isArray(b)){if(c.count(a)!=c.count(b))return!1;for(e in a)if(void 0==b[e]||!c.equals(a[e],b[e]))return!1;return!0}}return!1},clone:function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor;if(b!=window.Object&&b!=window.Array)return a;if(b==window.Date||b==window.RegExp||b==window.Function||b==window.String||b==window.Number||b==
window.Boolean)return new b(a);try{var e=new b,f;for(f in a)e[f]=c.clone(a[f]);return e}catch(h){return a}},isEmpty:function(a){if(c.isArray(a))return 0==a.length;for(var b in a)return!1;return!0},each:function(a,b,e){var f,h=0,g=a.length,d=void 0===g||c.isFunction(a);if(e)if(d)for(f in a){if(!1===b.apply(a[f],e))break}else for(;h<g&&!1!==b.apply(a[h++],e););else if(d)for(f in a){if(!1===b.call(a[f],f,a[f]))break}else for(;h<g&&!1!==b.call(a[h],h,a[h++]););return a},contains:function(a,b){var e=!1;
c.each(a,function(a,h){if(c.equals(h,b))return e=!0,!1});return e},largeThan:function(a,b){if("object"==typeof a&&"object"==typeof b){var e=!0;c.each(b,function(f){if(!c.equals(b[f],a[f]))return e=!1});return e}},count:function(a){if(c.isArray(a))return a.length;var b=0,e;for(e in a)b++;return b},toArray:d,getSingleton:function(a){a="string"==typeof a?c.namespace(a):a;return a._singleton||(a._singleton=new a)},generateMethod:function(a,b,e){b=c.isArray(b)?b:b.split(",");for(var f=0;f<b.length;f++){var h=
b[f];a[h]=e(h)}}};return c});
handy.add("Browser","handy.base.Object",function(d){var c={},a={};d.generateMethod(a,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(a){var e=c[b];return!a&&"string"===typeof e&&/^[\d\.]+$/.test(e)?parseInt(e):e}});d=window.navigator.userAgent;var b;(b=d.match(/MSIE ([\d.]+)/))?c.ie=b[1]:(b=d.match(/Firefox\/([\d.]+)/))?c.firefox=b[1]:(b=d.match(/Chrome\/([\d.]+)/))?
c.chrome=b[1]:(b=d.match(/Opera.([\d.]+)/))?c.opera=b[1]:(b=d.match(/Version\/([\d.]+).*Safari/))?c.safari=b[1]:0;/windows|win32/i.test(d)?c.windows=!0:/linux/i.test(d)?c.linux=!0:/macintosh/i.test(d)?c.mac=!0:0;/trident/i.test(d)?c.trident=!0:/webkit/i.test(d)?c.webkit=!0:/gecko/i.test(d)?c.gecko=!0:/presto/i.test(d)?c.presto=!0:0;/MetaSr/i.test(d)?c.sogou=!0:/Maxthon/i.test(d)?c.maxthon=!0:/TencentTraveler/i.test(d)?c.tt=!0:/TheWorld/i.test(d)?c.theWorld=!0:/360[S|E]E/i.test(d)?c.is360=!0:0;var e;
if((e=d.match(/AppleWebKit\/([\d.]*)/))&&e[1])if(/ Mobile\//.test(d)&&d.match(/iPad|iPod|iPhone/)){c.mobile="ios";if((e=d.match(/OS ([^\s]*)/))&&e[1])c.ios=e[1].replace("_",".");if((e=d.match(/iPad|iPod|iPhone/))&&e[0])c[e[0].toLowerCase()]=c.ios}else if(/ Android/i.test(d)){if(/Mobile/.test(d)&&(c.mobile="android"),(e=d.match(/Android ([^\s]*);/))&&e[1])c.android=e[1]}else if(e=d.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))c.mobile=e[0].toLowerCase();var f;try{if(c.ie){var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
h&&(f=h.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(h=navigator.plugins["Shockwave Flash"])){var g=h.description.split(" ");b=0;for(var j=g.length;b<j;b++)if(0<parseInt(g[b])){f=g[b];break}}}catch(k){}c.flash=f?f:null;return a});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(d,c,a){var b={level:0,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:!("console"in window)||!!c.mobile(),out:function(e,f,c){c=c||"log";if(f||b.showInPage){f=a.expando+"debugDiv";var g=top.document,d=g.getElementById(f);d?d.style.display="block":(d=g.createElement("DIV"),d.id=f,d.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+g.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',d.style.position="fixed",d.style.width=g.body.offsetWidth-20+"px",d.style.left=0,d.style.top=0,d.style.right=0,d.style.height="150px",d.style.backgroundColor="#aaa",d.style.fontSize="12px",d.style.padding="10px",d.style.zIndex=9999999999,d.style.opacity=0.8,d.style.filter="alpha(opacity=80)",g.body.appendChild(d));f=d.getElementsByTagName("DIV")[0];g=a.Json.stringify(e,null,"&nbsp;&nbsp;&nbsp;&nbsp;",!0).replace(/\n/g,"<br/>");f.innerHTML+=
c+" : "+g+"<br/>";f.scrollTop=f.scrollHeight}try{console[c](e)}catch(k){}},log:function(a,f){b.level>b.LOG_LEVEL||b.out(a,!!f,"log")},info:function(a,f){this.level>b.INFO_LEVEL||b.out(a,!!f,"info")},warn:function(a,f){b.level>b.WARN_LEVEL||b.out(a,!!f,"warn")},error:function(a,f){if(!(b.level>b.ERROR_LEVEL)&&(b.out(a,!!f,"error"),a instanceof Error))throw a;},time:function(a,f,c){b.level>b.INFO_LEVEL||(a?("boolean"==typeof f&&(c=f,f=""),b.out((f||"")+((new Date).getTime()-(b.lastTime||0)),!!c)):b.lastTime=
(new Date).getTime())},debug:function(a){if(!(b.level>b.DEBUG_LEVEL)&&!1!==a)debugger}};return b});handy.add("Function",function(d){return{bind:function(c,a,b){var e=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(e,arguments);return c.apply(a,e)}},intercept:function(c,a,b,e){return d.Object.isFunction(c)&&d.Object.isFunction(a)?function(){var f=b||this,h={},g=arguments;h.scope=e;h.target=f;h.method=c;return!1!=a.apply(h,g)?c.apply(f,g):!1}:c}}});
handy.add("Class","handy.base.Object",function(d,c){return{createClass:function(a){var b=function(){var a,f;a=this.constructor==b?this:arguments.callee;if(f=a.initialize){for(var c in a)"object"==typeof a[c]&&(a[c]=d.clone(a[c]));return f.apply(a,arguments)}};b.$isClass=!0;b.extend=function(){};b.prototype.callSuper=function(b,a){b&&(!b.$isClass&&void 0!=b.length)&&(a=b,b=null);var c=arguments.callee.caller,g=c.$owner.superProto;b=b?b.prototype:g||this.constructor.superProto;c=c.$name;if(b&&(c=b[c],
d.isFunction(c)))return a?c.apply(this,a):c.call(this)};a&&this.namespace(a,b);return b},inherit:function(a,b,e,f,h){var g=function(){};g.prototype=b.prototype;d.extend(a,b,h);a.prototype=new g;a.prototype.constructor=a;a.superClass=b;a.superProto=b.prototype;if(b._onInherit)try{b._onInherit(a)}catch(j){c.Debug.error(j)}f&&d.extend(a,f);e&&d.extend(a.prototype,e)}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(d,c,a,b){function e(b){function a(b){return/\.(css|js)$/.test(b)?t[b]&&"loaded"==t[b].status:p.urlMap&&p.urlMap[b]?p.urlMap[b].chkExist():c.namespace(b)}if("string"==typeof b)return a(b);for(var e=[],f=0,h=b.length;f<h;f++){var g=a(b[f]);if(g)e.push(g);else return!1}return e}function f(b,a){function e(){e.isCalled||(e.isCalled=!0,clearTimeout(j),a())}if("SCRIPT"===b.nodeName){var f=b,c=e;f.onload=f.onerror=
f.onreadystatechange=function(){/loaded|complete|undefined/.test(f.readyState)&&(f.onload=f.onerror=f.onreadystatechange=null,k.removeChild(f),f=null,setTimeout(c,0))}}else{var g=e;window.hasOwnProperty("attachEvent")?b.attachEvent("onload",g):setTimeout(function(){h(b,g)},0)}var j=setTimeout(function(){d.error("Time is out:"+b.src);e()},p.timeout)}function h(b,a){if(!a.isCalled){var f;if(l)b.sheet&&(f=!0);else if(b.sheet)try{b.sheet.cssRules&&(f=!0)}catch(e){if("SecurityError"===e.name||"NS_ERROR_DOM_SECURITY_ERR"===
e.name)f=!0}setTimeout(function(){f?a():h(b,a)},1)}}function g(b){p.showLoading(!1);t[b].status="loaded";p.traceLog&&d.info("Loader Response: "+b);j()}function j(){for(var b=m.length-1;0<=b;b--){var a=m[b],f=e(a.deps);if(f){m.splice(b,1);a.callback.apply(null,f);j();break}}}var k=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=navigator.userAgent.indexOf("AppleWebKit"),m=[],t={},p={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,
a,f){2==arguments.length&&(f=a,a=[]);p.require(a,function(){var a;if("function"==typeof f)try{a=f.apply(null,arguments),p.traceLog&&d.info("Loader define: "+b)}catch(e){d.error("Loader "+b+":factory define error:"+e.message,e);return}else a=f;c.namespace(b,a);var h=typeof a;if("object"==h||"Function"==h)a.$ns=b})},require:function(c,h){for(var j="string"==typeof c?[c]:c,l=[],u=[],s=!0,r=0,q=j.length;r<q;r++){var n=j[r],v=e(n);v?u.push(v):(l.push(n),s&&(s=!1,m.push({deps:j,callback:h})),p.traceLog&&
d.info("Resource not found: "+n))}if(0==l.length)return h&&h.apply(null,u),0==u.length?u[0]:u;s=!1;j=0;for(u=l.length;j<u;j++)if(r=l[j],!t[r]){s=r;n=p.urlMap&&p.urlMap[s]&&p.urlMap[s].url;if(!n){q="";s=b.Object.alias(s);n=p.rootPath;if("string"==typeof n)q=n;else if("object"==typeof n)for(v in v=void 0,n)0==s.indexOf(v)&&(q=n[v],s=s.replace(v,""));else q="";n=/.css$/.test(s)?0==s.indexOf("/")?s:"/css/"+s:/.js$/.test(s)?s:s.replace(/\./g,"/")+".js";0!=n.indexOf("/")&&(n="/"+n);n=q+n}s=!0;t[r]={id:r,
status:"loading"};q=a.bind(g,null,r);if(/.css$/.test(n))a:{r=n;n=k.getElementsByTagName("link");for(v=0;v<n.length;v++){var A=n[v].href;!p.skinNode&&0<=A.indexOf(p.skinName)&&(p.skinNode=n[v]);if(0<=A.indexOf(r)||0<=r.indexOf(A))break a}n=document.createElement("link");n.rel="stylesheet";n.href=r;f(n,q);k.insertBefore(n,p.skinNode);p.traceLog&&d.info("Loader request:"+r)}else r=n,n=document.createElement("script"),n.async="async",n.src=r,n.type="text/javascript",f(n,q),k.appendChild(n),p.traceLog&&
d.info("Loader request:"+r)}s&&p.showLoading(!0)}};return p});
handy.add("Events",function(){var d=Array.prototype;return{_eventCache:{},_parseEvents:function(c,a,b){var e=/\s+/,f=d.slice.call(arguments,2);if("object"==typeof a){for(var h in a)this[c].apply(this,[h,a[h]].concat(f));return!0}if(e.test(a)){e=a.split(e);h=0;for(var g=e.length;h<g;h++)this[c].apply(this,[e[h]].concat(f));return!0}return!1},on:function(c,a,b,e){var f=this;if(!f._parseEvents("on",c,a,b,e)){var h=f._eventCache,g=h[c];g||(g=h[c]=[]);g.push({times:e,handler:a,context:b,delegation:function(){if(!0!=
f.isSuspend)return a.apply(b||f,arguments)}})}},once:function(c,a,b){if(!this._parseEvents("once",c,a,b,1))this.on(c,a,b,1)},off:function(c,a){if("all"==c)return this._eventCache={},!0;if(!this._parseEvents("off",c,a)){var b=this._eventCache,e=c.indexOf(".");if(!a&&0>=e){for(var f in b)(f.split(".")[0]==c||0==e&&0<=f.indexOf(c))&&delete b[f];return!0}e=b[c];if(!e)return!1;if(a){b=0;for(f=e.length;b<f;b++)if(e[b].handler==a)return e.splice(b,1),!0}else return delete b[c],!0;return!1}},suspend:function(){if(this.isSuspend)return!1;
this.isSuspend=!0},resume:function(){if(!this.isSuspend)return!1;this.isSuspend=!1},trigger:function(c,a){function b(b){if(b)for(var a=0,f=b.length;a<f;a++){var c=b[a],d=c.delegation;"number"==typeof c.times&&(1<c.times?c.times--:e.off(k,c.handler));g=d.apply(null,h)}}var e=this,f=$HO.toArray(arguments);f.unshift("trigger");if(!e._parseEvents.apply(e,f)){var f=e._eventCache,h=d.slice.call(arguments,1),g,j;if(0<c.indexOf("."))j=f[c],b(j);else for(var k in f)if(j=c.indexOf("."),k.split(".")[0]==c||
0==j&&0<=k.indexOf(c))j=f[k],b(j);b(f.all);return g}}}});
handy.add("Date",function(){var d=window.Date,c={getWeek:function(a,b){var e=a.getDay();b&&(e=(e+(b%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[e]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new d(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var b=new d(a.getFullYear(),0,0);a=new d(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-b.getTime())/864E5)},getDayIndexOfYear:function(a){var b=new d("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-b.getTime())/864E5)},format:function(a,b){b=b||"yyyy-MM-dd HH:mm:ss";a=a||new d;var e=a.getHours(),f=Math.floor((a.getMonth()+3)/3),e={"y+":a.getFullYear(),"M+":a.getMonth()+1,"d+":a.getDate(),"h+":0==e%12?12:e%12,"H+":e,"m+":a.getMinutes(),"s+":a.getSeconds(),"w+":c.getWeek(a),"q+":f,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][f-1],"S+":a.getMilliseconds()},h;for(h in e)RegExp("("+h+")").test(b)&&(f=RegExp.$1.length,b=b.replace(RegExp.$1,1==f?e[h]:("00"+
e[h]).slice(-f)));return b},parse:function(a,b){for(var e=(b||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),f=a.match(/\d+/g),c=new d,g=0;g<f.length;g++){var j=e[g],k=parseInt(f[g]);switch(j){case "yyyy":c.setFullYear(k);break;case "MM":c.setMonth(k-1);break;case "dd":c.setDate(k);break;case "HH":c.setHours(k);break;case "mm":c.setMinutes(k);break;case "ss":c.setSeconds(k);break;case "SS":c.setMilliseconds(k)}}return c},parseObject:function(a){return new d(a.year+1900,a.month,a.date,a.hours,a.minutes,
a.seconds)}};return c});
handy.add("String",function(){var d={stripTags:function(c){return c.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(c){var a=document.createElement("div");c=document.createTextNode(c);a.appendChild(c);return a.innerHTML},unescapeHTML:function(c){var a=document.createElement("div");a.innerHTML=d.stripTags(c);return a.childNodes[0].nodeValue},decodeHTML:function(c){c=c.replace(/&lt;/gi,"<");c=c.replace(/&gt;/gi,">");c=c.replace(/&quot;/gi,'"');c=c.replace(/&apos;/gi,"'");c=c.replace(/<\/?br>/gi,"\n");
c=c.replace(/&amp;/gi,"&");return c=c.replace(/&nbsp;/gi," ")},encodeHTML:function(c){c=c.replace(/&/gi,"&amp;");c=c.replace(/</gi,"&lt;");c=c.replace(/>/gi,"&gt;");c=c.replace(/\"/gi,"&quot;");c=c.replace(/\'/gi,"&apos;");c=c.replace(/\n/gi,"</br>");return c=c.replace(/ /gi,"&nbsp;")},trim:function(c){return c=c.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(c,a){a||(a=/[,%\'\"\/\\;|\<\>\^]/);return-1<c.search(a)},len:function(c){return c.replace(/[^\x00-\xff]/g,"**").length},left:function(c,
a,b){if(d.len(c)>a){!0===b?b=2:0<b||(b=0);var e=0,f=0;for(a-=b;f<a;)255<c.charCodeAt(e)?f+=2:f++,e++;c=c.substring(0,e);for(e=0;e<b;e++)c+="."}return c},isNumber:function(c){return 0==c.search(/^\d+$/g)},hasChn:function(c){return/[\u4E00-\u9FA5]+/.test(c)},isChn:function(c){return/^[\u4E00-\u9FA5]+$/.test(c)},addParam:function(c,a){a&&(c+=(-1<c.indexOf("?")?"&":"?")+a);return c}};return d});
handy.add("Cookie",function(){return{get:function(d,c){var a=d+"=",b="",e=document.cookie;if(0<e.length){var f=e.indexOf(a);-1!=f&&(f+=a.length,a=e.indexOf(";",f),-1==a&&(a=e.length),b=e.substring(f,a),c||(b=unescape(b)))}return b},set:function(d,c,a){var b=[];void 0!=d&&void 0!=c&&b.push(d+"="+escape(c));a&&(void 0!=a.path&&b.push("path="+a.path),void 0!=a.domain&&b.push("domain="+a.domain),void 0!=a.expires&&b.push("expires="+a.expires),a.secure&&b.push("secure"));document.cookie=b.join(";")},del:function(d){var c=
new Date;c.setTime(c.getTime()-1);document.cookie=d+"=;expires="+c.toGMTString()}}});handy.add("Util",function(d){var c=0;return{isWindow:function(a){return null!=a&&a==a.window},getUuid:function(){return c++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(a){var b=top.location.hash;0<=b.indexOf("#")&&(a=b.replace(/#[^\?]*/,a));top.location.hash=a},result:function(a,b){var e=a[b];return d.Object.isFunction(e)?e():e}}});
handy.add("Collection","B.Object",function(d){function c(b){return b}function a(b){return function(a){return a[b]}}function b(b){return function(a){if(a===b)return!0;for(var c in b)if(b[c]!==a[c])return!1;return!0}}return{map:function(b,a,c){var g=[];if(null==b)return g;var j=Array.prototype.map;if(j&&b.map===j)return b.map(a,c);d.each(b,function(b,e){g.push(a.call(c,e,b))});return g},pluck:function(b,f){return this.map(b,a(f))},some:function(b,a,c){var g=!1;if(null==b||!a)return g;var d=Array.prototype.some;
if(d&&b.some===d)return b.some(a,c);$HO.each(b,function(b,e,d){if(g||(g=a.call(c,e,b,d)))return!1});return!!g},every:function(b,a,c){var g=!0;if(null==b||!a)return g;var d=Array.prototype.every;if(d&&b.every===d)return b.every(a,c);$HO.each(b,function(b,e,d){if(!(g=a.call(c,e,b,d)))return!1});return!!g},find:function(b,a,c){var g;this.some(b,function(b,e,d){if(a.call(c,b,e,d))return g=b,!0});return g},filter:function(b,a,c){var g=[];if(null==b)return g;var d=Array.prototype.filter;if(d&&b.filter===
d)return b.filter(a,c);$HO.each(b,function(b,e,d){a.call(c,e,b,d)&&g.push(e)});return g},where:function(a,f){return this.filter(a,b(f))},findWhere:function(a,f){return this.find(a,b(f))},invoke:function(b,a){var c=Array.prototype.slice.call(arguments,2),g=d.isFunction(a);return this.map(b,function(b){return(g?a:b[a]).apply(b,c)})},sortBy:function(b,f,h){var d=f;f=null==d?c:$HO.isFunction(d)?d:a(d);return this.pluck(this.map(b,function(b,a,e){return{value:b,index:a,criteria:f.call(h,b,a,e)}}).sort(function(b,
a){var f=b.criteria,e=a.criteria;if(f!==e){if(f>e||void 0===f)return 1;if(f<e||void 0===e)return-1}return b.index-a.index}),"value")}}});
handy.add("Template",function(d){var c={},a=/^=/,b="".trim,e={openTag:"<%",closeTag:"%>",_add:function(a){return b?"$r+="+a+";\n":"$r.push("+a+");\n"},_parseHtml:function(b){b=b.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return e._add('"'+b+'"')},_parseScript:function(b){b=b.replace(/this/g,"$data");0==b.indexOf("=")&&(b=e._add(b.replace(a,"")+'||""'));return b+"\n"},_compile:function(a){var c="var $r="+(b?'""':"[]")+";\n";d.Object.each(a.split(e.openTag),function(b,a){var f=
a.split(e.closeTag);1==f.length?c+=e._parseHtml(f[0]):(c+=e._parseScript(f[0]),f[1]&&(c+=e._parseHtml(f[1])))});c+="return "+(b?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(b,a){var g,j,k;if("string"==typeof b)g=b;else if(g=b.tmpl,k=b.id)if(c[k])j=c[k];else{var l=document.getElementById(k);l&&(g=(l.value||l.innerHTML).replace(/\s/g,""))}if(!j){if(!g){d.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}j=e._compile(g);k&&(c[k]=j)}return a?j(a):j}};return e});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(d,c,a){function b(b){if(b==l)return!1;var a=k.contentWindow.document;a.open();a.write("<!doctype html><html><body>"+b+"</body></html>");a.close();l=b;d.log("set:"+k.contentWindow.document.body.innerText)}function e(){var a=c.getHash(),e=k.contentWindow.document.body.innerText;a!=l?(b(a),f(a)):e!=l&&(d.log("update:"+k.contentWindow.document.body.innerText),c.setHash(e))}function f(b){var a=p.listeners,e;for(e in a)a[e](b)}var h,
g=0,j=document,k,l,m=j.documentMode,t="onhashchange"in window&&(void 0===m||7<m),p={delay:50,listen:function(d,l){if(!h&&!h)if(h=!0,p.listeners={},t)$(window).on("hashchange",function(){f(c.getHash())});else k=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(j.body)[0],$(k).one("load",function(){b(c.getHash());setInterval(e,p.delay)});if(l in p.listeners)$D.error(Error("Duplicate name"));else return l=l||a.expando+ ++g,p.listeners[l]=d,l},unListen:function(b){for(var a in p.listeners)(!b||
b==a)&&delete p.listeners[a]}};return p});handy.add("Support",function(d){var c={mediaQuery:function(){var b;if(d.Browser.mobile())b="hui-mobile";else{b="hui-pc";var a=d.Browser.ie();a&&(b+=" ie"+a)}document.documentElement.className+=" "+b}};c.mediaQuery();if(6==d.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}return c});
handy.add("Validator",["B.String","B.Object"],function(d,c){var a={messages:{required:"{name}\u4e0d\u80fd\u4e3a\u7a7a",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94fe\u63a5\u5730\u5740",date:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f",number:"{name}\u987b\u662f\u6570\u5b57",digits:"{name}\u987b\u662f\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u7528\u5361\u53f7\u7801",
equalTo:"\u8bf7\u8f93\u5165\u76f8\u540c\u7684{name}",min:"{name}\u4e0d\u80fd\u5c0f\u4e8e{0}",max:"{name}\u4e0d\u80fd\u5927\u4e8e{0}",range:"{name}\u8981\u5728{0}\u5230{1}\u4e4b\u95f4",maxlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7{0}",minlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e{0}",rangelength:"{name}\u957f\u5ea6\u8981\u5728{0}\u5230{1}\u4e4b\u95f4"},valid:function(b,e){var f=e.rules,c;for(c in f){var d=f[c],j=("function"==typeof d?d:a[c])(b,d);if(!j)return f=e.error||a.error,c=e.messages&&
e.messages[c]||a.messages[c],c=c.replace(/\{([^\}]+)\}/g,function(b,a){return d[a]||0==a&&d||e[a]||d||""}),f&&f(c),j}return!0},required:function(b){return 0<d.trim(""+b).length},email:function(b){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(b)},
url:function(b){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},
date:function(b){return!/Invalid|NaN/.test((new Date(b)).toString())},dateISO:function(b){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(b)},number:function(b){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(b)},digits:function(b){return/^\d+$/.test(b)},creditcard:function(b){if(/[^0-9 \-]+/.test(b))return!1;var a=0,f=0,c=!1;b=b.replace(/\D/g,"");for(var d=b.length-1;0<=d;d--){f=b.charAt(d);f=parseInt(f,10);if(c&&9<(f*=2))f-=9;a+=f;c=!c}return 0===a%10},min:function(b,a){return b>=a},max:function(b,
a){return b<=a},range:function(b,a){return b>=a[0]&&b<=a[1]},minlength:function(b,a){return(c.isArray(b)?b.length:d.trim(""+b).length)>=a},maxlength:function(b,a){return(c.isArray(b)?b.length:d.trim(""+b).length)<=a},rangelength:function(b,a){var f=c.isArray(b)?b.length:d.trim(""+b).length;return f>=a[0]&&f<=a[1]},equalTo:function(b,a){return b===a}};return a});
handy.add("LocalStorage",["B.Browser","B.Events","B.Json"],function(d,c,a){c={_init:function(){!b&&d.ie()&&(f=document.getElementById("LocalStorageUserDataDiv"),f||(f=document.createElement("DIV"),f.style.display="none",f.id="LocalStorageUserDataDiv",f.addBehavior("#default#userData"),document.body.appendChild(f),f.load(h)))},getItem:function(c){c=b?e.getItem(c):f.getAttribute(c);return c=a.parse(c)},setItem:function(c,d){d=a.stringify(d);try{b?e.setItem(c,d):(f.setAttribute(c,d),f.save(h))}catch(k){return $D.error(k),
!1}return!0},removeItem:function(a){b?e.removeItem(a):(f.removeAttribute(a),f.save(h))},clear:function(){b?e.clear():f.unload()}};var b=window.localStorage&&window.localStorage.getItem,e=window.localStorage,f,h=document.domain;c._init();return c})(function(d){Hui=H=$H=d.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HE=$H.Events;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};d=window.$;d.fn.remove=$HF.intercept(d.fn.remove,
function(){$H.trigger("removeEl",this.target)})})(handy);
$Define("CM.AbstractManager",function(){var d=$H.createClass();$HO.extend(d.prototype,{_types:{},_all:{},type:"manager",registerType:function(c,a){this._types[c]=a;a.prototype.xtype=c},getClass:function(c){return this._types[c]},register:function(c){this._all[c.getId()]=c},unregister:function(c){var a=this._all,b=c.getId();a[b]==c&&delete a[b]},eachInEl:function(c,a){var b=this;c.find(".js-"+b.type).each(function(e,f){f=$(f);var c=f.attr("id");(c=b.get(c))&&a(c)})},generateId:function(c,a){var b=
$H.expando+"_"+this.type+"_"+(c||$H.Util.getUuid());if(!0!=a&&this._all[b])$D.error("id\u91cd\u590d:"+b);else return b},get:function(c){var a=this._all;return a[c]||a[this.generateId(c,!0)]}});return d});
$Define("CM.ViewManager","CM.AbstractManager",function(d){var c=$H.createClass();$H.inherit(c,d,{type:"view",initialize:function(){var a=this;$H.on("afterRender",function(b){a.afterRender(b)});$H.on("removeEl",function(b){a.destroy(b)})},afterRender:function(a){this.eachInEl(a,function(b){b.afterRender()})},destroy:function(a){this.eachInEl(a,function(b){b.destroy(!0)})}});$V=$HO.getSingleton(c);return c});
$Define("CM.AbstractView","CM.ViewManager",function(d){var c=$H.createClass(),a=/^(<[a-zA-Z]+)/,b=/^[^>]+class=/,e=/(class=")/;$HO.extend(c,{extend:function(b){var a=this.prototype;$HO.extend(a,b,{notCover:function(c){if($HO.contains(["_customEvents","listeners"],c))return a[c]=(b[c]||[]).concat(a[c]||[]),!0;if("xtype"==c||"constructor"==c)return!0}})},html:function(b){return(new this($HO.extend({autoRender:!1},b))).getHtml()}});$HO.extend(c.prototype,$H.Events);$HO.extend(c.prototype,{xtype:"AbstractView",
autoRender:!0,renderBy:"append",children:[],_customEvents:"beforeRender render afterRender beforeShow show afterShow beforeHide hide afterHide beforeUpdate update afterUpdate beforeDestroy destroy afterDestroy".split(" "),_defaultEvents:"mousedown mouseup mouseover mousemove mouseenter mouseleave dragstart drag dragenter dragleave dragover drop dragend touchstart touchmove touchend touchcancel keydown keyup keypress click dblclick focus focusin focusout contextmenu change submit".split(" "),initialize:function(b){this.manager=
this.constructor.manager||$HO.getSingleton(d);this.doConfig(b);this.parseItems();!1!=this.autoRender&&this.render();this.manager.register(this)},doConfig:function(b){var a=this;a.params=b;a.settings=$HO.clone(b);a.renderTo=b.renderTo?$(b.renderTo):$(document.body);var c=a.listeners||[];b.listeners&&(c=c.concat(b.listeners));a._listeners=c;$HO.extend(a,b,{notCover:function(c){var e=a[c],d=$HO.contains(a._customEvents,c);if($HO.contains(a._defaultEvents,c))a._listeners.push({name:c,handler:b[c]});else if(d)a.on(c,
b[c]);if(null!=e&&"object"==typeof e||$HO.isFunction(e))return!0}});b.defItem&&$HO.extend(a.defItem,b.defItem)},getEl:function(){return this._container},getId:function(){return this._id||(this._id=this.manager.generateId(this.cid))},initHtml:function(){"string"!=typeof this.tmpl&&(this.tmpl=this.constructor.prototype.tmpl=this.tmpl.join(""));return $H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this)},getHtml:function(){var c=this.getId(),d;d="visibility"==this.displayMode?"visibility:hidden;":"display:none;";
var g=this.initHtml(),j=b.test(g),k="js-"+this.manager.type+" "+this.extCls+" ";j&&(g=g.replace(e,"$1"+k));return g=g.replace(a,'$1 id="'+c+'" style="'+d+'"'+(j?"":' class="'+k+'"'))},findHtml:function(b){b=">*"==b?this.children:this.find(b);for(var a=[],c=0;c<b.length;c++)a.push(b[c].getHtml());return a.join("")},initStyle:function(){var b=this.getEl(),a=this.style||{};void 0!=this.width&&(a.width=this.width);void 0!=this.height&&(a.height=this.height);b.css(a)},beforeRender:function(){return this.trigger("beforeRender")},
render:function(){if(!1==this.beforeRender())return!1;this.trigger("render");var b=this.getHtml();this.renderTo[this.renderBy](b);this.afterRender()},afterRender:function(){if(this.rendered)return!1;this.callChild();this._container=$("#"+this.getId());this.rendered=!0;this.initStyle();!0!=this.notListen&&this.initListeners();this.disabled&&this.disable();this.trigger("afterRender");this.hidden||this.show()},beforeShow:function(){return this.trigger("beforeShow")},show:function(b,a){var e=this;if(!1==
e.beforeShow()||e.showed||a&&e.hidden)return!1;if(!b&&e.delayShow)setTimeout(function(){c.prototype.show.call(e,!0)},0);else{e.trigger("show");e.showed=!0;var d=e.getEl();"visibility"==e.displayMode?d.css({visibility:"visible"}):d.show();e.callChild([null,!0]);e.afterShow()}},afterShow:function(){this.trigger("afterShow")},beforeHide:function(){return this.trigger("beforeHide")},hide:function(){if(!1==this.beforeHide()||!this.showed)return!1;this.showed=!1;var b=this.getEl();"visibility"==this.displayMode?
b.css({visibility:"hidden"}):b.hide();this.trigger("hide");this.afterHide()},afterHide:function(){this.trigger("afterHide")},enable:function(){this.resume();this.getEl().removeClass("hui-disable").find("input,textarea,select").removeAttr("disabled")},disable:function(){this.suspend();this.getEl().addClass("hui-disable").find("input,textarea,select").attr("disabled","disabled")},listen:function(b){var a=this,c=b.name,e=b.context,d=b.handler;if(b.custom)a.on(c,d,e);else{var l=a._listeners,m=b.el,t=
b.method||"bind",p=b.selector,w=b.data,y=b.delegation=function(){if(!0!=a.isSuspend)return d.apply(e||a,arguments)};$H.Browser.mobile()&&"click"==c&&(c="touchend");m=m?"string"==typeof m?a.find(m):m:a.getEl();if(p)if(w)m[t](p,c,w,y);else m[t](p,c,y);else if(w)m[t](c,w,y);else m[t](c,y);l.push(b)}},unlisten:function(b){var a=b.name,c=b.handler;if(b.custom)this.off(a,c);else{var e=b.el,d="delegate"==b.method?"undelegate":"unbind";b=b.selector;var l;$H.Browser.mobile()&&"click"==a&&(a="touchend");for(var e=
e?"string"==typeof e?this.find(e):e:this.getEl(),m=this._listeners.length-1;0<=m;m--){var t=this._listeners[m];if(t.handler==c){l=t.delegation;this._listeners.splice(m,1);break}}if(b)e[d](b,a,l);else e[d](a,l)}},initListeners:function(){if(this.listened)return!1;this.listened=!0;var b=this._listeners;this._listeners=[];for(var a=b.length-1;0<=a;a--)this.listen(b[a]);this.callChild()},clearListeners:function(){for(var b=this._listeners,a=b.length-1;0<=a;a--)this.unlisten(b[a]);this.off("all");this.callChild()},
suspend:function(){if(this.isSuspend)return!1;this.isSuspend=!0;this.callChild()},resume:function(){if(!this.isSuspend)return!1;this.isSuspend=!1;this.callChild()},each:function(b,a){for(var c=this.children,e=c.length,d,l=0;l<e;){d=c[l];d=a?b.apply(d,a):b(l,d);if(!1===d)break;e==c.length?l++:e=c.length}},match:function(b,a){if("*"==b)return!0;var c=a||this,e,d,l;b=b.replace(/^([^\[]+)/,'[xtype="$1"]');for(var m=/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;e=m.exec(b);)if(d=e[1],l=e[2],e=eval(e[3]),"="===l?c[d]!=
e:c[d]==e)return!1;return!0},find:function(b,a){var c=this;if(0!=b.indexOf("$"))return c.getEl().find(b);a=a||[];if(0<b.indexOf(","))return $HO.each(b.split(","),function(b,e){a=a.concat(c.find(e))}),a;var e=1==b.indexOf(">"),d=b.replace(/^\$>?\s?/,""),l=d.search(/\s|>/),m;0<l&&(m=d.substring(l),d=d.substring(0,l));c.each(function(c,g){g.match(d)&&(m?g.find("$"+m,a):a.push(g));e||g.find(b,a)});return a},parents:function(b){if(b&&0!=b.indexOf("$"))return this.getEl().parents(b);for(var a=this;a.parent;)if(a=
a.parent,b&&this.match(b,a))return a;return b||a===this?null:a},index:function(){var b=this,a=b.parent;if(a){var c;a.each(function(a,e){if(e==b)return c=a,!1});return c}return null},callChild:function(b,a){0!=this.children.length&&(b&&"string"!=typeof b&&(a=b,b=null),b=b||arguments.callee.caller.$name,this.each(function(c,e){a?e[b].apply(e,a):e[b].call(e)}))},add:function(b){this.children.push(b);b.parent=this},remove:function(b){for(var a=this.children,c=!1,e=0,d=a.length;e<d;e++)a[e]==b&&(a.splice(e,
1),b.destroy(),c=!0);return c},addItem:function(b){var a=this.settings,c=a.items;c?$HO.isArray(c)||(a.items=[c]):a.items=[];a.items.push(b)},parseItem:function(){},parseItems:function(){var b=this.settings.items;if(b)for(var b=b.length?b:[b],a=0,c=b.length;a<c;a++){var e=b[a];this.defItem&&$HO.extend(e,this.defItem,{notCover:!0});this.parseItem(e);var d=this.manager.getClass(e.xtype);d?(e.renderTo||(e.autoRender=!1),e=new d(e),this.add(e)):$D.error("xtype:"+e.xtype+"\u672a\u627e\u5230")}},beforeUpdate:function(){return this.trigger("beforeUpdate")},
update:function(b){var a=this;if(!1==a.beforeUpdate())return!1;var e=a.parent;b=$HO.extend({renderBy:"before",renderTo:a.getEl()},b);e&&(b=$HO.extend(e.defItem,b),e.parseItem(b));if(!b.cid||b.cid==a.cid)b._id=a._id;var c=new a.constructor(b);e&&(c.parent=e,e.each(function(b,f){if(f==a)return e.children.splice(b,1,c),!1}));a.destroy();a.trigger("update");a.afterUpdate(c);return c},afterUpdate:function(b){this.trigger("afterUpdate",b)},beforeDestroy:function(){return this.trigger("beforeDestroy")},
destroy:function(){if(!1==this.beforeDestroy()||this.destroyed)return!1;this.callChild();this.trigger("destroy");this.clearListeners();this.getEl().remove();this.destroyed=!0;this.parent&&this.parent.remove(this);this.manager.unregister(this);delete this.params;delete this.settings;delete this._container;delete this.renderTo;delete this._listeners;delete this.children;this.afterDestroy()},afterDestroy:function(){this.trigger("afterDestroy")}});return c});
$Define("C.Model",function(){var d=$H.createClass();$HO.extend(d.prototype,$H.Events);$HO.extend(d.prototype,{_pending:!1,idAttribute:"id",_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=$HO.extend({},this.attributes,a);var e=this.validationError=this.validate(a,b)||null;if(!e)return!0;this.trigger("invalid",this,e,$HO.extend(b,{validationError:e}));return!1},initialize:function(a,b){var e=a||{};b||(b={});this.cid=$H.Util.getUuid();this.attributes={};b.collection&&(this.collection=
b.collection);b.parse&&(e=this.parse(e,b)||{});e=$HO.extend(e,$H.Util.result(this,"defaults"),{notCover:!0});this.set(e,b);this.changed={}},toJson:function(){return $HO.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){return $H.String.escapeHTML(this.get(a))},has:function(a){a=this.get(a);return null!=a&&void 0!=a},set:function(a,b,e){var c;"object"===typeof a?(c=a,e=b):(c={})[a]=b;e||(e={});if(!this._validate(c,e))return!1;var d=e.unset;a=e.silent;var g=[],j=
this._changing;this._changing=!0;j||(this._previousAttributes=$H.Object.clone(this.attributes),this.changed={});var k=this.attributes,l=this._previousAttributes;this.idAttribute in c&&(this.id=c[this.idAttribute]);for(var m in c)b=c[m],$HO.equals(k[m],b)||g.push(m),$HO.equals(l[m],b)?delete this.changed[m]:this.changed[m]=b,d?delete k[m]:k[m]=b;if(!a){g.length&&(this._pending=e);b=0;for(c=g.length;b<c;b++)this.trigger("change:"+g[b],this,k[g[b]],e)}if(j)return this;if(!a)for(;this._pending;)e=this._pending,
this._pending=!1,this.trigger("change",this,e);this._changing=this._pending=!1;return this},unset:function(a,b){b=b||{};b.unset=!0;return this.set(a,void 0,b)},clear:function(a){var b={},c;for(c in this.attributes)b[c]=void 0;a=a||{};a.unset=!0;return this.set(b,a)},hasChanged:function(a){var b=this.changed;return null==a?!$HO.isEmpty(b):$HO.contains(b,a)},changedAttrbutes:function(a){if(!a)return this.hasChanged()?$HO.clone(this.changed):!1;var b,c=!1,f=this._changing?this._previousAttributes:this.attributes,
d;for(d in a)if(!$HO.equals(f[d],b=a[d]))(c||(c={}))[d]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},fetch:function(a){var b=this;a=a?$HO.clone(a):{};void 0===a.parse&&(a.parse=!0);var e=a.success;a.success=function(c){if(!b.set(b.parse(c,a),a))return!1;e&&e(b,c,a);b.trigger("sync",b,c,a)};c(b,a);return b.sync("read",b,a)},save:function(a,b,e){var f,d=this.attributes;null==a||"object"===typeof a?(f=a,e=b):(f={})[a]=b;e=$HO.extend({validate:!0},
e);if(f&&!e.wait){if(!this.set(f,e))return!1}else if(!this._validate(f,e))return!1;f&&e.wait&&(this.attributes=$HO.extend({},d,f));void 0===e.parse&&(e.parse=!0);var g=this,j=e.success;e.success=function(b){g.attributes=d;var a=g.parse(b,e);e.wait&&(a=$HO.extend(f||{},a));if($HO.isObject(a)&&!g.set(a,e))return!1;j&&j(g,b,e);g.trigger("sync",g,b,e)};c(this,e);a=this.isNew()?"create":e.patch?"patch":"update";"patch"===a&&(e.oAttrs=f);a=this.sync(a,this,e);f&&e.wait&&(this.attributes=d);return a},destroy:function(a){a=
a?$HO.clone(a):{};var b=this,e=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(c){(a.wait||b.isNew())&&d();e&&e(b,c,a);b.isNew()||b.trigger("sync",b,c,a)};if(this.isNew())return a.success(),!1;c(this,a);var h=this.sync("delete",this,a);a.wait||d();return h},url:function(){var a=$H.Util.result(this,"urlRoot")||$H.Util.result(this.collection,"url");a||$D.error(Error("\u5fc5\u987b\u8bbe\u7f6e\u4e00\u4e2aurl\u5c5e\u6027\u6216\u8005\u51fd\u6570"));return this.isNew()?a:
a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},$HO.extend(a||{},{validate:!0}))}});var c;return d});
$Define("C.Collection","C.Model",function(d){var c=$H.createClass();$HO.extend(c.prototype,$H.Events);$HO.extend(c.prototype,{_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof d)return a;b=b?$HO.clone(b):{};b.collection=this;var c=new this.model(a,b);if(!c.validationError)return c;this.trigger("invalid",this,c.validationError,b);return!1},_addReference:function(a){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))},initialize:function(a,b){b||(b={});b.model&&(this.model=b.model);void 0!==b.comparator&&(this.comparator=
b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,$HO.extend({silent:!0},b))},toJSON:function(a){return $H.Collection.map(this,function(b){return b.toJSON(a)})},add:function(a,b){$HO.extend(b,{add:!0,remove:!1,merge:!1});return this.set(a,b)},remove:function(a,b){var c=!$HO.isArray(a);a=c?[a]:$HO.clone(a);b||(b={});var d,h,g,j;d=0;for(h=a.length;d<h;d++)if(j=a[d]=this.get(a[d]))delete this._byId[j.id],delete this._byId[j.cid],g=this.indexOf(j),this.models.splice(g,
1),this.length--,b.silent||(b.index=g,j.trigger("remove",j,this,b)),this._removeReference(j,b);return c?a[0]:a},set:function(a,b){b=$H.Util.extend(b,{add:!0,remove:!0,merge:!0});b.parse&&(a=this.parse(a,b));var c=!$HO.isArray(a),f=c?a?[a]:[]:$HO.clone(a),h,g,j,k,l,m,t=b.at,p=this.model,w=this.comparator&&null==t&&!1!==b.sort,y="string"==typeof this.comparator?this.comparator:null,x=[],z=[],u={},s=b.add,r=b.merge,q=b.remove,n=!w&&s&&q?[]:!1;h=0;for(g=f.length;h<g;h++){l=f[h]||{};j=l instanceof d?k=
l:l[p.prototype.idAttribute||"id"];if(j=this.get(j))q&&(u[j.cid]=!0),r&&(l=l===k?k.attributes:l,b.parse&&(l=j.parse(l,b)),j.set(l,b),w&&(!m&&j.hasChanged(y))&&(m=!0)),f[h]=j;else if(s){k=f[h]=this._prepareModel(l,b);if(!k)continue;x.push(k);this._addReference(k,b)}k=j||k;n&&(k.isNew()||!u[k.id])&&n.push(k);u[k.id]=!0}if(q){h=0;for(g=this.length;h<g;++h)u[(k=this.models[h]).cid]||z.push(k);z.length&&this.remove(z,b)}if(x.length||n&&n.length)if(w&&(m=!0),this.length+=x.length,null!=t){h=0;for(g=x.length;h<
g;h++)this.models.splice(t+h,0,x[h])}else{n&&(this.models.length=0);l=n||x;h=0;for(g=l.length;h<g;h++)this.models.push(l[h])}m&&this.sort({silent:!0});if(!b.silent){h=0;for(g=x.length;h<g;h++)(k=x[h]).trigger("add",k,this,b);(m||n&&n.length)&&this.trigger("sort",this,b)}return c?f[0]:f},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c],b);b.previousModels=this.models;this._reset();a=this.add(a,$HO.extend({silent:!0},b));b.silent||this.trigger("reset",
this,b);return a},push:function(a,b){return this.add(a,$HO.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,$HO.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return Array.prototype.slice.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,
b){return $HO.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){this.comparator||$D.error(Error("\u6ca1\u6709\u6bd4\u8f83\u5668"));a||(a={});"string"==typeof this.comparator||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort($H.Function.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return $H.Collection.invoke(this.models,
"get",a)},parse:function(a){return a},clone:function(){return new this.constructor(this.models)}});$HO.each(["some","every","find","filter","invoke"],function(a){c.prototype[a]=function(){var b=Array.prototype.slice.call(arguments),c=$H.Collection;b.unshift(this.models);return c[a].apply(c,b)}});return c});
$Define("C.AbstractComponent",["CM.ViewManager","CM.AbstractView"],function(d,c){var a=$H.createClass();$C=$H.component;$H.inherit(a,c,{xtype:"AbstractComponent",activeCls:"hui-active",hasConfig:function(b,a){if(!a)return!1;if($HO.isArray(a))for(var c=0,d=a.length;c<d;c++){if(this.match(b,a[c]))return!0}else if(this.match(b,a))return!0;return!1},doConfig:function(b){this.callSuper([b]);this.cls||(this.cls=this.xtype.toLowerCase());this.extCls=this.getExtCls();this.icon&&this.addItem({xtype:"Icon",
name:this.icon});this.isMini&&(this.defItem=$HO.extend({isMini:!0},this.defItem))},getExtCls:function(){var b=["js-component"];this.extCls&&b.push(this.extCls);this.theme&&b.push("hui-"+this.cls+"-"+this.theme);this.radius&&b.push("hui-radius-"+this.radius);this.isMini&&b.push("hui-mini");this.shadow&&b.push("hui-shadow");this.shadowSurround&&b.push("hui-shadow-surround");this.shadowOverlay&&b.push("hui-shadow-overlay");this.shadowInset&&b.push("hui-shadow-inset");this.isActive&&b.push(this.activeCls);
this.isFocus&&b.push("hui-focus");this.isInline&&b.push("hui-inline");return 0<b.length?b.join(" "):""},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},txt:function(b){var a=this.find(".js-"+this.cls+"-txt");0==a.length&&(a=this.find(".hui-"+this.cls+"-txt"));if(void 0!=b)a.text(b);else return a.text()},valid:function(){var b=this.settings.validator;if(b){var a=this.val();b.error||(b.error=function(b){new $C.Tips({text:b,theme:"error"})});
return b=$H.Validator.valid(a,b)}for(var a=this.children,c=0,d=a.length;c<d;c++)if(b=a[c].valid(),!b)return b;return!0}},{define:function(b,c){var f=$H.createClass();$H.inherit(f,c||a,null,null,{notCover:function(b){return"define"==b}});$HO.getSingleton(d).registerType(b,f);return $C[b]=f}});return a});
$Define("C.Popup","C.AbstractComponent",function(d){d=d.define("Popup");var c=0,a;d.extend({delayShow:!0,clickHide:!0,showPos:"center",shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.findHtml("$>*")%></div>'],doConfig:function(b){this.callSuper([b]);this.clickHide&&this._listeners.push({name:"click",el:$(document),handler:function(){this.hide()}});$H.Browser.android()&&(this._listeners.push({name:"show",custom:!0,handler:function(){!0!=$H.Events.trigger("component.popup.show")&&$("input,textarea,select").attr("disabled",
"disabled")}}),this._listeners.push({name:"hide",custom:!0,handler:function(){!0!=$H.Events.trigger("component.popup.hide")&&setTimeout(function(){$("input,textarea,select").removeAttr("disabled")},500)}}))},afterShow:function(){var b=this,a=b.getEl();a.css("z-index",1E3*c+1E3);if(!b.width&&b.parent){var d=b.width=b.parent.getEl().outerWidth();a.css("width",d)}a=b.showPos;if("string"==typeof a)b[a]();else"function"==typeof a&&a.call(b);b.noMask||b.mask();b.timeout&&setTimeout(function(){b.destroyed||
b.hide()},b.timeout)},hide:function(){!1!=this.callSuper()&&(this.noMask||this.unmask(),this.notDestroy||this.destroy())},center:function(){var b=this.getEl(),a=this.width||b.width(),c=this.height||b.height(),d=document,a=((d.documentElement.offsetWidth||d.body.offsetWidth)-a)/2,c=((d.documentElement.clientHeight||d.body.clientHeight)-c)/2+(d.documentElement.scrollTop||d.body.scrollTop),c=10>c?window.screen.height/2-200:c;b.css({left:a+"px",top:c-(this.offsetTop||0)+"px"})},followEl:function(b){b=
(b||this.parent.getEl()).position();this.getEl().css(b)},mask:function(){a||(a=$('<div class="hui-mask" style="display:none;"></div>').appendTo(document.body));a.css("z-index",1E3*c+998);0==c&&a.show();c++},unmask:function(){c--;0==c?a.hide():a.css("z-index",1E3*(c-1)+998)}});return d});
$Define("C.ControlGroup","C.AbstractComponent",function(d){d=d.define("ControlGroup");d.extend({multi:!1,defItem:{xtype:"Button",extCls:"js-item",radius:null,shadow:!1,isInline:!1},tmpl:['<div class="hui-ctrlgp<%if(this.direction=="h"){%> hui-ctrlgp-h<%}else{%> hui-ctrlgp-v<%}%>">','<%=this.findHtml("$>*")%>',"</div>"],listeners:[{name:"click",selector:".js-item",method:"delegate",handler:function(c){var a=$(c.currentTarget),a=$V.get(a.attr("id")).index();this.onItemClick(c,a)}}],select:function(c){if(!this.notSelect&&
(c="number"==typeof c?this.children[c]:"string"==typeof c?this.find(c)[0]:c))if(!this.multi&&!c.multi){var a=this.getSelected();a&&this.selectItem(a,!1);this.selectItem(c)}else this.selectItem(c,!c.selected)},getSelected:function(c){var a=[];this.each(function(b,e){e.selected&&a.push(c?b:e)});return 0<a.length?this.multi?a:a[0]:null},selectItem:function(c,a){(a=!1!=a)?(c.selected=a,c.select?c.select():c.active()):(c.selected=a,c.select?c.select(a):c.unactive())},val:function(c){if(c){var a=c.split(",");
this.each(function(b,c){c.select($HO.contains(a,c.value))})}else return c=this.find("$>[selected=true]"),a=[],$HO.each(c,function(b,c){a.push(c.value)}),a.join(",")},onItemClick:function(c,a){this.select(a);this.itemClick&&this.itemClick(this.children[a],a)}});return d});
$Define("C.Icon","C.AbstractComponent",function(d){d=d.define("Icon");d.extend({tmpl:'<span class="hui-icon;<%if(this.isAlt){%>; hui-alt-icon;<%}%>; hui-icon-<%=this.name%>;<%if(!this.noBg){%>; hui-icon-bg;<%}%>"></span>'.split(";")});return d});
$Define("C.Button","C.AbstractComponent",function(d){d=d.define("Button");d.extend({iconPos:"left",theme:"gray",activeCls:"hui-btn-blue",cls:"btn",defItem:{xtype:"Icon"},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a href="javascript:;" hidefocus="true" class="hui-btn,<%if(!this.text){%> hui-btn-icon-notxt<%},if(this.isBack){%> hui-btn-back<%},if(this.hasIcon&&this.text){%> hui-btn-icon-<%=this.iconPos%><%}%>">,<span class="hui-btn-txt"><%=this.text%></span>,<%=this.findHtml("$>*")%>,</a>'.split(","),parseItem:function(c){"Icon"==
c.xtype&&(this.hasIcon=!0)}});return d});
$Define("C.Radio","C.AbstractComponent",function(d){d=d.define("Radio");d.extend({tmpl:'<div class="hui-radio hui-btn hui-btn-gray<%if(this.selected){%> hui-radio-on<%}%>">;<span class="hui-icon hui-icon-radio"></span>;<input type="radio"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-radio-txt"><%=this.text%></span>;</div>'.split(";"),select:function(c){this.selected=c=!1!=c;var a=this.find("input"),
b=this.getEl();c?(a.attr("checked",!0),b.addClass("hui-radio-on")):(a.removeAttr("checked"),b.removeClass("hui-radio-on"))},val:function(c){if(c)this.value=c,this.find("input").val(c);else return this.value}});return d});
$Define("C.Checkbox","C.AbstractComponent",function(d){d=d.define("Checkbox");d.extend({text:"",value:"",selected:!1,multi:!0,cls:"chkbox",tmpl:'<div class="hui-chkbox hui-btn hui-btn-gray<%if(this.selected){%> hui-chkbox-on<%}%>">;<span class="hui-icon hui-icon-chkbox"></span>;<input type="checkbox"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-chkbox-txt"><%=this.text%></span>;</div>'.split(";"),select:function(c){this.selected=
c=!1!=c;var a=this.find("input"),b=this.getEl();c?(a.attr("checked",!0),b.addClass("hui-chkbox-on")):(a.removeAttr("checked"),b.removeClass("hui-chkbox-on"))},val:function(c){if(c)this.value=c,this.find("input").val(c);else return this.value}});return d});
$Define("C.Select","C.AbstractComponent",function(d){d=d.define("Select");d.extend({text:"\u8bf7\u9009\u62e9...",value:"",radius:"little",optionClick:function(){},defItem:{xtype:"Menu",hidden:!0,markType:"dot",renderTo:"body"},_customEvents:["change"],tmpl:['<div class="hui-select hui-btn hui-btn-gray hui-btn-icon-right">','<span class="hui-icon hui-alt-icon hui-icon-carat-d hui-light"></span>','<input value="<%=this.value%>" name="<%=this.name%>"/>','<span class="hui-btn-txt js-select-txt"><%=this.text%></span>',
"</div>"],listeners:[{name:"click",handler:function(){this.showOptions()}}],doConfig:function(c){var a=this;a.callSuper([c]);for(var b=c.options,e=0,d=b.length;e<d;e++){var h=b[e];if(h.value==c.value){a.text=h.text;h.selected=!0;break}}a.addItem({itemClick:function(b){a.val(b.value)},width:a.width,items:b})},showOptions:function(){this.children[0].show()},val:function(c){if(c){if(this.value!=c){var a=this.children[0],b=a.find('$>[value="'+c+'"]');0<b.length&&(this.trigger("change"),b=b[0],this.value=
c,this.find("input").attr("value",c),this.txt(b.text),a.select(b))}}else return this.value}});return d});
$Define("C.Input","C.AbstractComponent",function(d){d=d.define("Input");d.extend({radius:"little",iconPos:"left",btnPos:"right",tmpl:'<div class="hui-input;<%if(this.hasIcon){%>; hui-input-icon-<%=this.iconPos%>;<%}%>;<%if(this.hasBtn){%>; hui-input-btn-<%=this.btnPos%>;<%}%>">;<%=this.findHtml("$>*")%>;<%if(this.type=="textarea"){%>;<textarea class="js-input";<%}else{%>;<input type="text" class="js-input hui-input-txt";<%}%> ; name="<%=this.name%>";<%if(this.placeholder){%>; placeholder="<%=this.placeholder%>";<%}%>;<%if(this.type=="textarea"){%>;><%=this.value%></textarea>;<%}else{%>; value="<%=this.value%>"/>;<%}%> ;</div>'.split(";"),listeners:[{name:"focus",
el:".js-input",handler:function(){this.getEl().addClass("hui-focus")}},{name:"blur",el:".js-input",handler:function(){this.getEl().removeClass("hui-focus")}}],doConfig:function(c){var a=this;a.callSuper([c]);"search"==a.type?a.icon="search":"textarea"==a.type&&a._listeners.push({name:"input propertychange",el:".js-input",handler:function(){var b=a.find(".js-input");b.css("height",b[0].scrollHeight)}});a.withClear&&a.addItem({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.find("input").val("").focus()}})},
parseItem:function(c){"Icon"==c.xtype?this.hasIcon=!0:"Button"==c.xtype&&(this.hasBtn=!0)},val:function(c){var a=this.find("input,textarea");if(c)a.val(c);else return a.val()},focus:function(){this.find("input").focus()}});return d});$Define("C.Set","C.AbstractComponent",function(d){d=d.define("Set");d.extend({tmpl:'<div class="hui-set">;<h1 class="hui-set-title"><%=this.title%></h1>;<div class="hui-set-content">;<%=this.findHtml("$>*")%>;</div>;</div>'.split(";")});return d});
$Define("C.Field","C.AbstractComponent",function(d){d=d.define("Field");d.extend({tmpl:'<div class="hui-form-field">;<label class="hui-form-left" for="<%=this.forName%>"><%=this.label%></label>;<div class="hui-form-right">;<%=this.text%>;<%=this.findHtml("$>*")%>;</div>;</div>'.split(";")});return d});
$Define("C.Form","C.AbstractComponent",function(d){d=d.define("Form");d.extend({tmpl:'<div class="hui-form">;<form action="">;<div class="hui-form-tips c-error"></div>;<%=this.findHtml("$>*")%>;</form>;</div>'.split(";")});return d});
$Define("C.Tab",["C.AbstractComponent","C.ControlGroup"],function(d,c){var a=d.define("Tab",c);a.extend({defItem:{xtype:"Button",radius:null,isInline:!1,extCls:"js-item",iconPos:"top",shadow:!1},tmpl:['<div class="hui-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){","var width=Math.floor(100/len);%>",'<li class="hui-tab-item" style="width:<%=(i==len-1)?(100-width*(len-1)):width%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%if(this.hasContent){%>",
"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].selected){%> style="display:none"<%}%>>',"<%=this.children[i].content%>","</div>","<%}%>","<%}%>","</div>"],doConfig:function(b){this.callSuper([b]);this.activeType&&(this.defItem.activeCls="hui-btn-active-"+this.activeType)},parseItem:function(b){b.selected&&(b.isActive=!0)},onItemClick:function(b,a){this.hasContent&&this.find(".js-tab-content").hide().eq(a).show();this.callSuper([b,a])},setContent:function(b,
a){b=b||this.getSelected(!0);this.find("js-tab-content").index(b).html(a)}});return a});
$Define("C.Toolbar","C.AbstractComponent",function(d){d=d.define("Toolbar");d.extend({cls:"tbar",defItem:{xtype:"Button",theme:"black",pos:"right",isMini:!0},tmpl:['<div class="hui-tbar<%if(this.type=="header"){%> hui-header<%}else if(this.type=="footer"){%> hui-footer<%}%>">','<%=this.findHtml(">*")%>','<%if(this.title){%><h1 class="hui-tbar-title js-tbar-txt"><%=this.title%></h1><%}%>',"</div>"],parseItem:function(c){"Button"==c.xtype&&(c.shadowSurround=!0,"left"==c.pos?c.extCls=(c.extCls||"")+
" hui-tbar-btn-left":"right"==c.pos&&(c.extCls=(c.extCls||"")+" hui-tbar-btn-right"))}});return d});$Define("C.Tips",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(d,c){var a=d.define("Tips",c);a.extend({theme:"black",timeout:2E3,radius:"normal",tmpl:['<div class="hui-tips<%if(!this.text){%> hui-tips-notxt<%}%>">','<%=this.findHtml("$>*")%>','<%if(this.text){%><span class="hui-tips-txt"><%=this.text%></span><%}%>',"</div>"]});return a});
$Define("C.Dialog",["C.AbstractComponent","C.Popup"],function(d,c){var a=d.define("Dialog",c);$HO.extend(a,{alert:function(b){return new a({contentMsg:b,noClose:!0,noCancel:!0})},confirm:function(b,c){return new a({contentMsg:b,noClose:!0,okCall:function(){return c&&c(!0)},cancelCall:function(){return c&&c(!1)}})},prompt:function(b,c,d){d||(d=c,c="");return new a({contentMsg:b,noClose:!0,items:{xtype:"Input",xrole:"dialog-content",value:c},okCall:function(){var b=this.find("$Input")[0].val();return d&&
d(b)}})}});a.extend({okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",clickHide:!1,radius:"little",tmpl:'<div class="hui-dialog">;<%=this.findHtml("$>[xrole=\'dialog-header\']")%>;<div class="hui-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="hui-body-content">;<h1 class="hui-content-title"><%=this.contentTitle%></h1>;<div class="hui-content-msg"><%=this.contentMsg%></div>;<%=this.findHtml("$>[xrole=\'dialog-content\']")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="hui-body-action">;<%=this.findHtml("$>[xrole=\'dialog-action\']")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(b){var a=this;a.callSuper([b]);b=b.items;a.title&&!a.hasConfig('[xrole="dialog-header"]',b)&&a.addItem({xtype:"Toolbar",title:a.title,theme:"gray",xrole:"dialog-header",extCls:"hui-dialog-header",items:!a.noClose&&{xtype:"Button",radius:"big",icon:"delete",isMini:!1,theme:"gray",pos:"left",click:function(){a.hide()}}});!a.noAction&&!a.hasConfig('[xrole="dialog-action"]',b)&&(b=[],a.noCancel||b.push({xtype:"Button",radius:null,isActive:1==a.activeBtn,text:a.cancelTxt,click:function(){!1!=
(a.cancelCall&&a.cancelCall())&&a.hide()}}),a.noOk||b.push({xtype:"Button",text:a.okTxt,isActive:2==a.activeBtn,radius:null,click:function(){!1!=(a.okCall&&a.okCall())&&a.hide()}}),a.addItem({xtype:"Tab",xrole:"dialog-action",theme:"border-top",notSelect:!0,items:b}))}});return a});
$Define("C.Menu",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(d,c,a){d=d.define("Menu",c);d.extend(a.prototype);d.extend({notDestroy:!0,tmpl:['<div class="hui-menu<%if(this.markType=="dot"){%> hui-menu-mark<%}%>">',"<ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-menu-item<%if(this.children[i].selected){%> hui-item-mark<%}%>">',"<%=this.children[i].getHtml()%>",'<%if(this.markType=="dot"){%><span class="hui-icon-mark"></span><%}%>',"</li>","<%}%>","</ul>",
"</div>"],selectItem:function(b,c){c=!1!=c;"dot"==this.markType?(b.selected=c,b.getEl().parent()[!1==c?"removeClass":"addClass"]("hui-item-mark")):"active"==this.markType?a.prototype.selectItem.call(this,b,c):b.selected=c}});return d});$Define("C.List",["C.AbstractComponent","C.ControlGroup"],function(d,c){var a=d.define("List",c);a.extend({tmpl:['<div class="hui-list">','<div class="hui-list-item c-clear">',"</div>","</div>"]});return a});
$Define("M.AbstractModule","CM.AbstractView",function(d){var c=$H.createClass();$H.inherit(c,d,{useCache:!0,cache:function(){},init:function(){},reset:function(){},exit:function(){return!0}});return c});$Define("M.AbstractDao",function(){var d=$H.createClass();$HO.extend(d.prototype,{ajax:function(c){this.beforeSend(c);c.error=$HF.intercept(this.error,c.error);c.success=$HF.intercept(this.success,c.success);return $.ajax(c)},beforeSend:$H.noop,error:$H.noop,success:$H.noop});return d});
$Define("M.AbstractNavigator","handy.base.Object",function(d){var c=$H.createClass();d.extend(c.prototype,{navigate:function(){}});return c});
$Define("M.History","handy.base.HashChange",function(d){var c=$H.createClass(),a=0;$HO.extend(c.prototype,{initialize:function(b,a){"function"==typeof b&&(a=b,b=null);this.error=a||$H.noop;this.key=b||"handy";this.states=[];d.listen($H.Function.bind(this.stateChange,this))},stateChange:function(){var b=this.getHashParam(),a=b.hKey,c=this.currentKey,d=this.states,g=d[c];if(a==c&&$HO.equals(b.param,g.param))return!1;(d=d[a])?b=d.onStateChange(d.param,!0):($D.warn("hisory state not found"),b=this.error("stateNotFound",
b));!0!=b?(b={hKey:c,param:g.param},this.saveHash(b)):this.currentKey=a},saveState:function(b){var c=this.currentKey=this.key+ ++a;this.states.push(c);this.states[c]=b;this.saveHash({hKey:c,param:b.param})},saveHash:function(b){$HU.setHash("#"+$H.Json.stringify(b))},getHashParam:function(){try{var b=$HU.getHash().replace("#","");return $H.Json.parse(b)}catch(a){$H.Debug.warn("History.getCurrentState:parse hash error:"+a.message)}},getCurrentState:function(){try{var b=this.getHashParam();return this.states[b.hKey]}catch(a){$H.Debug.warn("History.getCurrentState:parse hash error:"+
a.message)}},getPreState:function(){try{for(var b=this.getHashParam().hKey,a=this.states,c=a.length,d=0;d++;d<c)if(a[d]==b)return 0<d?a[a[--d]]:null}catch(g){$H.Debug.error("History.getPreState error:"+g.message,g)}},back:function(){var b=this.getPreState();if(b)b.onStateChange(b.param)}});return c});
$Define("M.ModuleManager",["M.History","CM.AbstractManager"],function(d,c){var a=$H.createClass();$H.inherit(a,c,{type:"module",_createMod:function(b){var a=this,c=b.modName;a.modules[c]={waiting:!0};$Require(a.defModPackage+c,function(d){d=new d({renderTo:b.renderTo||a.container,name:c,xtype:c,_id:a.generateId(),extCls:"js-module m-module",hidden:!0});a.modules[c]=d;$H.trigger("afterRender",d.getEl());a.requestMod==c&&a._showMod(d)})},_showMod:function(b){var a=this.modules[this.currentMod];if(!this.navigator||
!this.navigator.navigate(b,a,this))a&&a.hide(),b.show();a&&(a.isActive=!1);b.isActive=!0;this.currentMod=b.name},_destroy:function(a){a.destroy();delete this.modules[a.name]},initialize:function(a){var c=this;a&&(c.conf=a,$HO.extend(c,a),c.container=a.container?$(a.container):$(document.body));c.defModPackage+=".";c.history=new d(function(a,b){c.go(b.param)});c.modules={}},go:function(a,c){"string"==typeof a&&(a={modName:a});var d=a.modName,h=this.currentMod,g=this.modules,j=g[h];if(h==d)j.waiting||
j.reset();else{if(j&&!j.waiting)if(j._forceExit)j._forceExit=!1;else if(!1==j.exit())return!1;this.requestMod=d;(d=g[d])?d.useCache?(this._showMod(d),d.cache(a)):d.waiting||(this._destroy(d),this._createMod(a)):this._createMod(a);!0!=c&&this.history.saveState({onStateChange:$H.Function.bind(this.go,this),param:a});return!0}},back:function(a){a&&(this.modules[this.currentMod]._forceExit=!0);history.back()}});return a});
