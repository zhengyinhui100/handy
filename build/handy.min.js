/* Handy v1.0.0-dev | 2014-03-03 | zhengyinhui100@gmail.com */
(function(){var c=window.handy,b=window.$,d=window.handy=window.$=function(){};d.version="1.0.0";d.expando="handy"+(d.version+Math.random()).replace(/\D/g,"");d.add=function(a,e,f){f||(f=e,e=null);if(!e||!d.Loader){d.base||(d.base={});var h=[];if(e)if("string"==typeof e)h.push(d.base.Object.namespace(e));else for(var b=0;b<e.length;b++)h.push(d.base.Object.namespace(e[b]));h.push(d);d.base[a]=d[a]=f.apply(window,h)}else d.Loader.require(e,function(){Array.prototype.push.call(arguments,d);d.base[a]=
d[a]=f.apply(window,arguments)})};d.noConflict=function(a){window.$===d&&(window.$=b);a&&window.handy===d&&(window.handy=c);return d};d.noop=function(){}})();
handy.add("Json",function(){var c;c||(c={});(function(){function b(a){return 10>a?"0"+a:a}function d(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var e=g[a];return"string"===typeof e?e:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(e,f){var b,c,g,x,y=h,v,p=f[e];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(e));"function"===typeof k&&(p=k.call(f,e,p));switch(typeof p){case "string":return d(p);case "number":return isFinite(p)?
String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";h+=j;v=[];if("[object Array]"===Object.prototype.toString.apply(p)){x=p.length;for(b=0;b<x;b+=1)v[b]=a(b,p)||"null";g=0===v.length?"[]":h?"[\n"+h+v.join(",\n"+h)+"\n"+y+"]":"["+v.join(",")+"]";h=y;return g}if(k&&"object"===typeof k){x=k.length;for(b=0;b<x;b+=1)"string"===typeof k[b]&&(c=k[b],(g=a(c,p))&&v.push(d(c)+(h?": ":":")+g))}else for(c in p)Object.prototype.hasOwnProperty.call(p,c)&&(g=a(c,p))&&v.push(d(c)+
(h?": ":":")+g);g=0===v.length?"{}":h?"{\n"+h+v.join(",\n"+h)+"\n"+y+"}":"{"+v.join(",")+"}";h=y;return g}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,j,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof c.stringify&&(c.stringify=function(e,f,b){var d;j=h="";if("number"===typeof b)for(d=0;d<b;d+=1)j+=" ";else"string"===typeof b&&(j=b);if((k=f)&&"function"!==typeof f&&("object"!==typeof f||"number"!==typeof f.length))throw Error("JSON.stringify");return a("",{"":e})});"function"!==
typeof c.parse&&(c.parse=function(a,f){function b(a,e){var h,d,c=a[e];if(c&&"object"===typeof c)for(h in c)Object.prototype.hasOwnProperty.call(c,h)&&(d=b(c,h),void 0!==d?c[h]=d:delete c[h]);return f.call(a,e,c)}var h;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return h=eval("("+a+")"),"function"===typeof f?b({"":h},""):h;throw new SyntaxError("JSON.parse");})})();return c});
handy.add("Object",function(c){function b(){var a=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return a&&9>parseInt(a[0])?function(a,f,b){var d=[];if(a.length){f=f||0;for(b=b||a.length;f<b;f++)d.push(a[f])}return d}:function(a,f,b){return Array.prototype.slice.call(a,f||0,b||a.length)}}var d={_alias:{b:"handy.base",c:"handy.component",m:"handy.module",cm:"handy.common"},namespace:function(a,e){var f=null,b,c,g,k;a=d.alias(a);c=a.split(".");f=c[0];f=(g=2==arguments.length)?eval("(function(){if (typeof "+
f+' == "undefined"){'+f+" = {};}return "+f+";})()"):eval("(function(){if (typeof "+f+' != "undefined")return '+f+";})()");b=1;for(k=c.length;b<k;++b){if(b==k-1&&g)f[c[b]]=e;else if(g||f&&f[c[b]])f[c[b]]=f[c[b]]||{};else return;f=f[c[b]]}return f},alias:function(a,e){var f=d._alias;if(e)f[a]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+a+":"+f[a]):f[a]=e;else{if(a){var b=a,c=a.length-1;do{if(f[b])return f[b]+a.substring(c);c=b.lastIndexOf(".")}while(0<c&&(b=b.substring(0,c)));return a}return f}},
createClass:function(a){var e=function(){var a,b;a=this.constructor==e?this:arguments.callee;if(b=a.initialize){for(var c in a)"object"==typeof a[c]&&(a[c]=d.clone(a[c]));return b.apply(a,arguments)}};e.$isClass=!0;e.prototype.callSuper=function(a,e){a&&(!a.$isClass&&void 0!=a.length)&&(e=a,a=null);var b=arguments.callee.caller,c=b.$owner.superProto;a=a?a.prototype:c||this.constructor.superProto;b=b.$name;if(a&&(b=a[b],d.isFunction(b)))return e?b.apply(this,e):b.call(this)};a&&this.namespace(a,e);
return e},extend:function(a,e,f){var b=f?f.notCover:!1,c=f?f.cover:null;f=f?f.notClone:!1;var g=a.constructor,k=g.$isClass,l;for(l in e)if((!c||d.contains(c,l))&&e.hasOwnProperty(l)){var q=a.hasOwnProperty(l),t=!0===b?q:!1;d.isArray(b)?t=d.contains(b,l)&&q:d.isFunction(b)&&(t=b(l));t||(q=f?e[l]:d.clone(e[l]),k&&d.isFunction(q)&&(q.$name=l,q.$owner=g),a[l]=q)}return a},mix:function(a,e,f,b){a.superProto||(a.superProto={});for(var c in e)a.superProto[c]=d.isFunction(e[c])?a.superProto[c]?function(a,
f){return function(){f.apply(this,arguments);e[a].apply(this,arguments)}}(c,a.superProto[c]):e[c]:e[c],a[c]||(a[c]=e[c]);f&&d.extend(a,f);e.toString!=e.constructor.prototype.toString&&(a.superProto.toString=function(){e.toString.apply(a,arguments)});b&&(a.prototype&&e.prototype)&&d.inherit(a,e,null,b);return a},inherit:function(a,e,f,b,j){var g=function(){};g.prototype=e.prototype;j=j||{notCover:!0};d.extend(a,e,j);a.prototype=new g;a.prototype.constructor=a;a.superClass=e;a.superProto=e.prototype;
if(e._onInherit)try{e._onInherit(a)}catch(k){c.Debug.error("_onInherit error",k)}b&&d.extend(a,b);f&&d.extend(a.prototype,f)},isFunction:function(a){return"[object Function]"===window.Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===window.Object.prototype.toString.call(a)},equals:function(a,e){if(typeof a==typeof e){if("object"!=typeof a)return a===e;if(a===e)return!0;if(d.isArray(a)&&d.isArray(e)){if(a.length!=e.length)return!1;for(var f=0,b=a.length;f<b;f++)if(!d.equals(a[f],
e[f]))return!1;return!0}if(!d.isArray(a)&&!d.isArray(e)){if(d.count(a)!=d.count(e))return!1;for(f in a)if(void 0==e[f]||!d.equals(a[f],e[f]))return!1;return!0}}return!1},clone:function(a){if(null==a||"object"!=typeof a)return a;var e=a.constructor;if(e!=window.Object&&e!=window.Array)return a;if(e==window.Date||e==window.RegExp||e==window.Function||e==window.String||e==window.Number||e==window.Boolean)return new e(a);try{var f=new e,b;for(b in a)f[b]=d.clone(a[b]);return f}catch(c){return a}},isEmpty:function(a){if(d.isArray(a))return 0==
a.length;for(var e in a)return!1;return!0},each:function(a,e,f){var b,c=0,g=a.length,k=void 0===g||d.isFunction(a);if(f)if(k)for(b in a){if(!1===e.apply(a[b],f))break}else for(;c<g&&!1!==e.apply(a[c++],f););else if(k)for(b in a){if(!1===e.call(a[b],b,a[b]))break}else for(;c<g&&!1!==e.call(a[c],c,a[c++]););return a},contains:function(a,e){var b=!1;d.each(a,function(a,c){if(d.equals(c,e))return b=!0,!1});return b},largeThan:function(a,e){if("object"==typeof a&&"object"==typeof e){var b=!0;d.each(e,
function(c){if(!d.equals(e[c],a[c]))return b=!1});return b}},count:function(a){if(d.isArray(a))return a.length;var e=0,b;for(b in a)e++;return e},toArray:b,generateMethod:function(a,e,b){e=d.isArray(e)?e:e.split(",");for(var c=0;c<e.length;c++){var j=e[c];a[j]=b(j)}}},b=b();return d});
handy.add("Browser","handy.base.Object",function(c){var b={},d={};c.generateMethod(d,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(a){return function(e){var f=b[a];return!e&&"string"===typeof f&&/^[\d\.]+$/.test(f)?parseInt(f):f}});c=window.navigator.userAgent;var a;(a=c.match(/MSIE ([\d.]+)/))?b.ie=a[1]:(a=c.match(/Firefox\/([\d.]+)/))?b.firefox=a[1]:(a=c.match(/Chrome\/([\d.]+)/))?
b.chrome=a[1]:(a=c.match(/Opera.([\d.]+)/))?b.opera=a[1]:(a=c.match(/Version\/([\d.]+).*Safari/))?b.safari=a[1]:0;/windows|win32/i.test(c)?b.windows=!0:/linux/i.test(c)?b.linux=!0:/macintosh/i.test(c)?b.mac=!0:0;/trident/i.test(c)?b.trident=!0:/webkit/i.test(c)?b.webkit=!0:/gecko/i.test(c)?b.gecko=!0:/presto/i.test(c)?b.presto=!0:0;/MetaSr/i.test(c)?b.sogou=!0:/Maxthon/i.test(c)?b.maxthon=!0:/TencentTraveler/i.test(c)?b.tt=!0:/TheWorld/i.test(c)?b.theWorld=!0:/360[S|E]E/i.test(c)?b.is360=!0:0;var e;
if((e=c.match(/AppleWebKit\/([\d.]*)/))&&e[1])if(/ Mobile\//.test(c)&&c.match(/iPad|iPod|iPhone/)){b.mobile="ios";if((e=c.match(/OS ([^\s]*)/))&&e[1])b.ios=e[1].replace("_",".");if((e=c.match(/iPad|iPod|iPhone/))&&e[0])b[e[0].toLowerCase()]=b.ios}else if(/ Android/i.test(c)){if(/Mobile/.test(c)&&(b.mobile="android"),(e=c.match(/Android ([^\s]*);/))&&e[1])b.android=e[1]}else if(e=c.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))b.mobile=e[0].toLowerCase();var f;try{if(b.ie){var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
h&&(f=h.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(h=navigator.plugins["Shockwave Flash"])){var j=h.description.split(" ");a=0;for(var g=j.length;a<g;a++)if(0<parseInt(j[a])){f=j[a];break}}}catch(k){}b.flash=f?f:null;return d});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(c,b,d){var a={level:0,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:!("console"in window)||!!b.mobile(),out:function(e,b,c){c=c||"log";if(b||a.showInPage){b=d.expando+"debugDiv";var j=top.document,g=j.getElementById(b);g?g.style.display="block":(g=j.createElement("DIV"),g.id=b,g.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+j.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',g.style.position="fixed",g.style.width=j.body.offsetWidth-20+"px",g.style.left=0,g.style.top=0,g.style.right=0,g.style.height="150px",g.style.backgroundColor="#aaa",g.style.fontSize="12px",g.style.padding="10px",g.style.zIndex=9999999999,g.style.opacity=0.8,g.style.filter="alpha(opacity=80)",j.body.appendChild(g));b=g.getElementsByTagName("DIV")[0];b.innerHTML+=c+" : "+d.Json.stringify(e,null,"<br/>")+"<br/>";b.scrollTop=b.scrollHeight}try{console[c](e)}catch(k){}},
log:function(e,b){a.level>a.LOG_LEVEL||a.out(e,!!b,"log")},info:function(e,b){this.level>a.INFO_LEVEL||a.out(e,!!b,"info")},warn:function(e,b){a.level>a.WARN_LEVEL||a.out(e,!!b,"warn")},error:function(e,b,c){if(!(a.level>a.ERROR_LEVEL)&&("boolean"==typeof b&&(c=b),a.out(e,!!c,"error"),"object"==typeof b))throw b;},time:function(e,b,c){a.level>a.INFO_LEVEL||(e?("boolean"==typeof b&&(c=b,b=""),a.out((b||"")+((new Date).getTime()-(a.lastTime||0)),!!c)):a.lastTime=(new Date).getTime())},debug:function(e){if(!(a.level>
a.DEBUG_LEVEL)&&!1!==e)debugger}};return a});handy.add("Function",function(c){return{bind:function(b,c,a){var e=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(e,arguments);return b.apply(c,e)}},intercept:function(b,d,a,e){return c.Object.isFunction(b)&&c.Object.isFunction(d)?function(){var f=a||this,c={},j=arguments;c.scope=e;c.target=f;c.method=b;return!1!=d.apply(c,j)?b.apply(f,j):!1}:b}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(c,b,d,a){function e(a){function e(a){return/\.(css|js)$/.test(a)?t[a]&&"loaded"==t[a].status:n.urlMap&&n.urlMap[a]?n.urlMap[a].chkExist():b.namespace(a)}if("string"==typeof a)return e(a);for(var f=[],c=0,d=a.length;c<d;c++){var h=e(a[c]);if(h)f.push(h);else return!1}return f}function f(a,e){function b(){b.isCalled||(b.isCalled=!0,clearTimeout(j),e())}if("SCRIPT"===a.nodeName){var f=a,d=b;f.onload=f.onerror=
f.onreadystatechange=function(){/loaded|complete|undefined/.test(f.readyState)&&(f.onload=f.onerror=f.onreadystatechange=null,k.removeChild(f),f=null,setTimeout(d,0))}}else{var g=b;window.hasOwnProperty("attachEvent")?a.attachEvent("onload",g):setTimeout(function(){h(a,g)},0)}var j=setTimeout(function(){c.error("Time is out:",a.src);b()},n.timeout)}function h(a,e){if(!e.isCalled){var b;if(l)a.sheet&&(b=!0);else if(a.sheet)try{a.sheet.cssRules&&(b=!0)}catch(f){if("SecurityError"===f.name||"NS_ERROR_DOM_SECURITY_ERR"===
f.name)b=!0}setTimeout(function(){b?e():h(a,e)},1)}}function j(a){n.showLoading(!1);t[a].status="loaded";n.traceLog&&c.info("Loader Response: "+a);g()}function g(){for(var a=q.length-1;0<=a;a--){var b=q[a],f=e(b.deps);if(f){q.splice(a,1);b.callback.apply(null,f);g();break}}}var k=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=navigator.userAgent.indexOf("AppleWebKit"),q=[],t={},n={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(a,
e,f){2==arguments.length&&(f=e,e=[]);n.require(e,function(){var e;if("function"==typeof f)try{e=f.apply(null,arguments),n.traceLog&&c.info("Loader define: "+a)}catch(d){c.error("Loader "+a+":factory define error:"+d.message,d);return}else e=f;b.namespace(a,e)})},require:function(b,h){for(var g="string"==typeof b?[b]:b,l=[],p=[],r=!0,s=0,w=g.length;s<w;s++){var m=g[s],u=e(m);u?p.push(u):(l.push(m),r&&(r=!1,q.push({deps:g,callback:h})),n.traceLog&&c.info("Resource not found: "+m))}if(0==l.length)return h&&
h.apply(null,p),0==p.length?p[0]:p;r=!1;g=0;for(p=l.length;g<p;g++)if(s=l[g],!t[s]){r=s;m=n.urlMap&&n.urlMap[r]&&n.urlMap[r].url;if(!m){w="";r=a.Object.alias(r);m=n.rootPath;if("string"==typeof m)w=m;else if("object"==typeof m)for(u in u=void 0,m)0==r.indexOf(u)&&(w=m[u],r=r.replace(u,""));else w="";m=/.css$/.test(r)?0==r.indexOf("/")?r:"/css/"+r:/.js$/.test(r)?r:r.replace(/\./g,"/")+".js";0!=m.indexOf("/")&&(m="/"+m);m=w+m}r=!0;t[s]={id:s,status:"loading"};w=d.bind(j,null,s);if(/.css$/.test(m))a:{s=
m;m=k.getElementsByTagName("link");for(u=0;u<m.length;u++){var z=m[u].href;!n.skinNode&&0<=z.indexOf(n.skinName)&&(n.skinNode=m[u]);if(0<=z.indexOf(s)||0<=s.indexOf(z))break a}m=document.createElement("link");m.rel="stylesheet";m.href=s;f(m,w);k.insertBefore(m,n.skinNode);n.traceLog&&c.info("Loader request:"+s)}else s=m,m=document.createElement("script"),m.async="async",m.src=s,m.type="text/javascript",f(m,w),k.appendChild(m),n.traceLog&&c.info("Loader request:"+s)}r&&n.showLoading(!0)}};return n});
handy.add("Listener",function(){var c={};return{add:function(b,d){var a=c[b];a||(a=c[b]=[]);a.push(d)},remove:function(b,d){var a=c[b];if(!a)return!1;if(d)for(var e=0,f=a.length;e<f;e++){if(a[e]==d)return a.splice(e,1),!0}else delete c[b];return!1},fire:function(b,d){var a=c[b];if(!a)return!1;for(var e=Array.prototype.slice.call(arguments,1),f=0,h=a.length;f<h;f++){if(f==h-1)return a[f].apply(null,e);a[f].apply(null,e)}}}});
handy.add("Date",function(){var c=window.Date,b={getWeek:function(b,a){var e=b.getDay();a&&(e=(e+(a%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[e]},isWeeken:function(b){return 0==b.getDay()||6==b.getDay()},getDaysInMonth:function(b){b=new c(b.getFullYear(),b.getMonth()+1,0);return b.getDate()},getDaysInYear:function(b){var a=new c(b.getFullYear(),0,0);b=new c(b.getFullYear()+1,0,0);return Math.floor((b.getTime()-a.getTime())/864E5)},getDayIndexOfYear:function(b){var a=new c("1/1/"+
b.getFullYear());return Math.ceil((b.getTime()-a.getTime())/864E5)},format:function(d,a){a=a||"yyyy-MM-dd HH:mm:ss";d=d||new c;var e=d.getHours(),f=Math.floor((d.getMonth()+3)/3),e={"y+":d.getFullYear(),"M+":d.getMonth()+1,"d+":d.getDate(),"h+":0==e%12?12:e%12,"H+":e,"m+":d.getMinutes(),"s+":d.getSeconds(),"w+":b.getWeek(d),"q+":f,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][f-1],"S+":d.getMilliseconds()},h;for(h in e)RegExp("("+h+")").test(a)&&(f=RegExp.$1.length,a=a.replace(RegExp.$1,1==f?e[h]:("00"+
e[h]).slice(-f)));return a},parse:function(b,a){for(var e=(a||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),f=b.match(/\d+/g),h=new c,j=0;j<f.length;j++){var g=e[j],k=parseInt(f[j]);switch(g){case "yyyy":h.setFullYear(k);break;case "MM":h.setMonth(k-1);break;case "dd":h.setDate(k);break;case "HH":h.setHours(k);break;case "mm":h.setMinutes(k);break;case "ss":h.setSeconds(k);break;case "SS":h.setMilliseconds(k)}}return h},parseObject:function(b){return new c(b.year+1900,b.month,b.date,b.hours,b.minutes,
b.seconds)}};return b});
handy.add("String",function(){var c={stripTags:function(b){return b.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(b){var c=document.createElement("div");b=document.createTextNode(b);c.appendChild(b);return c.innerHTML},unescapeHTML:function(b){var d=document.createElement("div");d.innerHTML=c.stripTags(b);return d.childNodes[0].nodeValue},decodeHTML:function(b){b=b.replace(/&lt;/gi,"<");b=b.replace(/&gt;/gi,">");b=b.replace(/&quot;/gi,'"');b=b.replace(/&apos;/gi,"'");b=b.replace(/<\/?br>/gi,"\n");
b=b.replace(/&amp;/gi,"&");return b=b.replace(/&nbsp;/gi," ")},encodeHTML:function(b){b=b.replace(/&/gi,"&amp;");b=b.replace(/</gi,"&lt;");b=b.replace(/>/gi,"&gt;");b=b.replace(/\"/gi,"&quot;");b=b.replace(/\'/gi,"&apos;");b=b.replace(/\n/gi,"</br>");return b=b.replace(/ /gi,"&nbsp;")},trim:function(b){return b=b.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(b,c){c||(c=/[,%\'\"\/\\;|\<\>\^]/);return-1<b.search(c)},len:function(b){return b.replace(/[^\x00-\xff]/g,"**").length},left:function(b,
d,a){if(c.len(b)>d){!0===a?a=2:0<a||(a=0);var e=0,f=0;for(d-=a;f<d;)255<b.charCodeAt(e)?f+=2:f++,e++;b=b.substring(0,e);for(e=0;e<a;e++)b+="."}return b},isNumber:function(b){return 0==b.search(/^\d+$/g)},hasChn:function(b){return/[\u4E00-\u9FA5]+/.test(b)},isChn:function(b){return/^[\u4E00-\u9FA5]+$/.test(b)},addParam:function(b,c){c&&(b+=(-1<b.indexOf("?")?"&":"?")+c);return b}};return c});
handy.add("Cookie",function(){return{get:function(c,b){var d=c+"=",a="",e=document.cookie;if(0<e.length){var f=e.indexOf(d);-1!=f&&(f+=d.length,d=e.indexOf(";",f),-1==d&&(d=e.length),a=e.substring(f,d),b||(a=unescape(a)))}return a},set:function(c,b,d){var a=[];void 0!=c&&void 0!=b&&a.push(c+"="+escape(b));d&&(void 0!=d.path&&a.push("path="+d.path),void 0!=d.domain&&a.push("domain="+d.domain),void 0!=d.expires&&a.push("expires="+d.expires),d.secure&&a.push("secure"));document.cookie=a.join(";")},del:function(c){var b=
new Date;b.setTime(b.getTime()-1);document.cookie=c+"=;expires="+b.toGMTString()}}});handy.add("Util",function(){var c=0;return{isWindow:function(b){return null!=b&&b==b.window},getUuid:function(){return c++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(b){var c=top.location.hash;0<=c.indexOf("#")&&(b=c.replace(/#[^\?]*/,b));top.location.hash=b}}});
handy.add("Template",function(c){var b={},d=/^=/,a="".trim,e={openTag:"<%",closeTag:"%>",_add:function(e){return a?"$r+="+e+";\n":"$r.push("+e+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return e._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=e._add(a.replace(d,"")+'||""'));return a+"\n"},_compile:function(b){var d="var $r="+(a?'""':"[]")+";\n";c.Object.each(b.split(e.openTag),function(a,b){var f=
b.split(e.closeTag);1==f.length?d+=e._parseHtml(f[0]):(d+=e._parseScript(f[0]),f[1]&&(d+=e._parseHtml(f[1])))});d+="return "+(a?"$r;":'$r.join("");');return new Function("$data",d)},tmpl:function(a,d){var j,g,k;if("string"==typeof a)j=a;else if(j=a.tmpl,k=a.id)if(b[k])g=b[k];else{var l=document.getElementById(k);l&&(j=(l.value||l.innerHTML).replace(/\s/g,""))}if(!g){if(!j){c.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}g=e._compile(j);k&&(b[k]=g)}return d?g(d):g}};return e});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(c,b,d){function a(a){if(a==l)return!1;var e=k.contentWindow.document;e.open();e.write("<!doctype html><html><body>"+a+"</body></html>");e.close();l=a;c.log("set:"+k.contentWindow.document.body.innerText)}function e(){var e=b.getHash(),d=k.contentWindow.document.body.innerText;e!=l?(a(e),f(e)):d!=l&&(c.log("update:"+k.contentWindow.document.body.innerText),b.setHash(d))}function f(a){var e=n.listeners,b;for(b in e)e[b](a)}var h,
j=0,g=document,k,l,q=g.documentMode,t="onhashchange"in window&&(void 0===q||7<q),n={delay:50,listen:function(c,l){if(!h&&!h)if(h=!0,n.listeners={},t)$(window).on("hashchange",function(){f(b.getHash())});else k=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(g.body)[0],$(k).one("load",function(){a(b.getHash());setInterval(e,n.delay)});if(l in n.listeners)$D.error("Duplicate name",Error("Duplicate name"));else return l=l||d.expando+ ++j,n.listeners[l]=
c,l},unListen:function(a){for(var e in n.listeners)(!a||a==e)&&delete n.listeners[e]}};return n});handy.add("Support",function(c){var b={mediaQuery:function(){var a;if(c.Browser.mobile())a="hui-mobile";else{a="hui-pc";var e=c.Browser.ie();e&&(a+=" ie"+e)}document.documentElement.className+=" "+a}};b.mediaQuery();if(6==c.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){}return b});
handy.add("Validator",["b.String","b.Object"],function(c,b){var d={messages:{required:"{name}\u4e0d\u80fd\u4e3a\u7a7a",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94fe\u63a5\u5730\u5740",date:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f",number:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57",digits:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u7528\u5361\u53f7\u7801",
equalTo:"\u8bf7\u8f93\u5165\u76f8\u540c\u7684",min:"\u8bf7\u8f93\u5165\u5927\u4e8e\u6216\u7b49\u4e8e{0}\u7684{name}",max:"\u8bf7\u8f93\u5165\u5c0f\u4e8e\u6216\u7b49\u4e8e{0}\u7684{name}",range:"\u8bf7\u8f93\u5165{0}\u5230{1}\u7684{name}",maxlength:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e0d\u8d85\u8fc7{0}\u7684{name}",minlength:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e0d\u5c11\u4e8e{0}\u7684{name}",rangelength:"\u8bf7\u8f93\u5165\u957f\u5ea6\u5728{0}\u5230{1}\u7684{name}"},valid:function(a,e){var b=e.rules,c;
for(c in b){var j=b[c],g=("function"==typeof j?j:d[c])(a,j);if(!g)return b=e.error||d.error,c=e.messages&&e.messages[c]||d.messages[c],c=c.replace(/\{([^\}]+)\}/g,function(a,b){return j[b]||e[b]||""}),b&&b(c),g}return!0},required:function(a){return 0<c.trim(a).length},email:function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a){return!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a){return/^\d+$/.test(a)},creditcard:function(a){if(/[^0-9 \-]+/.test(a))return!1;var e=0,b=0,c=!1;a=a.replace(/\D/g,"");for(var d=a.length-1;0<=d;d--){b=a.charAt(d);b=parseInt(b,10);if(c&&9<(b*=2))b-=9;e+=b;c=!c}return 0===e%10},min:function(a,e){return a>=e},max:function(a,
e){return a<=e},range:function(a,e){return a>=e[0]&&a<=e[1]},minlength:function(a,e){return(b.isArray(a)?a.length:c.trim(a).length)>=e},maxlength:function(a,e){return(b.isArray(a)?a.length:c.trim(a).length)<=e},rangelength:function(a,e){var f=b.isArray(a)?a.length:c.trim(a).length;return f>=e[0]&&f<=e[1]},equalTo:function(a,e){return a===e}};return d})(function(c){Hui=H=$H=c.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HL=
$H.Listener;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};c=window.$;c.fn.remove=$HF.intercept(c.fn.remove,function(){$HL.fire("removeEl",this.target)})})(handy);
$Define("cm.AbstractView",function(){var c=$HO.createClass(),b=/^(<[a-zA-Z]+)/,d=/^[^>]+class=/,a=/(class=")/;$HO.extend(c.prototype,{xtype:"AbstractView",autoRender:!0,renderBy:"append",_customEvents:"beforeRender render afterRender beforeShow afterShow hide destroy".split(" "),_defaultEvents:["click","mouseover","focus"],initialize:function(a){this.doConfig(a);this.beforeRender();!1!=this.autoRender&&(this.render(),this.afterRender())},doConfig:function(a){var b=this;b.params=a;b.settings=$HO.clone(a);
b.renderTo=a.renderTo?$(a.renderTo):$(document.body);var c=b.listeners||[];a.listeners&&(c=c.concat(a.listeners));b._listeners=c;$HO.extend(b,a,{notCover:function(c){var d=b[c],h=$HO.contains(b._customEvents,c),l=$HO.contains(b._defaultEvents,c);(h||l)&&b._listeners.push({type:c,notEl:h,handler:a[c]});if(null!=d&&"object"==typeof d||$HO.isFunction(d))return!0}})},getEl:function(){return this._container},getId:function(){return this._id},initHtml:function(){"string"!=typeof this.tmpl&&(this.tmpl=this.constructor.prototype.tmpl=
this.tmpl.join(""));return $H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this)},getHtml:function(){var e=this.getId(),c;c="visibility"==this.displayMode?"visibility:hidden;":"display:none;";var h=this.initHtml(),j=d.test(h),g=this.extCls+" ";j&&(h=h.replace(a,"$1"+g));return h=h.replace(b,'$1 id="'+e+'" style="'+c+'"'+(j?"":' class="'+g+'"'))},initStyle:function(){var a=this.getEl(),b=this.style||{};void 0!=this.width&&(b.width=this.width);void 0!=this.height&&(b.height=this.height);a.css(b)},beforeRender:function(){this.fire("beforeRender")},
render:function(){this.fire("render");var a=this.getHtml();this.renderTo[this.renderBy](a)},afterRender:function(){if(this.rendered)return!1;this._container=$("#"+this.getId());this.rendered=!0;this.initStyle();!0!=this.notListen&&this.initListeners();this.disabled&&this.disable();this.fire("afterRender");this.hidden||this.show()},hide:function(){if(!this.showed)return!1;this.showed=!1;var a=this.getEl();"visibility"==this.displayMode?a.css({visibility:"hidden"}):a.hide();this.fire("hide")},show:function(){if(this.showed)return!1;
this.fire("beforeShow");this.showed=!0;var a=this.getEl();"visibility"==this.displayMode?a.css({visibility:"visible"}):a.show();this.afterShow()},afterShow:function(){this.fire("afterShow")},enable:function(){this.resumeListeners();this.getEl().removeClass("hui-disable").find("input,textarea,select").removeAttr("disabled")},disable:function(){this.suspendListeners();this.getEl().addClass("hui-disable").find("input,textarea,select").attr("disabled","disabled")},fire:function(a,b){for(var c=this._listeners.length-
1;0<=c;c--){var d=this._listeners[c];if(d.type==a){var g=d.delegation;b?g.apply(null,b.shift(d)):g(d)}}},listen:function(a){var b=this,c=a.type,d=b._listeners,g=a.el,k=a.method||"bind",l=a.selector,q=a.data,t=a.delegation=function(){if(!0!=b.isSuspend)return a.handler.apply(a.scope||b,arguments)};$H.Browser.mobile()&&"click"==c&&(c="touchend");g=g?"string"==typeof g?b.find(g):g:b.getEl();if(!a.notEl)if(l)if(q)g[k](l,c,q,t);else g[k](l,c,t);else if(q)g[k](c,q,t);else g[k](c,t);d.push(a)},unlisten:function(a){var b=
a.type,c=a.el,d="delegate"==a.method?"undelegate":"unbind",g=a.selector,k;$H.Browser.mobile()&&"click"==b&&(b="touchend");for(var c=c?"string"==typeof c?this.find(c):c:this.getEl(),l=this._listeners.length-1;0<=l;l--){var q=this._listeners[l];if(q.handler==a.handler){k=q.delegation;this._listeners.splice(l,1);break}}if(!a.notEl)if(g)c[d](g,b,k);else c[d](b,k)},initListeners:function(){if(this.listened)return!1;this.listened=!0;var a=this._listeners;this._listeners=[];for(var b=a.length-1;0<=b;b--)this.listen(a[b])},
clearListeners:function(){for(var a=this._listeners,b=a.length-1;0<=b;b--)this.unlisten(a[b])},suspendListeners:function(){if(this.isSuspend)return!1;this.isSuspend=!0},resumeListeners:function(){if(!this.isSuspend)return!1;this.isSuspend=!1},destroy:function(){if(this.destroyed)return!1;this.fire("destroy");this.clearListeners();this.getEl().remove();this.destroyed=!0}});return c});
$Define("cm.AbstractManager",function(){var c=$HO.createClass();$HO.extend(c.prototype,{_types:{},_all:{},type:"manager",registerType:function(b,c){this._types[b]=c;c.prototype.xtype=b;$C[b]=c},getClass:function(b){return this._types[b]},register:function(b){this._all[b.getId()]=b},unregister:function(b){delete this._all[b.getId()]},eachInEl:function(b,c){var a=this;b.find(".js-"+a.type).each(function(b,f){f=$(f);var h=f.attr("id");(h=a.get(h))&&c(h)})},generateId:function(b,c){var a=$H.expando+"_"+
this.type+"_"+(b||$H.Util.getUuid());if(!0!=c&&this._all[a])$D.error("id\u91cd\u590d:"+a);else return a},get:function(b){var c=this._all;return c[b]||c[this.generateId(b,!0)]}});return c});
$Define("c.ComponentManager","cm.AbstractManager",function(c){var b=$HO.createClass();$HO.inherit(b,c,{type:"component",initialize:function(){var b=this;$HL.add("afterRender",function(a){b.afterRender(a)});$HL.add("removeEl",function(a){b.destroy(a)})},afterRender:function(b){this.eachInEl(b,function(a){a.afterRender()})},destroy:function(b){this.eachInEl(b,function(a){a.destroy(!0)})}});return $C=new b});
$Define("c.AbstractComponent",["c.ComponentManager","cm.AbstractView"],function(c,b){var d=$HO.createClass();$C.AbstractComponent=d;$HO.inherit(d,b,{xtype:"AbstractComponent",activeCls:"hui-active",initialize:function(a){this.callSuper([a]);c.register(this)},hasConfig:function(a,b){if(!b)return!1;if($HO.isArray(b))for(var c=0,d=b.length;c<d;c++){if(this.match(a,b[c]))return!0}else if(this.match(a,b))return!0;return!1},doConfig:function(a){this.callSuper([a]);this.cls||(this.cls=this.xtype.toLowerCase());
this.extCls=this.getExtCls();a.defItem&&$HO.extend(this.defItem,a.defItem);this.children=[]},getId:function(){return this._id||(this._id=c.generateId(this.xid))},findHtml:function(a){a=">*"==a?this.children:this.find(a);for(var b=[],c=0;c<a.length;c++)b.push(a[c].getHtml());return b.join("")},getExtCls:function(){var a=["js-component"];this.extCls&&a.push(this.extCls);this.theme&&a.push("hui-"+this.cls+"-"+this.theme);this.radius&&a.push("hui-radius-"+this.radius);this.isMini&&a.push("hui-mini");
this.shadow&&a.push("hui-shadow");this.shadowSurround&&a.push("hui-shadow-surround");this.shadowOverlay&&a.push("hui-shadow-overlay");this.shadowInset&&a.push("hui-shadow-inset");this.isActive&&a.push(this.activeCls);this.isFocus&&a.push("hui-focus");this.isInline&&a.push("hui-inline");return 0<a.length?a.join(" "):""},beforeRender:function(){this.callSuper();this.parseItems()},afterRender:function(){if(this.rendered)return!1;this.callChild();return this.callSuper()},show:function(a,b){var c=this;
if(c.showed||b&&c.hidden)return!1;if(!a&&c.delayShow)setTimeout(function(){d.prototype.show.call(c,!0)},0);else{c.fire("beforeShow");c.showed=!0;var h=c.getEl();"visibility"==c.displayMode?h.css({visibility:"visible"}):h.show();c.callChild([null,!0]);c.afterShow()}},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},txt:function(a){var b=this.find(".js-"+this.cls+"-txt");0==b.length&&(b=this.find(".hui-"+this.cls+"-txt"));if(void 0!=
a)b.text(a);else return b.text()},valid:function(){var a=this.settings.validator;if(a){var b=this.val();a.error||(a.error=function(a){new $C.Tips({text:a,theme:"error"})});return a=$H.Validator.valid(b,a)}for(var b=this.children,c=0,d=b.length;c<d;c++)if(a=b[c].valid(),!a)return a;return!0},initListeners:function(){!1!=this.callSuper()&&this.callChild()},clearListeners:function(){!1!=this.callSuper()&&this.callChild()},suspendListeners:function(){!1!=this.callSuper()&&this.callChild()},resumeListeners:function(){!1!=
this.callSuper()&&this.callChild()},each:function(a,b){for(var c=this.children,d=c.length,j,g=0;g<d;){j=c[g];j=b?a.apply(j,b):a(g,j);if(!1===j)break;d==c.length?g++:d=c.length}},match:function(a,b){if("*"==a)return!0;var c=b||this,d,j,g;a=a.replace(/^([^\[]+)/,'[xtype="$1"]');for(var k=/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;d=k.exec(a);)if(j=d[1],g=d[2],d=eval(d[3]),"="===g?c[j]!=d:c[j]==d)return!1;return!0},find:function(a,b){var c=this;if(0!=a.indexOf("$"))return c.getEl().find(a);b=b||[];if(0<a.indexOf(","))return $HO.each(a.split(","),
function(a,d){b=b.concat(c.find(d))}),b;var d=1==a.indexOf(">"),j=a.replace(/^\$>?\s?/,""),g=j.search(/\s|>/),k;0<g&&(k=j.substring(g),j=j.substring(0,g));c.each(function(c,f){f.match(j)&&(k?f.find("$"+k,b):b.push(f));d||f.find(a,b)});return b},parents:function(a){if(a&&0!=a.indexOf("$"))return this.getEl().parents(a);for(var b=this;b.parent;)if(b=b.parent,a&&this.match(a,b))return b;return a||b===this?null:b},index:function(){var a=this,b=a.parent;if(b){var c;b.each(function(b,e){if(e==a)return c=
b,!1});return c}return null},callChild:function(a,b){a&&"string"!=typeof a&&(b=a,a=null);a=a||arguments.callee.caller.$name;this.each(function(c,d){b?d[a].apply(d,b):d[a].call(d)})},add:function(a){this.children.push(a);a.parent=this},remove:function(a){for(var b=this.children,c=!1,d=0,j=b.length;d<j;d++)b[d]==a&&(b.splice(d,1),a.destroy(),c=!0);return c},addItem:function(a){var b=this.settings,c=b.items;c?$HO.isArray(c)||(b.items=[c]):b.items=[];b.items.push(a)},parseItem:function(){},parseItems:function(){this.icon&&
this.addItem({xtype:"Icon",name:this.icon});var a=this.settings.items;if(a)for(var a=a.length?a:[a],b=0,d=a.length;b<d;b++){var h=a[b];this.defItem&&$HO.extend(h,this.defItem,{notCover:!0});this.isMini&&(h.isMini=!0);this.parseItem(h);var j=c.getClass(h.xtype);j?(h.renderTo||(h.autoRender=!1),h=new j(h),this.add(h)):$D.error("xtype:"+h.xtype+"\u672a\u627e\u5230")}},destroy:function(){if(this.destroyed)return!1;this.callChild();this.callSuper();this.parent&&this.parent.remove(this);c.unregister(this);
delete this.params;delete this.settings;delete this._container;delete this.renderTo;delete this._listeners;delete this.children}},{define:function(a,b){var f=$HO.createClass();$HO.inherit(f,b||d,null,null,{notCover:function(a){return"define"==a}});c.registerType(a,f);return f},extend:function(a){var b=this.prototype;$HO.extend(b,a,{notCover:function(c){if("_customEvents"==c||"listeners"==c)return b[c]=(a[c]||[]).concat(b[c]||[]),!0;if("xtype"==c||"constructor"==c)return!0}})},html:function(a){a.autoRender=
!1;return(new this(a)).getHtml()}});return d});
$Define("c.Popup","c.AbstractComponent",function(c){c=c.define("Popup");var b=0,d;c.extend({delayShow:!0,clickHide:!0,showPos:"center",shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.findHtml("$>*")%></div>'],doConfig:function(a){this.callSuper([a]);this.clickHide&&this._listeners.push({type:"click",el:$(document),handler:function(){this.hide()}});$H.Browser.android()&&(this._listeners.push({type:"show",notEl:!0,handler:function(){!0!=$H.Listener.fire("component.popup.show")&&$("input,textarea,select").attr("disabled",
"disabled")}}),this._listeners.push({type:"hide",notEl:!0,handler:function(){!0!=$H.Listener.fire("component.popup.hide")&&setTimeout(function(){$("input,textarea,select").removeAttr("disabled")},500)}}))},afterShow:function(){var a=this,c=a.getEl();c.css("z-index",1E3*b+1E3);if(!a.width&&a.parent){var d=a.width=a.parent.getEl().outerWidth();c.css("width",d)}c=a.showPos;if("string"==typeof c)a[c]();else"function"==typeof c&&c.call(a);a.noMask||a.mask();a.timeout&&setTimeout(function(){a.destroyed||
a.hide()},a.timeout)},hide:function(){!1!=this.callSuper()&&(this.noMask||this.unmask(),this.notDestroy||this.destroy())},center:function(){var a=this.getEl(),b=this.width||a.width(),c=this.height||a.height(),d=document,b=((d.documentElement.offsetWidth||d.body.offsetWidth)-b)/2,c=((d.documentElement.clientHeight||d.body.clientHeight)-c)/2+(d.documentElement.scrollTop||d.body.scrollTop),c=10>c?window.screen.height/2-200:c;a.css({left:b+"px",top:c-(this.offsetTop||0)+"px"})},followEl:function(a){a=
(a||this.parent.getEl()).position();this.getEl().css(a)},mask:function(){d||(d=$('<div class="hui-mask" style="display:none;"></div>').appendTo(document.body));d.css("z-index",1E3*b+998);0==b&&d.show();b++},unmask:function(){b--;0==b?d.hide():d.css("z-index",1E3*(b-1)+998)}});return c});
$Define("c.ControlGroup",["c.ComponentManager","c.AbstractComponent"],function(c,b){var d=b.define("ControlGroup");d.extend({multi:!1,defItem:{xtype:"Button",extCls:"js-item",radius:null,shadow:!1,isInline:!1},tmpl:['<div class="hui-ctrlgp<%if(this.direction=="h"){%> hui-ctrlgp-h<%}else{%> hui-ctrlgp-v<%}%>">','<%=this.findHtml("$>*")%>',"</div>"],listeners:[{type:"click",selector:".js-item",method:"delegate",handler:function(a){var b=$(a.currentTarget),b=c.get(b.attr("id")).index();this.onItemClick(a,
b)}}],select:function(a){if(!this.notSelect&&(a="number"==typeof a?this.children[a]:"string"==typeof a?this.find(a)[0]:a))if(!this.multi&&!a.multi){var b=this.getSelected();b&&this.selectItem(b,!1);this.selectItem(a)}else this.selectItem(a,!a.selected)},getSelected:function(a){var b=[];this.each(function(c,d){d.selected&&b.push(a?c:d)});return 0<b.length?this.multi?b:b[0]:null},selectItem:function(a,b){(b=!1!=b)?(a.selected=b,a.select?a.select():a.active()):(a.selected=b,a.select?a.select(b):a.unactive())},
val:function(a){if(a){var b=a.split(",");this.each(function(a,c){c.select($HO.contains(b,c.value))})}else return a=this.find("$>[selected=true]"),b=[],$HO.each(a,function(a,c){b.push(c.value)}),b.join(",")},onItemClick:function(a,b){this.select(b);this.itemClick&&this.itemClick(this.children[b],b)}});return d});
$Define("c.Icon","c.AbstractComponent",function(c){c=c.define("Icon");c.extend({tmpl:'<span class="hui-icon;<%if(this.isAlt){%>; hui-alt-icon;<%}%>; hui-icon-<%=this.name%>;<%if(!this.noBg){%>; hui-icon-bg;<%}%>"></span>'.split(";")});return c});
$Define("c.Button","c.AbstractComponent",function(c){c=c.define("Button");c.extend({iconPos:"left",theme:"gray",activeCls:"hui-btn-blue",cls:"btn",defItem:{xtype:"Icon"},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a href="javascript:;" hidefocus="true" class="hui-btn,<%if(!this.text){%> hui-btn-icon-notxt<%},if(this.isBack){%> hui-btn-back<%},if(this.hasIcon&&this.text){%> hui-btn-icon-<%=this.iconPos%><%}%>">,<span class="hui-btn-txt"><%=this.text%></span>,<%=this.findHtml("$>*")%>,</a>'.split(","),parseItem:function(b){"Icon"==
b.xtype&&(this.hasIcon=!0)}});return c});
$Define("c.Radio","c.AbstractComponent",function(c){c=c.define("Radio");c.extend({tmpl:'<div class="hui-radio hui-btn hui-btn-gray<%if(this.selected){%> hui-radio-on<%}%>">;<span class="hui-icon hui-icon-radio"></span>;<input type="radio"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-radio-txt"><%=this.text%></span>;</div>'.split(";"),select:function(b){this.selected=b=!1!=b;var c=this.find("input"),
a=this.getEl();b?(c.attr("checked",!0),a.addClass("hui-radio-on")):(c.removeAttr("checked"),a.removeClass("hui-radio-on"))},val:function(b){if(b)this.value=b,this.find("input").val(b);else return this.value}});return c});
$Define("c.Checkbox","c.AbstractComponent",function(c){c=c.define("Checkbox");c.extend({text:"",value:"",selected:!1,multi:!0,cls:"chkbox",tmpl:'<div class="hui-chkbox hui-btn hui-btn-gray<%if(this.selected){%> hui-chkbox-on<%}%>">;<span class="hui-icon hui-icon-chkbox"></span>;<input type="checkbox"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-chkbox-txt"><%=this.text%></span>;</div>'.split(";"),select:function(b){this.selected=
b=!1!=b;var c=this.find("input"),a=this.getEl();b?(c.attr("checked",!0),a.addClass("hui-chkbox-on")):(c.removeAttr("checked"),a.removeClass("hui-chkbox-on"))},val:function(b){if(b)this.value=b,this.find("input").val(b);else return this.value}});return c});
$Define("c.Select","c.AbstractComponent",function(c){c=c.define("Select");c.extend({text:"\u8bf7\u9009\u62e9...",value:"",radius:"little",optionClick:function(){},defItem:{xtype:"Menu",hidden:!0,markType:"dot",renderTo:"body"},_customEvents:["change"],tmpl:['<div class="hui-select hui-btn hui-btn-gray hui-btn-icon-right">','<span class="hui-icon hui-alt-icon hui-icon-carat-d hui-light"></span>','<input value="<%=this.value%>" name="<%=this.name%>"/>','<span class="hui-btn-txt js-select-txt"><%=this.text%></span>',
"</div>"],listeners:[{type:"click",handler:function(){this.showOptions()}}],doConfig:function(b){var c=this;c.callSuper([b]);for(var a=b.options,e=0,f=a.length;e<f;e++){var h=a[e];if(h.value==b.value){c.text=h.text;h.selected=!0;break}}c.addItem({itemClick:function(a){c.val(a.value)},width:c.width,items:a})},showOptions:function(){this.children[0].show()},val:function(b){if(b){if(this.value!=b){var c=this.children[0],a=c.find('$>[value="'+b+'"]');0<a.length&&(this.fire("change"),a=a[0],this.value=
b,this.find("input").attr("value",b),this.txt(a.text),c.select(a))}}else return this.value}});return c});
$Define("c.Input","c.AbstractComponent",function(c){c=c.define("Input");c.extend({radius:"little",iconPos:"left",btnPos:"right",tmpl:'<div class="hui-input;<%if(this.hasIcon){%>; hui-input-icon-<%=this.iconPos%>;<%}%>;<%if(this.hasBtn){%>; hui-input-btn-<%=this.btnPos%>;<%}%>">;<%=this.findHtml("$>*")%>;<%if(this.type=="textarea"){%>;<textarea class="js-input";<%}else{%>;<input type="text" class="js-input hui-input-txt";<%}%> ; name="<%=this.name%>";<%if(this.placeholder){%>; placeholder="<%=this.placeholder%>";<%}%>;<%if(this.type=="textarea"){%>;><%=this.value%></textarea>;<%}else{%>; value="<%=this.value%>"/>;<%}%> ;</div>'.split(";"),listeners:[{type:"focus",
el:".js-input",handler:function(){this.getEl().addClass("hui-focus")}},{type:"blur",el:".js-input",handler:function(){this.getEl().removeClass("hui-focus")}}],doConfig:function(b){var c=this;c.callSuper([b]);"search"==c.type?c.icon="search":"textarea"==c.type&&c._listeners.push({type:"input propertychange",el:".js-input",handler:function(){var a=c.find(".js-input");a.css("height",a[0].scrollHeight)}});c.withClear&&c.addItem({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.find("input").val("").focus()}})},
parseItem:function(b){"Icon"==b.xtype?this.hasIcon=!0:"Button"==b.xtype&&(this.hasBtn=!0)},val:function(b){var c=this.find("input,textarea");if(b)c.val(b);else return c.val()},focus:function(){this.find("input").focus()}});return c});$Define("c.Set","c.AbstractComponent",function(c){c=c.define("Set");c.extend({tmpl:'<div class="hui-set">;<h1 class="hui-set-title"><%=this.title%></h1>;<div class="hui-set-content">;<%=this.findHtml("$>*")%>;</div>;</div>'.split(";")});return c});
$Define("c.Field","c.AbstractComponent",function(c){c=c.define("Field");c.extend({tmpl:'<div class="hui-form-field">;<label class="hui-form-left" for="<%=this.forName%>"><%=this.label%></label>;<div class="hui-form-right">;<%=this.text%>;<%=this.findHtml("$>*")%>;</div>;</div>'.split(";")});return c});
$Define("c.Form","c.AbstractComponent",function(c){c=c.define("Form");c.extend({tmpl:'<div class="hui-form">;<form action="">;<div class="hui-form-tips c-error"></div>;<%=this.findHtml("$>*")%>;</form>;</div>'.split(";")});return c});
$Define("c.Tab",["c.AbstractComponent","c.ControlGroup"],function(c,b){var d=c.define("Tab",b);d.extend({defItem:{xtype:"Button",radius:null,isInline:!1,extCls:"js-item",iconPos:"top",shadow:!1},tmpl:['<div class="hui-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){","var width=Math.floor(100/len);%>",'<li class="hui-tab-item" style="width:<%=(i==len-1)?(100-width*(len-1)):width%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%if(this.hasContent){%>",
"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].selected){%> style="display:none"<%}%>>',"<%=this.children[i].content%>","</div>","<%}%>","<%}%>","</div>"],doConfig:function(a){this.callSuper([a]);this.activeType&&(this.defItem.activeCls="hui-btn-active-"+this.activeType)},parseItem:function(a){a.selected&&(a.isActive=!0)},onItemClick:function(a,b){this.hasContent&&this.find(".js-tab-content").hide().eq(b).show();this.callSuper([a,b])},setContent:function(a,
b){a=a||this.getSelected(!0);this.find("js-tab-content").index(a).html(b)}});return d});
$Define("c.Toolbar","c.AbstractComponent",function(c){c=c.define("Toolbar");c.extend({cls:"tbar",defItem:{xtype:"Button",theme:"black",pos:"right",isMini:!0},tmpl:['<div class="hui-tbar<%if(this.type=="header"){%> hui-header<%}else if(this.type=="footer"){%> hui-footer<%}%>">','<%=this.findHtml(">*")%>','<%if(this.title){%><h1 class="hui-tbar-title js-tbar-txt"><%=this.title%></h1><%}%>',"</div>"],parseItem:function(b){"Button"==b.xtype&&(b.shadowSurround=!0,"left"==b.pos?b.extCls=(b.extCls||"")+
" hui-tbar-btn-left":"right"==b.pos&&(b.extCls=(b.extCls||"")+" hui-tbar-btn-right"))}});return c});$Define("c.Tips",["c.AbstractComponent","c.Popup","c.ControlGroup"],function(c,b){var d=c.define("Tips",b);d.extend({theme:"black",timeout:2E3,radius:"normal",tmpl:['<div class="hui-tips<%if(!this.text){%> hui-tips-notxt<%}%>">','<%=this.findHtml("$>*")%>','<%if(this.text){%><span class="hui-tips-txt"><%=this.text%></span><%}%>',"</div>"]});return d});
$Define("c.Dialog",["c.AbstractComponent","c.Popup"],function(c,b){var d=c.define("Dialog",b);$HO.extend(d,{alert:function(a){return new d({contentMsg:a,noClose:!0,noCancel:!0})},confirm:function(a,b){return new d({contentMsg:a,noClose:!0,okCall:function(){return b&&b(!0)},cancelCall:function(){return b&&b(!1)}})},prompt:function(a,b,c){c||(c=b,b="");return new d({contentMsg:a,noClose:!0,items:{xtype:"Input",xrole:"dialog-content",value:b},okCall:function(){var a=this.find("$Input")[0].val();return c&&
c(a)}})}});d.extend({okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",clickHide:!1,radius:"little",tmpl:'<div class="hui-dialog">;<%=this.findHtml("$>[xrole=\'dialog-header\']")%>;<div class="hui-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="hui-body-content">;<h1 class="hui-content-title"><%=this.contentTitle%></h1>;<div class="hui-content-msg"><%=this.contentMsg%></div>;<%=this.findHtml("$>[xrole=\'dialog-content\']")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="hui-body-action">;<%=this.findHtml("$>[xrole=\'dialog-action\']")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(a){var b=this;b.callSuper([a]);a=a.items;b.title&&!b.hasConfig('[xrole="dialog-header"]',a)&&b.addItem({xtype:"Toolbar",title:b.title,theme:"gray",xrole:"dialog-header",extCls:"hui-dialog-header",items:!b.noClose&&{xtype:"Button",radius:"big",icon:"delete",isMini:!1,theme:"gray",pos:"left",click:function(){b.hide()}}});!b.noAction&&!b.hasConfig('[xrole="dialog-action"]',a)&&(a=[],b.noCancel||a.push({xtype:"Button",radius:null,isActive:1==b.activeBtn,text:b.cancelTxt,click:function(){!1!=
(b.cancelCall&&b.cancelCall())&&b.hide()}}),b.noOk||a.push({xtype:"Button",text:b.okTxt,isActive:2==b.activeBtn,radius:null,click:function(){!1!=(b.okCall&&b.okCall())&&b.hide()}}),b.addItem({xtype:"Tab",xrole:"dialog-action",theme:"border-top",notSelect:!0,items:a}))}});return d});
$Define("c.Menu",["c.AbstractComponent","c.Popup","c.ControlGroup"],function(c,b,d){c=c.define("Menu",b);c.extend(d.prototype);c.extend({notDestroy:!0,tmpl:['<div class="hui-menu<%if(this.markType=="dot"){%> hui-menu-mark<%}%>">',"<ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-menu-item<%if(this.children[i].selected){%> hui-item-mark<%}%>">',"<%=this.children[i].getHtml()%>",'<%if(this.markType=="dot"){%><span class="hui-icon-mark"></span><%}%>',"</li>","<%}%>","</ul>",
"</div>"],selectItem:function(a,b){b=!1!=b;"dot"==this.markType?(a.selected=b,a.getEl().parent()[!1==b?"removeClass":"addClass"]("hui-item-mark")):"active"==this.markType?d.prototype.selectItem.call(this,a,b):a.selected=b}});return c});$Define("c.List",["c.AbstractComponent","c.ControlGroup"],function(c,b){var d=c.define("List",b);d.extend({tmpl:['<div class="hui-list">','<div class="hui-list-item c-clear">',"</div>","</div>"]});return d});
$Define("m.AbstractModule","cm.AbstractView",function(c){var b=$HO.createClass();$HO.inherit(b,c,{useCache:!0,cache:function(){},init:function(){},reset:function(){},exit:function(){return!0}});return b});$Define("m.AbstractDao",function(){var c=$HO.createClass();$HO.extend(c.prototype,{ajax:function(b){this.beforeSend(b);b.error=$HF.intercept(this.error,b.error);b.success=$HF.intercept(this.success,b.success);return $.ajax(b)},beforeSend:$H.noop,error:$H.noop,success:$H.noop});return c});
$Define("m.AbstractNavigator","handy.base.Object",function(c){var b=c.createClass();c.extend(b.prototype,{navigate:function(){}});return b});
$Define("m.History","handy.base.HashChange",function(c){var b=$HO.createClass(),d=0;$HO.extend(b.prototype,{initialize:function(a,b){"function"==typeof a&&(b=a,a=null);this.error=b||$H.noop;this.key=a||"handy";this.states=[];c.listen($H.Function.bind(this.stateChange,this))},stateChange:function(){var a=this.getHashParam(),b=a.hKey,c=this.currentKey,d=this.states,j=d[c];if(b==c&&$HO.equals(a.param,j.param))return!1;(d=d[b])?a=d.onStateChange(d.param,!0):($D.warn("hisory state not found"),a=this.error("stateNotFound",
a));!0!=a?(a={hKey:c,param:j.param},this.saveHash(a)):this.currentKey=b},saveState:function(a){var b=this.currentKey=this.key+ ++d;this.states.push(b);this.states[b]=a;this.saveHash({hKey:b,param:a.param})},saveHash:function(a){$HU.setHash("#"+JSON.stringify(a))},getHashParam:function(){try{var a=$HU.getHash().replace("#","");return JSON.parse(a)}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+b.message)}},getCurrentState:function(){try{var a=this.getHashParam();return this.states[a.hKey]}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+
b.message)}},getPreState:function(){try{for(var a=this.getHashParam().hKey,b=this.states,c=b.length,d=0;d++;d<c)if(b[d]==a)return 0<d?b[b[--d]]:null}catch(j){$H.Debug.error("History.getPreState error:"+j.message,j)}},back:function(){var a=this.getPreState();if(a)a.onStateChange(a.param)}});return b});
$Define("m.ModuleManager",["m.History","cm.AbstractManager"],function(c,b){var d=$HO.createClass();$HO.inherit(d,b,{type:"module",_createMod:function(a){var b=this,c=a.modName;b.modules[c]={waiting:!0};$Require(b.defModPackage+c,function(d){d=new d({renderTo:a.renderTo||b.container,name:c,xtype:c,_id:b.generateId(),extCls:"js-module m-module",hidden:!0});b.modules[c]=d;$HL.fire("afterRender",d.getEl());b.requestMod==c&&b._showMod(d)})},_showMod:function(a){var b=this.modules[this.currentMod];if(!this.navigator||
!this.navigator.navigate(a,b,this))b&&b.hide(),a.show();b&&(b.isActive=!1);a.isActive=!0;this.currentMod=a.name},_destroy:function(a){a.destroy();delete this.modules[a.name]},initialize:function(a){var b=this;a&&(b.conf=a,$HO.extend(b,a),b.container=a.container?$(a.container):$(document.body));b.defModPackage+=".";b.history=new c(function(a,c){b.go(c.param)});b.modules={}},go:function(a,b){"string"==typeof a&&(a={modName:a});var c=a.modName,d=this.currentMod,j=this.modules,g=j[d];if(d==c)g.waiting||
g.reset();else{if(g&&!g.waiting)if(g._forceExit)g._forceExit=!1;else if(!1==g.exit())return!1;this.requestMod=c;(c=j[c])?c.useCache?(this._showMod(c),c.cache(a)):c.waiting||(this._destroy(c),this._createMod(a)):this._createMod(a);!0!=b&&this.history.saveState({onStateChange:$H.Function.bind(this.go,this),param:a});return!0}},back:function(a){a&&(this.modules[this.currentMod]._forceExit=!0);history.back()}});return d});
