/* Handy v1.0.0-dev | 2014-03-19 | zhengyinhui100@gmail.com */
(function(){var f=window.handy,d=window.$,c=window.handy=window.$=function(){};c.version="1.0.0";c.expando="handy"+(c.version+Math.random()).replace(/\D/g,"");c.add=function(a,b,e){e||(e=b,b=null);if(!b||!c.Loader){c.base||(c.base={});var d=[];if(b)if("string"==typeof b)d.push(c.base.Object.namespace(b));else for(var h=0;h<b.length;h++)d.push(c.base.Object.namespace(b[h]));d.push(c);b=e.apply(window,d);c.base[a]=c[a]=b;if(0<="Class,Browser,Events,Function,Object,String,Template,Util".indexOf(a)){for(var g in b)"undefined"!=
typeof c[g]&&("console"in window&&!Function[g])&&(console.log(c[g]),console.log(a+"\u547d\u540d\u51b2\u7a81:"+g)),c[g]=b[g];"Events"==a&&(c._eventCache={})}}else c.Loader.require(b,function(){Array.prototype.push.call(arguments,c);c.base[a]=c[a]=e.apply(window,arguments)})};c.noConflict=function(a){window.$===c&&(window.$=d);a&&window.handy===c&&(window.handy=f);return c};c.noop=function(){}})();
handy.add("Json",function(){function f(b){j.lastIndex=0;j.test(b)&&(b=b.replace(j,function(b){var e=h[b];return"string"===typeof e?e:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));return'"'+b+'"'}function d(c,j){var h,g,k,l,m=b,r,n=j[c];n&&("object"===typeof n&&"function"===typeof n.toJSON)&&(n=n.toJSON(c));"function"===typeof a&&(n=a.call(j,c,n));switch(typeof n){case "string":return f(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);case "object":if(!n)return"null";
b+=e;r=[];if("[object Array]"===Object.prototype.toString.apply(n)){l=n.length;for(h=0;h<l;h+=1)r[h]=d(h,n)||"null";k=0===r.length?"[]":b?"[\n"+b+r.join(",\n"+b)+"\n"+m+"]":"["+r.join(",")+"]";b=m;return k}if(a&&"object"===typeof a){l=a.length;for(h=0;h<l;h+=1)"string"===typeof a[h]&&(g=a[h],(k=d(g,n))&&r.push(f(g)+(b?": ":":")+k))}else for(g in n)Object.prototype.hasOwnProperty.call(n,g)&&(k=d(g,n))&&r.push(f(g)+(b?": ":":")+k);k=0===r.length?"{}":b?"{\n"+b+r.join(",\n"+b)+"\n"+m+"}":"{"+r.join(",")+
"}";b=m;return k}}var c="JSON"in window,a,b,e,j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,n=/(?:^|:|,)(?:\s*\[)+/g;
return{stringify:function(j,h,g,f){if(c&&!f)return JSON.stringify.apply(null,arguments);var k;e=b="";if("number"===typeof g)for(k=0;k<g;k+=1)e+=" ";else"string"===typeof g&&(e=g);if((a=h)&&"function"!==typeof h&&("object"!==typeof h||"number"!==typeof h.length))$D.error(Error("Json.stringify:\u66ff\u6362\u53c2\u6570\u53ea\u80fd\u662f\u51fd\u6570\u6216\u8005\u6570\u7ec4"));else return d("",{"":j})},parse:function(b,e,a){function d(b,a){var c,j,h=b[a];if(h&&"object"===typeof h)for(c in h)Object.prototype.hasOwnProperty.call(h,
c)&&(j=d(h,c),void 0!==j?h[c]=j:delete h[c]);return e.call(b,a,h)}if(c&&!a)return JSON.parse.apply(null,arguments);var j;b=String(b);g.lastIndex=0;g.test(b)&&(b=b.replace(g,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(k.test(b.replace(l,"@").replace(m,"]").replace(n,"")))return j=eval("("+b+")"),"function"===typeof e?d({"":j},""):j;$D.error(new SyntaxError("JSON.parse"))}}});
handy.add("Object",function(){var f;f=(f=window.navigator.userAgent.match(/MSIE ([\d.]+)/))&&9>parseInt(f[0])?function(c,a,b){var e=[];if(c.length){a=a||0;for(b=b||c.length;a<b;a++)e.push(c[a])}return e}:function(c,a,b){return Array.prototype.slice.call(c,a||0,b||c.length)};var d={_alias:{B:"handy.base",C:"handy.component",M:"handy.module",CM:"handy.common"},namespace:function(c,a){var b=null,e,j,h,g;c=d.alias(c);j=c.split(".");b=j[0];b=(h=2==arguments.length)?eval("(function(){if (typeof "+b+' == "undefined"){'+
b+" = {};}return "+b+";})()"):eval("(function(){if (typeof "+b+' != "undefined")return '+b+";})()");e=1;for(g=j.length;e<g;++e){if(e==g-1&&h)b[j[e]]=a;else if(h||b&&b[j[e]])b[j[e]]=b[j[e]]||{};else return;b=b[j[e]]}return b},alias:function(c,a){var b=d._alias;if(a)b[c]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+c+":"+b[c]):b[c]=a;else{if(c){var e=c,j=c.length-1;do{if(b[e])return b[e]+c.substring(j);j=e.lastIndexOf(".")}while(0<j&&(e=e.substring(0,j)));return c}return b}},extend:function(c,a,
b){var e=b?b.notCover:!1,j=b?b.cover:null;b=b?b.notClone:!1;c=c||{};var h=c.constructor,g=h.$isClass,f;for(f in a)if((!j||d.contains(j,f))&&a.hasOwnProperty(f)){var l=c.hasOwnProperty(f),m=!0===e?l:!1;d.isArray(e)?m=d.contains(e,f)&&l:d.isFunction(e)&&(m=e(f));m||(l=b?a[f]:d.clone(a[f]),g&&d.isFunction(l)&&(l.$name=f,l.$owner=h),c[f]=l)}return c},mix:function(c,a,b){c.superProto||(c.superProto={});for(var e in a)c.superProto[e]=d.isFunction(a[e])?c.superProto[e]?function(b,e){return function(){e.apply(this,
arguments);a[b].apply(this,arguments)}}(e,c.superProto[e]):a[e]:a[e],c[e]||(c[e]=a[e]);b&&d.extend(c,b);a.toString!=a.constructor.prototype.toString&&(c.superProto.toString=function(){a.toString.apply(c,arguments)});return c},isFunction:function(c){return"[object Function]"===window.Object.prototype.toString.call(c)},isArray:function(c){return"[object Array]"===window.Object.prototype.toString.call(c)},equals:function(c,a){if(typeof c==typeof a){if("object"!=typeof c)return c===a;if(c===a)return!0;
if(d.isArray(c)&&d.isArray(a)){if(c.length!=a.length)return!1;for(var b=0,e=c.length;b<e;b++)if(!d.equals(c[b],a[b]))return!1;return!0}if(!d.isArray(c)&&!d.isArray(a)){if(d.count(c)!=d.count(a))return!1;for(b in c)if(void 0==a[b]||!d.equals(c[b],a[b]))return!1;return!0}}return!1},clone:function(c){if(null==c||"object"!=typeof c)return c;var a=c.constructor;if(a!=window.Object&&a!=window.Array)return c;if(a==window.Date||a==window.RegExp||a==window.Function||a==window.String||a==window.Number||a==
window.Boolean)return new a(c);try{var b=new a,e;for(e in c)b[e]=d.clone(c[e]);return b}catch(j){return c}},isEmpty:function(c){if(d.isArray(c))return 0==c.length;for(var a in c)return!1;return!0},each:function(c,a,b){var e,j=0,h=c.length,g=void 0===h||d.isFunction(c);if(b)if(g)for(e in c){if(!1===a.apply(c[e],b))break}else for(;j<h&&!1!==a.apply(c[j++],b););else if(g)for(e in c){if(!1===a.call(c[e],e,c[e]))break}else for(;j<h&&!1!==a.call(c[j],j,c[j++]););return c},contains:function(c,a){var b=!1;
d.each(c,function(e,c){if(d.equals(c,a))return b=!0,!1});return b},largeThan:function(c,a){if("object"==typeof c&&"object"==typeof a){var b=!0;d.each(a,function(e){if(!d.equals(a[e],c[e]))return b=!1});return b}},count:function(c){if(d.isArray(c))return c.length;var a=0,b;for(b in c)a++;return a},toArray:f,getSingleton:function(c){c="string"==typeof c?d.namespace(c):c;return c._singleton||(c._singleton=new c)},generateMethod:function(c,a,b){a=d.isArray(a)?a:a.split(",");for(var e=0;e<a.length;e++){var j=
a[e];c[j]=b(j)}}};return d});
handy.add("Browser","handy.base.Object",function(f){var d={},c={};f.generateMethod(c,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(e){var a=d[b];return!e&&"string"===typeof a&&/^[\d\.]+$/.test(a)?parseInt(a):a}});f=window.navigator.userAgent;var a;(a=f.match(/MSIE ([\d.]+)/))?d.ie=a[1]:(a=f.match(/Firefox\/([\d.]+)/))?d.firefox=a[1]:(a=f.match(/Chrome\/([\d.]+)/))?
d.chrome=a[1]:(a=f.match(/Opera.([\d.]+)/))?d.opera=a[1]:(a=f.match(/Version\/([\d.]+).*Safari/))?d.safari=a[1]:0;/windows|win32/i.test(f)?d.windows=!0:/linux/i.test(f)?d.linux=!0:/macintosh/i.test(f)?d.mac=!0:0;/trident/i.test(f)?d.trident=!0:/webkit/i.test(f)?d.webkit=!0:/gecko/i.test(f)?d.gecko=!0:/presto/i.test(f)?d.presto=!0:0;/MetaSr/i.test(f)?d.sogou=!0:/Maxthon/i.test(f)?d.maxthon=!0:/TencentTraveler/i.test(f)?d.tt=!0:/TheWorld/i.test(f)?d.theWorld=!0:/360[S|E]E/i.test(f)?d.is360=!0:0;var b;
if((b=f.match(/AppleWebKit\/([\d.]*)/))&&b[1])if(/ Mobile\//.test(f)&&f.match(/iPad|iPod|iPhone/)){d.mobile="ios";if((b=f.match(/OS ([^\s]*)/))&&b[1])d.ios=b[1].replace("_",".");if((b=f.match(/iPad|iPod|iPhone/))&&b[0])d[b[0].toLowerCase()]=d.ios}else if(/ Android/i.test(f)){if(/Mobile/.test(f)&&(d.mobile="android"),(b=f.match(/Android ([^\s]*);/))&&b[1])d.android=b[1]}else if(b=f.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))d.mobile=b[0].toLowerCase();var e;try{if(d.ie){var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
j&&(e=j.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(j=navigator.plugins["Shockwave Flash"])){var h=j.description.split(" ");a=0;for(var g=h.length;a<g;a++)if(0<parseInt(h[a])){e=h[a];break}}}catch(k){}d.flash=e?e:null;return c});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(f,d,c){var a={level:0,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:!("console"in window)||!!d.mobile(),out:function(b,e,d){d=d||"log";if(e||a.showInPage){e=c.expando+"debugDiv";var h=top.document,g=h.getElementById(e);g?g.style.display="block":(g=h.createElement("DIV"),g.id=e,g.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+h.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',g.style.position="fixed",g.style.width=h.body.offsetWidth-20+"px",g.style.left=0,g.style.top=0,g.style.right=0,g.style.height="150px",g.style.backgroundColor="#aaa",g.style.fontSize="12px",g.style.padding="10px",g.style.zIndex=9999999999,g.style.opacity=0.8,g.style.filter="alpha(opacity=80)",h.body.appendChild(g));e=g.getElementsByTagName("DIV")[0];h=c.Json.stringify(b,null,"&nbsp;&nbsp;&nbsp;&nbsp;",!0).replace(/\n/g,"<br/>");e.innerHTML+=
d+" : "+h+"<br/>";e.scrollTop=e.scrollHeight}try{console[d](b)}catch(f){}},log:function(b,e){a.level>a.LOG_LEVEL||a.out(b,!!e,"log")},info:function(b,e){this.level>a.INFO_LEVEL||a.out(b,!!e,"info")},warn:function(b,e){a.level>a.WARN_LEVEL||a.out(b,!!e,"warn")},error:function(b,e){if(!(a.level>a.ERROR_LEVEL)&&(a.out(b,!!e,"error"),b instanceof Error))throw b;},time:function(b,e,c){a.level>a.INFO_LEVEL||(b?("boolean"==typeof e&&(c=e,e=""),a.out((e||"")+((new Date).getTime()-(a.lastTime||0)),!!c)):a.lastTime=
(new Date).getTime())},debug:function(b){if(!(a.level>a.DEBUG_LEVEL)&&!1!==b)debugger}};return a});handy.add("Function",function(f){return{bind:function(d,c,a){var b=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(b,arguments);return d.apply(c,b)}},intercept:function(d,c,a,b){return f.Object.isFunction(d)&&f.Object.isFunction(c)?function(){var e=a||this,j={},h=arguments;j.scope=b;j.target=e;j.method=d;return!1!=c.apply(j,h)?d.apply(e,h):!1}:d}}});
handy.add("Class",["B.Object","B.Debug"],function(f,d){var c={createClass:function(a){var b=function(){var e,a;e=this.constructor==b?this:arguments.callee;if(a=e.initialize){for(var c in e)"object"==typeof e[c]&&(e[c]=f.clone(e[c]));return a.apply(e,arguments)}};b.$isClass=!0;b.extend=function(e,a,d){var g=c.createClass();c.inherit(g,b,e,a,d);return g};b.prototype.callSuper=function(b,a){b&&(!b.$isClass&&void 0!=b.length)&&(a=b,b=null);var c=arguments.callee.caller,d=c.$owner.superProto;b=b?b.prototype:
d||this.constructor.superProto;c=c.$name;if(b&&(c=b[c],f.isFunction(c)))return a?c.apply(this,a):c.call(this)};a&&this.namespace(a,b);return b},inherit:function(a,b,e,c,h){var g=function(){};g.prototype=b.prototype;f.extend(a,b,h);a.prototype=new g;a.prototype.constructor=a;a.superClass=b;a.superProto=b.prototype;if(b._onInherit)try{b._onInherit(a)}catch(k){d.error(k)}c&&f.extend(a,c);e&&f.extend(a.prototype,e)}};return c});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(f,d,c,a){function b(b){function e(b){return/\.(css|js)$/.test(b)?n[b]&&"loaded"==n[b].status:p.urlMap&&p.urlMap[b]?p.urlMap[b].chkExist():d.namespace(b)}if("string"==typeof b)return e(b);for(var a=[],c=0,j=b.length;c<j;c++){var h=e(b[c]);if(h)a.push(h);else return!1}return a}function e(b,e){function a(){a.isCalled||(a.isCalled=!0,clearTimeout(g),e())}if("SCRIPT"===b.nodeName){var c=b,d=a;c.onload=c.onerror=
c.onreadystatechange=function(){/loaded|complete|undefined/.test(c.readyState)&&(c.onload=c.onerror=c.onreadystatechange=null,k.removeChild(c),c=null,setTimeout(d,0))}}else{var h=a;window.hasOwnProperty("attachEvent")?b.attachEvent("onload",h):setTimeout(function(){j(b,h)},0)}var g=setTimeout(function(){f.error("Time is out:"+b.src);a()},p.timeout)}function j(b,e){if(!e.isCalled){var a;if(l)b.sheet&&(a=!0);else if(b.sheet)try{b.sheet.cssRules&&(a=!0)}catch(c){if("SecurityError"===c.name||"NS_ERROR_DOM_SECURITY_ERR"===
c.name)a=!0}setTimeout(function(){a?e():j(b,e)},1)}}function h(b){p.showLoading(!1);n[b].status="loaded";p.traceLog&&f.info("Loader Response: "+b);g()}function g(){for(var e=m.length-1;0<=e;e--){var a=m[e],c=b(a.deps);if(c){m.splice(e,1);a.callback.apply(null,c);g();break}}}var k=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=navigator.userAgent.indexOf("AppleWebKit"),m=[],n={},p={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,
e,a){2==arguments.length&&(a=e,e=[]);p.require(e,function(){var e;if("function"==typeof a)try{e=a.apply(null,arguments),p.traceLog&&f.info("Loader define: "+b)}catch(c){c.message="Loader "+b+":factory define error:"+c.message;f.error(c);return}else e=a;d.namespace(b,e);var j=typeof e;if("object"==j||"Function"==j)e.$ns=b})},require:function(d,j){for(var g="string"==typeof d?[d]:d,l=[],t=[],s=!0,r=0,v=g.length;r<v;r++){var q=g[r],u=b(q);u?t.push(u):(l.push(q),s&&(s=!1,m.push({deps:g,callback:j})),
p.traceLog&&f.info("Resource not found: "+q))}if(0==l.length)return j&&j.apply(null,t),0==t.length?t[0]:t;s=!1;g=0;for(t=l.length;g<t;g++)if(r=l[g],!n[r]){s=r;s=a.Object.alias(s);q=p.urlMap&&p.urlMap[s]&&p.urlMap[s].url;if(!q){v="";q=p.rootPath;if("string"==typeof q)v=q;else if("object"==typeof q)for(u in u=void 0,q)0==s.indexOf(u)&&(v=q[u],s=s.replace(u,""));else v="";q=/.css$/.test(s)?0==s.indexOf("/")?s:"/css/"+s:/.js$/.test(s)?s:s.replace(/\./g,"/")+".js";0!=q.indexOf("/")&&(q="/"+q);q=v+q}s=
!0;n[r]={id:r,status:"loading"};v=c.bind(h,null,r);if(/.css$/.test(q))a:{r=q;q=k.getElementsByTagName("link");for(u=0;u<q.length;u++){var w=q[u].href;!p.skinNode&&0<=w.indexOf(p.skinName)&&(p.skinNode=q[u]);if(0<=w.indexOf(r)||0<=r.indexOf(w))break a}q=document.createElement("link");q.rel="stylesheet";q.href=r;e(q,v);k.insertBefore(q,p.skinNode);p.traceLog&&f.info("Loader request:"+r)}else r=q,q=document.createElement("script"),q.async="async",q.src=r,q.type="text/javascript",e(q,v),k.appendChild(q),
p.traceLog&&f.info("Loader request:"+r)}s&&p.showLoading(!0)}};return p});
handy.add("Events",function(){var f=Array.prototype;return{_eventCache:{},_parseEvents:function(d,c,a){var b=/\s+/,e=f.slice.call(arguments,2);if("object"==typeof c){for(var j in c)this[d].apply(this,[j,c[j]].concat(e));return!0}if(b.test(c)){b=c.split(b);j=0;for(var h=b.length;j<h;j++)this[d].apply(this,[b[j]].concat(e));return!0}return!1},on:function(d,c,a,b){var e=this;if(!e._parseEvents("on",d,c,a,b)){var j=e._eventCache,h=j[d];h||(h=j[d]=[]);h.push({times:b,handler:c,context:a,delegation:function(){if(!0!=
e.isSuspend)return c.apply(a||e,arguments)}})}},once:function(d,c,a){if(!this._parseEvents("once",d,c,a,1))this.on(d,c,a,1)},off:function(d,c){if("all"==d)return this._eventCache={},!0;if(!this._parseEvents("off",d,c)){var a=this._eventCache,b=d.indexOf(".");if(!c&&0>=b){for(var e in a)(e.split(".")[0]==d||0==b&&0<=e.indexOf(d))&&delete a[e];return!0}b=a[d];if(!b)return!1;if(c){a=0;for(e=b.length;a<e;a++)if(b[a].handler==c)return b.splice(a,1),!0}else return delete a[d],!0;return!1}},suspend:function(){if(this.isSuspend)return!1;
this.isSuspend=!0},resume:function(){if(!this.isSuspend)return!1;this.isSuspend=!1},trigger:function(d,c){function a(e){if(e)for(var a=0,c=e.length;a<c;a++){var d=e[a],g=d.delegation;"number"==typeof d.times&&(1<d.times?d.times--:b.off(k,d.handler));h=g.apply(null,j)}}var b=this,e=$HO.toArray(arguments);e.unshift("trigger");if(!b._parseEvents.apply(b,e)){var e=b._eventCache,j=f.slice.call(arguments,1),h,g;if(0<d.indexOf("."))g=e[d],a(g);else for(var k in e)if(g=d.indexOf("."),k.split(".")[0]==d||
0==g&&0<=k.indexOf(d))g=e[k],a(g);a(e.all);return h}}}});
handy.add("Date",function(){var f=window.Date,d={getWeek:function(c,a){var b=c.getDay();a&&(b=(b+(a%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[b]},isWeeken:function(c){return 0==c.getDay()||6==c.getDay()},getDaysInMonth:function(c){c=new f(c.getFullYear(),c.getMonth()+1,0);return c.getDate()},getDaysInYear:function(c){var a=new f(c.getFullYear(),0,0);c=new f(c.getFullYear()+1,0,0);return Math.floor((c.getTime()-a.getTime())/864E5)},getDayIndexOfYear:function(c){var a=new f("1/1/"+
c.getFullYear());return Math.ceil((c.getTime()-a.getTime())/864E5)},format:function(c,a){a=a||"yyyy-MM-dd HH:mm:ss";c=c||new f;var b=c.getHours(),e=Math.floor((c.getMonth()+3)/3),b={"y+":c.getFullYear(),"M+":c.getMonth()+1,"d+":c.getDate(),"h+":0==b%12?12:b%12,"H+":b,"m+":c.getMinutes(),"s+":c.getSeconds(),"w+":d.getWeek(c),"q+":e,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][e-1],"S+":c.getMilliseconds()},j;for(j in b)RegExp("("+j+")").test(a)&&(e=RegExp.$1.length,a=a.replace(RegExp.$1,1==e?b[j]:("00"+
b[j]).slice(-e)));return a},parse:function(c,a){for(var b=(a||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),e=c.match(/\d+/g),d=new f,h=0;h<e.length;h++){var g=b[h],k=parseInt(e[h]);switch(g){case "yyyy":d.setFullYear(k);break;case "MM":d.setMonth(k-1);break;case "dd":d.setDate(k);break;case "HH":d.setHours(k);break;case "mm":d.setMinutes(k);break;case "ss":d.setSeconds(k);break;case "SS":d.setMilliseconds(k)}}return d},parseObject:function(c){return new f(c.year+1900,c.month,c.date,c.hours,c.minutes,
c.seconds)}};return d});
handy.add("String",function(){var f={stripTags:function(d){return d.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(d){var c=document.createElement("div");d=document.createTextNode(d);c.appendChild(d);return c.innerHTML},unescapeHTML:function(d){var c=document.createElement("div");c.innerHTML=f.stripTags(d);return c.childNodes[0].nodeValue},decodeHTML:function(d){d=d.replace(/&lt;/gi,"<");d=d.replace(/&gt;/gi,">");d=d.replace(/&quot;/gi,'"');d=d.replace(/&apos;/gi,"'");d=d.replace(/<\/?br>/gi,"\n");
d=d.replace(/&amp;/gi,"&");return d=d.replace(/&nbsp;/gi," ")},encodeHTML:function(d){d=d.replace(/&/gi,"&amp;");d=d.replace(/</gi,"&lt;");d=d.replace(/>/gi,"&gt;");d=d.replace(/\"/gi,"&quot;");d=d.replace(/\'/gi,"&apos;");d=d.replace(/\n/gi,"</br>");return d=d.replace(/ /gi,"&nbsp;")},trim:function(d){return d=d.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(d,c){c||(c=/[,%\'\"\/\\;|\<\>\^]/);return-1<d.search(c)},len:function(d){return d.replace(/[^\x00-\xff]/g,"**").length},left:function(d,
c,a){if(f.len(d)>c){!0===a?a=2:0<a||(a=0);var b=0,e=0;for(c-=a;e<c;)255<d.charCodeAt(b)?e+=2:e++,b++;d=d.substring(0,b);for(b=0;b<a;b++)d+="."}return d},isNumber:function(d){return 0==d.search(/^\d+$/g)},hasChn:function(d){return/[\u4E00-\u9FA5]+/.test(d)},isChn:function(d){return/^[\u4E00-\u9FA5]+$/.test(d)},addParam:function(d,c){c&&(d+=(-1<d.indexOf("?")?"&":"?")+c);return d}};return f});
handy.add("Cookie",function(){return{get:function(f,d){var c=f+"=",a="",b=document.cookie;if(0<b.length){var e=b.indexOf(c);-1!=e&&(e+=c.length,c=b.indexOf(";",e),-1==c&&(c=b.length),a=b.substring(e,c),d||(a=unescape(a)))}return a},set:function(f,d,c){var a=[];void 0!=f&&void 0!=d&&a.push(f+"="+escape(d));c&&(void 0!=c.path&&a.push("path="+c.path),void 0!=c.domain&&a.push("domain="+c.domain),void 0!=c.expires&&a.push("expires="+c.expires),c.secure&&a.push("secure"));document.cookie=a.join(";")},del:function(f){var d=
new Date;d.setTime(d.getTime()-1);document.cookie=f+"=;expires="+d.toGMTString()}}});handy.add("Util",function(f){var d=0;return{isWindow:function(c){return null!=c&&c==c.window},getUuid:function(){return d++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(c){var a=top.location.hash;0<=a.indexOf("#")&&(c=a.replace(/#[^\?]*/,c));top.location.hash=c},result:function(c,a){var b=c[a];return f.Object.isFunction(b)?b():b}}});
handy.add("Collection","B.Object",function(f){function d(b){return b}function c(b){return function(e){return e[b]}}function a(b){return function(e){if(e===b)return!0;for(var a in b)if(b[a]!==e[a])return!1;return!0}}return{map:function(b,e,a){var c=[];if(null==b)return c;var d=Array.prototype.map;if(d&&b.map===d)return b.map(e,a);f.each(b,function(b,d){c.push(e.call(a,d,b))});return c},pluck:function(b,e){return this.map(b,c(e))},some:function(b,e,a){var c=!1;if(null==b||!e)return c;var d=Array.prototype.some;
if(d&&b.some===d)return b.some(e,a);$HO.each(b,function(b,d,g){if(c||(c=e.call(a,d,b,g)))return!1});return!!c},every:function(b,e,a){var c=!0;if(null==b||!e)return c;var d=Array.prototype.every;if(d&&b.every===d)return b.every(e,a);$HO.each(b,function(b,d,g){if(!(c=e.call(a,d,b,g)))return!1});return!!c},find:function(b,e,a){var c;this.some(b,function(b,d,f){if(e.call(a,b,d,f))return c=b,!0});return c},filter:function(b,e,a){var c=[];if(null==b)return c;var d=Array.prototype.filter;if(d&&b.filter===
d)return b.filter(e,a);$HO.each(b,function(b,d,g){e.call(a,d,b,g)&&c.push(d)});return c},where:function(b,e){return this.filter(b,a(e))},findWhere:function(b,e){return this.find(b,a(e))},invoke:function(b,e){var a=Array.prototype.slice.call(arguments,2),c=f.isFunction(e);return this.map(b,function(b){return(c?e:b[e]).apply(b,a)})},sortBy:function(b,e,a){var h=e;e=null==h?d:$HO.isFunction(h)?h:c(h);return this.pluck(this.map(b,function(b,c,d){return{value:b,index:c,criteria:e.call(a,b,c,d)}}).sort(function(b,
e){var a=b.criteria,c=e.criteria;if(a!==c){if(a>c||void 0===a)return 1;if(a<c||void 0===c)return-1}return b.index-e.index}),"value")}}});
handy.add("Template",function(f){var d={},c=/^=/,a="".trim,b={openTag:"<%",closeTag:"%>",_add:function(b){return a?"$r+="+b+";\n":"$r.push("+b+");\n"},_parseHtml:function(e){e=e.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return b._add('"'+e+'"')},_parseScript:function(e){e=e.replace(/this/g,"$data");0==e.indexOf("=")&&(e=b._add(e.replace(c,"")+'||""'));return e+"\n"},_compile:function(e){var c="var $r="+(a?'""':"[]")+";\n";f.Object.each(e.split(b.openTag),function(e,a){var d=
a.split(b.closeTag);1==d.length?c+=b._parseHtml(d[0]):(c+=b._parseScript(d[0]),d[1]&&(c+=b._parseHtml(d[1])))});c+="return "+(a?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(e,a){var c,g,k;if("string"==typeof e)c=e;else if(c=e.tmpl,k=e.id)if(d[k])g=d[k];else{var l=document.getElementById(k);l&&(c=(l.value||l.innerHTML).replace(/\s/g,""))}if(!g){if(!c){f.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}g=b._compile(c);k&&(d[k]=g)}return a?g(a):g}};return b});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(f,d,c){function a(b){if(b==l)return!1;var a=k.contentWindow.document;a.open();a.write("<!doctype html><html><body>"+b+"</body></html>");a.close();l=b;f.log("set:"+k.contentWindow.document.body.innerText)}function b(){var b=d.getHash(),c=k.contentWindow.document.body.innerText;b!=l?(a(b),e(b)):c!=l&&(f.log("update:"+k.contentWindow.document.body.innerText),d.setHash(c))}function e(b){var a=p.listeners,e;for(e in a)a[e](b)}var j,
h=0,g=document,k,l,m=g.documentMode,n="onhashchange"in window&&(void 0===m||7<m),p={delay:50,listen:function(f,l){if(!j&&!j)if(j=!0,p.listeners={},n)$(window).on("hashchange",function(){e(d.getHash())});else k=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(g.body)[0],$(k).one("load",function(){a(d.getHash());setInterval(b,p.delay)});if(l in p.listeners)$D.error(Error("Duplicate name"));else return l=l||c.expando+ ++h,p.listeners[l]=f,l},unListen:function(b){for(var a in p.listeners)(!b||
b==a)&&delete p.listeners[a]}};return p});handy.add("Support",function(f){var d={mediaQuery:function(){var a;if(f.Browser.mobile())a="hui-mobile";else{a="hui-pc";var b=f.Browser.ie();b&&(a+=" ie"+b)}document.documentElement.className+=" "+a}};d.mediaQuery();if(6==f.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}return d});
handy.add("Validator",["B.String","B.Object"],function(f,d){var c={messages:{required:"{name}\u4e0d\u80fd\u4e3a\u7a7a",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94fe\u63a5\u5730\u5740",date:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f",number:"{name}\u987b\u662f\u6570\u5b57",digits:"{name}\u987b\u662f\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u7528\u5361\u53f7\u7801",
equalTo:"\u8bf7\u8f93\u5165\u76f8\u540c\u7684{name}",min:"{name}\u4e0d\u80fd\u5c0f\u4e8e{0}",max:"{name}\u4e0d\u80fd\u5927\u4e8e{0}",range:"{name}\u8981\u5728{0}\u5230{1}\u4e4b\u95f4",maxlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7{0}",minlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e{0}",rangelength:"{name}\u957f\u5ea6\u8981\u5728{0}\u5230{1}\u4e4b\u95f4"},valid:function(a,b){var e=b.rules,d;for(d in e){var h=e[d],f=("function"==typeof h?h:c[d])(a,h);if(!f)return e=b.error||c.error,d=b.messages&&
b.messages[d]||c.messages[d],d=d.replace(/\{([^\}]+)\}/g,function(a,e){return h[e]||0==e&&h||b[e]||h||""}),e&&e(d),f}return!0},required:function(a){return 0<f.trim(""+a).length},email:function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a){return!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a){return/^\d+$/.test(a)},creditcard:function(a){if(/[^0-9 \-]+/.test(a))return!1;var b=0,e=0,c=!1;a=a.replace(/\D/g,"");for(var d=a.length-1;0<=d;d--){e=a.charAt(d);e=parseInt(e,10);if(c&&9<(e*=2))e-=9;b+=e;c=!c}return 0===b%10},min:function(a,b){return a>=b},max:function(a,
b){return a<=b},range:function(a,b){return a>=b[0]&&a<=b[1]},minlength:function(a,b){return(d.isArray(a)?a.length:f.trim(""+a).length)>=b},maxlength:function(a,b){return(d.isArray(a)?a.length:f.trim(""+a).length)<=b},rangelength:function(a,b){var e=d.isArray(a)?a.length:f.trim(""+a).length;return e>=b[0]&&e<=b[1]},equalTo:function(a,b){return a===b}};return c});
handy.add("LocalStorage",["B.Browser","B.Events","B.Json"],function(f,d,c){d={_init:function(){!a&&f.ie()&&(e=document.getElementById("LocalStorageUserDataDiv"),e||(e=document.createElement("DIV"),e.style.display="none",e.id="LocalStorageUserDataDiv",e.addBehavior("#default#userData"),document.body.appendChild(e),e.load(j)))},getItem:function(d){d=a?b.getItem(d):e.getAttribute(d);return d=c.parse(d)},setItem:function(d,f){f=c.stringify(f);try{a?b.setItem(d,f):(e.setAttribute(d,f),e.save(j))}catch(k){return $D.error(k),
!1}return!0},removeItem:function(c){a?b.removeItem(c):(e.removeAttribute(c),e.save(j))},clear:function(){a?b.clear():e.unload()}};var a=window.localStorage&&window.localStorage.getItem,b=window.localStorage,e,j=document.domain;d._init();return d})(function(f){Hui=H=$H=f.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HE=$H.Events;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};f=window.$;f.fn.remove=$HF.intercept(f.fn.remove,
function(){$H.trigger("removeEl",this.target)})})(handy);$Define("CM.AbstractDao",function(){var f=$H.createClass();$HO.extend(f.prototype,{ajax:function(d){this.beforeSend(d);d.error=$HF.intercept(this.error,d.error);d.success=$HF.intercept(this.success,d.success);return $.ajax(d)},beforeSend:$H.noop,error:$H.noop,success:$H.noop,sync:$H.noop});return f});
$Define("CM.AbstractManager",function(){var f=$H.createClass();$HO.extend(f.prototype,{_types:{},_all:{},type:"manager",registerType:function(d,c){this._types[d]=c;c.prototype.xtype=d},getClass:function(d){return this._types[d]},register:function(d){this._all[d.getId()]=d},unregister:function(d){var c=this._all,a=d.getId();c[a]==d&&delete c[a]},eachInEl:function(d,c){var a=this;d.find(".js-"+a.type).each(function(b,e){e=$(e);var d=e.attr("id");(d=a.get(d))&&c(d)})},generateId:function(d,c){var a=
$H.expando+"_"+this.type+"_"+(d||$H.Util.getUuid());if(!0!=c&&this._all[a])$D.error("id\u91cd\u590d:"+a);else return a},get:function(d){var c=this._all;return c[d]||c[this.generateId(d,!0)]}});return f});
$Define("CM.ViewManager","CM.AbstractManager",function(f){var d=$H.createClass();$H.inherit(d,f,{type:"view",initialize:function(){var c=this;$H.on("afterRender",function(a){c.afterRender(a)});$H.on("removeEl",function(a){c.destroy(a)})},afterRender:function(c){this.eachInEl(c,function(a){a.afterRender()})},destroy:function(c){this.eachInEl(c,function(a){a.destroy(!0)})}});$V=$HO.getSingleton(d);return d});
$Define("CM.View","CM.ViewManager",function(f){var d=$H.createClass(),c=/^(<[a-zA-Z]+)/,a=/^[^>]+class=/,b=/(class=")/;$HO.extend(d,{extend:function(b){var a=this.prototype;$HO.extend(a,b,{notCover:function(c){if($HO.contains(["_customEvents","listeners"],c))return a[c]=(b[c]||[]).concat(a[c]||[]),!0;if("xtype"==c||"constructor"==c)return!0}})},html:function(b){return(new this($HO.extend({autoRender:!1},b))).getHtml()}});$HO.extend(d.prototype,$H.Events);$HO.extend(d.prototype,{xtype:"View",autoRender:!0,
renderBy:"append",children:[],_customEvents:"beforeRender render afterRender beforeShow show afterShow beforeHide hide afterHide beforeUpdate update afterUpdate beforeDestroy destroy afterDestroy".split(" "),_defaultEvents:"mousedown mouseup mouseover mousemove mouseenter mouseleave dragstart drag dragenter dragleave dragover drop dragend touchstart touchmove touchend touchcancel keydown keyup keypress click dblclick focus focusin focusout contextmenu change submit".split(" "),initialize:function(b){this.manager=
this.constructor.manager||$HO.getSingleton(f);this.doConfig(b);this.parseItems();!1!=this.autoRender&&this.render();this.manager.register(this)},doConfig:function(b){var a=this;a.params=b;a.settings=$HO.clone(b);a.renderTo=b.renderTo?$(b.renderTo):$(document.body);var c=a.listeners||[];b.listeners&&(c=c.concat(b.listeners));a._listeners=c;$HO.extend(a,b,{notCover:function(c){var d=a[c],f=$HO.contains(a._customEvents,c);if($HO.contains(a._defaultEvents,c))a._listeners.push({name:c,handler:b[c]});else if(f)a.on(c,
b[c]);if(null!=d&&"object"==typeof d||$HO.isFunction(d))return!0}});b.defItem&&$HO.extend(a.defItem,b.defItem)},getEl:function(){return this._container},getId:function(){return this._id||(this._id=this.manager.generateId(this.cid))},initHtml:function(){"string"!=typeof this.tmpl&&(this.tmpl=this.constructor.prototype.tmpl=this.tmpl.join(""));return $H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this)},getHtml:function(){var e=this.getId(),d;d="visibility"==this.displayMode?"visibility:hidden;":"display:none;";
var f=this.initHtml(),g=a.test(f),k="js-"+this.manager.type+" "+this.extCls+" ";g&&(f=f.replace(b,"$1"+k));return f=f.replace(c,'$1 id="'+e+'" style="'+d+'"'+(g?"":' class="'+k+'"'))},findHtml:function(b){b=">*"==b?this.children:this.find(b);for(var a=[],c=0;c<b.length;c++)a.push(b[c].getHtml());return a.join("")},initStyle:function(){var b=this.getEl(),a=this.style||{};void 0!=this.width&&(a.width=this.width);void 0!=this.height&&(a.height=this.height);b.css(a)},beforeRender:function(){return this.trigger("beforeRender")},
render:function(){if(!1==this.beforeRender())return!1;this.trigger("render");var b=this.getHtml();this.renderTo[this.renderBy](b);this.afterRender()},afterRender:function(){if(this.rendered)return!1;this.callChild();this._container=$("#"+this.getId());this.rendered=!0;this.initStyle();!0!=this.notListen&&this.initListeners();this.disabled&&this.disable();this.trigger("afterRender");this.hidden||this.show()},beforeShow:function(){return this.trigger("beforeShow")},show:function(b,a){var c=this;if(!1==
c.beforeShow()||c.showed||a&&c.hidden)return!1;if(!b&&c.delayShow)setTimeout(function(){d.prototype.show.call(c,!0)},0);else{c.trigger("show");c.showed=!0;var f=c.getEl();"visibility"==c.displayMode?f.css({visibility:"visible"}):f.show();c.callChild([null,!0]);c.afterShow()}},afterShow:function(){this.trigger("afterShow")},beforeHide:function(){return this.trigger("beforeHide")},hide:function(){if(!1==this.beforeHide()||!this.showed)return!1;this.showed=!1;var b=this.getEl();"visibility"==this.displayMode?
b.css({visibility:"hidden"}):b.hide();this.trigger("hide");this.afterHide()},afterHide:function(){this.trigger("afterHide")},enable:function(){this.resume();this.getEl().removeClass("hui-disable").find("input,textarea,select").removeAttr("disabled")},disable:function(){this.suspend();this.getEl().addClass("hui-disable").find("input,textarea,select").attr("disabled","disabled")},listen:function(b){var a=this,c=b.name,d=b.context,f=b.handler;if(b.custom)a.on(c,f,d);else{var l=a._listeners,m=b.el,n=
b.method||"bind",p=b.selector,x=b.data,y=b.delegation=function(){if(!0!=a.isSuspend)return f.apply(d||a,arguments)};$H.Browser.mobile()&&"click"==c&&(c="touchend");m=m?"string"==typeof m?a.find(m):m:a.getEl();if(p)if(x)m[n](p,c,x,y);else m[n](p,c,y);else if(x)m[n](c,x,y);else m[n](c,y);l.push(b)}},unlisten:function(b){var a=b.name,c=b.handler;if(b.custom)this.off(a,c);else{var d=b.el,f="delegate"==b.method?"undelegate":"unbind";b=b.selector;var l;$H.Browser.mobile()&&"click"==a&&(a="touchend");for(var d=
d?"string"==typeof d?this.find(d):d:this.getEl(),m=this._listeners.length-1;0<=m;m--){var n=this._listeners[m];if(n.handler==c){l=n.delegation;this._listeners.splice(m,1);break}}if(b)d[f](b,a,l);else d[f](a,l)}},initListeners:function(){if(this.listened)return!1;this.listened=!0;var b=this._listeners;this._listeners=[];for(var a=b.length-1;0<=a;a--)this.listen(b[a]);this.callChild()},clearListeners:function(){for(var b=this._listeners,a=b.length-1;0<=a;a--)this.unlisten(b[a]);this.off("all");this.callChild()},
suspend:function(){if(this.isSuspend)return!1;this.isSuspend=!0;this.callChild()},resume:function(){if(!this.isSuspend)return!1;this.isSuspend=!1;this.callChild()},each:function(b,a){for(var c=this.children,d=c.length,f,l=0;l<d;){f=c[l];f=a?b.apply(f,a):b(l,f);if(!1===f)break;d==c.length?l++:d=c.length}},match:function(b,a){if("*"==b)return!0;var c=a||this,d,f,l;b=b.replace(/^([^\[]+)/,'[xtype="$1"]');for(var m=/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;d=m.exec(b);)if(f=d[1],l=d[2],d=eval(d[3]),"="===l?c[f]!=
d:c[f]==d)return!1;return!0},find:function(b,a){var c=this;if(0!=b.indexOf("$"))return c.getEl().find(b);a=a||[];if(0<b.indexOf(","))return $HO.each(b.split(","),function(b,e){a=a.concat(c.find(e))}),a;var d=1==b.indexOf(">"),f=b.replace(/^\$>?\s?/,""),l=f.search(/\s|>/),m;0<l&&(m=f.substring(l),f=f.substring(0,l));c.each(function(c,h){h.match(f)&&(m?h.find("$"+m,a):a.push(h));d||h.find(b,a)});return a},parents:function(b){if(b&&0!=b.indexOf("$"))return this.getEl().parents(b);for(var a=this;a.parent;)if(a=
a.parent,b&&this.match(b,a))return a;return b||a===this?null:a},index:function(){var b=this,a=b.parent;if(a){var c;a.each(function(a,d){if(d==b)return c=a,!1});return c}return null},callChild:function(b,a){0!=this.children.length&&(b&&"string"!=typeof b&&(a=b,b=null),b=b||arguments.callee.caller.$name,this.each(function(c,d){a?d[b].apply(d,a):d[b].call(d)}))},add:function(b){this.children.push(b);b.parent=this},remove:function(b){for(var a=this.children,c=!1,d=0,f=a.length;d<f;d++)a[d]==b&&(a.splice(d,
1),b.destroy(),c=!0);return c},addItem:function(b){var a=this.settings,c=a.items;c?$HO.isArray(c)||(a.items=[c]):a.items=[];a.items.push(b)},parseItem:function(){},parseItems:function(){var b=this.settings.items;if(b)for(var b=b.length?b:[b],a=0,c=b.length;a<c;a++){var d=b[a];this.defItem&&$HO.extend(d,this.defItem,{notCover:!0});this.parseItem(d);var f=this.manager.getClass(d.xtype);f?(d.renderTo||(d.autoRender=!1),d=new f(d),this.add(d)):$D.error("xtype:"+d.xtype+"\u672a\u627e\u5230")}},beforeUpdate:function(){return this.trigger("beforeUpdate")},
update:function(b){var a=this;if(!1==a.beforeUpdate())return!1;var c=a.parent;b=$HO.extend({renderBy:"before",renderTo:a.getEl()},b);c&&(b=$HO.extend(c.defItem,b),c.parseItem(b));if(!b.cid||b.cid==a.cid)b._id=a._id;var d=new a.constructor(b);c&&(d.parent=c,c.each(function(b,e){if(e==a)return c.children.splice(b,1,d),!1}));a.destroy();a.trigger("update");a.afterUpdate(d);return d},afterUpdate:function(b){this.trigger("afterUpdate",b)},beforeDestroy:function(){return this.trigger("beforeDestroy")},
destroy:function(){if(!1==this.beforeDestroy()||this.destroyed)return!1;this.callChild();this.trigger("destroy");this.clearListeners();this.getEl().remove();this.destroyed=!0;this.parent&&this.parent.remove(this);this.manager.unregister(this);delete this.params;delete this.settings;delete this._container;delete this.renderTo;delete this._listeners;delete this.children;this.afterDestroy()},afterDestroy:function(){this.trigger("afterDestroy")}});return d});
$Define("CM.Model",function(){var f=$H.createClass();$HO.extend(f.prototype,$H.Events);$HO.extend(f.prototype,{_pending:!1,idAttribute:"id",_validate:function(c,a){if(!a.validate||!this.validate)return!0;c=$HO.extend({},this.attributes,c);var b=this.validationError=this.validate(c,a)||null;if(!b)return!0;this.trigger("invalid",this,b,$HO.extend(a,{validationError:b}));return!1},initialize:function(c,a){var b=c||{};a||(a={});this.cid=$H.Util.getUuid();this.attributes={};a.collection&&(this.collection=
a.collection);a.parse&&(b=this.parse(b,a)||{});b=$HO.extend(b,$H.Util.result(this,"defaults"),{notCover:!0});this.set(b,a);this.changed={}},toJson:function(){return $HO.clone(this.attributes)},sync:function(c,a,b){return this.dao.sync.apply(this,arguments)},get:function(c){return this.attributes[c]},escape:function(c){return $H.String.escapeHTML(this.get(c))},has:function(c){c=this.get(c);return null!=c&&void 0!=c},set:function(c,a,b){var d;"object"===typeof c?(d=c,b=a):(d={})[c]=a;b||(b={});if(!this._validate(d,
b))return!1;var f=b.unset;c=b.silent;var h=[],g=this._changing;this._changing=!0;g||(this._previousAttributes=$H.Object.clone(this.attributes),this.changed={});var k=this.attributes,l=this._previousAttributes;this.idAttribute in d&&(this.id=d[this.idAttribute]);for(var m in d)a=d[m],$HO.equals(k[m],a)||h.push(m),$HO.equals(l[m],a)?delete this.changed[m]:this.changed[m]=a,f?delete k[m]:k[m]=a;if(!c){h.length&&(this._pending=b);a=0;for(d=h.length;a<d;a++)this.trigger("change:"+h[a],this,k[h[a]],b)}if(g)return this;
if(!c)for(;this._pending;)b=this._pending,this._pending=!1,this.trigger("change",this,b);this._changing=this._pending=!1;return this},unset:function(c,a){a=a||{};a.unset=!0;return this.set(c,void 0,a)},clear:function(c){var a={},b;for(b in this.attributes)a[b]=void 0;c=c||{};c.unset=!0;return this.set(a,c)},hasChanged:function(c){var a=this.changed;return null==c?!$HO.isEmpty(a):$HO.contains(a,c)},changedAttrbutes:function(c){if(!c)return this.hasChanged()?$HO.clone(this.changed):!1;var a,b=!1,d=
this._changing?this._previousAttributes:this.attributes,f;for(f in c)if(!$HO.equals(d[f],a=c[f]))(b||(b={}))[f]=a;return b},previous:function(c){return null==c||!this._previousAttributes?null:this._previousAttributes[c]},fetch:function(c){var a=this;c=c?$HO.clone(c):{};void 0===c.parse&&(c.parse=!0);var b=c.success;c.success=function(d){if(!a.set(a.parse(d,c),c))return!1;b&&b(a,d,c);a.trigger("sync",a,d,c)};d(a,c);return a.sync("read",a,c)},save:function(c,a,b){var e,f=this.attributes;null==c||"object"===
typeof c?(e=c,b=a):(e={})[c]=a;b=$HO.extend({validate:!0},b);if(e&&!b.wait){if(!this.set(e,b))return!1}else if(!this._validate(e,b))return!1;e&&b.wait&&(this.attributes=$HO.extend({},f,e));void 0===b.parse&&(b.parse=!0);var h=this,g=b.success;b.success=function(a){h.attributes=f;var c=h.parse(a,b);b.wait&&(c=$HO.extend(e||{},c));if($HO.isObject(c)&&!h.set(c,b))return!1;g&&g(h,a,b);h.trigger("sync",h,a,b)};d(this,b);c=this.isNew()?"create":b.patch?"patch":"update";"patch"===c&&(b.oAttrs=e);c=this.sync(c,
this,b);e&&b.wait&&(this.attributes=f);return c},destroy:function(c){c=c?$HO.clone(c):{};var a=this,b=c.success,e=function(){a.trigger("destroy",a,a.collection,c)};c.success=function(d){(c.wait||a.isNew())&&e();b&&b(a,d,c);a.isNew()||a.trigger("sync",a,d,c)};if(this.isNew())return c.success(),!1;d(this,c);var f=this.sync("delete",this,c);c.wait||e();return f},url:function(){var c=$H.Util.result(this,"urlRoot")||$H.Util.result(this.collection,"url");c||$D.error(Error("\u5fc5\u987b\u8bbe\u7f6e\u4e00\u4e2aurl\u5c5e\u6027\u6216\u8005\u51fd\u6570"));
return this.isNew()?c:c.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(c){return c},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(c){return this._validate({},$HO.extend(c||{},{validate:!0}))}});var d;return f});
$Define("CM.Collection",["CM.AbstractDao","CM.Model"],function(f,d){var c=$H.createClass();$HO.extend(c.prototype,$H.Events);$HO.extend(c.prototype,{dao:$H.getSingleton(f),_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(b,a){if(b instanceof d)return b;a=a?$HO.clone(a):{};a.collection=this;var c=new this.model(b,a);if(!c.validationError)return c;this.trigger("invalid",this,c.validationError,a);return!1},_addReference:function(b){this._byId[b.cid]=b;null!=b.id&&
(this._byId[b.id]=b);b.collection||(b.collection=this);b.on("all",this._onModelEvent,this)},_removeReference:function(b){this===b.collection&&delete b.collection;b.off("all",this._onModelEvent,this)},_onModelEvent:function(b,a,c,d){("add"===b||"remove"===b)&&c!==this||("destroy"===b&&this.remove(a,d),a&&b==="change:"+a.idAttribute&&(delete this._byId[a.previous(a.idAttribute)],null!=a.id&&(this._byId[a.id]=a)),this.trigger.apply(this,arguments))},initialize:function(b,a){a||(a={});a.model&&(this.model=
a.model);void 0!==a.comparator&&(this.comparator=a.comparator);this._reset();this.initialize.apply(this,arguments);b&&this.reset(b,$HO.extend({silent:!0},a))},toJSON:function(b){return $H.Collection.map(this,function(a){return a.toJSON(b)})},sync:function(b,a,c){return this.dao.sync.apply(this,arguments)},add:function(b,a){$HO.extend(a,{add:!0,remove:!1,merge:!1});return this.set(b,a)},remove:function(b,a){var c=!$HO.isArray(b);b=c?[b]:$HO.clone(b);a||(a={});var d,f,k,l;d=0;for(f=b.length;d<f;d++)if(l=
b[d]=this.get(b[d]))delete this._byId[l.id],delete this._byId[l.cid],k=this.indexOf(l),this.models.splice(k,1),this.length--,a.silent||(a.index=k,l.trigger("remove",l,this,a)),this._removeReference(l,a);return c?b[0]:b},set:function(b,a){a=$H.Util.extend(a,{add:!0,remove:!0,merge:!0});a.parse&&(b=this.parse(b,a));var c=!$HO.isArray(b),f=c?b?[b]:[]:$HO.clone(b),g,k,l,m,n,p,x=a.at,y=this.model,z=this.comparator&&null==x&&!1!==a.sort,A="string"==typeof this.comparator?this.comparator:null,t=[],s=[],
r={},v=a.add,q=a.merge,u=a.remove,w=!z&&v&&u?[]:!1;g=0;for(k=f.length;g<k;g++){n=f[g]||{};l=n instanceof d?m=n:n[y.prototype.idAttribute||"id"];if(l=this.get(l))u&&(r[l.cid]=!0),q&&(n=n===m?m.attributes:n,a.parse&&(n=l.parse(n,a)),l.set(n,a),z&&(!p&&l.hasChanged(A))&&(p=!0)),f[g]=l;else if(v){m=f[g]=this._prepareModel(n,a);if(!m)continue;t.push(m);this._addReference(m,a)}m=l||m;w&&(m.isNew()||!r[m.id])&&w.push(m);r[m.id]=!0}if(u){g=0;for(k=this.length;g<k;++g)r[(m=this.models[g]).cid]||s.push(m);
s.length&&this.remove(s,a)}if(t.length||w&&w.length)if(z&&(p=!0),this.length+=t.length,null!=x){g=0;for(k=t.length;g<k;g++)this.models.splice(x+g,0,t[g])}else{w&&(this.models.length=0);n=w||t;g=0;for(k=n.length;g<k;g++)this.models.push(n[g])}p&&this.sort({silent:!0});if(!a.silent){g=0;for(k=t.length;g<k;g++)(m=t[g]).trigger("add",m,this,a);(p||w&&w.length)&&this.trigger("sort",this,a)}return c?f[0]:f},reset:function(b,a){a||(a={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c],
a);a.previousModels=this.models;this._reset();b=this.add(b,$HO.extend({silent:!0},a));a.silent||this.trigger("reset",this,a);return b},push:function(b,a){return this.add(b,$HO.extend({at:this.length},a))},pop:function(b){var a=this.at(this.length-1);this.remove(a,b);return a},unshift:function(b,a){return this.add(b,$HO.extend({at:0},a))},shift:function(b){var a=this.at(0);this.remove(a,b);return a},slice:function(){return Array.prototype.slice.apply(this.models,arguments)},get:function(b){return null==
b?void 0:this._byId[b]||this._byId[b.id]||this._byId[b.cid]},at:function(b){return this.models[b]},where:function(b,a){return $HO.isEmpty(b)?a?void 0:[]:this[a?"find":"filter"](function(a){for(var c in b)if(b[c]!==a.get(c))return!1;return!0})},findWhere:function(b){return this.where(b,!0)},sort:function(b){this.comparator||$D.error(Error("\u6ca1\u6709\u6bd4\u8f83\u5668"));b||(b={});"string"==typeof this.comparator||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort($H.Function.bind(this.comparator,
this));b.silent||this.trigger("sort",this,b);return this},pluck:function(b){return $H.Collection.invoke(this.models,"get",b)},fetch:function(b){var c=this;b=b?$H.clone(b):{};void 0===b.parse&&(b.parse=!0);var d=b.success;b.success=function(a){c[b.reset?"reset":"set"](a,b);d&&d(c,a,b);c.trigger("sync",c,a,b)};a(c,b);return c.sync("read",c,b)},create:function(b,a){var c=this;a=a?$H.clone(a):{};if(!(b=c._prepareModel(b,a)))return!1;a.wait||c.add(b,a);var d=a.success;a.success=function(b,f){a.wait&&c.add(b,
a);d&&d(b,f,a)};b.save(null,a);return b},parse:function(a){return a},clone:function(){return new this.constructor(this.models)}});var a;$HO.each(["some","every","find","filter","invoke"],function(a){c.prototype[a]=function(){var c=Array.prototype.slice.call(arguments),d=$H.Collection;c.unshift(this.models);return d[a].apply(d,c)}});return c});
$Define("C.AbstractComponent",["CM.ViewManager","CM.View"],function(f,d){$C=$H.namespace("C",{});var c=$H.createClass();$H.inherit(c,d,{xtype:"AbstractComponent",activeCls:"hui-active",hasConfig:function(a,b){if(!b)return!1;if($HO.isArray(b))for(var c=0,d=b.length;c<d;c++){if(this.match(a,b[c]))return!0}else if(this.match(a,b))return!0;return!1},doConfig:function(a){this.callSuper([a]);this.cls||(this.cls=this.xtype.toLowerCase());this.extCls=this.getExtCls();this.icon&&this.addItem({xtype:"Icon",
name:this.icon});this.isMini&&(this.defItem=$HO.extend({isMini:!0},this.defItem))},getExtCls:function(){var a=["js-component"];this.extCls&&a.push(this.extCls);this.theme&&a.push("hui-"+this.cls+"-"+this.theme);this.radius&&a.push("hui-radius-"+this.radius);this.isMini&&a.push("hui-mini");this.shadow&&a.push("hui-shadow");this.shadowSurround&&a.push("hui-shadow-surround");this.shadowOverlay&&a.push("hui-shadow-overlay");this.shadowInset&&a.push("hui-shadow-inset");this.isActive&&a.push(this.activeCls);
this.isFocus&&a.push("hui-focus");this.isInline&&a.push("hui-inline");return 0<a.length?a.join(" "):""},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},txt:function(a){var b=this.find(".js-"+this.cls+"-txt");0==b.length&&(b=this.find(".hui-"+this.cls+"-txt"));if(void 0!=a)b.text(a);else return b.text()},valid:function(){var a=this.settings.validator;if(a){var b=this.val();a.error||(a.error=function(a){new $C.Tips({text:a,theme:"error"})});
return a=$H.Validator.valid(b,a)}for(var b=this.children,c=0,d=b.length;c<d;c++)if(a=b[c].valid(),!a)return a;return!0}},{define:function(a,b){var d=$H.createClass();$H.inherit(d,b||c,null,null,{notCover:function(a){return"define"==a}});$HO.getSingleton(f).registerType(a,d);return $C[a]=d}});return c});
$Define("C.Popup","C.AbstractComponent",function(f){f=f.define("Popup");var d=0,c;f.extend({delayShow:!0,clickHide:!0,showPos:"center",shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.findHtml("$>*")%></div>'],doConfig:function(a){this.callSuper([a]);this.clickHide&&this._listeners.push({name:"click",el:$(document),handler:function(){this.hide()}});$H.Browser.android()&&(this._listeners.push({name:"show",custom:!0,handler:function(){!0!=$H.Events.trigger("component.popup.show")&&$("input,textarea,select").attr("disabled",
"disabled")}}),this._listeners.push({name:"hide",custom:!0,handler:function(){!0!=$H.Events.trigger("component.popup.hide")&&setTimeout(function(){$("input,textarea,select").removeAttr("disabled")},500)}}))},afterShow:function(){var a=this,b=a.getEl();b.css("z-index",1E3*d+1E3);if(!a.width&&a.parent){var c=a.width=a.parent.getEl().outerWidth();b.css("width",c)}b=a.showPos;if("string"==typeof b)a[b]();else"function"==typeof b&&b.call(a);a.noMask||a.mask();a.timeout&&setTimeout(function(){a.destroyed||
a.hide()},a.timeout)},hide:function(){!1!=this.callSuper()&&(this.noMask||this.unmask(),this.notDestroy||this.destroy())},center:function(){var a=this.getEl(),b=this.width||a.width(),c=this.height||a.height(),d=document,b=((d.documentElement.offsetWidth||d.body.offsetWidth)-b)/2,c=((d.documentElement.clientHeight||d.body.clientHeight)-c)/2+(d.documentElement.scrollTop||d.body.scrollTop),c=10>c?window.screen.height/2-200:c;a.css({left:b+"px",top:c-(this.offsetTop||0)+"px"})},followEl:function(a){a=
(a||this.parent.getEl()).position();this.getEl().css(a)},mask:function(){c||(c=$('<div class="hui-mask" style="display:none;"></div>').appendTo(document.body));c.css("z-index",1E3*d+998);0==d&&c.show();d++},unmask:function(){d--;0==d?c.hide():c.css("z-index",1E3*(d-1)+998)}});return f});
$Define("C.ControlGroup","C.AbstractComponent",function(f){f=f.define("ControlGroup");f.extend({multi:!1,defItem:{xtype:"Button",extCls:"js-item",radius:null,shadow:!1,isInline:!1},tmpl:['<div class="hui-ctrlgp<%if(this.direction=="h"){%> hui-ctrlgp-h<%}else{%> hui-ctrlgp-v<%}%>">','<%=this.findHtml("$>*")%>',"</div>"],listeners:[{name:"click",selector:".js-item",method:"delegate",handler:function(d){var c=$(d.currentTarget),c=$V.get(c.attr("id")).index();this.onItemClick(d,c)}}],select:function(d){if(!this.notSelect&&
(d="number"==typeof d?this.children[d]:"string"==typeof d?this.find(d)[0]:d))if(!this.multi&&!d.multi){var c=this.getSelected();c&&this.selectItem(c,!1);this.selectItem(d)}else this.selectItem(d,!d.selected)},getSelected:function(d){var c=[];this.each(function(a,b){b.selected&&c.push(d?a:b)});return 0<c.length?this.multi?c:c[0]:null},selectItem:function(d,c){(c=!1!=c)?(d.selected=c,d.select?d.select():d.active()):(d.selected=c,d.select?d.select(c):d.unactive())},val:function(d){if(d){var c=d.split(",");
this.each(function(a,b){b.select($HO.contains(c,b.value))})}else return d=this.find("$>[selected=true]"),c=[],$HO.each(d,function(a,b){c.push(b.value)}),c.join(",")},onItemClick:function(d,c){this.select(c);this.itemClick&&this.itemClick(this.children[c],c)}});return f});
$Define("C.Icon","C.AbstractComponent",function(f){f=f.define("Icon");f.extend({tmpl:'<span class="hui-icon;<%if(this.isAlt){%>; hui-alt-icon;<%}%>; hui-icon-<%=this.name%>;<%if(!this.noBg){%>; hui-icon-bg;<%}%>"></span>'.split(";")});return f});
$Define("C.Button","C.AbstractComponent",function(f){f=f.define("Button");f.extend({iconPos:"left",theme:"gray",activeCls:"hui-btn-blue",cls:"btn",defItem:{xtype:"Icon"},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a href="javascript:;" hidefocus="true" class="hui-btn,<%if(!this.text){%> hui-btn-icon-notxt<%},if(this.isBack){%> hui-btn-back<%},if(this.hasIcon&&this.text){%> hui-btn-icon-<%=this.iconPos%><%}%>">,<span class="hui-btn-txt"><%=this.text%></span>,<%=this.findHtml("$>*")%>,</a>'.split(","),parseItem:function(d){"Icon"==
d.xtype&&(this.hasIcon=!0)}});return f});
$Define("C.Radio","C.AbstractComponent",function(f){f=f.define("Radio");f.extend({tmpl:'<div class="hui-radio hui-btn hui-btn-gray<%if(this.selected){%> hui-radio-on<%}%>">;<span class="hui-icon hui-icon-radio"></span>;<input type="radio"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-radio-txt"><%=this.text%></span>;</div>'.split(";"),select:function(d){this.selected=d=!1!=d;var c=this.find("input"),
a=this.getEl();d?(c.attr("checked",!0),a.addClass("hui-radio-on")):(c.removeAttr("checked"),a.removeClass("hui-radio-on"))},val:function(d){if(d)this.value=d,this.find("input").val(d);else return this.value}});return f});
$Define("C.Checkbox","C.AbstractComponent",function(f){f=f.define("Checkbox");f.extend({text:"",value:"",selected:!1,multi:!0,cls:"chkbox",tmpl:'<div class="hui-chkbox hui-btn hui-btn-gray<%if(this.selected){%> hui-chkbox-on<%}%>">;<span class="hui-icon hui-icon-chkbox"></span>;<input type="checkbox"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-chkbox-txt"><%=this.text%></span>;</div>'.split(";"),select:function(d){this.selected=
d=!1!=d;var c=this.find("input"),a=this.getEl();d?(c.attr("checked",!0),a.addClass("hui-chkbox-on")):(c.removeAttr("checked"),a.removeClass("hui-chkbox-on"))},val:function(d){if(d)this.value=d,this.find("input").val(d);else return this.value}});return f});
$Define("C.Select","C.AbstractComponent",function(f){f=f.define("Select");f.extend({text:"\u8bf7\u9009\u62e9...",value:"",radius:"little",optionClick:function(){},defItem:{xtype:"Menu",hidden:!0,markType:"dot",renderTo:"body"},_customEvents:["change"],tmpl:['<div class="hui-select hui-btn hui-btn-gray hui-btn-icon-right">','<span class="hui-icon hui-alt-icon hui-icon-carat-d hui-light"></span>','<input value="<%=this.value%>" name="<%=this.name%>"/>','<span class="hui-btn-txt js-select-txt"><%=this.text%></span>',
"</div>"],listeners:[{name:"click",handler:function(){this.showOptions()}}],doConfig:function(d){var c=this;c.callSuper([d]);for(var a=d.options,b=0,e=a.length;b<e;b++){var f=a[b];if(f.value==d.value){c.text=f.text;f.selected=!0;break}}c.addItem({itemClick:function(a){c.val(a.value)},width:c.width,items:a})},showOptions:function(){this.children[0].show()},val:function(d){if(d){if(this.value!=d){var c=this.children[0],a=c.find('$>[value="'+d+'"]');0<a.length&&(this.trigger("change"),a=a[0],this.value=
d,this.find("input").attr("value",d),this.txt(a.text),c.select(a))}}else return this.value}});return f});
$Define("C.Input","C.AbstractComponent",function(f){f=f.define("Input");f.extend({radius:"little",iconPos:"left",btnPos:"right",tmpl:'<div class="hui-input;<%if(this.hasIcon){%>; hui-input-icon-<%=this.iconPos%>;<%}%>;<%if(this.hasBtn){%>; hui-input-btn-<%=this.btnPos%>;<%}%>">;<%=this.findHtml("$>*")%>;<%if(this.type=="textarea"){%>;<textarea class="js-input";<%}else{%>;<input type="text" class="js-input hui-input-txt";<%}%> ; name="<%=this.name%>";<%if(this.placeholder){%>; placeholder="<%=this.placeholder%>";<%}%>;<%if(this.type=="textarea"){%>;><%=this.value%></textarea>;<%}else{%>; value="<%=this.value%>"/>;<%}%> ;</div>'.split(";"),listeners:[{name:"focus",
el:".js-input",handler:function(){this.getEl().addClass("hui-focus")}},{name:"blur",el:".js-input",handler:function(){this.getEl().removeClass("hui-focus")}}],doConfig:function(d){var c=this;c.callSuper([d]);"search"==c.type?c.icon="search":"textarea"==c.type&&c._listeners.push({name:"input propertychange",el:".js-input",handler:function(){var a=c.find(".js-input");a.css("height",a[0].scrollHeight)}});c.withClear&&c.addItem({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.find("input").val("").focus()}})},
parseItem:function(d){"Icon"==d.xtype?this.hasIcon=!0:"Button"==d.xtype&&(this.hasBtn=!0)},val:function(d){var c=this.find("input,textarea");if(d)c.val(d);else return c.val()},focus:function(){this.find("input").focus()}});return f});$Define("C.Set","C.AbstractComponent",function(f){f=f.define("Set");f.extend({tmpl:'<div class="hui-set">;<h1 class="hui-set-title"><%=this.title%></h1>;<div class="hui-set-content">;<%=this.findHtml("$>*")%>;</div>;</div>'.split(";")});return f});
$Define("C.Field","C.AbstractComponent",function(f){f=f.define("Field");f.extend({tmpl:'<div class="hui-form-field">;<label class="hui-form-left" for="<%=this.forName%>"><%=this.label%></label>;<div class="hui-form-right">;<%=this.text%>;<%=this.findHtml("$>*")%>;</div>;</div>'.split(";")});return f});
$Define("C.Form","C.AbstractComponent",function(f){f=f.define("Form");f.extend({tmpl:'<div class="hui-form">;<form action="">;<div class="hui-form-tips c-error"></div>;<%=this.findHtml("$>*")%>;</form>;</div>'.split(";")});return f});
$Define("C.Tab",["C.AbstractComponent","C.ControlGroup"],function(f,d){var c=f.define("Tab",d);c.extend({defItem:{xtype:"Button",radius:null,isInline:!1,extCls:"js-item",iconPos:"top",shadow:!1},tmpl:['<div class="hui-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){","var width=Math.floor(100/len);%>",'<li class="hui-tab-item" style="width:<%=(i==len-1)?(100-width*(len-1)):width%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%if(this.hasContent){%>",
"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].selected){%> style="display:none"<%}%>>',"<%=this.children[i].content%>","</div>","<%}%>","<%}%>","</div>"],doConfig:function(a){this.callSuper([a]);this.activeType&&(this.defItem.activeCls="hui-btn-active-"+this.activeType)},parseItem:function(a){a.selected&&(a.isActive=!0)},onItemClick:function(a,b){this.hasContent&&this.find(".js-tab-content").hide().eq(b).show();this.callSuper([a,b])},setContent:function(a,
b){a=a||this.getSelected(!0);this.find("js-tab-content").index(a).html(b)}});return c});
$Define("C.Toolbar","C.AbstractComponent",function(f){f=f.define("Toolbar");f.extend({cls:"tbar",defItem:{xtype:"Button",theme:"black",pos:"right",isMini:!0},tmpl:['<div class="hui-tbar<%if(this.type=="header"){%> hui-header<%}else if(this.type=="footer"){%> hui-footer<%}%>">','<%=this.findHtml(">*")%>','<%if(this.title){%><h1 class="hui-tbar-title js-tbar-txt"><%=this.title%></h1><%}%>',"</div>"],parseItem:function(d){"Button"==d.xtype&&(d.shadowSurround=!0,"left"==d.pos?d.extCls=(d.extCls||"")+
" hui-tbar-btn-left":"right"==d.pos&&(d.extCls=(d.extCls||"")+" hui-tbar-btn-right"))}});return f});$Define("C.Tips",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(f,d){var c=f.define("Tips",d);c.extend({theme:"black",timeout:2E3,radius:"normal",tmpl:['<div class="hui-tips<%if(!this.text){%> hui-tips-notxt<%}%>">','<%=this.findHtml("$>*")%>','<%if(this.text){%><span class="hui-tips-txt"><%=this.text%></span><%}%>',"</div>"]});return c});
$Define("C.Dialog",["C.AbstractComponent","C.Popup"],function(f,d){var c=f.define("Dialog",d);$HO.extend(c,{alert:function(a){return new c({contentMsg:a,noClose:!0,noCancel:!0})},confirm:function(a,b){return new c({contentMsg:a,noClose:!0,okCall:function(){return b&&b(!0)},cancelCall:function(){return b&&b(!1)}})},prompt:function(a,b,d){d||(d=b,b="");return new c({contentMsg:a,noClose:!0,items:{xtype:"Input",xrole:"dialog-content",value:b},okCall:function(){var a=this.find("$Input")[0].val();return d&&
d(a)}})}});c.extend({okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",clickHide:!1,radius:"little",tmpl:'<div class="hui-dialog">;<%=this.findHtml("$>[xrole=\'dialog-header\']")%>;<div class="hui-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="hui-body-content">;<h1 class="hui-content-title"><%=this.contentTitle%></h1>;<div class="hui-content-msg"><%=this.contentMsg%></div>;<%=this.findHtml("$>[xrole=\'dialog-content\']")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="hui-body-action">;<%=this.findHtml("$>[xrole=\'dialog-action\']")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(a){var b=this;b.callSuper([a]);a=a.items;b.title&&!b.hasConfig('[xrole="dialog-header"]',a)&&b.addItem({xtype:"Toolbar",title:b.title,theme:"gray",xrole:"dialog-header",extCls:"hui-dialog-header",items:!b.noClose&&{xtype:"Button",radius:"big",icon:"delete",isMini:!1,theme:"gray",pos:"left",click:function(){b.hide()}}});!b.noAction&&!b.hasConfig('[xrole="dialog-action"]',a)&&(a=[],b.noCancel||a.push({xtype:"Button",radius:null,isActive:1==b.activeBtn,text:b.cancelTxt,click:function(){!1!=
(b.cancelCall&&b.cancelCall())&&b.hide()}}),b.noOk||a.push({xtype:"Button",text:b.okTxt,isActive:2==b.activeBtn,radius:null,click:function(){!1!=(b.okCall&&b.okCall())&&b.hide()}}),b.addItem({xtype:"Tab",xrole:"dialog-action",theme:"border-top",notSelect:!0,items:a}))}});return c});
$Define("C.Menu",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(f,d,c){f=f.define("Menu",d);f.extend(c.prototype);f.extend({notDestroy:!0,tmpl:['<div class="hui-menu<%if(this.markType=="dot"){%> hui-menu-mark<%}%>">',"<ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-menu-item<%if(this.children[i].selected){%> hui-item-mark<%}%>">',"<%=this.children[i].getHtml()%>",'<%if(this.markType=="dot"){%><span class="hui-icon-mark"></span><%}%>',"</li>","<%}%>","</ul>",
"</div>"],selectItem:function(a,b){b=!1!=b;"dot"==this.markType?(a.selected=b,a.getEl().parent()[!1==b?"removeClass":"addClass"]("hui-item-mark")):"active"==this.markType?c.prototype.selectItem.call(this,a,b):a.selected=b}});return f});$Define("C.List",["C.AbstractComponent","C.ControlGroup"],function(f,d){var c=f.define("List",d);c.extend({tmpl:['<div class="hui-list">','<div class="hui-list-item c-clear">',"</div>","</div>"]});return c});
$Define("M.AbstractModule","CM.View",function(f){var d=$H.createClass();$H.inherit(d,f,{useCache:!0,cache:function(){},init:function(){},reset:function(){},exit:function(){return!0}});return d});$Define("M.AbstractNavigator","handy.base.Object",function(f){var d=$H.createClass();f.extend(d.prototype,{navigate:function(){}});return d});
$Define("M.History","handy.base.HashChange",function(f){var d=$H.createClass(),c=0;$HO.extend(d.prototype,{initialize:function(a,b){"function"==typeof a&&(b=a,a=null);this.error=b||$H.noop;this.key=a||"handy";this.states=[];f.listen($H.Function.bind(this.stateChange,this))},stateChange:function(){var a=this.getHashParam(),b=a.hKey,c=this.currentKey,d=this.states,f=d[c];if(b==c&&$HO.equals(a.param,f.param))return!1;(d=d[b])?a=d.onStateChange(d.param,!0):($D.warn("hisory state not found"),a=this.error("stateNotFound",
a));!0!=a?(a={hKey:c,param:f.param},this.saveHash(a)):this.currentKey=b},saveState:function(a){var b=this.currentKey=this.key+ ++c;this.states.push(b);this.states[b]=a;this.saveHash({hKey:b,param:a.param})},saveHash:function(a){$HU.setHash("#"+$H.Json.stringify(a))},getHashParam:function(){try{var a=$HU.getHash().replace("#","");return $H.Json.parse(a)}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+b.message)}},getCurrentState:function(){try{var a=this.getHashParam();return this.states[a.hKey]}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+
b.message)}},getPreState:function(){try{for(var a=this.getHashParam().hKey,b=this.states,c=b.length,d=0;d++;d<c)if(b[d]==a)return 0<d?b[b[--d]]:null}catch(f){$H.Debug.error("History.getPreState error:"+f.message,f)}},back:function(){var a=this.getPreState();if(a)a.onStateChange(a.param)}});return d});
$Define("M.ModuleManager",["M.History","CM.AbstractManager"],function(f,d){var c=$H.createClass();$H.inherit(c,d,{type:"module",_createMod:function(a){var b=this,c=a.modName;b.modules[c]={waiting:!0};$Require(b.defModPackage+c,function(d){d=new d({renderTo:a.renderTo||b.container,name:c,xtype:c,_id:b.generateId(),extCls:"js-module m-module",hidden:!0});b.modules[c]=d;$H.trigger("afterRender",d.getEl());b.requestMod==c&&b._showMod(d)})},_showMod:function(a){var b=this.modules[this.currentMod];if(!this.navigator||
!this.navigator.navigate(a,b,this))b&&b.hide(),a.show();b&&(b.isActive=!1);a.isActive=!0;this.currentMod=a.name},_destroy:function(a){a.destroy();delete this.modules[a.name]},initialize:function(a){var b=this;a&&(b.conf=a,$HO.extend(b,a),b.container=a.container?$(a.container):$(document.body));b.defModPackage+=".";b.history=new f(function(a,c){b.go(c.param)});b.modules={}},go:function(a,b){"string"==typeof a&&(a={modName:a});var c=a.modName,d=this.currentMod,f=this.modules,g=f[d];if(d==c)g.waiting||
g.reset();else{if(g&&!g.waiting)if(g._forceExit)g._forceExit=!1;else if(!1==g.exit())return!1;this.requestMod=c;(c=f[c])?c.useCache?(this._showMod(c),c.cache(a)):c.waiting||(this._destroy(c),this._createMod(a)):this._createMod(a);!0!=b&&this.history.saveState({onStateChange:$H.Function.bind(this.go,this),param:a});return!0}},back:function(a){a&&(this.modules[this.currentMod]._forceExit=!0);history.back()}});return c});
