/* Handy v1.0.0-dev | 2014-01-22 | zhengyinhui100@gmail.com */
(function(){var e=window.handy,c=window.$,a=window.handy=window.$=function(){};a.version="1.0.0";a.expando="handy"+(a.version+Math.random()).replace(/\D/g,"");a.add=function(d,b,f){f||(f=b,b=null);if(!b||!a.Loader){a.base||(a.base={});var c=[];if(b)if("string"==typeof b)c.push(a.base.Object.namespace(b));else for(var e=0;e<b.length;e++)c.push(a.base.Object.namespace(b[e]));c.push(a);a.base[d]=a[d]=f.apply(window,c)}else a.Loader.require(b,function(){Array.prototype.push.call(arguments,a);a.base[d]=
a[d]=f.apply(window,arguments)})};a.noConflict=function(d){window.$===a&&(window.$=c);d&&window.handy===a&&(window.handy=e);return a}})();
handy.add("Json",function(){var e;e||(e={});(function(){function c(b){return 10>b?"0"+b:b}function a(b){f.lastIndex=0;return f.test(b)?'"'+b.replace(f,function(b){var a=j[b];return"string"===typeof a?a:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function d(b,f){var c,e,j,x,u=g,q,l=f[b];l&&("object"===typeof l&&"function"===typeof l.toJSON)&&(l=l.toJSON(b));"function"===typeof h&&(l=h.call(f,b,l));switch(typeof l){case "string":return a(l);case "number":return isFinite(l)?
String(l):"null";case "boolean":case "null":return String(l);case "object":if(!l)return"null";g+=k;q=[];if("[object Array]"===Object.prototype.toString.apply(l)){x=l.length;for(c=0;c<x;c+=1)q[c]=d(c,l)||"null";j=0===q.length?"[]":g?"[\n"+g+q.join(",\n"+g)+"\n"+u+"]":"["+q.join(",")+"]";g=u;return j}if(h&&"object"===typeof h){x=h.length;for(c=0;c<x;c+=1)"string"===typeof h[c]&&(e=h[c],(j=d(e,l))&&q.push(a(e)+(g?": ":":")+j))}else for(e in l)Object.prototype.hasOwnProperty.call(l,e)&&(j=d(e,l))&&q.push(a(e)+
(g?": ":":")+j);j=0===q.length?"{}":g?"{\n"+g+q.join(",\n"+g)+"\n"+u+"}":"{"+q.join(",")+"}";g=u;return j}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,k,j={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof e.stringify&&(e.stringify=function(b,a,f){var c;k=g="";if("number"===typeof f)for(c=0;c<f;c+=1)k+=" ";else"string"===typeof f&&(k=f);if((h=a)&&"function"!==typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw Error("JSON.stringify");return d("",{"":b})});"function"!==
typeof e.parse&&(e.parse=function(a,f){function d(b,a){var c,g,e=b[a];if(e&&"object"===typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(g=d(e,c),void 0!==g?e[c]=g:delete e[c]);return f.call(b,a,e)}var c;a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return c=eval("("+a+")"),"function"===typeof f?d({"":c},""):c;throw new SyntaxError("JSON.parse");})})();return e});
handy.add("Object",function(){function e(){var a=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return a&&9>parseInt(a[0])?function(a,b,f){var c=[];if(a.length){b=b||0;for(f=f||a.length;b<f;b++)c.push(a[b])}return c}:function(a,b,c){return Array.prototype.slice.call(a,b||0,c||a.length)}}var c={_alias:{b:"handy.base",c:"handy.component",m:"handy.module"},namespace:function(a,d){var b=null,f,g,e,j;a=c.alias(a);g=a.split(".");b=g[0];b=(e=2==arguments.length)?eval("(function(){if (typeof "+b+' == "undefined"){'+
b+" = {};}return "+b+";})()"):eval("(function(){if (typeof "+b+' != "undefined")return '+b+";})()");f=1;for(j=g.length;f<j;++f){if(f==j-1&&e)b[g[f]]=d;else if(e||b&&b[g[f]])b[g[f]]=b[g[f]]||{};else return;b=b[g[f]]}return b},alias:function(a,d){var b=c._alias;if(d)b[a]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+a+":"+b[a]):b[a]=d;else{if(a){var f=a,g=a.length-1;do{if(b[f])return b[f]+a.substring(g);g=f.lastIndexOf(".")}while(0<g&&(f=f.substring(0,g)));return a}return b}},createClass:function(a){var d=
function(){var b,a;b=this.constructor==d?this:arguments.callee;if(a=b.initialize)return a.apply(b,arguments)};d.prototype.callSuper=function(){var b,a=arguments.callee.caller.$name;if(b=this.constructor.superProt)if(b=b[a],c.isFunction(b))return b.apply(this,arguments)};a&&this.namespace(a,d);return d},extend:function(a,d,b){var f=b?b.notCover:!1;b=b?b.notClone:!1;var g=!!a.callSuper,e;for(e in d){var j=a.hasOwnProperty(e),h=!0===f?j:!1;c.isArray(f)?h=c.contains(f,e)&&j:c.isFunction(f)&&(h=f(e));
h||(j=b?d[e]:c.clone(d[e]),g&&c.isFunction(j)&&(j.$name=e),a[e]=j)}return a},mix:function(a,d,b,f){a.superProt||(a.superProt={});for(var g in d)a.superProt[g]=c.isFunction(d[g])?a.superProt[g]?function(b,a){return function(){a.apply(this,arguments);d[b].apply(this,arguments)}}(g,a.superProt[g]):d[g]:d[g],a[g]||(a[g]=d[g]);b&&c.extend(a,b);d.toString!=d.constructor.prototype.toString&&(a.superProt.toString=function(){d.toString.apply(a,arguments)});f&&(a.prototype&&d.prototype)&&c.inherit(a,d,null,
f);return a},inherit:function(a,d,b,f,g){var e=function(){};e.prototype=d.prototype;g=g||{notCover:!0};c.extend(a,d,g);a.prototype=new e;a.prototype.constructor=a;a.superClass=d;a.superProt=d.prototype;if(d._onInherit)try{d._onInherit(a)}catch(j){}b&&c.extend(a,b);f&&c.extend(a.prototype,f)},isFunction:function(a){return"[object Function]"===window.Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===window.Object.prototype.toString.call(a)},equals:function(a,d){if(typeof a==
typeof d){if("object"!=typeof a)return a===d;if(a===d)return!0;if(c.isArray(a)&&c.isArray(d)){if(a.length!=d.length)return!1;for(var b=0,f=a.length;b<f;b++)if(!c.equals(a[b],d[b]))return!1;return!0}if(!c.isArray(a)&&!c.isArray(d)){if(c.count(a)!=c.count(d))return!1;for(b in a)if(void 0==d[b]||!c.equals(a[b],d[b]))return!1;return!0}}return!1},clone:function(a){if(null==a||"object"!=typeof a)return a;var d=a.constructor;if(d!=window.Object&&d!=window.Array)return a;if(d==window.Date||d==window.RegExp||
d==window.Function||d==window.String||d==window.Number||d==window.Boolean)return new d(a);try{var b=new d,f;for(f in a)b[f]=c.clone(a[f]);return b}catch(g){return a}},isEmpty:function(a){if(c.isArray(a))return 0==a.length;for(var d in a)return!1;return!0},each:function(a,d,b){var f,g=0,e=a.length,j=void 0===e||c.isFunction(a);if(b)if(j)for(f in a){if(!1===d.apply(a[f],b))break}else for(;g<e&&!1!==d.apply(a[g++],b););else if(j)for(f in a){if(!1===d.call(a[f],f,a[f]))break}else for(;g<e&&!1!==d.call(a[g],
g,a[g++]););return a},contains:function(a,d){var b=!1;c.each(a,function(a,g){if(c.equals(g,d))return b=!0,!1});return b},largeThan:function(a,d){if("object"==typeof a&&"object"==typeof d){var b=!0;c.each(d,function(f){if(!c.equals(d[f],a[f]))return b=!1});return b}},count:function(a){if(c.isArray(a))return a.length;var d=0,b;for(b in a)d++;return d},toArray:e,generateMethod:function(a,d,b){d=c.isArray(d)?d:d.split(",");for(var f=0;f<d.length;f++){var g=d[f];a[g]=b(g)}}},e=e();return c});
handy.add("Browser","handy.base.Object",function(e){var c={},a={};e.generateMethod(a,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(a){var f=c[b];return!a&&"string"===typeof f&&/^[\d\.]+$/.test(f)?parseInt(f):f}});e=window.navigator.userAgent;var d;(d=e.match(/MSIE ([\d.]+)/))?c.ie=d[1]:(d=e.match(/Firefox\/([\d.]+)/))?c.firefox=d[1]:(d=e.match(/Chrome\/([\d.]+)/))?
c.chrome=d[1]:(d=e.match(/Opera.([\d.]+)/))?c.opera=d[1]:(d=e.match(/Version\/([\d.]+).*Safari/))?c.safari=d[1]:0;/windows|win32/i.test(e)?c.windows=!0:/linux/i.test(e)?c.linux=!0:/macintosh/i.test(e)?c.mac=!0:0;/trident/i.test(e)?c.trident=!0:/webkit/i.test(e)?c.webkit=!0:/gecko/i.test(e)?c.gecko=!0:/presto/i.test(e)?c.presto=!0:0;/MetaSr/i.test(e)?c.sogou=!0:/Maxthon/i.test(e)?c.maxthon=!0:/TencentTraveler/i.test(e)?c.tt=!0:/TheWorld/i.test(e)?c.theWorld=!0:/360[S|E]E/i.test(e)?c.is360=!0:0;var b;
if((b=e.match(/AppleWebKit\/([\d.]*)/))&&b[1])if(/ Mobile\//.test(e)&&e.match(/iPad|iPod|iPhone/)){c.mobile="ios";if((b=e.match(/OS ([^\s]*)/))&&b[1])c.ios=b[1].replace("_",".");if((b=e.match(/iPad|iPod|iPhone/))&&b[0])c[b[0].toLowerCase()]=c.ios}else if(/ Android/i.test(e)){if(/Mobile/.test(e)&&(c.mobile="android"),(b=e.match(/Android ([^\s]*);/))&&b[1])c.android=b[1]}else if(b=e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))c.mobile=b[0].toLowerCase();var f;try{if(c.ie){var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
g&&(f=g.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(g=navigator.plugins["Shockwave Flash"])){var k=g.description.split(" ");d=0;for(var j=k.length;d<j;d++)if(0<parseInt(k[d])){f=k[d];break}}}catch(h){}c.flash=f?f:null;return a});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(e,c,a){function d(c,d,e){e=e||"log";if(d||b.showInPage){var j=a.expando+"debugDiv",h=top.document;(d=h.getElementById(j))?d.style.display="block":(d=h.createElement("DIV"),d.id=j,d.innerHTML='<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\''+
h.body.offsetHeight+'px\';">\u5168\u5c4f</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\'100px\';">\u6536\u8d77</a><div style="padding-top:5px"></div>',d.style.position="absolute",d.style.width=h.body.offsetWidth-20+"px",d.style.left=0,d.style.top=0,d.style.right=0,d.style.height="100px",d.style.backgroundColor="#aaa",d.style.fontSize="12px",d.style.padding="10px",d.style.overflow="auto",d.style.zIndex=9999999,d.style.opacity=0.5,d.style.filter="alpha(opacity=50)",h.body.appendChild(d));
j=h.createElement("DIV");j.innerHTML=e+" : "+JSON.stringify(c,null,"<br/>");d=d.getElementsByTagName("DIV")[0];d.innerHTML=d.innerHTML+j.innerHTML+"<br/>"}try{console[e](c)}catch(n){}}var b={level:0,LOG_LEVEL:1,INFO_LEVEL:2,WARN_LEVEL:3,ERROR_LEVEL:4,DEBUG_LEVEL:5,showInPage:!("console"in window)||!!c.mobile(),log:function(a,c){b.level>b.LOG_LEVEL||d(a,!!c,"log")},info:function(a,c){this.level>b.INFO_LEVEL||d(a,!!c,"info")},warn:function(a,c){b.level>b.WARN_LEVEL||d(a,!!c,"warn")},error:function(a,
c){b.level>b.ERROR_LEVEL||d(a,!!c,"error")},time:function(a,c,e){b.level>b.INFO_LEVEL||(c?d((a||"")+", \u6d88\u8017\u65f6\u95f4:"+((new Date).getTime()-(b.lastTime||0)),!!e):b.lastTime=(new Date).getTime())},debug:function(a){if(!(b.level>b.DEBUG_LEVEL)&&!1!==a)debugger}};return b});
handy.add("Function",function(e){return{bind:function(c,a,d){var b=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(b,arguments);return c.apply(a,b)}},intercept:function(c,a,d,b){if(e.Object.isFunction(a))return function(){var f=d||this,e={},k=arguments;e.scope=b;e.target=f;e.method=c;return!1!=a.apply(e,k)?c.apply(f,k):null}}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(e,c,a,d){function b(b){function a(b){return/\.(css|js)$/.test(b)?s[b]&&"loaded"==s[b].status:p.urlMap&&p.urlMap[b]?p.urlMap[b].chkExist():c.namespace(b)}if("string"==typeof b)return a(b);for(var d=[],f=0,e=b.length;f<e;f++){var g=a(b[f]);if(g)d.push(g);else return!1}return d}function f(b,a){function c(){c.isCalled||(c.isCalled=!0,clearTimeout(h),a())}if("SCRIPT"===b.nodeName){var d=b,f=c;d.onload=d.onerror=
d.onreadystatechange=function(){/loaded|complete|undefined/.test(d.readyState)&&(d.onload=d.onerror=d.onreadystatechange=null,j.removeChild(d),d=null,setTimeout(f,0))}}else{var k=c;window.hasOwnProperty("attachEvent")?b.attachEvent("onload",k):setTimeout(function(){g(b,k)},0)}var h=setTimeout(function(){e.error("Time is out:",b.src);c()},p.timeout)}function g(b,a){if(!a.isCalled){var d;if(h)b.sheet&&(d=!0);else if(b.sheet)try{b.sheet.cssRules&&(d=!0)}catch(c){if("SecurityError"===c.name||"NS_ERROR_DOM_SECURITY_ERR"===
c.name)d=!0}setTimeout(function(){d?a():g(b,a)},1)}}function k(a){p.showLoading(!1);s[a].status="loaded";p.traceLog&&e.info("Loader Response: "+a);for(a=n.length-1;0<=a;a--){var d=n[a],c=b(d.deps);c&&(n.splice(a,1),d.callback.apply(null,c))}}var j=document.head||document.getElementsByTagName("head")[0]||document.documentElement,h=navigator.userAgent.indexOf("AppleWebKit"),n=[],s={},p={traceLog:!0,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,a,d){2==arguments.length&&(d=
a,a=[]);p.require(a,function(){var a;if("function"==typeof d)try{a=d.apply(null,arguments)}catch(f){e.error("Loader "+b+":factory define error:"+f.message);return}else a=d;c.namespace(b,a)})},require:function(c,g){for(var h="string"==typeof c?[c]:c,u=[],q=[],l=!0,r=0,v=h.length;r<v;r++){var m=h[r],t=b(m);t?q.push(t):(u.push(m),l&&(l=!1,n.push({deps:h,callback:g})),p.traceLog&&e.info("Resource not found: "+m))}if(0==u.length)return g&&g.apply(null,q),0==q.length?q[0]:q;l=!1;h=0;for(q=u.length;h<q;h++)if(r=
u[h],!s[r]){l=r;m=p.urlMap&&p.urlMap[l]&&p.urlMap[l].url;if(!m){v="";l=d.Object.alias(l);m=p.rootPath;if("string"==typeof m)v=m;else if("object"==typeof m)for(t in t=void 0,m)0==l.indexOf(t)&&(v=m[t],l=l.replace(t,""));else v="";m=/.css$/.test(l)?0==l.indexOf("/")?l:"/css/"+l:/.js$/.test(l)?l:l.replace(/\./g,"/")+".js";0!=m.indexOf("/")&&(m="/"+m);m=v+m}l=!0;s[r]={id:r,status:"loading"};v=a.bind(k,null,r);if(/.css$/.test(m))a:{r=m;m=j.getElementsByTagName("link");for(t=0;t<m.length;t++){var y=m[t].href;
!p.skinNode&&0<=y.indexOf(p.skinName)&&(p.skinNode=m[t]);if(0<=y.indexOf(r)||0<=r.indexOf(y))break a}m=document.createElement("link");m.rel="stylesheet";m.href=r;f(m,v);j.insertBefore(m,p.skinNode);p.traceLog&&e.info("Loader request:"+r)}else r=m,m=document.createElement("script"),m.async="async",m.src=r,m.type="text/javascript",f(m,v),j.appendChild(m),p.traceLog&&e.info("Loader request:"+r)}l&&p.showLoading(!0)}};return p});
handy.add("Listener",function(){var e={};return{add:function(c,a){var d=e[c];d||(d=e[c]=[]);d.push(a)},remove:function(c,a){var d=e[c];if(!d)return!1;if(a)for(var b=0,f=d.length;b<f;b++){if(d[b]==a)return d.splice(b,1),!0}else delete e[c];return!1},fire:function(c,a){var d=e[c];if(!d)return!1;for(var b=Array.prototype.slice.call(arguments,1),f=0,g=d.length;f<g;f++){if(f==g-1)return d[f].apply(null,b);d[f].apply(null,b)}}}});
handy.add("Date",function(){var e=window.Date,c={getWeek:function(a,d){var b=a.getDay();d&&(b=(b+(d%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[b]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new e(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var d=new e(a.getFullYear(),0,0);a=new e(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-d.getTime())/864E5)},getDayIndexOfYear:function(a){var d=new e("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-d.getTime())/864E5)},format:function(a,d){d=d||"yyyy-MM-dd HH:mm:ss";a=a||new e;var b=a.getHours(),f=Math.floor((a.getMonth()+3)/3),b={"y+":a.getFullYear(),"M+":a.getMonth()+1,"d+":a.getDate(),"h+":0==b%12?12:b%12,"H+":b,"m+":a.getMinutes(),"s+":a.getSeconds(),"w+":c.getWeek(a),"q+":f,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][f-1],"S+":a.getMilliseconds()},g;for(g in b)RegExp("("+g+")").test(d)&&(f=RegExp.$1.length,d=d.replace(RegExp.$1,1==f?b[g]:("00"+
b[g]).slice(-f)));return d},parse:function(a,d){for(var b=(d||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),c=a.match(/\d+/g),g=new e,k=0;k<c.length;k++){var j=b[k],h=parseInt(c[k]);switch(j){case "yyyy":g.setFullYear(h);break;case "MM":g.setMonth(h-1);break;case "dd":g.setDate(h);break;case "HH":g.setHours(h);break;case "mm":g.setMinutes(h);break;case "ss":g.setSeconds(h);break;case "SS":g.setMilliseconds(h)}}return g}};return c});
handy.add("String",function(){var e={stripTags:function(c){return c.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(c){var a=document.createElement("div");c=document.createTextNode(c);a.appendChild(c);return a.innerHTML},unescapeHTML:function(c){var a=document.createElement("div");a.innerHTML=e.stripTags(c);return a.childNodes[0].nodeValue},decodeHTML:function(c){c=c.replace(/&lt;/gi,"<");c=c.replace(/&gt;/gi,">");c=c.replace(/&quot;/gi,'"');c=c.replace(/&apos;/gi,"'");c=c.replace(/<\/?br>/gi,"\n");
c=c.replace(/&amp;/gi,"&");return c=c.replace(/&nbsp;/gi," ")},encodeHTML:function(c){c=c.replace(/&/gi,"&amp;");c=c.replace(/</gi,"&lt;");c=c.replace(/>/gi,"&gt;");c=c.replace(/\"/gi,"&quot;");c=c.replace(/\'/gi,"&apos;");c=c.replace(/\n/gi,"</br>");return c=c.replace(/ /gi,"&nbsp;")},trim:function(c){return c=c.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(c,a){a||(a=/[,%\'\"\/\\;|\<\>\^]/);return-1<c.search(a)},len:function(c){return c.replace(/[^\x00-\xff]/g,"**").length},left:function(c,
a,d){if(e.len(c)>a){!0===d?d=2:0<d||(d=0);var b=0,f=0;for(a-=d;f<a;)255<c.charCodeAt(b)?f+=2:f++,b++;c=c.substring(0,b);for(b=0;b<d;b++)c+="."}return c},isNumber:function(c){return 0==c.search(/^\d+$/g)},hasChn:function(c){return/[\u4E00-\u9FA5]+/.test(c)},isChn:function(c){return/^[\u4E00-\u9FA5]+$/.test(c)},addParam:function(c,a){a&&(c+=(-1<c.indexOf("?")?"&":"?")+a);return c}};return e});
handy.add("Cookie",function(){return{get:function(e,c){var a=e+"=",d="",b=document.cookie;if(0<b.length){var f=b.indexOf(a);-1!=f&&(f+=a.length,a=b.indexOf(";",f),-1==a&&(a=b.length),d=b.substring(f,a),c||(d=unescape(d)))}return d},set:function(e,c,a){var d=[];void 0!=e&&void 0!=c&&d.push(e+"="+escape(c));a&&(void 0!=a.path&&d.push("path="+a.path),void 0!=a.domain&&d.push("domain="+a.domain),void 0!=a.expires&&d.push("expires="+a.expires),a.secure&&d.push("secure"));document.cookie=d.join(";")},del:function(e){var c=
new Date;c.setTime(c.getTime()-1);document.cookie=e+"=;expires="+c.toGMTString()}}});handy.add("Util",function(){var e=0;return{isWindow:function(c){return null!=c&&c==c.window},getUuid:function(){return e++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(c){var a=top.location.hash;0<=a.indexOf("#")&&(c=a.replace(/#[^\?]*/,c));top.location.hash=c}}});
handy.add("Template",function(e){var c={},a=/^=/,d="".trim,b={openTag:"<%",closeTag:"%>",_add:function(b){return d?"$r+="+b+";\n":"$r.push("+b+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return b._add('"'+a+'"')},_parseScript:function(d){d=d.replace(/this/g,"$data");0==d.indexOf("=")&&(d=b._add(d.replace(a,"")+'||""'));return d+"\n"},_compile:function(a){var c="var $r="+(d?'""':"[]")+";\n";e.Object.each(a.split(b.openTag),function(a,d){var f=
d.split(b.closeTag);1==f.length?c+=b._parseHtml(f[0]):(c+=b._parseScript(f[0]),f[1]&&(c+=b._parseHtml(f[1])))});c+="return "+(d?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(a,d){var k,j,h;if("string"==typeof a)k=a;else if(k=a.tmpl,h=a.id)if(c[h])j=c[h];else{var n=document.getElementById(h);n&&(k=(n.value||n.innerHTML).replace(/\s/g,""))}if(!j){if(!k){e.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}j=b._compile(k);h&&(c[h]=j)}return d?j(d):j}};return b});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(e,c,a){function d(b){if(b==n)return!1;var a=h.contentWindow.document;a.open();a.write("<!doctype html><html><body>"+b+"</body></html>");a.close();n=b;e.log("set:"+h.contentWindow.document.body.innerText)}function b(){var b=c.getHash(),a=h.contentWindow.document.body.innerText;b!=n?(d(b),f(b)):a!=n&&(e.log("update:"+h.contentWindow.document.body.innerText),c.setHash(a))}function f(b){var a=w.listeners,d;for(d in a)a[d](b)}var g,
k=0,j=document,h,n,s=j.documentMode,p="onhashchange"in window&&(void 0===s||7<s),w={delay:50,listen:function(e,n){if(!g)if(g=!0,w.listeners={},p)$(window).on("hashchange",function(){f(c.getHash())});else h=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(j.body)[0],$(h).one("load",function(){d(c.getHash());setInterval(b,w.delay)});if(n in w.listeners)throw Error("Duplicate name");n=n||a.expando+ ++k;w.listeners[n]=e;return n},unListen:function(b){for(var a in w.listeners)(!b||
b==a)&&delete w.listeners[a]}};return w});
handy.add("Support",function(e){var c;if(6==e.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}return{testSvg:function(a){if(void 0!=c)a(c);else{var b=window,f=!!b.document.createElementNS&&!!b.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect&&!(b.opera&&-1===navigator.userAgent.indexOf("Chrome")),e=new b.Image;e.onerror=function(){c=!1;a(c)};e.onload=function(){c=!(1===e.width&&1===e.height)||!f?!1:!0;a(c)};e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}}})(function(e){$H=
e.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HL=$H.Listener;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};e=window.$;e.fn.remove=$HF.intercept(e.fn.remove,function(){$HL.fire("removeEl",this.target)})})(handy);
$Define("c.ComponentManager",function(){var e=$HO.createClass(),c=$H.expando+"_cmp_",a={},d={};$C=e;$HO.extend(e,{init:function(){$HL.add("afterRender",function(b){e.afterRender(b)});$HL.add("removeEl",function(b){e.destroy(b)})},registerType:function(b,d){a[b]=d;d.prototype.xtype=b;$C[b]=d},getClass:function(b){return a[b]},register:function(b){d[b.getId()]=b},unregister:function(b){delete d[b.getId()]},eachInEl:function(b,a){b.find(".js-component").each(function(b,d){d=$(d);var c=d.attr("id"),c=
e.get(c);a(c)})},afterRender:function(b){e.eachInEl(b,function(b){b.afterRender()})},destroy:function(b){e.eachInEl(b,function(b){b.destroy(!0)})},generateId:function(b,a){var e=c+(b||$H.Util.getUuid());if(!0!=a&&d[e])$D.error("id\u91cd\u590d:"+e);else return e},get:function(b){return d[b]||d[e.generateId(b,!0)]}});e.init();return e});
$Define("c.AbstractComponent","c.ComponentManager",function(e){var c=$HO.createClass(),a=/^(<[a-zA-Z]+)/,d=/(class=")/;$H.CM=c;$HO.extend(c,{define:function(b){var a=$HO.createClass();$HO.inherit(a,c,null,null,{notCover:function(b){return"define"==b}});e.registerType(b,a);return a},html:function(b){b.autoRender=!1;return(new this(b)).getHtml()}});$HO.extend(c.prototype,{xtype:"AbstractComponent",autoRender:!0,renderBy:"append",activeCls:"w-active",_customEvents:["beforeRender","afterRender","show",
"hide","destroy"],_defaultEvents:["click","mouseover","focus"],initialize:function(b){this.doConfig(b);this.parseItems();this.initHtml();this.fire("beforeRender");!1!=this.autoRender&&(this.renderTo[this.renderBy](this.getHtml()),this.afterRender());e.register(this)},doConfig:function(b){var a=this;a.params=b;a.settings=$HO.extend({},b);var d=a.listeners||[];a._listeners=b.listeners?d.concat(b.listeners):d.concat();$HO.extend(a,b,{notCover:function(d){var c=a[d],e=$HO.contains(a._customEvents,d),
g=$HO.contains(a._defaultEvents,d);(e||g)&&a._listeners.push({type:d,notEl:e,handler:b[d]});if(null!=c&&"object"==typeof c||$HO.isFunction(c))return!0}});a.renderTo=b.renderTo?$(b.renderTo):$(document.body);a.children=[]},initHtml:function(){"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));var b=$H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this),c=this.getId(),b=b.replace(a,'$1 id="'+c+'"'),b=b.replace(d,"$1"+this.getExtCls());this.hidden&&(b=b.replace(a,'$1 style="'+
("visibility"==this.displayMode?"visibility:hidden":"display:none")+'"'));this.html=b},getId:function(){return this._id||(this._id=e.generateId(this.cid))},getEl:function(){return this._container},getHtml:function(b){if(!b)return this.html;b=">*"==b?this.children:this.find(b);for(var a=[],d=0;d<b.length;d++)a.push(b[d].getHtml());return a.join("")},getExtCls:function(){var b=["js-component"];this.extCls&&b.push(this.extCls);this.color&&b.push("w-"+this.cls+"-"+this.color);this.disabled&&b.push("w-disable");
this.radius&&b.push("w-radius-"+this.radius);this.isMini&&b.push("w-mini");this.shadow&&b.push("w-shadow");this.shadowSurround&&b.push("w-shadow-surround");this.shadowInset&&b.push("w-shadow-inset");this.isActive&&b.push(this.activeCls);this.isFocus&&b.push("w-focus");this.isInline&&b.push("w-inline");return 0<b.length?b.join(" ")+" ":""},afterRender:function(){this.rendered||(this.callChild(),this._container=$("#"+this.getId()),this.rendered=!0,!0!=this.notListen&&this.initListeners(),this.disabled&&
this.suspendListeners(),this.hidden||this.show(),this.fire("afterRender"),delete this.html)},hide:function(){if(this.showed){this.showed=!1;var b=this.getEl();"visibility"==this.displayMode?b.css({visibility:"hidden"}):b.hide();this.withMask&&this.unmask();this.fire("hide")}},show:function(){if(!this.showed){this.showed=!0;var b=this.getEl();"visibility"==this.displayMode?b.css({visibility:"visible"}):b.show();this.withMask&&this.mask();this.fire("show");this.callChild()}},enable:function(){this.resumeListeners();
this.getEl().removeClass("w-disable")},disable:function(){this.suspendListeners();this.getEl().addClass("w-disable")},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},mask:function(){c.mask||(c.mask=$('<div class="w-mask" style="display:none;"></div>').appendTo(document.body));c.mask.show()},unmask:function(){c.mask&&c.mask.hide()},fire:function(b){for(var a=this._listeners.length-1;0<=a;a--){var d=this._listeners[a];if(d.type==
b){var c=d.delegation;c({obj:this,data:d.data})}}},listen:function(b){var a=this,d=b.type,c=a._listeners,e=b.el,h=b.method||"bind",n=b.selector,s=b.data,p=b.delegation=function(){if(!0!=a.isSuspend)return b.handler.apply(b.scope||a,arguments)},e=e?"string"==typeof e?a.find(e):e:a.getEl();if(!b.notEl)if(n)if(s)e[h](n,d,s,p);else e[h](n,d,p);else if(s)e[h](d,s,p);else e[h](d,p);c.push(b)},unlisten:function(b){for(var a=b.type,d=b.el||this.getEl(),c="delegate"==b.method?"undelegate":"unbind",e=b.selector,
h,n=this._listeners.length-1;0<=n;n--){var s=this._listeners[n];if(s.handler==b.handler){h=s.delegation;this._listeners.splice(n,1);break}}if(!b.notEl)if(e)d[c](e,a,h);else d[c](a,h)},initListeners:function(){if(!this.listened){this.listened=!0;var b=this._listeners;this._listeners=[];for(var a=b.length-1;0<=a;a--)this.listen(b[a]);this.callChild()}},clearListeners:function(){for(var b=this._listeners,a=b.length-1;0<=a;a--)this.unlisten(b[a]);this.callChild()},suspendListeners:function(){this.isSuspend||
(this.isSuspend=!0,this.callChild())},resumeListeners:function(){this.isSuspend&&(this.isSuspend=!1,this.callChild())},each:function(b,a){$HO.each(this.children,b,a)},match:function(b){if("*"==b)return!0;var a,d,c;b=b.replace(/^([^\[]+)/,'[xtype="$1"]');for(var e=/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;a=e.exec(b);)if(d=a[1],c=a[2],a=eval(a[3]),"="===c?this[d]!=a:this[d]==a)return!1;return!0},find:function(b,a){if(0!=b.indexOf("$"))return this.getEl().find(b);a=a||[];var d=1==b.indexOf(">"),c=b.replace(/^\$>?\s?/,
""),e=c.search(/\s|>/),h;0<e&&(h=c.substring(e),c=c.substring(0,e));this.each(function(e,j){j.match(c)&&(h?j.find("$"+h,a):a.push(j));d||j.find(b,a)});return a},index:function(){var a=this,d=a.parent;if(d){var c;d.each(function(d,e){if(e==a)return c=d,!1});return c}return null},callChild:function(a){var d=this.children;a=a||arguments.callee.caller.$name;for(var c=0,e=d.length;c<e;c++)d[c][a]()},add:function(a){this.children.push(a);a.parent=this},remove:function(a){for(var d=this.children,c=!1,e=
0,j=d.length;e<j;e++)d[e]==a&&(d.splice(e,1),a.destroy(),c=!0);return c},addItem:function(a){var d=this.settings,c=d.items;c?$HO.isArray(c)||(d.items=[c]):d.items=[];d.items.push(a)},parseItem:function(){},parseItems:function(){this.icon&&this.addItem({xtype:"Icon",name:this.icon});var a=this.settings.items;if(a)for(var a=a.length?a:[a],d=0,c=a.length;d<c;d++){var k=a[d];this.defItem&&$HO.extend(k,this.defItem,{notCover:!0});this.parseItem(k);var j=e.getClass(k.xtype);k.autoRender=!1;k=new j(k);this.add(k)}},
destroy:function(a){e.unregister(this);this.fire("destroy");this.clearListeners();a||(this.callChild(),this.getEl().remove());delete this.params;delete this.settings;delete this._container;delete this.renderTo;delete this._listeners;delete this.children}});return c});
$Define("c.Icon","c.AbstractComponent",function(e){e=e.define("Icon");$H.Support.testSvg(function(c){c||$("html").addClass("w-nosvg")});$HO.extend(e.prototype,{hasBg:!0,tmpl:['<span class="w-icon w-icon-<%=this.name%><%if(this.hasBg){%> w-icon-bg<%}%>"></span>']});return e});
$Define("c.Button","c.AbstractComponent",function(e){e=e.define("Button");$HO.extend(e.prototype,{iconPos:"left",activeCls:"w-btn-blue",cls:"btn",defItem:{xtype:"Icon",hasBg:!0},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a class="w-btn;<%if(!this.text){%> w-btn-icon-notxt<%};if(this.hasIcon&&this.text){%> w-btn-icon-<%=this.iconPos%><%}%>">;<span class="w-btn-txt"><%=this.text%></span>;<%=this.getHtml(">*")%>;</a>'.split(";"),parseItem:function(c){"Icon"==c.xtype&&(this.hasIcon=!0)}});return e});
$Define("c.Input","c.AbstractComponent",function(e){e=e.define("Input");$HO.extend(e.prototype,{radius:"normal",iconPos:"left",btnPos:"right",tmpl:['<div class="w-input<%if(this.hasIcon){%> w-input-icon-<%=this.iconPos%><%}%>','<%if(this.hasBtn){%> w-input-btn-<%=this.btnPos%><%}%>">','<%=this.getHtml(">*")%>','<input type="text" class="js-input w-input-txt" value="<%=this.value%>"<%if(this.placeholder){%> placeholder="<%=this.placeholder%><%}%>"/>',"</div>"],listeners:[{type:"focus",el:".js-input",
handler:function(){this.getEl().addClass("w-focus")}},{type:"blur",el:".js-input",handler:function(){this.getEl().removeClass("w-focus")}}],doConfig:function(c){this.callSuper(c);"search"==this.type&&(this.icon="search");this.withClear&&this.addItem({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.find("input").val("").focus()}})},parseItem:function(c){"Icon"==c.xtype?this.hasIcon=!0:"Button"==c.xtype&&(this.hasBtn=!0)},val:function(c){var a=this.find("input");if(c)a.val(c);
else return a.val()},focus:function(){this.find("input").focus()}});return e});
$Define("c.Tab","c.AbstractComponent",function(e){e=e.define("Tab");$HO.extend(e.prototype,{defItem:{xtype:"Button",radius:null,isInline:!1,iconPos:"top",shadow:!1},tmpl:['<div class="w-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="js-tab-item w-tab-item" style="width:<%=100/len%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].active){%> style="display:none"<%}%>>',
"<%=this.children[i].content%>","</div>","<%}%>","</div>"],listeners:[{type:"click",selector:".js-tab-item",method:"delegate",handler:function(c){c=$(c.currentTarget).index();this.setActiveItem(c);this.find(".js-tab-content").hide().eq(c).show();this.itemClick&&this.itemClick(this.children[c])}}],setActiveItem:function(c){this.callChild("unactive");("number"==typeof c?this.children[c]:this.find(c)[0]).active()},getActiveItem:function(c){var a,d;this.each(function(b,c){if(c.isActive)return d=c,a=b,
!1});return c?a:d}});return e});
$Define("c.Dialog","c.AbstractComponent",function(e){var c=e.define("Dialog");$HO.extend(c,{alert:function(a){return new c({title:"&nbsp;",contentMsg:a,noClose:!0,noCancel:!0})},confirm:function(a,d){return new c({title:"&nbsp;",contentMsg:a,noClose:!0,okCall:function(){return d&&d(!0)},cancelCall:function(){return d&&d(!1)}})},prompt:function(a,d,b){b||(b=d,d="");return new c({title:"&nbsp;",contentMsg:a,noClose:!0,items:{xtype:"Input",role:"content",value:d},okCall:function(){var a=this.find("$Input")[0].val();
return b&&b(a)}})}});$HO.extend(c.prototype,{okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",radius:"normal",cls:"dialog",withMask:!0,tmpl:'<div class="w-dialog w-overlay-shadow">;<%=this.getHtml("$>Toolbar")%>;<div class="w-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="w-body-content">;<h1 class="w-content-title"><%=this.contentTitle%></h1>;<div class="w-content-msg"><%=this.contentMsg%></div>;<%=this.getHtml("$>[role=\'content\']")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="w-body-action">;<%=this.getHtml("$>Button")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(a){var d=this;d.callSuper(a);d.title&&d.addItem({xtype:"Toolbar",title:d.title,color:"gray",extCls:"w-dialog-header",items:!d.noClose&&{xtype:"Button",radius:"big",extCls:"w-tbar-btn-left",icon:"delete",click:function(){d.hide()}}});d.noAction||(d.noOk||d.addItem({xtype:"Button",isActive:!0,text:d.okTxt,isInline:!1,click:function(){!1!=(d.okCall&&d.okCall())&&d.hide()}}),d.noCancel||d.addItem({xtype:"Button",isInline:!1,text:d.cancelTxt,click:function(){!1!=(d.cancelCall&&d.cancelCall())&&
d.hide()}}))},show:function(){var a=this.getEl(),d=document,b=((d.documentElement.offsetWidth||d.body.offsetWidth)-a.width())/2,d=((d.documentElement.clientHeight||d.body.clientHeight)-a.height())/2+d.body.scrollTop,d=10>d?window.screen.height/2-200:d;a.css({left:b+"px",top:d-(this.offsetTop||0)+"px"});this.callSuper()}});return c});
$Define("m.AbstractModule","handy.base.Object",function(e){var c=e.createClass();e.extend(c.prototype,{isLoaded:!1,isActived:!1,useCache:!0,cache:function(){},init:function(){},beforeRender:function(){},render:function(){},afterRender:function(){},reset:function(){},exit:function(){return!0},initialize:function(a){this.conf=a},getHtml:function(){if(!this.tmpl)return"";"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));return $H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},
this)}});return c});$Define("m.AbstractNavigator","handy.base.Object",function(e){var c=e.createClass();e.extend(c.prototype,{navigate:function(){}});return c});
$Define("m.History","handy.base.HashChange",function(e){var c=$HO.createClass(),a=0;$HO.extend(c.prototype,{initialize:function(a){this.key=a||"handy";this.states=[];e.listen($H.Function.bind(this.stateChange,this))},stateChange:function(){var a=this.getCurrentState();if(a)a.onStateChange(a.param,!0)},saveState:function(d){var b=this.key+ ++a;this.states.push(b);this.states[b]=d;$HU.setHash("#"+JSON.stringify({hKey:b,param:d.param}))},getCurrentState:function(){try{var a=JSON.parse($HU.getHash().replace("#",
""));return this.states[a.hKey]}catch(b){$H.Debug.warn("History.getCurrentState:parse hash error:"+b.message)}},getPreState:function(){try{for(var a=JSON.parse($HU.getHash().replace("#","")).hKey,b=this.states,c=b.length,e=0;e++;e<c)if(b[e]==a)return 0<e?b[b[--e]]:null}catch(k){$H.Debug.error("History.getPreState error:"+k.message)}},back:function(){var a=this.getPreState();if(a)a.onStateChange(a.param)}});return c});
$Define("m.ModuleManager","m.History",function(e){var c=$HO.createClass();$HO.extend(c.prototype,{initialize:function(a){a&&(this.conf=a,$HO.extend(this,a),this.container=a.container?$(a.container):$(document.body));this.defModPackage+=".";this.history=new e;this.modules={}},go:function(a,d){var b=a.modName,c=this.currentMod,e=this.modules,k=e[c];if(c==b)k.reset();else{if(k&&!k.exit())return!1;(b=e[b])&&b.useCache?(this.showMod(b),b.cache(a)):this.createMod(a);!0!=d&&this.history.saveState({onStateChange:$H.Function.bind(this.go,
this),param:a})}},createMod:function(a){var c=this,b=a.modName;$Require(c.defModPackage+b,function(e){e=new e;e.name=b;e.mType=b;e.initParam=a;e.init(a);e.beforeRender();var g=c.getModWrapper(b);e.wrapper=g;var k=e.container=e.container?$(e.container):c.container;g.html(e.getHtml());k.append(g);$HL.fire("afterRender",g);e.render(g);c.showMod(e);e.afterRender();c.modules[b]=e})},getModWrapper:function(a){a="modWrapper_"+a;var c=$("#"+a);0==c.length&&(c=$('<div id="'+a+'"></div>'));return c},showMod:function(a){if(this.navigator&&
this.navigator.navigate(a,this))return!1;this.hideAll();a.wrapper.show();a.isActive=!0},hideAll:function(){var a=this.modules,c;for(c in a)a[c].wrapper.hide(),a[c].isActive=!1}});return c});
