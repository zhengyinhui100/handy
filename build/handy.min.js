/* Handy v1.0.0-dev | 2014-02-21 | zhengyinhui100@gmail.com */
(function(){var d=window.handy,a=window.$,c=window.handy=window.$=function(){};c.version="1.0.0";c.expando="handy"+(c.version+Math.random()).replace(/\D/g,"");c.add=function(b,f,e){e||(e=f,f=null);if(!f||!c.Loader){c.base||(c.base={});var g=[];if(f)if("string"==typeof f)g.push(c.base.Object.namespace(f));else for(var a=0;a<f.length;a++)g.push(c.base.Object.namespace(f[a]));g.push(c);c.base[b]=c[b]=e.apply(window,g)}else c.Loader.require(f,function(){Array.prototype.push.call(arguments,c);c.base[b]=
c[b]=e.apply(window,arguments)})};c.noConflict=function(b){window.$===c&&(window.$=a);b&&window.handy===c&&(window.handy=d);return c};c.noop=function(){}})();
handy.add("Json",function(){var d;d||(d={});(function(){function a(b){return 10>b?"0"+b:b}function c(b){e.lastIndex=0;return e.test(b)?'"'+b.replace(e,function(b){var e=h[b];return"string"===typeof e?e:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function b(e,f){var a,d,h,x,y=g,v,p=f[e];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(e));"function"===typeof j&&(p=j.call(f,e,p));switch(typeof p){case "string":return c(p);case "number":return isFinite(p)?
String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";g+=k;v=[];if("[object Array]"===Object.prototype.toString.apply(p)){x=p.length;for(a=0;a<x;a+=1)v[a]=b(a,p)||"null";h=0===v.length?"[]":g?"[\n"+g+v.join(",\n"+g)+"\n"+y+"]":"["+v.join(",")+"]";g=y;return h}if(j&&"object"===typeof j){x=j.length;for(a=0;a<x;a+=1)"string"===typeof j[a]&&(d=j[a],(h=b(d,p))&&v.push(c(d)+(g?": ":":")+h))}else for(d in p)Object.prototype.hasOwnProperty.call(p,d)&&(h=b(d,p))&&v.push(c(d)+
(g?": ":":")+h);h=0===v.length?"{}":g?"{\n"+g+v.join(",\n"+g)+"\n"+y+"}":"{"+v.join(",")+"}";g=y;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,k,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;"function"!==typeof d.stringify&&(d.stringify=function(e,f,a){var c;k=g="";if("number"===typeof a)for(c=0;c<a;c+=1)k+=" ";else"string"===typeof a&&(k=a);if((j=f)&&"function"!==typeof f&&("object"!==typeof f||"number"!==typeof f.length))throw Error("JSON.stringify");return b("",{"":e})});"function"!==
typeof d.parse&&(d.parse=function(b,e){function a(b,f){var c,g,d=b[f];if(d&&"object"===typeof d)for(c in d)Object.prototype.hasOwnProperty.call(d,c)&&(g=a(d,c),void 0!==g?d[c]=g:delete d[c]);return e.call(b,f,d)}var c;b=String(b);f.lastIndex=0;f.test(b)&&(b=b.replace(f,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return c=eval("("+b+")"),"function"===typeof e?a({"":c},""):c;throw new SyntaxError("JSON.parse");})})();return d});
handy.add("Object",function(d){function a(){var b=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return b&&9>parseInt(b[0])?function(b,e,c){var a=[];if(b.length){e=e||0;for(c=c||b.length;e<c;e++)a.push(b[e])}return a}:function(b,e,c){return Array.prototype.slice.call(b,e||0,c||b.length)}}var c={_alias:{b:"handy.base",c:"handy.component",m:"handy.module",cm:"handy.common"},namespace:function(b,f){var e=null,a,d,h,j;b=c.alias(b);d=b.split(".");e=d[0];e=(h=2==arguments.length)?eval("(function(){if (typeof "+
e+' == "undefined"){'+e+" = {};}return "+e+";})()"):eval("(function(){if (typeof "+e+' != "undefined")return '+e+";})()");a=1;for(j=d.length;a<j;++a){if(a==j-1&&h)e[d[a]]=f;else if(h||e&&e[d[a]])e[d[a]]=e[d[a]]||{};else return;e=e[d[a]]}return e},alias:function(b,f){var e=c._alias;if(f)e[b]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+b+":"+e[b]):e[b]=f;else{if(b){var a=b,d=b.length-1;do{if(e[a])return e[a]+b.substring(d);d=a.lastIndexOf(".")}while(0<d&&(a=a.substring(0,d)));return b}return e}},
createClass:function(b){var a=function(){var b,c;b=this.constructor==a?this:arguments.callee;if(c=b.initialize)return c.apply(b,arguments)};a.$isClass=!0;a.prototype.callSuper=function(b,a){b&&(!b.$isClass&&void 0!=b.length)&&(a=b,b=null);var f=arguments.callee.caller,d=f.$owner.superProto;b=b?b.prototype:d||this.constructor.superProto;f=f.$name;if(b&&(f=b[f],c.isFunction(f)))return a?f.apply(this,a):f.call(this)};b&&this.namespace(b,a);return a},extend:function(b,a,e){var g=e?e.notCover:!1,d=e?e.cover:
null;e=e?e.notClone:!1;var h=b.constructor,j=h.$isClass,l;for(l in a)if((!d||c.contains(d,l))&&a.hasOwnProperty(l)){var q=b.hasOwnProperty(l),u=!0===g?q:!1;c.isArray(g)?u=c.contains(g,l)&&q:c.isFunction(g)&&(u=g(l));u||(q=e?a[l]:c.clone(a[l]),j&&c.isFunction(q)&&(q.$name=l,q.$owner=h),b[l]=q)}return b},mix:function(b,a,e,g){b.superProto||(b.superProto={});for(var d in a)b.superProto[d]=c.isFunction(a[d])?b.superProto[d]?function(b,e){return function(){e.apply(this,arguments);a[b].apply(this,arguments)}}(d,
b.superProto[d]):a[d]:a[d],b[d]||(b[d]=a[d]);e&&c.extend(b,e);a.toString!=a.constructor.prototype.toString&&(b.superProto.toString=function(){a.toString.apply(b,arguments)});g&&(b.prototype&&a.prototype)&&c.inherit(b,a,null,g);return b},inherit:function(b,a,e,g,k){var h=function(){};h.prototype=a.prototype;k=k||{notCover:!0};c.extend(b,a,k);b.prototype=new h;b.prototype.constructor=b;b.superClass=a;b.superProto=a.prototype;if(a._onInherit)try{a._onInherit(b)}catch(j){d.Debug.error("_onInherit error",
j)}e&&c.extend(b,e);g&&c.extend(b.prototype,g)},isFunction:function(b){return"[object Function]"===window.Object.prototype.toString.call(b)},isArray:function(b){return"[object Array]"===window.Object.prototype.toString.call(b)},equals:function(b,a){if(typeof b==typeof a){if("object"!=typeof b)return b===a;if(b===a)return!0;if(c.isArray(b)&&c.isArray(a)){if(b.length!=a.length)return!1;for(var e=0,g=b.length;e<g;e++)if(!c.equals(b[e],a[e]))return!1;return!0}if(!c.isArray(b)&&!c.isArray(a)){if(c.count(b)!=
c.count(a))return!1;for(e in b)if(void 0==a[e]||!c.equals(b[e],a[e]))return!1;return!0}}return!1},clone:function(b){if(null==b||"object"!=typeof b)return b;var a=b.constructor;if(a!=window.Object&&a!=window.Array)return b;if(a==window.Date||a==window.RegExp||a==window.Function||a==window.String||a==window.Number||a==window.Boolean)return new a(b);try{var e=new a,g;for(g in b)e[g]=c.clone(b[g]);return e}catch(d){return b}},isEmpty:function(b){if(c.isArray(b))return 0==b.length;for(var a in b)return!1;
return!0},each:function(b,a,e){var g,d=0,h=b.length,j=void 0===h||c.isFunction(b);if(e)if(j)for(g in b){if(!1===a.apply(b[g],e))break}else for(;d<h&&!1!==a.apply(b[d++],e););else if(j)for(g in b){if(!1===a.call(b[g],g,b[g]))break}else for(;d<h&&!1!==a.call(b[d],d,b[d++]););return b},contains:function(b,a){var e=!1;c.each(b,function(b,d){if(c.equals(d,a))return e=!0,!1});return e},largeThan:function(b,a){if("object"==typeof b&&"object"==typeof a){var e=!0;c.each(a,function(g){if(!c.equals(a[g],b[g]))return e=
!1});return e}},count:function(a){if(c.isArray(a))return a.length;var f=0,e;for(e in a)f++;return f},toArray:a,generateMethod:function(a,f,e){f=c.isArray(f)?f:f.split(",");for(var g=0;g<f.length;g++){var d=f[g];a[d]=e(d)}}},a=a();return c});
handy.add("Browser","handy.base.Object",function(d){var a={},c={};d.generateMethod(c,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(e){var c=a[b];return!e&&"string"===typeof c&&/^[\d\.]+$/.test(c)?parseInt(c):c}});d=window.navigator.userAgent;var b;(b=d.match(/MSIE ([\d.]+)/))?a.ie=b[1]:(b=d.match(/Firefox\/([\d.]+)/))?a.firefox=b[1]:(b=d.match(/Chrome\/([\d.]+)/))?
a.chrome=b[1]:(b=d.match(/Opera.([\d.]+)/))?a.opera=b[1]:(b=d.match(/Version\/([\d.]+).*Safari/))?a.safari=b[1]:0;/windows|win32/i.test(d)?a.windows=!0:/linux/i.test(d)?a.linux=!0:/macintosh/i.test(d)?a.mac=!0:0;/trident/i.test(d)?a.trident=!0:/webkit/i.test(d)?a.webkit=!0:/gecko/i.test(d)?a.gecko=!0:/presto/i.test(d)?a.presto=!0:0;/MetaSr/i.test(d)?a.sogou=!0:/Maxthon/i.test(d)?a.maxthon=!0:/TencentTraveler/i.test(d)?a.tt=!0:/TheWorld/i.test(d)?a.theWorld=!0:/360[S|E]E/i.test(d)?a.is360=!0:0;var f;
if((f=d.match(/AppleWebKit\/([\d.]*)/))&&f[1])if(/ Mobile\//.test(d)&&d.match(/iPad|iPod|iPhone/)){a.mobile="ios";if((f=d.match(/OS ([^\s]*)/))&&f[1])a.ios=f[1].replace("_",".");if((f=d.match(/iPad|iPod|iPhone/))&&f[0])a[f[0].toLowerCase()]=a.ios}else if(/ Android/i.test(d)){if(/Mobile/.test(d)&&(a.mobile="android"),(f=d.match(/Android ([^\s]*);/))&&f[1])a.android=f[1]}else if(f=d.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))a.mobile=f[0].toLowerCase();var e;try{if(a.ie){var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
g&&(e=g.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(g=navigator.plugins["Shockwave Flash"])){var k=g.description.split(" ");b=0;for(var h=k.length;b<h;b++)if(0<parseInt(k[b])){e=k[b];break}}}catch(j){}a.flash=e?e:null;return c});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(d,a,c){function b(a,b,d){d=d||"log";if(b||f.showInPage){var h=c.expando+"debugDiv",j=top.document;(b=j.getElementById(h))?b.style.display="block":(b=j.createElement("DIV"),b.id=h,b.innerHTML='<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\''+
j.body.offsetHeight+'px\';">\u5168\u5c4f</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\'100px\';">\u6536\u8d77</a><div style="padding-top:5px"></div>',b.style.position="absolute",b.style.width=j.body.offsetWidth-20+"px",b.style.left=0,b.style.top=0,b.style.right=0,b.style.height="100px",b.style.backgroundColor="#aaa",b.style.fontSize="12px",b.style.padding="10px",b.style.overflow="auto",b.style.zIndex=99999999,b.style.opacity=0.5,b.style.filter="alpha(opacity=50)",j.body.appendChild(b));
h=j.createElement("DIV");h.innerHTML=d+" : "+JSON.stringify(a,null,"<br/>");b=b.getElementsByTagName("DIV")[0];b.innerHTML=b.innerHTML+h.innerHTML+"<br/>"}try{console[d](a)}catch(l){}}var f={level:0,LOG_LEVEL:1,INFO_LEVEL:2,WARN_LEVEL:3,ERROR_LEVEL:4,DEBUG_LEVEL:5,log:function(a,c){f.level>f.LOG_LEVEL||b(a,!!c,"log")},info:function(a,c){this.level>f.INFO_LEVEL||b(a,!!c,"info")},warn:function(a,c){f.level>f.WARN_LEVEL||b(a,!!c,"warn")},error:function(a,c,d){if(!(f.level>f.ERROR_LEVEL)&&("boolean"==
typeof c&&(d=c),b(a,!!d,"error"),"object"==typeof c))throw c;},time:function(a,c,d){f.level>f.INFO_LEVEL||(c?b((a||"")+", \u6d88\u8017\u65f6\u95f4:"+((new Date).getTime()-(f.lastTime||0)),!!d):f.lastTime=(new Date).getTime())},debug:function(a){if(!(f.level>f.DEBUG_LEVEL)&&!1!==a)debugger}};return f});
handy.add("Function",function(d){return{bind:function(a,c,b){var f=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(f,arguments);return a.apply(c,f)}},intercept:function(a,c,b,f){return d.Object.isFunction(a)&&d.Object.isFunction(c)?function(){var e=b||this,d={},k=arguments;d.scope=f;d.target=e;d.method=a;return!1!=c.apply(d,k)?a.apply(e,k):!1}:a}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(d,a,c,b){function f(b){function c(b){return/\.(css|js)$/.test(b)?u[b]&&"loaded"==u[b].status:n.urlMap&&n.urlMap[b]?n.urlMap[b].chkExist():a.namespace(b)}if("string"==typeof b)return c(b);for(var e=[],f=0,d=b.length;f<d;f++){var g=c(b[f]);if(g)e.push(g);else return!1}return e}function e(b,a){function c(){c.isCalled||(c.isCalled=!0,clearTimeout(h),a())}if("SCRIPT"===b.nodeName){var e=b,f=c;e.onload=e.onerror=
e.onreadystatechange=function(){/loaded|complete|undefined/.test(e.readyState)&&(e.onload=e.onerror=e.onreadystatechange=null,j.removeChild(e),e=null,setTimeout(f,0))}}else{var k=c;window.hasOwnProperty("attachEvent")?b.attachEvent("onload",k):setTimeout(function(){g(b,k)},0)}var h=setTimeout(function(){d.error("Time is out:",b.src);c()},n.timeout)}function g(b,a){if(!a.isCalled){var c;if(l)b.sheet&&(c=!0);else if(b.sheet)try{b.sheet.cssRules&&(c=!0)}catch(e){if("SecurityError"===e.name||"NS_ERROR_DOM_SECURITY_ERR"===
e.name)c=!0}setTimeout(function(){c?a():g(b,a)},1)}}function k(b){n.showLoading(!1);u[b].status="loaded";n.traceLog&&d.info("Loader Response: "+b);h()}function h(){for(var b=q.length-1;0<=b;b--){var a=q[b],c=f(a.deps);if(c){q.splice(b,1);a.callback.apply(null,c);h();break}}}var j=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=navigator.userAgent.indexOf("AppleWebKit"),q=[],u={},n={traceLog:!0,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,
c,e){2==arguments.length&&(e=c,c=[]);n.require(c,function(){var c;if("function"==typeof e)try{c=e.apply(null,arguments),d.info("Loader define: "+b)}catch(f){d.error("Loader "+b+":factory define error:"+f.message,f);return}else c=e;a.namespace(b,c)})},require:function(a,g){for(var h="string"==typeof a?[a]:a,l=[],p=[],r=!0,s=0,w=h.length;s<w;s++){var m=h[s],t=f(m);t?p.push(t):(l.push(m),r&&(r=!1,q.push({deps:h,callback:g})),n.traceLog&&d.info("Resource not found: "+m))}if(0==l.length)return g&&g.apply(null,
p),0==p.length?p[0]:p;r=!1;h=0;for(p=l.length;h<p;h++)if(s=l[h],!u[s]){r=s;m=n.urlMap&&n.urlMap[r]&&n.urlMap[r].url;if(!m){w="";r=b.Object.alias(r);m=n.rootPath;if("string"==typeof m)w=m;else if("object"==typeof m)for(t in t=void 0,m)0==r.indexOf(t)&&(w=m[t],r=r.replace(t,""));else w="";m=/.css$/.test(r)?0==r.indexOf("/")?r:"/css/"+r:/.js$/.test(r)?r:r.replace(/\./g,"/")+".js";0!=m.indexOf("/")&&(m="/"+m);m=w+m}r=!0;u[s]={id:s,status:"loading"};w=c.bind(k,null,s);if(/.css$/.test(m))a:{s=m;m=j.getElementsByTagName("link");
for(t=0;t<m.length;t++){var z=m[t].href;!n.skinNode&&0<=z.indexOf(n.skinName)&&(n.skinNode=m[t]);if(0<=z.indexOf(s)||0<=s.indexOf(z))break a}m=document.createElement("link");m.rel="stylesheet";m.href=s;e(m,w);j.insertBefore(m,n.skinNode);n.traceLog&&d.info("Loader request:"+s)}else s=m,m=document.createElement("script"),m.async="async",m.src=s,m.type="text/javascript",e(m,w),j.appendChild(m),n.traceLog&&d.info("Loader request:"+s)}r&&n.showLoading(!0)}};return n});
handy.add("Listener",function(){var d={};return{add:function(a,c){var b=d[a];b||(b=d[a]=[]);b.push(c)},remove:function(a,c){var b=d[a];if(!b)return!1;if(c)for(var f=0,e=b.length;f<e;f++){if(b[f]==c)return b.splice(f,1),!0}else delete d[a];return!1},fire:function(a,c){var b=d[a];if(!b)return!1;for(var f=Array.prototype.slice.call(arguments,1),e=0,g=b.length;e<g;e++){if(e==g-1)return b[e].apply(null,f);b[e].apply(null,f)}}}});
handy.add("Date",function(){var d=window.Date,a={getWeek:function(a,b){var f=a.getDay();b&&(f=(f+(b%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[f]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new d(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var b=new d(a.getFullYear(),0,0);a=new d(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-b.getTime())/864E5)},getDayIndexOfYear:function(a){var b=new d("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-b.getTime())/864E5)},format:function(c,b){b=b||"yyyy-MM-dd HH:mm:ss";c=c||new d;var f=c.getHours(),e=Math.floor((c.getMonth()+3)/3),f={"y+":c.getFullYear(),"M+":c.getMonth()+1,"d+":c.getDate(),"h+":0==f%12?12:f%12,"H+":f,"m+":c.getMinutes(),"s+":c.getSeconds(),"w+":a.getWeek(c),"q+":e,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][e-1],"S+":c.getMilliseconds()},g;for(g in f)RegExp("("+g+")").test(b)&&(e=RegExp.$1.length,b=b.replace(RegExp.$1,1==e?f[g]:("00"+
f[g]).slice(-e)));return b},parse:function(a,b){for(var f=(b||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),e=a.match(/\d+/g),g=new d,k=0;k<e.length;k++){var h=f[k],j=parseInt(e[k]);switch(h){case "yyyy":g.setFullYear(j);break;case "MM":g.setMonth(j-1);break;case "dd":g.setDate(j);break;case "HH":g.setHours(j);break;case "mm":g.setMinutes(j);break;case "ss":g.setSeconds(j);break;case "SS":g.setMilliseconds(j)}}return g},parseObject:function(a){return new d(a.year+1900,a.month,a.date,a.hours,a.minutes,
a.seconds)}};return a});
handy.add("String",function(){var d={stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(a){var c=document.createElement("div");a=document.createTextNode(a);c.appendChild(a);return c.innerHTML},unescapeHTML:function(a){var c=document.createElement("div");c.innerHTML=d.stripTags(a);return c.childNodes[0].nodeValue},decodeHTML:function(a){a=a.replace(/&lt;/gi,"<");a=a.replace(/&gt;/gi,">");a=a.replace(/&quot;/gi,'"');a=a.replace(/&apos;/gi,"'");a=a.replace(/<\/?br>/gi,"\n");
a=a.replace(/&amp;/gi,"&");return a=a.replace(/&nbsp;/gi," ")},encodeHTML:function(a){a=a.replace(/&/gi,"&amp;");a=a.replace(/</gi,"&lt;");a=a.replace(/>/gi,"&gt;");a=a.replace(/\"/gi,"&quot;");a=a.replace(/\'/gi,"&apos;");a=a.replace(/\n/gi,"</br>");return a=a.replace(/ /gi,"&nbsp;")},trim:function(a){return a=a.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(a,c){c||(c=/[,%\'\"\/\\;|\<\>\^]/);return-1<a.search(c)},len:function(a){return a.replace(/[^\x00-\xff]/g,"**").length},left:function(a,
c,b){if(d.len(a)>c){!0===b?b=2:0<b||(b=0);var f=0,e=0;for(c-=b;e<c;)255<a.charCodeAt(f)?e+=2:e++,f++;a=a.substring(0,f);for(f=0;f<b;f++)a+="."}return a},isNumber:function(a){return 0==a.search(/^\d+$/g)},hasChn:function(a){return/[\u4E00-\u9FA5]+/.test(a)},isChn:function(a){return/^[\u4E00-\u9FA5]+$/.test(a)},addParam:function(a,c){c&&(a+=(-1<a.indexOf("?")?"&":"?")+c);return a}};return d});
handy.add("Cookie",function(){return{get:function(d,a){var c=d+"=",b="",f=document.cookie;if(0<f.length){var e=f.indexOf(c);-1!=e&&(e+=c.length,c=f.indexOf(";",e),-1==c&&(c=f.length),b=f.substring(e,c),a||(b=unescape(b)))}return b},set:function(d,a,c){var b=[];void 0!=d&&void 0!=a&&b.push(d+"="+escape(a));c&&(void 0!=c.path&&b.push("path="+c.path),void 0!=c.domain&&b.push("domain="+c.domain),void 0!=c.expires&&b.push("expires="+c.expires),c.secure&&b.push("secure"));document.cookie=b.join(";")},del:function(d){var a=
new Date;a.setTime(a.getTime()-1);document.cookie=d+"=;expires="+a.toGMTString()}}});handy.add("Util",function(){var d=0;return{isWindow:function(a){return null!=a&&a==a.window},getUuid:function(){return d++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(a){var c=top.location.hash;0<=c.indexOf("#")&&(a=c.replace(/#[^\?]*/,a));top.location.hash=a}}});
handy.add("Template",function(d){var a={},c=/^=/,b="".trim,f={openTag:"<%",closeTag:"%>",_add:function(a){return b?"$r+="+a+";\n":"$r.push("+a+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return f._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=f._add(a.replace(c,"")+'||""'));return a+"\n"},_compile:function(a){var c="var $r="+(b?'""':"[]")+";\n";d.Object.each(a.split(f.openTag),function(a,b){var e=
b.split(f.closeTag);1==e.length?c+=f._parseHtml(e[0]):(c+=f._parseScript(e[0]),e[1]&&(c+=f._parseHtml(e[1])))});c+="return "+(b?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(b,c){var k,h,j;if("string"==typeof b)k=b;else if(k=b.tmpl,j=b.id)if(a[j])h=a[j];else{var l=document.getElementById(j);l&&(k=(l.value||l.innerHTML).replace(/\s/g,""))}if(!h){if(!k){d.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}h=f._compile(k);j&&(a[j]=h)}return c?h(c):h}};return f});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(d,a,c){function b(a){if(a==l)return!1;var b=j.contentWindow.document;b.open();b.write("<!doctype html><html><body>"+a+"</body></html>");b.close();l=a;d.log("set:"+j.contentWindow.document.body.innerText)}function f(){var c=a.getHash(),f=j.contentWindow.document.body.innerText;c!=l?(b(c),e(c)):f!=l&&(d.log("update:"+j.contentWindow.document.body.innerText),a.setHash(f))}function e(a){var b=n.listeners,c;for(c in b)b[c](a)}var g,
k=0,h=document,j,l,q=h.documentMode,u="onhashchange"in window&&(void 0===q||7<q),n={delay:50,listen:function(d,l){if(!g)if(g=!0,n.listeners={},u)$(window).on("hashchange",function(){e(a.getHash())});else j=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(h.body)[0],$(j).one("load",function(){b(a.getHash());setInterval(f,n.delay)});if(l in n.listeners)throw Error("Duplicate name");l=l||c.expando+ ++k;n.listeners[l]=d;return l},unListen:function(a){for(var b in n.listeners)(!a||
a==b)&&delete n.listeners[b]}};return n});
handy.add("Support",function(d){var a={mediaQuery:function(){var a;if(d.Browser.mobile())a="hui-mobile";else{a="hui-pc";var c=d.Browser.ie();c&&(a+=" ie"+c)}document.documentElement.className+=" "+a}};a.mediaQuery();if(6==d.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}return a})(function(d){Hui=H=$H=d.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HL=$H.Listener;$Define=$H.Loader.define;$Require=
$H.Loader.require;$G={config:{}};d=window.$;d.fn.remove=$HF.intercept(d.fn.remove,function(){$HL.fire("removeEl",this.target)})})(handy);
$Define("cm.AbstractView",function(){var d=$HO.createClass();$HO.extend(d.prototype,{initialize:function(){this.initListeners()},getEl:function(){return this._container},fire:function(a,c){for(var b=this._listeners.length-1;0<=b;b--){var f=this._listeners[b];if(f.type==a){var e=f.delegation;c?e.apply(null,c.shift(f)):e(f)}}},listen:function(a){var c=this,b=a.type,f=c._listeners,e=a.el,d=a.method||"bind",k=a.selector,h=a.data,j=a.delegation=function(){if(!0!=c.isSuspend)return a.handler.apply(a.scope||
c,arguments)};$H.Browser.mobile()&&"click"==b&&(b="touchend");e=e?"string"==typeof e?c.find(e):e:c.getEl();if(!a.notEl)if(k)if(h)e[d](k,b,h,j);else e[d](k,b,j);else if(h)e[d](b,h,j);else e[d](b,j);f.push(a)},unlisten:function(a){var c=a.type,b=a.el,f="delegate"==a.method?"undelegate":"unbind",e=a.selector,d;$H.Browser.mobile()&&"click"==c&&(c="touchend");for(var b=b?"string"==typeof b?this.find(b):b:this.getEl(),k=this._listeners.length-1;0<=k;k--){var h=this._listeners[k];if(h.handler==a.handler){d=
h.delegation;this._listeners.splice(k,1);break}}if(!a.notEl)if(e)b[f](e,c,d);else b[f](c,d)},initListeners:function(){if(this.listened)return!1;this.listened=!0;var a=this._listeners;this._listeners=[];for(var c=a.length-1;0<=c;c--)this.listen(a[c])},clearListeners:function(){for(var a=this._listeners,c=a.length-1;0<=c;c--)this.unlisten(a[c])},suspendListeners:function(){if(this.isSuspend)return!1;this.isSuspend=!0},resumeListeners:function(){if(!this.isSuspend)return!1;this.isSuspend=!1},destroy:function(){if(this.destroyed)return!1;
this.fire("destroy");this.clearListeners();this.getEl().remove();this.destroyed=!0}});return d});
$Define("c.ComponentManager",function(){var d=$HO.createClass(),a=$H.expando+"_cmp_",c={},b={};$C=d;$HO.extend(d,{init:function(){$HL.add("afterRender",function(a){d.afterRender(a)});$HL.add("removeEl",function(a){d.destroy(a)})},registerType:function(a,b){c[a]=b;b.prototype.xtype=a;$C[a]=b},getClass:function(a){return c[a]},register:function(a){b[a.getId()]=a},unregister:function(a){delete b[a.getId()]},eachInEl:function(a,b){a.find(".js-component").each(function(a,c){c=$(c);var f=c.attr("id");(f=
d.get(f))&&b(f)})},afterRender:function(a){d.eachInEl(a,function(a){a.afterRender()})},destroy:function(a){d.eachInEl(a,function(a){a.destroy(!0)})},generateId:function(c,e){var d=a+(c||$H.Util.getUuid());if(!0!=e&&b[d])$D.error("id\u91cd\u590d:"+d);else return d},get:function(a){return b[a]||b[d.generateId(a,!0)]}});d.init();return d});
$Define("c.AbstractComponent",["c.ComponentManager","cm.AbstractView"],function(d,a){var c=$HO.createClass(),b=/^(<[a-zA-Z]+)/,f=/(class=")/;$C.AbstractComponent=c;$HO.inherit(c,a,{define:function(a,b){var f=$HO.createClass();$HO.inherit(f,b||c,null,null,{notCover:function(a){return"define"==a}});d.registerType(a,f);return f},extend:function(a){var b=this.prototype;$HO.extend(b,a,{notCover:function(c){if("_customEvents"==c||"listeners"==c)return b[c]=(a[c]||[]).concat(b[c]||[]),!0;if("xtype"==c||
"constructor"==c)return!0}})},html:function(a){a.autoRender=!1;return(new this(a)).getHtml()}},{xtype:"AbstractComponent",autoRender:!0,renderBy:"append",activeCls:"hui-active",_customEvents:["beforeRender","afterRender","show","hide","destroy"],_defaultEvents:["click","mouseover","focus"],initialize:function(a){this.doConfig(a);this.parseItems();this.initHtml();this.fire("beforeRender");!1!=this.autoRender&&(this.renderTo[this.renderBy](this.getHtml()),this.afterRender());d.register(this)},hasConfig:function(a,
b){if(!b)return!1;if($HO.isArray(b))for(var c=0,d=b.length;c<d;c++){if(this.match(a,b[c]))return!0}else if(this.match(a,b))return!0;return!1},doConfig:function(a){var b=this;b.params=a;b.settings=$HO.clone(a);var c=b.listeners?b.listeners.concat():[];a.listeners&&(c=c.concat(a.listeners));b._listeners=c;$HO.extend(b,a,{notCover:function(c){var d=b[c],f=$HO.contains(b._customEvents,c),k=$HO.contains(b._defaultEvents,c);(f||k)&&b._listeners.push({type:c,notEl:f,handler:a[c]});if(null!=d&&"object"==
typeof d||$HO.isFunction(d))return!0}});b.cls||(b.cls=b.xtype.toLowerCase());a.defItem&&$HO.extend(b.defItem,a.defItem);b.renderTo=a.renderTo?$(a.renderTo):$(document.body);b.children=[]},initHtml:function(){"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));var a=$H.Template.tmpl({id:this.xtype,tmpl:this.tmpl},this),c=this.getId(),a=a.replace(b,'$1 id="'+c+'" style="'+("visibility"==this.displayMode?"visibility:hidden;":"display:none;")+'"');this.html=a=a.replace(f,
"$1"+this.getExtCls())},initStyle:function(){var a=this.getEl(),b=this.style||{};void 0!=this.width&&(b.width=this.width);void 0!=this.height&&(b.height=this.height);a.css(b)},getId:function(){return this._id||(this._id=d.generateId(this.cid))},getHtml:function(a){if(!a)return this.html;a=">*"==a?this.children:this.find(a);for(var b=[],c=0;c<a.length;c++)b.push(a[c].getHtml());return b.join("")},getExtCls:function(){var a=["js-component"];this.extCls&&a.push(this.extCls);this.theme&&a.push("hui-"+
this.cls+"-"+this.theme);this.disabled&&a.push("hui-disable");this.radius&&a.push("hui-radius-"+this.radius);this.isMini&&a.push("hui-mini");this.shadow&&a.push("hui-shadow");this.shadowSurround&&a.push("hui-shadow-surround");this.shadowOverlay&&a.push("hui-shadow-overlay");this.shadowInset&&a.push("hui-shadow-inset");this.isActive&&a.push(this.activeCls);this.isFocus&&a.push("hui-focus");this.isInline&&a.push("hui-inline");return 0<a.length?a.join(" ")+" ":""},afterRender:function(){if(this.rendered)return!1;
this.callChild();this._container=$("#"+this.getId());this.rendered=!0;this.initStyle();!0!=this.notListen&&this.initListeners();this.disabled&&this.suspendListeners();this.fire("afterRender");this.hidden||this.show();delete this.html},hide:function(){if(!this.showed)return!1;this.showed=!1;var a=this.getEl();"visibility"==this.displayMode?a.css({visibility:"hidden"}):a.hide();this.withMask&&this.unmask();this.fire("hide")},show:function(a,b){var d=this;if(d.showed||b&&d.hidden)return!1;if(!a&&d.delayShow)setTimeout(function(){c.prototype.show.call(d,
!0)},0);else{d.showed=!0;var f=d.getEl();"visibility"==d.displayMode?f.css({visibility:"visible"}):f.show();d.withMask&&d.mask();d.fire("show");d.callChild([null,!0])}},enable:function(){this.resumeListeners();this.getEl().removeClass("hui-disable")},disable:function(){this.suspendListeners();this.getEl().addClass("hui-disable")},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},mask:function(){c.mask||(c.mask=$('<div class="hui-mask" style="display:none;"></div>').appendTo(document.body));
c.mask.show()},unmask:function(){c.mask&&c.mask.hide()},txt:function(a){var b=this.find(".js-"+this.cls+"-txt");0==b.length&&(b=this.find(".hui-"+this.cls+"-txt"));if(void 0!=a)b.text(a);else return b.text()},initListeners:function(){!1!=this.callSuper()&&this.callChild()},clearListeners:function(){!1!=this.callSuper()&&this.callChild()},suspendListeners:function(){!1!=this.callSuper()&&this.callChild()},resumeListeners:function(){!1!=this.callSuper()&&this.callChild()},each:function(a,b){for(var c=
this.children,d=c.length,f,l=0;l<d;){f=c[l];f=b?a.apply(f,b):a(l,f);if(!1===f)break;d==c.length?l++:d=c.length}},match:function(a,b){if("*"==a)return!0;var c=b||this,d,f,l;a=a.replace(/^([^\[]+)/,'[xtype="$1"]');for(var q=/\[([^=|\!]+)(=|\!=)([^=]+)\]/g;d=q.exec(a);)if(f=d[1],l=d[2],d=eval(d[3]),"="===l?c[f]!=d:c[f]==d)return!1;return!0},find:function(a,b){var c=this;if(0!=a.indexOf("$"))return c.getEl().find(a);b=b||[];if(0<a.indexOf(","))return $HO.each(a.split(","),function(a,d){b=b.concat(c.find(d))}),
b;var d=1==a.indexOf(">"),f=a.replace(/^\$>?\s?/,""),l=f.search(/\s|>/),q;0<l&&(q=f.substring(l),f=f.substring(0,l));c.each(function(c,k){k.match(f)&&(q?k.find("$"+q,b):b.push(k));d||k.find(a,b)});return b},index:function(){var a=this,b=a.parent;if(b){var c;b.each(function(b,d){if(d==a)return c=b,!1});return c}return null},callChild:function(a,b){a&&"string"!=typeof a&&(b=a,a=null);a=a||arguments.callee.caller.$name;this.each(function(c,d){b?d[a].apply(d,b):d[a].call(d)})},add:function(a){this.children.push(a);
a.parent=this},remove:function(a){for(var b=this.children,c=!1,d=0,f=b.length;d<f;d++)b[d]==a&&(b.splice(d,1),a.destroy(),c=!0);return c},addItem:function(a){var b=this.settings,c=b.items;c?$HO.isArray(c)||(b.items=[c]):b.items=[];b.items.push(a)},parseItem:function(){},parseItems:function(){this.icon&&this.addItem({xtype:"Icon",name:this.icon});var a=this.settings.items;if(a)for(var a=a.length?a:[a],b=0,c=a.length;b<c;b++){var f=a[b];this.defItem&&$HO.extend(f,this.defItem,{notCover:!0});this.isMini&&
(f.isMini=!0);this.parseItem(f);var j=d.getClass(f.xtype);j?(f.renderTo||(f.autoRender=!1),f=new j(f),this.add(f)):$D.error("xtype:"+f.xtype+"\u672a\u627e\u5230")}},destroy:function(){if(this.destroyed)return!1;this.callChild();this.callSuper();this.parent&&this.parent.remove(this);d.unregister(this);delete this.params;delete this.settings;delete this._container;delete this.renderTo;delete this._listeners;delete this.children}});return c});
$Define("c.Popup","c.AbstractComponent",function(d){d=d.define("Popup");d.extend({delayShow:!0,clickHide:!0,showPos:"center",withMask:!0,shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.getHtml("$>*")%></div>'],doConfig:function(a){this.callSuper([a]);this.clickHide&&this._listeners.push({type:"click",el:$(document),handler:function(){this.hide()}});$H.Browser.android()&&(this._listeners.push({type:"show",notEl:!0,handler:function(){!0!=$H.Listener.fire("component.popup.show")&&$("input,textarea,select").attr("disabled",
"disabled")}}),this._listeners.push({type:"hide",notEl:!0,handler:function(){!0!=$H.Listener.fire("component.popup.hide")&&setTimeout(function(){$("input,textarea,select").removeAttr("disabled")},500)}}))},show:function(){var a=this,c=a.showPos;if("string"==typeof c)a[c]();else"function"==typeof c&&c.call(a);a.callSuper(arguments);!a.width&&a.parent&&($D.log(a.parent.getEl().outerWidth()),c=a.width=a.parent.getEl().outerWidth(),a.getEl().css("width",c));a.timeout&&setTimeout(function(){a.destroyed||
a.hide()},a.timeout)},hide:function(){!1!=this.callSuper()&&!this.notDestroy&&this.destroy()},center:function(){var a=this.getEl(),c=document,b=((c.documentElement.offsetWidth||c.body.offsetWidth)-a.width())/2,c=((c.documentElement.clientHeight||c.body.clientHeight)-a.height())/2+c.documentElement.scrollTop,c=10>c?window.screen.height/2-200:c;a.css({left:b+"px",top:c-(this.offsetTop||0)+"px"})},followEl:function(a){a=(a||this.parent.getEl()).position();this.getEl().css(a)}});return d});
$Define("c.ControlGroup",["c.ComponentManager","c.AbstractComponent"],function(d,a){var c=a.define("ControlGroup");c.extend({radius:"little",multi:!1,defItem:{xtype:"Button",extCls:"js-item",radius:null,shadow:!1,isInline:!1},tmpl:['<div class="hui-ctrlgp<%if(this.direction=="h"){%> hui-ctrlgp-h<%}else{%> hui-ctrlgp-v<%}%>">','<%=this.getHtml("$>*")%>',"</div>"],listeners:[{type:"click",selector:".js-item",method:"delegate",handler:function(a){var c=$(a.currentTarget),c=d.get(c.attr("id")).index();
this.onItemClick(a,c)}}],select:function(a){a="number"==typeof a?this.children[a]:"string"==typeof a?this.find(a)[0]:a;if(!this.multi&&!a.multi){var c=this.getSelected();c&&this.selectItem(c,!1);this.selectItem(a)}else this.selectItem(a,!a.selected)},getSelected:function(a){var c=[];this.each(function(d,g){g.selected&&c.push(a?d:g)});return 0<c.length?this.multi?c:c[0]:null},selectItem:function(a,c){(c=!1!=c)?(a.selected=c,a.select?a.select():a.active()):(a.selected=c,a.select?a.select(c):a.unactive())},
val:function(a){if(a){var c=a.split(",");this.each(function(a,b){b.select($HO.contains(c,b.value))})}else return a=this.find("$>[selected=true]"),c=[],$HO.each(a,function(a,b){c.push(b.value)}),c.join(",")},onItemClick:function(a,c){this.select(c);this.itemClick&&this.itemClick(this.children[c],c)}});return c});
$Define("c.Icon","c.AbstractComponent",function(d){d=d.define("Icon");d.extend({tmpl:'<span class="hui-icon;<%if(this.isAlt){%>; hui-alt-icon;<%}%>; hui-icon-<%=this.name%>;<%if(!this.noBg){%>; hui-icon-bg;<%}%>"></span>'.split(";")});return d});
$Define("c.Button","c.AbstractComponent",function(d){d=d.define("Button");d.extend({iconPos:"left",theme:"gray",activeCls:"hui-btn-blue",cls:"btn",defItem:{xtype:"Icon"},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a href="javascript:;" hidefocus="true" class="hui-btn,<%if(!this.text){%> hui-btn-icon-notxt<%},if(this.isBack){%> hui-btn-back<%},if(this.hasIcon&&this.text){%> hui-btn-icon-<%=this.iconPos%><%}%>">,<span class="hui-btn-txt"><%=this.text%></span>,<%=this.getHtml("$>*")%>,</a>'.split(","),parseItem:function(a){"Icon"==
a.xtype&&(this.hasIcon=!0)}});return d});
$Define("c.Radio","c.AbstractComponent",function(d){d=d.define("Radio");d.extend({tmpl:'<div class="hui-radio hui-btn hui-btn-gray<%if(this.selected){%> hui-radio-on<%}%>">;<span class="hui-icon hui-icon-radio"></span>;<input type="radio"<%if(this.selected){%> checked=true<%}%>;<%if(this.disabled){%> disabled="<%=this.disabled%>"<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-radio-txt"><%=this.text%></span>;</div>'.split(";"),select:function(a){this.selected=
a=!1!=a;var c=this.find("input"),b=this.getEl();a?(c.attr("checked",!0),b.addClass("hui-radio-on")):(c.removeAttr("checked"),b.removeClass("hui-radio-on"))},val:function(a){if(a)this.value=a,this.find("input").val(a);else return this.value}});return d});
$Define("c.Checkbox","c.AbstractComponent",function(d){d=d.define("Checkbox");d.extend({text:"",value:"",selected:!1,multi:!0,cls:"chkbox",tmpl:'<div class="hui-chkbox hui-btn hui-btn-gray<%if(this.selected){%> hui-chkbox-on<%}%>">;<span class="hui-icon hui-icon-chkbox"></span>;<input type="checkbox"<%if(this.selected){%> checked=true<%}%>;<%if(this.disabled){%> disabled="<%=this.disabled%>"<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-chkbox-txt"><%=this.text%></span>;</div>'.split(";"),select:function(a){this.selected=
a=!1!=a;var c=this.find("input"),b=this.getEl();a?(c.attr("checked",!0),b.addClass("hui-chkbox-on")):(c.removeAttr("checked"),b.removeClass("hui-chkbox-on"))},val:function(a){if(a)this.value=a,this.find("input").val(a);else return this.value}});return d});
$Define("c.Select","c.AbstractComponent",function(d){d=d.define("Select");d.extend({text:"\u8bf7\u9009\u62e9...",value:"",radius:"little",optionClick:function(){},defItem:{xtype:"Menu",hidden:!0,markType:"dot",renderTo:"body"},_customEvents:["change"],tmpl:['<div class="hui-select hui-btn hui-btn-gray hui-btn-icon-right">','<span class="hui-icon hui-alt-icon hui-icon-carat-d hui-light"></span>','<input value="<%=this.value%>" name="<%=this.name%>"/>','<span class="hui-btn-txt js-select-txt"><%=this.text%></span>',
"</div>"],listeners:[{type:"click",handler:function(){this.showOptions()}}],doConfig:function(a){var c=this;c.callSuper([a]);for(var b=a.options,d=0,e=b.length;d<e;d++){var g=b[d];if(g.value==a.value){c.text=g.text;g.selected=!0;break}}c.addItem({itemClick:function(a){c.val(a.value)},width:c.width,items:b})},showOptions:function(){this.children[0].show()},val:function(a){if(a){if(this.value!=a){var c=this.children[0],b=c.find('$>[value="'+a+'"]');0<b.length&&(this.fire("change"),b=b[0],this.value=
a,this.find("input").attr("value",a),this.txt(b.text),c.select(b))}}else return this.value}});return d});
$Define("c.Input","c.AbstractComponent",function(d){d=d.define("Input");d.extend({radius:"little",iconPos:"left",btnPos:"right",tmpl:'<div class="hui-input;<%if(this.hasIcon){%>; hui-input-icon-<%=this.iconPos%>;<%}%>;<%if(this.hasBtn){%>; hui-input-btn-<%=this.btnPos%>;<%}%>">;<%=this.getHtml("$>*")%>;<%if(this.type=="textarea"){%>;<textarea class="js-input";<%}else{%>;<input type="text" class="js-input hui-input-txt";<%}%> ; name="<%=this.name%>";<%if(this.placeholder){%>; placeholder="<%=this.placeholder%>";<%}%>;<%if(this.type=="textarea"){%>;><%=this.value%></textarea>;<%}else{%>; value="<%=this.value%>"/>;<%}%> ;</div>'.split(";"),listeners:[{type:"focus",
el:".js-input",handler:function(){this.getEl().addClass("hui-focus")}},{type:"blur",el:".js-input",handler:function(){this.getEl().removeClass("hui-focus")}}],doConfig:function(a){var c=this;c.callSuper([a]);"search"==c.type?c.icon="search":"textarea"==c.type&&c._listeners.push({type:"input propertychange",el:".js-input",handler:function(){var a=c.find(".js-input");a.css("height",a[0].scrollHeight)}});c.withClear&&c.addItem({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.find("input").val("").focus()}})},
parseItem:function(a){"Icon"==a.xtype?this.hasIcon=!0:"Button"==a.xtype&&(this.hasBtn=!0)},val:function(a){var c=this.find("input");if(a)c.val(a);else return c.val()},focus:function(){this.find("input").focus()}});return d});
$Define("c.Tab",["c.AbstractComponent","c.ControlGroup"],function(d,a){var c=d.define("Tab",a);c.extend({defItem:{xtype:"Button",radius:null,isInline:!1,extCls:"js-item",iconPos:"top",shadow:!1},tmpl:['<div class="hui-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-tab-item" style="width:<%=100/len%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%if(this.hasContent){%>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].selected){%> style="display:none"<%}%>>',
"<%=this.children[i].content%>","</div>","<%}%>","<%}%>","</div>"],parseItem:function(a){a.selected&&(a.isActive=!0)},onItemClick:function(a,c){this.hasContent&&this.find(".js-tab-content").hide().eq(c).show();this.callSuper([a,c])}});return c});
$Define("c.Toolbar","c.AbstractComponent",function(d){d=d.define("Toolbar");d.extend({cls:"tbar",defItem:{xtype:"Button",theme:"black",pos:"right",isMini:!0},tmpl:['<div class="hui-tbar<%if(this.type=="header"){%> hui-header<%}else if(this.type=="footer"){%> hui-footer<%}%>">','<%=this.getHtml(">*")%>','<%if(this.title){%><h1 class="hui-tbar-title js-tbar-txt"><%=this.title%></h1><%}%>',"</div>"],parseItem:function(a){"Button"==a.xtype&&(a.shadowSurround=!0,"left"==a.pos?a.extCls=(a.extCls||"")+" hui-tbar-btn-left":
"right"==a.pos&&(a.extCls=(a.extCls||"")+" hui-tbar-btn-right"))}});return d});$Define("c.Tips",["c.AbstractComponent","c.Popup","c.ControlGroup"],function(d,a){var c=d.define("Tips",a);c.extend({theme:"black",timeout:2E3,radius:"normal",tmpl:['<div class="hui-tips<%if(!this.text){%> hui-tips-notxt<%}%>">','<%=this.getHtml("$>*")%>','<%if(this.text){%><span class="hui-tips-txt"><%=this.text%></span><%}%>',"</div>"]});return c});
$Define("c.Dialog",["c.AbstractComponent","c.Popup"],function(d,a){var c=d.define("Dialog",a);$HO.extend(c,{alert:function(a){return new c({contentMsg:a,noClose:!0,noCancel:!0})},confirm:function(a,d){return new c({contentMsg:a,noClose:!0,okCall:function(){return d&&d(!0)},cancelCall:function(){return d&&d(!1)}})},prompt:function(a,d,e){e||(e=d,d="");return new c({contentMsg:a,noClose:!0,items:{xtype:"Input",xrole:"dialog-content",value:d},okCall:function(){var a=this.find("$Input")[0].val();return e&&
e(a)}})}});c.extend({okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",clickHide:!1,radius:"little",tmpl:'<div class="hui-dialog">;<%=this.getHtml("$>[xrole=\'dialog-header\']")%>;<div class="hui-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="hui-body-content">;<h1 class="hui-content-title"><%=this.contentTitle%></h1>;<div class="hui-content-msg"><%=this.contentMsg%></div>;<%=this.getHtml("$>[xrole=\'dialog-content\']")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="hui-body-action">;<%=this.getHtml("$>[xrole=\'dialog-action\']")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(a){var c=this;c.callSuper([a]);a=a.items;c.title&&!c.hasConfig('[xrole="dialog-header"]',a)&&c.addItem({xtype:"Toolbar",title:c.title,theme:"gray",xrole:"dialog-header",extCls:"hui-dialog-header",items:!c.noClose&&{xtype:"Button",radius:"big",icon:"delete",isMini:!1,theme:"gray",pos:"left",click:function(){c.hide()}}});!c.noAction&&!c.hasConfig('[xrole="dialog-action"]',a)&&(a=[],c.noCancel||a.push({xtype:"Button",radius:null,isActive:1==c.activeBtn,text:c.cancelTxt,click:function(){!1!=
(c.cancelCall&&c.cancelCall())&&c.hide()}}),c.noOk||a.push({xtype:"Button",text:c.okTxt,isActive:2==c.activeBtn,radius:null,click:function(){!1!=(c.okCall&&c.okCall())&&c.hide()}}),c.addItem({xtype:"Tab",xrole:"dialog-action",items:a}))}});return c});
$Define("c.Menu",["c.AbstractComponent","c.Popup","c.ControlGroup"],function(d,a,c){d=d.define("Menu",a);d.extend(c.prototype);d.extend({notDestroy:!0,tmpl:['<div class="hui-menu<%if(this.markType=="dot"){%> hui-menu-mark<%}%>">',"<ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-menu-item<%if(this.children[i].selected){%> hui-item-mark<%}%>">',"<%=this.children[i].getHtml()%>",'<%if(this.markType=="dot"){%><span class="hui-icon-mark"></span><%}%>',"</li>","<%}%>","</ul>",
"</div>"],selectItem:function(a,d){d=!1!=d;"dot"==this.markType?(a.selected=d,a.getEl().parent()[!1==d?"removeClass":"addClass"]("hui-item-mark")):"active"==this.markType?c.prototype.selectItem.call(this,a,d):a.selected=d}});return d});$Define("c.List",["c.AbstractComponent","c.ControlGroup"],function(d,a){var c=d.define("List",a);c.extend({tmpl:['<div class="hui-list">','<div class="hui-list-item c-clear">',"</div>","</div>"]});return c});
$Define("m.AbstractModule","cm.AbstractView",function(d){var a=$HO.createClass();$HO.inherit(a,d,null,{useCache:!0,initialize:function(a){this.conf=a},cache:function(){},init:function(){},beforeRender:function(){},render:function(){},afterRender:function(){},reset:function(){},exit:function(){return!0},destroy:function(){this.getEl().remove()},getHtml:function(){if(!this.tmpl)return"";"string"!=typeof this.tmpl&&(this.constructor.prototype.tmpl=this.tmpl.join(""));return $H.Template.tmpl({id:this.name,
tmpl:this.tmpl},this)}});return a});$Define("m.AbstractDao",function(){var d=$HO.createClass();$HO.extend(d,{ajax:function(a){this.beforeSend(a);a.error=$HF.intercept(this.error,a.error);a.success=$HF.intercept(this.success,a.success);return $.ajax(a)},beforeSend:$H.noop,error:$H.noop,success:$H.noop});return d});$Define("m.AbstractView",function(){var d=$HO.createClass();$HO.extend(d.prototype,{})});
$Define("m.AbstractNavigator","handy.base.Object",function(d){var a=d.createClass();d.extend(a.prototype,{navigate:function(){}});return a});
$Define("m.History","handy.base.HashChange",function(d){var a=$HO.createClass(),c=0;$HO.extend(a.prototype,{initialize:function(a){this.key=a||"handy";this.states=[];d.listen($H.Function.bind(this.stateChange,this))},stateChange:function(){var a=this.getHashParam().hKey;if(a=this.states[a])a.onStateChange(a.param,!0)},saveState:function(a){var d=this.key+ ++c;this.states.push(d);this.states[d]=a;$HU.setHash("#"+JSON.stringify({hKey:d,param:a.param}))},getHashParam:function(){try{var a=$HU.getHash().replace("#",
"");return JSON.parse(a)}catch(c){$H.Debug.warn("History.getCurrentState:parse hash error:"+c.message)}},getCurrentState:function(){try{var a=this.getHashParam();return this.states[a.hKey]}catch(c){$H.Debug.warn("History.getCurrentState:parse hash error:"+c.message)}},getPreState:function(){try{for(var a=JSON.parse($HU.getHash().replace("#","")).hKey,c=this.states,d=c.length,g=0;g++;g<d)if(c[g]==a)return 0<g?c[c[--g]]:null}catch(k){$H.Debug.error("History.getPreState error:"+k.message,k)}},back:function(){var a=
this.getPreState();if(a)a.onStateChange(a.param)}});return a});
$Define("m.ModuleManager","m.History",function(d){var a=$HO.createClass();$HO.extend(a.prototype,{_getModWrapper:function(a){a="modWrapper_"+a;var b=$("#"+a);0==b.length&&(b=$('<div id="'+a+'" class="js-module m-module"></div>'));return b},_createMod:function(a){var b=this,d=a.modName;b.modules[d]={waiting:!0};$Require(b.defModPackage+d,function(e){e=new e;e.name=d;e.mType=d;e.initParam=a;b.modules[d]=e;e.init(a);e.beforeRender();var g=b._getModWrapper(d);e._container=g;var k=e.renderTo?$(e.renderTo):
b.container;g.html(e.getHtml());k.append(g);$HL.fire("afterRender",g);e.render(g);b.currentMod==d&&b._showMod(e);e.afterRender()})},_showMod:function(a){if(this.navigator&&this.navigator.navigate(a,this))return!1;this._hideAll();a._container.show();a.isActive=!0},_hideAll:function(){var a=this.modules,b;for(b in a)a[b]._container.hide(),a[b].isActive=!1},_destroy:function(a){a.destroy();delete this.modules[a.name]},initialize:function(a){a&&(this.conf=a,$HO.extend(this,a),this.container=a.container?
$(a.container):$(document.body));this.defModPackage+=".";this.history=new d;this.modules={}},go:function(a,b){var d=a.modName,e=this.currentMod,g=this.modules,k=g[e];if(e==d)k.waiting||k.reset();else{if(k&&!k.waiting&&!k.exit())return!1;(e=g[d])?e.useCache?(this._showMod(e),e.cache(a)):e.waiting||(this._destroy(e),this._createMod(a)):this._createMod(a);!0!=b&&this.history.saveState({onStateChange:$H.Function.bind(this.go,this),param:a});this.currentMod=d}}});return a});
