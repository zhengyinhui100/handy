/* handy v1.0 | 2015-03-02 | zhengyinhui100@gmail.com */
!function(){function a(a,b){for(var c in b)a[c]=b[c];return a}function b(a){return g.$===j&&(g.$=i),a&&g.handy===j&&(g.handy=h),j}function c(a,b){var c,d,e,f,h,i=null;if(a=a.path?a.path:j.alias(a),f=2==arguments.length,!f)return"handy"===a?j:m[a];for(d=a.split("."),e=d[0],i=g[e]||(g[e]={}),c=1,h=d.length;h>c;++c){if(c==h-1&&f)m[a]=i[d[c]]=b;else{if(!(f||i&&i[d[c]]))return;i[d[c]]=i[d[c]]||{}}i=i[d[c]]}return i}function d(a,b){if("object"!=typeof a){var c=j._alias;if(!b){if(a){var d,e=a,f=a.length;do{if(c[e])return d=c[e]+a.substring(f),c[a]||(c[a]=d),d;f=e.lastIndexOf(".")}while(f>0&&(e=e.substring(0,f)));return a}return c}c[a]?$D.error("别名已被使用"+a+":"+c[a]):c[a]=b}else for(var g in a)j.alias(g,a[g])}function e(a,b,c){for(var d=0;d<b.length;d++){var e=b[d];a[e]=c(e)}}function f(a,b,c){c||(c=b,b=null);var d=c;if("function"==typeof c){var e=[];if(b)if("string"==typeof b)e.push(j.ns(b));else for(var f=0;f<b.length;f++)e.push(j.ns(b[f]));e.push(j),d=c.apply(g,e)}return void j.ns(a,d)}var g=window,h=g.handy,i=g.$,j=g.handy=g.$H=function(){};j.extend=a;var k="1.0.0",l="undefined"==typeof gEnv?"online":gEnv;a(j,{version:k,env:l,isDev:"dev"==l,isTest:"test"==l,isOnline:"online"==l,expando:("handy-"+k).replace(/\./g,"_"),base:{},noConflict:b,noop:function(){},_alias:{L:"handy.loader",B:"handy.base",C:"handy.component",M:"handy.module",U:"handy.util",E:"handy.effect",CM:"handy.common",D:"handy.data",V:"handy.view",P:"handy.plugin"},ns:c,alias:d,generateMethod:e}),g.define=j.add=f;var m={}}(),define("L.Json",function(){function _fQuote(a){return _rEscapable.lastIndex=0,_rEscapable.test(a)&&(a=a.replace(_rEscapable,function(a){var b=_oMeta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),'"'+a+'"'}function _fToString(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof _replacer&&(i=_replacer.call(b,a,i)),typeof i){case"undefined":return"undefined";case"string":return _fQuote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"function":case"null":return String(i);case"object":if(!i)return"null";if(gap+=_indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=_fToString(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(_replacer&&"object"==typeof _replacer)for(f=_replacer.length,c=0;f>c;c+=1)"string"==typeof _replacer[c]&&(d=_replacer[c],e=_fToString(d,i),e&&g.push(_fQuote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=_fToString(d,i),e&&g.push(_fQuote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}function fStringify(a,b,c,d){if(_bNativeJson&&!d)return JSON.stringify.apply(null,arguments);var e;if(gap="",_indent="","number"==typeof c)for(e=0;c>e;e+=1)_indent+=" ";else"string"==typeof c&&(_indent=c);return _replacer=b,!b||"function"==typeof b||"object"==typeof b&&"number"==typeof b.length?_fToString("",{"":a}):void $D.error(new Error("Json.stringify:替换参数只能是函数或者数组"))}function fParseJson(sText,fReviver,bNotNative){function _fReviver(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=_fReviver(e,c),void 0!==d?e[c]=d:delete e[c]);return fReviver.call(a,b,e)}if(_bNativeJson&&!bNotNative)return JSON.parse.apply(null,arguments);var j;return sText=String(sText),_rCx.lastIndex=0,_rCx.test(sText)&&(sText=sText.replace(_rCx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),_rValidchars.test(sText.replace(_rValidescape,"@").replace(_rValidtokens,"]").replace(_rValidbraces,""))?(j=eval("("+sText+")"),"function"==typeof fReviver?_fReviver({"":j},""):j):void $D.error(new SyntaxError("JSON.parse"))}var Json={stringify:fStringify,parseJson:fParseJson},_bNativeJson="JSON"in window,_replacer,gap,_indent,_rEscapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_oMeta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},_rCx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_rValidchars=/^[\],:{}\s]*$/,_rValidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_rValidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_rValidbraces=/(?:^|:|,)(?:\s*\[)+/g;return Json}),define("L.Browser",function(){function a(){var a=window.navigator.userAgent;d(a),b(a),c(a),e(a),f(a),g(),"ontouchend"in document&&(h.hasTouch=!0)}function b(a){var b,c=a;(b=c.match(/MSIE ([\d.]+)/))?h.ie=b[1]:(b=c.match(/trident.*rv\D+([\d.]+)/i))?h.ie=b[1]:(b=c.match(/Firefox\/([\d.]+)/))?h.firefox=b[1]:(b=c.match(/Chrome\/([\d.]+)/))?h.chrome=b[1]:(b=c.match(/Opera.([\d.]+)/))?h.opera=b[1]:(b=c.match(/MicroMessenger\/([\d.]+)/))?h.weixin=b[1]:(b=c.match(/Version\/([\d.]+).*Safari/))?h.safari=b[1]:0}function c(a){/windows|win32/i.test(a)?h.windows=!0:/linux/i.test(a)?h.linux=!0:/macintosh/i.test(a)?h.mac=!0:0}function d(a){var b=a;/trident/i.test(b)?h.trident=!0:/webkit/i.test(b)?h.webkit=!0:/gecko/i.test(b)?h.gecko=!0:/presto/i.test(b)?h.presto=!0:0}function e(a){var b=a;/MetaSr/i.test(b)?h.sogou=!0:/Maxthon/i.test(b)?h.maxthon=!0:/TencentTraveler/i.test(b)?h.tt=!0:/TheWorld/i.test(b)?h.theWorld=!0:/360[S|E]E/i.test(b)?h.is360=!0:0}function f(a){var b,c=a;(b=c.match(/AppleWebKit\/?([\d.]*)/))&&b[1]&&(/ Mobile\//.test(c)&&c.match(/iPad|iPod|iPhone/)?(h.mobile="ios",b=c.match(/OS ([^\s]*)/),b&&b[1]&&(h.ios=b[1].replace("_",".")),b=c.match(/iPad|iPod|iPhone/),b&&b[0]&&(h[b[0].toLowerCase()]=h.ios),/iPad/.test(c)?h.tablet="ios":h.phone="ios"):/Android/i.test(c)?(h.mobile="android",/Mobile/.test(c)?h.phone="android":h.tablet="android",b=c.match(/Android ([^\s]*);/),b&&b[1]&&(h.android=b[1])):(b=c.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))&&(h.mobile=b[0].toLowerCase())),h.pc=!h.mobile}function g(){var a;try{if(h.ie){var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");b&&(a=b.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&navigator.plugins.length>0){var b=navigator.plugins["Shockwave Flash"];if(b)for(var c=b.description.split(" "),d=0,e=c.length;e>d;d++)if(parseInt(c[d])>0){a=c[d];break}}}catch(f){}h.flash=a?a:null}var h={},i={};return $H.generateMethod(i,["ie","firefox","chrome","safari","opera","weixin","windows","linux","mac","trident","webkit","gecko","presto","sogou","maxthon","tt","theWorld","is360","pc","mobile","android","ios","iPhone","iPod","iPad","tablet","phone","hasTouch","flash"],function(a){return function(b){var c=h[a];return"string"==typeof c&&(c=c.replace(/_/g,"")),!b&&"string"==typeof c&&/^[\d\.]+$/.test(c)?parseInt(c):c}}),a(),i}),define("L.Debug",["L.Json","L.Browser"],function(Json,Browser){function _fListen(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent("on"+b,c)}function _fOut(oVar,bShowInPage,sType){if(sType=sType||"log",bShowInPage||Debug.showInPage){var sExpando=$H.expando,sDivId=sExpando+"debugDiv",sInputId=sExpando+"debugInput",oDocument=top.document,oDebugDiv=oDocument.getElementById(sDivId);if(!oDebugDiv){oDebugDiv=oDocument.createElement("DIV"),oDebugDiv.id=sDivId,oDebugDiv.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">关闭</a>',"<a href=\"javascript:void(0)\" onclick=\"this.parentNode.getElementsByTagName('DIV')[0].innerHTML='';\">清空</a>","<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='全屏'){this.parentNode.style.height='"+oDocument.body.offsetHeight+"px';this.innerHTML='收起'}else{this.parentNode.style.height='6.25em';this.innerHTML='全屏';}\">收起</a>","<a href=\"javascript:void(0)\" onclick=\"var oDv=this.parentNode.getElementsByTagName('div')[0];if(this.innerHTML=='底部'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML='顶部';}else{oDv.scrollTop=0;this.innerHTML='底部';}\">顶部</a>",'<a href="javascript:void(0)" onclick="location.reload();">刷新</a>','<a href="javascript:void(0)" onclick="history.back();">后退</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+'<div style="padding-top:0.313;height:85%;overflow:auto;font-size:0.75em;word-wrap:break-word;word-break:break-all;"></div><input id="'+sInputId+'" style="width:100%;padding:0.5em;font-size:1em;" type="text"/>',oDebugDiv.style.display="none",oDebugDiv.style.position="fixed",oDebugDiv.style.width="100%",oDebugDiv.style.left=0,oDebugDiv.style.top=0,oDebugDiv.style.right=0,oDebugDiv.style.height="100%",oDebugDiv.style.backgroundColor="#aaa",oDebugDiv.style.fontSize="1em",oDebugDiv.style.padding="0.625em",oDebugDiv.style.zIndex=9999999999,oDebugDiv.style.opacity=.95,oDebugDiv.style.filter="alpha(opacity=95)",oDocument.body.appendChild(oDebugDiv);var oInput=oDocument.getElementById(sInputId);_fListen(oInput,"keypress",function(oEvt){oEvt=oEvt||window.event;var nKeyCode=oEvt.keyCode;if(10==nKeyCode||13==nKeyCode){var sValue=oInput.value;try{Debug._out(sValue,!0,"cmd");var result=eval(sValue);oInput.value="",Debug._out(result,!0,"cmd")}catch(e){Debug._out(e,!0,"error")}}})}(bShowInPage===!0||Debug.showInPage===!0||"error"==sType)&&(oDebugDiv.style.display="block");var oAppender=oDebugDiv.getElementsByTagName("DIV")[0];oVar=oVar instanceof Error?oVar.stack||oVar.message:oVar;var sMsg="string"==typeof oVar?oVar:Json.stringify(oVar,null,"&nbsp;&nbsp;&nbsp;&nbsp;",!0);sMsg=sMsg&&sMsg.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/\"/gi,"&quot;").replace(/\'/gi,"&apos;").replace(/ /gi,"&nbsp;").replace(/\n|\\n/g,"<br/>");var sStyle;sStyle="log"==sType?"":' style="color:'+("error"==sType?"red":"warn"==sType?"yellow":"green");var bStayBottom=!0;oAppender.scrollHeight-oAppender.scrollTop-oAppender.clientHeight>10&&(bStayBottom=!1),oAppender.innerHTML+="<div"+sStyle+'">'+sType+":<br/>"+sMsg+"</div><br/><br/>",bStayBottom&&(oAppender.scrollTop=oAppender.scrollHeight)}var fCaller=arguments.callee.caller;fCaller.$owner||(fCaller=fCaller.caller);try{fCaller.$owner&&console[sType]("["+fCaller.$owner.$ns+"->"+fCaller.$name+"]"),console[sType](oVar)}catch(e){}}function fLog(a,b){Debug.level>Debug.LOG_LEVEL||Debug._out(a,!!b,"log")}function fDebug(a,b){Debug.level>Debug.DEBUG_LEVEL||Debug._out(a,!!b,"log")}function fInfo(a,b){this.level>Debug.INFO_LEVEL||Debug._out(a,!!b,"info")}function fWarn(a,b){Debug.level>Debug.WARN_LEVEL||Debug._out(a,!!b,"warn")}function fError(a,b){if(!(Debug.level>Debug.ERROR_LEVEL))if(Debug._out(a,!!b,"error"),$H.isDev){if(a instanceof Error)throw"undefined"!=typeof console&&console.error(a.stack),a}else Debug.debugLog(a)}function fTime(a,b,c){if(!(Debug.level>Debug.INFO_LEVEL)){var d=window.performance&&window.performance.now?window.performance.now():(new Date).getTime();"string"==typeof a&&(b=a,a=!1),a?("boolean"==typeof b&&(c=b,b=""),Debug._out((b?b+":":"")+(d-(_oTime[b||"_lastTime"]||0)),!!c)):_oTime[[b||"_lastTime"]]=d}}function fTrace(a){var b=a.out,c=Debug._traceTimes||(Debug._traceTimes={});if(b){for(var d in c){var e=c[d];e.average=e.total/e.num}var f=a.method||"log";return void Debug[f](c)}var d=a.name,g=a.end,e=c[d]||(c[d]={}),h=window.performance?window.performance.now():(new Date).getTime();g?e.total=(e.total||0)+h-e.start:(e.num=(e.num||0)+1,e.start=h)}function fCount(){return Debug._times||(Debug._times=0),++Debug._times}function fThrowExp(a){if(Debug.level<=Debug.DEBUG_LEVEL)throw a}function fListenCtrlEvts(){var a=top.document,b=Browser.mobile()?"touchstart":"click",c=0,d=0;_fListen(a,b,function(){var a=(new Date).getTime();500>a-d?(c++,c>($H.isDev?3:6)&&(Debug._out("open console",!0),c=0)):c=0,d=a})}var Debug=window.$D={level:$H.isDev?0:5,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:$H.isOnline?!1:"record",_out:_fOut,log:fLog,debug:fDebug,info:fInfo,warn:fWarn,error:fError,time:fTime,trace:fTrace,count:fCount,debugLog:$H.noop,throwExp:fThrowExp,listenCtrlEvts:fListenCtrlEvts};Debug.listenCtrlEvts();var _oTime={};return Debug}),define("L.Loader",["L.Debug"],function(a){function b(a){a.deps;x[a.id]=a,x.push(a)}function c(b,d,e){var f=d||b,g=x[f],h=g&&g.deps;if(h){e=e||{};for(var i=0,j=h.length;j>i;i++){if(d=h[i],d==b)return a.warn(s+"cycle depend:"+f+" <=> "+b),{};if(!e[d]){e[d]=1;var k=c(b,d,e);if(k)return k}}}}function d(a,b){var d={},e=[],f=[];"string"==typeof a&&(a=[a]);for(var g=0,h=a.length;h>g;g++){var i=a[g],j=A[i];j||(j=/\.(css|js)/.test(i)?z[i]&&"loaded"==z[i].status:r.sourceMap&&r.sourceMap[i]?r.sourceMap[i].chkExist():$H.ns({path:i}),void 0===j&&b&&(j=c(i)),A[i]=j),j?e.push(j):f.push(i)}return d.exist=e,d.notExist=f,d}function e(a){if(/^(\w+:\/\/)/.test(a))return a;var b=r.sourceMap&&r.sourceMap[a]&&r.sourceMap[a].url;if(!b){var c="",d=r.rootPath;if("string"==typeof d)c=d;else if("object"==typeof d)for(var e in d)0==a.indexOf(e)&&(c=d[e],a=a.replace(e,""));else c="";b=/\.css$/.test(a)?0==a.indexOf("/")?a:"/css/"+a:/\.js$/.test(a)?a:a.replace(/\./g,"/")+".js",b=c.replace(/\/$/,"")+"/"+b.replace(/^\//,"")}return r.isMin&&(b=b.replace(/\.(css|js)$/,".min.$1")),b}function f(a,b){var c=document.createElement("script");c.async="async",c.src=a,c.type="text/javascript",h(c,b),u.appendChild(c)}function g(a,b){for(var c=u.getElementsByTagName("link"),d=0;d<c.length;d++){var e=c[d].href;if(!r.skinNode&&e.indexOf(r.skinName)>=0&&(r.skinNode=c[d]),e.indexOf(a)>=0||a.indexOf(e)>=0)return}var f=document.createElement("link");f.rel="stylesheet",f.href=a,h(f,b),r.skinNode?u.insertBefore(f,r.skinNode):u.appendChild(f)}function h(b,c){function d(){d.isCalled||(d.isCalled=!0,clearTimeout(e),c())}"SCRIPT"===b.nodeName?i(b,d):j(b,d);var e=setTimeout(function(){a.error("Time is out:"+b.src),d()},r.timeout)}function i(b,c){var d=function(){/loaded|complete|undefined/.test(b.readyState)&&(b.onload=b.onerror=b.onreadystatechange=null,b=null,setTimeout(c,0))};b.onload=b.onreadystatechange=d,b.onerror=function(){a.error(s+"load script error:\n"+b.src),d()}}function j(a,b){window.hasOwnProperty("attachEvent")?a.attachEvent("onload",b):setTimeout(function(){k(a,b)},0)}function k(a,b){if(!b.isCalled){var c;if(w)a.sheet&&(c=!0);else if(a.sheet)try{a.sheet.cssRules&&(c=!0)}catch(d){("SecurityError"===d.name||"NS_ERROR_DOM_SECURITY_ERR"===d.name)&&(c=!0)}setTimeout(function(){c?b():k(a,b)},1)}}function l(b){for(var c=!1,d=r.combine,h={},i={},j=0,k=b.length;k>j;j++){var l=b[j];if(!z[l]){var n=e(l);if(c=!0,z[l]={id:l,status:"loading"},d){var o=n.match(/([^:]+:\/\/)?[^/]+\/?/);o=o&&o[0]||"";var p=n.substring(o.length);if(/\.css/.test(n)){var q=i[o];q||(q=i[o]={ids:[],uris:[]}),q.ids.push(l),q.uris.push(p)}else{var t=h[o];t||(t=h[o]={ids:[],uris:[]}),t.ids.push(l),t.uris.push(p)}}else{var u=function(a){return function(){m(a)}}(l);r.traceLog&&a.log(s+"request:\n"+n),/\.css/.test(n)?g(n,u):f(n,u),y++}}}var v=function(b){for(var c in b){var d=b[c],e=d.uris,g=function(a){return function(){m(a)}}(d.ids),h=c+(e.length>1?"??"+e.join(","):e[0]);r.traceLog&&a.log(s+"request:\n"+h),f(h,g),y++}};c&&(d&&(v(h),v(i)),r.showLoading(!0))}function m(b){r.showLoading(!1),y--,b="string"==typeof b?[b]:b;for(var c=0;c<b.length;c++)z[b[c]].status="loaded";r.traceLog&&a.log(s+"Response:\n"+b.join("\n")),n()}function n(){for(var b=x.length-1;b>=0;b--){var c=x[b],e=d(c.deps,r.parseCycle);if(0===e.notExist.length){x.splice(b,1),c.callback.apply(null,e.exist),n();break}if(0==b&&0==y){for(var b=x.length-1;b>=0;b--){for(var c=x[b],e=d(c.deps,!0),f=e.notExist,g=!1,h=x.length-1;h>=0;h--){for(var i=x[h].id,j=f.length-1;j>=0;j--)if(f[j]===i){g=!0;break}if(g)break}g||a.error(t+c.id),a.warn(s+c.id),a.warn(s+"----notExist : "+e.notExist)}a.error(t+e.notExist)}}}function o(b,c,d){var e=$H.alias(b),f=arguments.length;if(2==f?(d=c,c=[]):c="string"==typeof c?[c]:c,"[object Function]"===Object.prototype.toString.call(d))for(var g,h=d.toString(),i=/require\s*\(\s*['"]([^'"]+)['"]\s*\)/g;g=i.exec(h);)c.push(g[1]);r.require(c,function(){var c;if("function"==typeof d)try{r.traceLog&&a.log(s+"define:\n"+b),c=d.apply(null,arguments)}catch(f){return f.message=s+b+":\nfactory define error:\n"+f.message,void a.error(f)}else c=d;if(c){$H.ns(e,c);var g=typeof c;("object"==g||"function"==g)&&(c.$ns=b,c.$rns=e)}else a.warn(s+"factory no return:\n"+b)},e)}function p(c,e,f){var g="string"==typeof c?[c]:c;e=e||$H.noop;for(var h=[],i=[],j=!0,k=0,m=g.length;m>k;k++){var n=g[k];n=$H.alias(n),g.splice(k,1,n)}for(var k=0,m=g.length;m>k;k++){var n=g[k],o=d(n);o.notExist.length>0?(h.push(n),j&&(j=!1,b({id:f,deps:g,callback:e})),r.traceLog&&a.log(t+n)):i.push(o.exist[0])}return 0==h.length?(e&&e.apply(null,i),1==i.length?i[0]:i):void l(h)}var q=$H.isDev,r={traceLog:!1,combine:!q,isMin:!1,parseCycle:!1,rootPath:{handyRoot:"../../",handy:"../"},timeout:15e3,skinName:"skin",showLoading:function(){},define:o,require:p},s="[Handy Loader] ",t=s+"not found: ",u=document.head||document.getElementsByTagName("head")[0]||document.documentElement,v=navigator.userAgent,w=v.indexOf("AppleWebKit"),x=[],y=0,z={},A={};return window.define=r.define,window.require=r.require,r}),define("B.Object",function(){function a(a,b,c){if(!b)return a;a=a||{};var d=a.constructor,e=d.$isClass;if(c||e){var f=!1,g=null,h=!1,i=!1;c&&(f=c.notCover,i=c.deep,g=c.attrs,h=c.IsClone);var j,k=g||b;for(var l in k)if(j=b[l],i||b.hasOwnProperty(l)){var m=void 0!==a[l],n=f===!0?m:!1;if(z.isArr(f)?n=z.contains(f,l)&&m:z.isFunc(f)&&(n=f(l,j)),!n){var j=h?z.clone(j):j;e&&z.isFunc(j)&&!j.$name&&(j.$name=l,j.$owner=d),a[l]=j}}}else for(var o in b)a[o]=b[o];return a}function b(a,b){return z.extend(a,b,{notCover:!0})}function c(a,b,c,d){a.superProto||(a.superProto={});for(var e in b){if(z.isFunc(b[e]))if(a.superProto[e]){var f=a.superProto[e];a.superProto[e]=function(a,c){return function(){c.apply(this,arguments),b[a].apply(this,arguments)}}(e,f)}else a.superProto[e]=b[e];else a.superProto[e]=b[e];a[e]||(a[e]=b[e])}return c&&z.extend(a,c),b.toString!=b.constructor.prototype.toString&&(a.superProto.toString=function(){b.toString.apply(a,arguments)}),d&&a.prototype&&b.prototype,a}function d(a){return"number"==typeof a}function e(a){return"string"==typeof a}function f(a){return"boolean"==typeof a}function g(a){return z.isStr(a)||z.isNum(a)||z.isBool(a)}function h(a){return"undefined"==typeof a}function i(a){return"[object Function]"===y.prototype.toString.call(a)}function j(a){return"[object Array]"===y.prototype.toString.call(a)}function k(a){return"object"==typeof a&&!z.isArr(a)}function l(a){return z.isFunc(a)&&a.$isClass===!0}function m(a){return a&&a.constructor&&a.constructor.$isClass===!0}function n(a,b,c){if(typeof a==typeof b){if("object"!=typeof a)return a===b;if(a===b)return!0;if(z.isArr(a)&&z.isArr(b)){if(a.length!=b.length)return!1;for(var d=0,e=a.length;e>d;d++)if(!z.equals(a[d],b[d]))return!1;return!0}if(z.isArr(a)||z.isArr(b))return!1;if(z.count(a)!=z.count(b))return!1;for(var f in a){if(void 0===b[f])return!1;if(!z.equals(a[f],b[f]))return!1}return!0}return c!==!0&&z.isSimple(a)&&z.isSimple(b)&&a+""==b+""?!0:!1}function o(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor;if(b!=y&&b!=x.Array)return a;if(b==x.Date||b==x.RegExp||b==x.Function||b==x.String||b==x.Number||b==x.Boolean)return new b(a);try{var c=new b;for(var d in a)c[d]=z.clone(a[d]);return c}catch(e){return a}}function p(a){if(z.isArr(a))return 0==a.length;for(var b in a)return!1;return!0}function q(a,b,c){if(a){var d,e,f=0,g=a.length,h=void 0===g||z.isFunc(a);if(c)if(h){for(d in a)if(b.apply(a[d],c)===!1)break}else for(;g>f&&b.apply(a[f],c)!==!1;)e=a.length,g==e?f++:g=e;else if(h){for(d in a)if(b.call(a[d],d,a[d])===!1)break}else for(;g>f&&b.call(a[f],f,a[f])!==!1;)e=a.length,g==e?f++:g=e;return a}}function r(a,b){if(!a)return!1;var c=!1;return z.each(a,function(a,d){return z.equals(d,b)?(c=!0,!1):void 0}),c}function s(a,b){if("object"==typeof a&&"object"==typeof b){var c=!0;return z.each(b,function(d){return z.equals(b[d],a[d])?void 0:c=!1}),c}}function t(a){if(z.isArr(a))return a.length;var b=0;for(var c in a)b++;return b}function u(a,b){var c=z.isArr(a);if(b){if(c){var d=[];return z.each(a,function(a,b){void 0!==b&&d.push(b)}),d}return z.extend({},a,{isClone:!0,notCover:function(a,b){return void 0===b}})}return z.each(a,function(b,d){void 0===d&&(c?a.splice(b,1):delete a[b])}),a}function v(){var a=x.navigator.userAgent.match(/MSIE ([\d.]+)/);return a&&parseInt(a[0])<9?function(a,b,c){var d=[];if(a.length)for(var e=b||0,f=c||a.length;f>e;e++)d.push(a[e]);return d}:function(a,b,c){return Array.prototype.slice.call(a,b||0,c||a.length)}}function w(a){for(var b={},c=0,d=a.length;d>c;c++){var e=a[c];b[e.name]=e.value}return b}var x=window,y=x.Object,z={extend:a,extendIf:b,mix:c,isNum:d,isStr:e,isBool:f,isSimple:g,isUndef:h,isFunc:i,isArr:j,isObj:k,isClass:l,isInstance:m,equals:n,clone:o,isEmpty:p,each:q,contains:r,largeThan:s,count:t,removeUndefined:u,toArray:v(),fromArray:w};return z}),define("B.Class",["B.Object","L.Debug"],function(a,b){function c(b){var c=function(){var a,b,d=arguments;if(this.constructor!=c){a=d.callee;var e=function(){};e.prototype=a.prototype;var f=new e;return a.apply(f,d),f}return a=this,b=a.initialize,b?b.apply(a,d):void 0};return c.$isClass=!0,c.derive=function(a,b,c){var d=f.createClass();return f.inherit(d,this,a,b,c),d},c.prototype.callSuper=function(b,c){var d=this;b&&!b.$isClass&&void 0!==b.length&&(c=b,b=null);var e=arguments.callee.caller,f=e.$owner.superProto;c=c||e.arguments,b=b?b.prototype:f||d.constructor.superProto;var g=e.$name;if(b){var h=b[g];if(a.isFunc(h))return h.apply(d,c)}},b&&this.ns(b,c),c}function d(c,d,e,f,g){var h=function(){};if(h.prototype=d.prototype,a.extend(c,d,g),c.prototype=new h,c.prototype.constructor=c,c.superClass=d,c.superProto=d.prototype,d._onInherit)try{d._onInherit(c)}catch(i){b.error(i)}f&&a.extend(c,f),e&&a.extend(c.prototype,e)}function e(a){var b;return b="string"==typeof a?$H.ns(a):a,b&&(b.$singleton||(b.$singleton=new b))}var f={createClass:c,inherit:d,getSingleton:e};return f}),define("B.Function","B.Object",function(a){function b(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){var d=c.slice();return Array.prototype.push.apply(d,arguments),a.apply(b,d)}}function c(b,c,d,e){return a.isFunc(b)&&a.isFunc(c)?function(){var a=d||this,f={},g=arguments;return f.scope=e,f.target=a,f.method=b,0!=c.apply(f,g)?b.apply(a,g):!1}:b||c}var d={bind:b,intercept:c};return d}),define("B.Event","B.Object",function(a){function b(a,b){var c=/\s+/;if("object"==typeof a){if(b)for(var d in a)b([d,a[d]]);return!0}if("string"==typeof a&&c.test(a)){if(b)for(var e=a.split(c),f=0,g=e.length;g>f;f++)b([e[f]]);return!0}return!1}function c(b,c){var d=this,e=a.toArray(arguments,2);return d._parseEvents(c,function(a){d[b].apply(d,a.concat(e))})}function d(a,b,c){var d=this;return function(e){if(1!=d.isSuspend||"string"==typeof e&&e.indexOf(":")>0){if(void 0===c)return a.apply(b||d,arguments);var f=arguments;setTimeout(function(){a.apply(b||d,f)},c)}}}function e(a){for(var b,c=this;a.length;){oEvent=a.shift();var d=oEvent.delegation;if("number"==typeof oEvent.times&&(oEvent.times>1?oEvent.times--:c.off(oEvent.name,oEvent.handler)),b=d.apply(c,oEvent.args),c._stopEvent)return a.splice(0,a.length),!1}return c._stopEvent=!1,b}function f(a,b,c,d){var e=this;if(!e._parseEvents(a)||!e._parseCustomEvents("on",a,b,c,d)){"number"==typeof c&&(d=c,c=null);var f=e._eventCache,g=f[a];g||(g=f[a]=[]);var h=e._delegateHandler(b,c);g.push({times:d,handler:b,context:c,delegation:h})}}function g(){var b=this,c=a.toArray(arguments);c.push(1),b.on.apply(b,c)}function h(a,b){var c=this;if(0===arguments.length)return c._eventCache={},!0;if(!c._parseEvents(a)||!c._parseCustomEvents("off",a,b)){var d=c._eventCache,e=a.indexOf(".");if(!b&&0>=e){for(var f in d)(f.split(".")[0]==a||0==e&&f.indexOf(a)>=0)&&delete d[f];return!0}var g=d[a];if(!g)return!1;if(!b)return delete d[a],!0;for(var h=0,i=g.length;i>h;h++)if(g[h].handler==b)return g.splice(h,1),!0;return!1}}function i(){this._stopEvent=!0}function j(b){function c(c){if(c)for(var d=0,e=c.length;e>d;d++){var f=a.extend({},c[d]);f.args=h,f.name=b,i.push(f)}}var d=this;if(d._parseEvents(b)){var e=a.toArray(arguments);if(e.unshift("trigger"),d._parseCustomEvents.apply(d,e))return}var f,g=d._eventCache,h=arguments,i=[];if(b.indexOf(".")>0)f=g[b],c(f);else for(var j in g){var k=b.indexOf(".");(j.split(".")[0]==b||0==k&&j.indexOf(b)>=0)&&(f=g[j],c(f))}return c(g.all),d._execEvents(i)}function k(){var a=this;return a.isSuspend?!1:void(a.isSuspend=!0)}function l(){var a=this;return a.isSuspend?void(a.isSuspend=!1):!1}var m={_eventCache:{},_execEvtCache:[],_parseEvents:b,_parseCustomEvents:c,_delegateHandler:d,_execEvents:e,on:f,once:g,off:h,suspend:k,resume:l,stop:i,trigger:j};return m}),define("B.Date",function(){function a(a,b){var c=["日","一","二","三","四","五","六"],d=a.getDay();return b&&(d+=b%7+7,d%=7),c[d]}function b(a){return 0==a.getDay()||6==a.getDay()}function c(a){return a=new j(a.getFullYear(),a.getMonth()+1,0),a.getDate()}function d(a){var b=new j(a.getFullYear(),0,0),c=new j(a.getFullYear()+1,0,0);return Math.floor((c.getTime()-b.getTime())/864e5)}function e(a){var b=new j("1/1/"+a.getFullYear());return Math.ceil((a.getTime()-b.getTime())/864e5)}function f(a,b){if("string"==typeof a&&(a=k.parseDate(a)),"object"!=typeof a)return a;var b=b||"yyyy-MM-dd HH:mm:ss",c=a.getHours(),d=Math.floor((a.getMonth()+3)/3),e={"y+":a.getFullYear(),"M+":a.getMonth()+1,"d+":a.getDate(),"h+":c%12==0?12:c%12,"H+":c,"m+":a.getMinutes(),"s+":a.getSeconds(),"w+":k.getWeek(a),"q+":d,"Q+":["一","二","三","四"][d-1],"S+":a.getMilliseconds()};for(var f in e)if(new RegExp("("+f+")").test(b)){var g=RegExp.$1.length;b=b.replace(RegExp.$1,1==g?e[f]:("00"+e[f]).slice(-g))}return b}function g(a,b){var c=typeof a,d=new j;if("number"==c)return d.setTime(a),d;if("string"!=c)return a;var b=b||"yyyy-MM-dd HH:mm:ss",e=b.match(/[a-zA-Z]+/g),f=a.match(/\d+/g);if(f){d.setDate(1);for(var g=0;g<f.length;g++){var h=e[g],i=parseInt(f[g]);switch(h){case"yyyy":d.setFullYear(i);break;case"MM":d.setMonth(i-1);break;case"dd":var l=k.getDaysInMonth(d);i>l&&(i=l),d.setDate(i);break;case"HH":d.setHours(i);break;case"mm":d.setMinutes(i);break;case"ss":d.setSeconds(i);break;case"SS":d.setMilliseconds(i)}}return d}}function h(a){var b=new j;return a&&a!==!0?("number"!=typeof a&&(a=k.parseDate(a).getTime()),void(l=a-b.getTime())):(b.setTime(b.getTime()+l),a&&(b=k.formatDate(b)),b)}function i(a,b){if(a){a=k.parseDate(a);var c=k.now(),d=c.getTime()-a.getTime();if(0!=b){var e;if((d/=6e4)<60)e="分钟",d=d||1;else if((d/=60)<24)e="小时";else{if(!((d/=24)<30))return"30天前";e="天"}d=d>0?d:1,d=(Math.floor(d)||1)+e+"前"}return d}}var j=window.Date,k={getWeek:a,isWeeken:b,getDaysInMonth:c,getDaysInYear:d,getDayIndexOfYear:e,formatDate:f,parseDate:g,now:h,howLong:i},l=0;return k}),define("B.String",function(){function a(a){return a.replace(/<\/?[^>]+>/gi,"")}function b(a){if(!a)return a;var b=document.createElement("div"),c=document.createTextNode(a);return b.appendChild(c),b.innerHTML}function c(a){var b=document.createElement("div");return b.innerHTML=p.stripTags(a),b.childNodes[0].nodeValue}function d(a){return a=a.replace(/&/gi,"&amp;"),a=a.replace(/</gi,"&lt;"),a=a.replace(/>/gi,"&gt;"),a=a.replace(/\"/gi,"&quot;"),a=a.replace(/\'/gi,"&apos;"),a=a.replace(/\n/gi,"</br>"),a=a.replace(/ /gi,"&nbsp;")}function e(a){return a=a.replace(/&lt;/gi,"<"),a=a.replace(/&gt;/gi,">"),a=a.replace(/&quot;/gi,'"'),a=a.replace(/&apos;/gi,"'"),a=a.replace(/<\/?br>/gi,"\n"),a=a.replace(/&amp;/gi,"&"),a=a.replace(/&nbsp;/gi," ")}function f(a,b){return a=a.replace(/\n/gi,""),a=a.replace(/\\s+/gi,""),b||(a=a.replace(/<\/(address|blockquote|center|dir|div|dl|fieldset|form|hr|h[1-6]|isindex|iframe|menu|ol|p|pre|table|ul)>/gi,"\n"),a=a.replace(/<br>/gi,"\n")),a=a.replace(/<li>/gi," . "),a=a.replace(/<[^>]+>/g,""),a=p.decodeHTML(a)}function g(a){return p.encodeHTML(a)}function h(a,b){var c=/[\s\n]+/g;return a.replace(c,"")==b.replace(c,"")}function i(a){return a=a.replace(/(^(\s|　)+)|((\s|　)+$)/g,"")}function j(a,b){return b||(b=/[,%\'\"\/\\;|\<\>\^]/),a.search(b)>-1}function k(a){return a.replace(/[^\x00-\xff]/g,"**").length}function l(a,b,c){if(p.len(a)>b){c===!0?c=2:c>0||(c=0);var d=0,e=0;for(b-=c;b>e;)a.charCodeAt(d)>255?e+=2:e++,d++;a=a.substring(0,d);for(var d=0;c>d;d++)a+="."}return a}function m(a){return 0==a.search(/^\d+$/g)}function n(a){return/[\u4E00-\u9FA5]+/.test(a)}function o(a){return/^[\u4E00-\u9FA5]+$/.test(a)}var p={stripTags:a,escape:b,unescape:c,encodeHTML:d,decodeHTML:e,htmlToTxt:f,TxtToHtml:g,isEqualsHtml:h,trim:i,check:j,len:k,left:l,isNumStr:m,hasChn:n,isChn:o};return p}),define("B.Cookie",function(){function a(a,b){var c=a+"=",d="",e=document.cookie;if(e.length>0){var f=e.indexOf(c);if(-1!=f){f+=c.length;var g=e.indexOf(";",f);-1==g&&(g=e.length),d=e.substring(f,g),b||(d=unescape(d))}}return d}function b(a,b,c){var d=[];void 0!==a&&void 0!==b&&d.push(a+"="+escape(b)),c&&(void 0!==c.path&&d.push("path="+c.path),void 0!==c.domain&&d.push("domain="+c.domain),void 0!==c.expires&&d.push("expires="+c.expires),c.secure&&d.push("secure")),document.cookie=d.join(";")}function c(a){var b=new Date;b.setTime(b.getTime()-1),document.cookie=a+"=;expires="+b.toGMTString()}var d={getCookie:a,setCookie:b,delCookie:c};return d}),define("B.Util","B.Object",function(a){function b(a){return null!=a&&a==a.window}function c(){return++m}function d(a){var b=!a;if(b&&k)return k;a=a||document.body;var c=document.createElement("div");c.style.cssText="display:inline-block;padding:0;line-height:1em;position:absolute;top:0;visibility:hidden;font-size:1em";var d=document.createTextNode("M");c.appendChild(d),a.appendChild(c);var e=c.offsetHeight;return b&&(k=e),a.removeChild(c),e}function e(a,b){b=b||document.body,"number"==typeof a&&(a+="px"),b.style.fontSize=a}function f(a){"string"==typeof a&&(a=parseFloat(a.replace("em","")));var b=l.getDefFontsize();return Math.floor(a*b)}function g(a){var b=l.getDefFontsize(),c=1/b*a;return c=Math.ceil(1e3*c)/1e3}function h(a){for(var b=0,c=0;a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{top:c,left:b}}function i(a){for(var b=0;a;)b+=a.scrollTop||0,a=a.parentNode;return b}function j(b,c){var d=b[c];return a.isFunc(d)?d():d}var k,l={isWindow:b,uuid:c,getDefFontsize:d,setDefFontsize:e,em2px:f,px2em:g,position:h,scrollTop:i,result:j},m=0;return l}),define("B.Url","B.Object",function(a){function b(a){return/^(\w+:\/\/)?(\w+\.\w+)?[\w\/\.]+/.test(a)}function c(a){return/^(\w+:\/\/)?\w+\.\w+/.test(a)}function d(a){return/\.(jpg|jpeg|png|bmp|gif)$/.test(a)}function e(a){var b=[];for(var c in a)b.push(c+"="+a[c]);return b.join("&")}function f(a){if(!a)return{};for(var b=a.split("&"),c={},d=0,e=b.length;e>d;d++){var f=b[d].split("=");c[f[0]]=f[1]}return c}function g(a){var b=a&&a.indexOf("?"),c=a?b>-1?a.substring(b+1,a.indexOf("#")):"":top.location.search.substring(1);return c}function h(a,b){if(b){var c=b.indexOf("#");return b=b.match(/[^\?#]+/)[0]+"?"+a+(c>0?b.substring(c):"")}return top.location.search="?"+a,top.location.href}function i(a,b){var c=o.getQuery(a),d=o.strToParam(c);return b?d[b]:d}function j(b,c,d){var e,f=o.getQuery(c);return d?e=b:(e=o.strToParam(f),a.extend(e,b)),f=o.paramToStr(e),o.setQuery(f,c)}function k(a){var b=a?a.substring(a.indexOf("#")+1):top.location.hash.substring(1);return b}function l(a,b){return b?b=b.substring(0,b.indexOf("#")+1)+a:(top.location.hash="#"+a,top.location.href)}function m(a,b){var c=o.getHash(a),d=o.strToParam(c);return b?d[b]:d}function n(b,c,d){var e,f=o.getHash(c);if(d)e=b;else{var e=o.strToParam(f);a.extend(e,b)}return f=o.paramToStr(e),o.setHash(f,c)}var o={isUrl:b,isAbsUrl:c,isPic:d,paramToStr:e,strToParam:f,getQuery:g,setQuery:h,getQueryParam:i,setQueryParam:j,getHash:k,setHash:l,getHashParam:m,setHashParam:n};return o}),define("B.Array","B.Object",function(a){function b(a){return a}function c(a){return function(b){return b[a]}}function d(d){return null==d?b:a.isFunc(d)?d:c(d)}function e(a){return function(b){if(b===a)return!0;
for(var c in a)if(a[c]!==b[c])return!1;return!0}}function f(b){return function(c,e,f){var g={};return e=d(e),a.each(c,function(a,d){var h=e.call(f,d,a,c);b(g,h,d)}),g}}function g(b,c,d){var e=[];if(null==b)return e;var f=Array.prototype.map;return f&&b.map===f?b.map(c,d):(a.each(b,function(a,b){e.push(c.call(d,b,a))}),e)}function h(a,b){return this.map(a,c(b))}function i(b,c,d){var e=!1;if(null==b||!c)return e;var f=Array.prototype.some;return f&&b.some===f?b.some(c,d):(a.each(b,function(a,b,f){return e||(e=c.call(d,b,a,f))?!1:void 0}),!!e)}function j(b,c,d){var e=!0;if(null==b||!c)return e;var f=Array.prototype.every;return f&&b.every===f?b.every(c,d):(a.each(b,function(a,b,f){return(e=c.call(d,b,a,f))?void 0:!1}),!!e)}function k(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=u.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}var f=Array.prototype.indexOf;if(f&&a.indexOf===f)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1}function l(a,b,c){var d;return this.some(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d}function m(b,c,d){var e=[];if(null==b)return e;var f=Array.prototype.filter;return f&&b.filter===f?b.filter(c,d):(a.each(b,function(a,b,f){c.call(d,b,a,f)&&e.push(b)}),e)}function n(a,b){return this.filter(a,e(b))}function o(a,b){return this.find(a,e(b))}function p(b,c){var d=Array.prototype.slice.call(arguments,2),e=a.isFunc(c);return this.map(b,function(a){return(e?c:a[c]).apply(a,d)})}function q(a,b,c,e,f){c=d(c);for(var g=c.call(e,b),h=0,i=a.length;i>h;){var j=h+i>>>1,k=c.call(e,a[j]);(f?k>g:g>k)?h=j+1:i=j}return h}function r(a,b,c,e){var f=this;return b=d(b),f.pluck(f.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return e?-1:1;if(d>c||void 0===d)return e?1:-1}return a.index-b.index}),"value")}function s(){return f(function(a,b,c){a[b]?a[b].push(c):a[b]=[c]})}function t(){return f(function(a,b){a[b]?a[b]++:a[b]=1})}var u={map:g,pluck:h,some:i,every:j,indexOf:k,find:l,filter:m,where:n,findWhere:o,invoke:p,sortedIndex:q,sortBy:r,groupBy:s(),countBy:t()};return u}),define("B.Geo","B.Object",function(a){function b(b,c,d){function e(a){return a*Math.PI/180}function f(b){return b.get?b=[b.get("latitude"),b.get("longitude")]:a.isObj(b)&&(b=[b.latitude,b.longitude]),b}if(b&&c){var g,h,i,j,k=6371;b=f(b),g=b[0],h=b[1],c=f(c),i=c[0],j=c[1];var l=e(g),m=e(i),n=k*Math.acos(Math.cos(m)*Math.cos(l)*Math.cos(e(h)-e(j))+Math.sin(m)*Math.sin(l));if(n=n.toFixed(2),0!=d){if(isNaN(n)){if(g!=i||h!=j||!a.isNum(g)||!a.isNum(h))return"未知";n=0}n+="km"}return n}}var c={distance:b};return c}),define("B.Template",["B.Object","B.String","L.Debug","B.Function"],function(a,b,c){function d(a){var b=typeof a;return"string"!==b&&("number"===b?a+="":a=""),a}function e(a){return b.encodeHTML(d(a))}function f(b,c){var d=c.data;return a.isFunc(b)&&(b=b.call(d)),b&&!c.inverse||!b&&c.inverse?c.fn(d):void 0}function g(a,b){return b.inverse=!0,b.helpers["if"].call(this,a,b)}function h(a,b){var c=b.fn,d="";if(a){if(void 0!==a.length)for(var e=0,f=a.length;f>e;e++)d+=c(a[e]);else for(var e in a)d+=c(a[e]);return d}}function i(a,b){var c=b.fn,d=[];if(a){if(void 0!==a.length)for(var e=0,f=a.length;f>e;e++)d.push(c(a[e]));else for(var e in a)d.push(c(a[e]));return d.join("")}}function j(a){return v?"$r+="+a+";":"$r.push("+a+");"}function k(a){return a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),j('"'+a+'"')}function l(a,c){var c=c||{},d=a.exp.replace(/"/g,"'");d=b.trim(d).replace(/\s{2,}/g," ");var e,f=c.helpers,g=f&&f.getValue,h=f&&f.parseValue,i=a.blockName,k=a.children,l=a.num,m="\nif($tmp||$tmp===0){"+j("$tmp")+"}",o=(a.inverse?"inverse:true,":"")+"num:"+l+',context:$me,exp:"'+d+'",helpers:$helpers,data:$data}',p=g?'$helpers.getValue.call($me,"'+d+'",$data,{'+o+")":"($data&&$data."+d+")";if(i){var q="$program"+l;if(e='$tmp = $helpers["'+i+'"].call($me,'+p+", {fn:"+q+","+o+");"+m,k){var r=n(k,c),u=x[0]+"\n"+r.join("\n")+"\n"+x[1];s.splice(2,0,"\nfunction "+q+"($data){\n"+u+"\n}\n")}}else{var v;(v=d.match(/([^\s]+)\s([^\n]+)/))?(d=v[1],e="if (helper = $helpers."+d+') {\n$tmp = helper.call($me,"'+v[2]+'",{'+o+'); \n}else{$tmp="";}'):(e="if (helper = $helpers."+d+') {\n$tmp = helper.call($me,"",{'+o+"); \n}else{\nhelper = "+p+"; $tmp = typeof helper === functionType ? helper.call($me,{"+o+") : helper;\n"+(h?"\n$tmp=$helpers.parseValue.call($me,$tmp,{"+o+");":"")+"}",t.isEscape?"\n$tmp=escape($tmp);":""),e+=m}return e}function m(a,b){function d(a,b,c){for(var d,e=new RegExp(h+"[#/]"+a+"((?!"+i+").)*"+i,"ig"),f=0;d=e.exec(c);)if(d[0]==b){if(0==f)return d.index;f--}else f++;return-1}if(a){var e,f,g=b||{},h=t.openTag,i=t.closeTag;if(g.children?f=g.children:g.children=f=[],(e=a.indexOf(h))>=0){var j=a.substring(0,e);if(j&&f.push({html:j}),a=a.substring(e+h.length),0==a.indexOf("#")){a=a.substring(1);var k=a.match(/^[a-z]+/);if(!k)return void c.error("找不到辅助函数:"+a);var l=k[0];e=a.indexOf(i);var n=a.substring(l.length+1,e);a=a.substring(e+i.length);var o={num:++w,blockName:l,exp:n};f.push(o);var p=h+"/"+l+i;e=d(l,p,a);var q;if(-1==e)return void c.error("未找到块结束位置:"+p);if(q=a.substring(0,e),a=a.substring(e+p.length),m(q,o),"if"==l)for(var r=o.children,s=0,u=r.length;u>s;s++){var v=r[s];"else"==v.exp&&(v.exp=o.exp,v.blockName="if",v.num=++w,v.inverse=!0,v.children=r.slice(s+1),f.push(v),o.children=r.slice(0,s))}}else e=a.indexOf(i),f.push({num:++w,exp:a.substring(0,e)}),a=a.substring(e+i.length);m(a,g)}else a&&f.push({html:a});return g}}function n(a,b){var c=[];if(a)for(var d=0,e=a.length;e>d;d++){var f=a[d];f.html?c.push(k(f.html)):f.exp&&c.push(l(f,b))}return c}function o(b,d){var e=t.openTag,f=t.closeTag;b=b.replace(new RegExp(e+"!((?!"+f+").)*"+f,"ig"),""),t.isTrim&&(b=b.replace(/^[\s\n]+/,"").replace(/[\s\n]+$/,"").replace(new RegExp("("+f+"|\\>)(\\s|\\n)+(?=("+e+"|<))","ig"),"$1").replace(new RegExp(f+"[\\s\\n]+([^\\n]+)[\\s\\n]+(?=("+e+"|<))","ig"),f+"$1")),s=[x[0]],s.push('var escape=$helpers.escape,functionType="function",$me=this;');var g,h=d&&d.ns;h?(g=a.extend({},y["default"]),g=a.extend(g,y[h])):g=y["default"],d.helpers=g;var i=m(b);w=0;var j=n(i.children,d);s=s.concat(j),s.push(x[1]);var k=s.join("\n");try{var l=["$T","$helpers","$data",k],o=window.Function.apply(null,l);return function(a,b){return o.call(b||a,t,g,a)}}catch(p){c.log(k),c.error(p)}}function p(){return v}function q(b,c,d){a.isObj(c)?(y[b]||(y[b]={}),a.extend(y[b],c)):y[b][c]=d}function r(a,b,d){var e,f,g;if("string"==typeof a)e=a;else if(void 0!==a.length)e=a.join("");else if(e=a.tmpl,g=a.id)if(u[g])f=u[g];else if(!e){var h=document.getElementById(g);h&&(e=(h.value||h.innerHTML).replace(/\s/g,""))}if(!f){if(!e)return void c.error("模板未定义");f=o(e,a),g&&(u[g]=f)}if(!b)return f;try{return f(b,d)}catch(i){c.log(f.toString()),c.error(i)}}var s,t={openTag:"{{",closeTag:"}}",isTrim:!0,isEscape:!1,getIfPlusJoin:p,registerHelper:q,tmpl:r},u={},v="".trim,w=0,x=["var $r="+(v?'""':"[]")+",$tmp,helper;","return "+(v?"$r;":'$r.join("");')],y={"default":{"if":f,unless:g,each:v?h:i,escape:e,trim:b.trim}};return t}),define("B.HashChange",["L.Debug","B.Util"],function(a){function b(){h||(h=!0,o.listeners={},n?$(window).on("hashchange",function(){e(location.hash)}):(i=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(l.body)[0],$(i).one("load",function(){c(location.hash),setInterval(d,o.delay)})))}function c(b){if(b==j)return!1;var c=i.contentWindow,d=c.document;d.open(),d.write("<!doctype html><html><body>"+b+"</body></html>"),d.close(),j=b,a.log("set:"+i.contentWindow.document.body.innerText)}function d(){var b=location.hash,d=i.contentWindow.document.body.innerText;b!=j?(c(b),e(b)):d!=j&&(a.log("update:"+i.contentWindow.document.body.innerText),location.hash=d)}function e(a){var b=o.listeners;for(var c in b)b[c](a)}function f(a,c){return h||b(),c in o.listeners?void $D.error(new Error("Duplicate name")):(c=c||$H.expando+ ++k,o.listeners[c]=a,c)}function g(a){for(var b in o.listeners)a&&a!=b||delete o.listeners[b]}var h,i,j,k=0,l=document,m=l.documentMode,n="onhashchange"in window&&(void 0===m||m>7),o={delay:50,listen:f,unListen:g};return o}),define("B.Support","L.Browser",function(a){function b(){if(g)return g;if(a.pc())return g="high";var b=Math.max(i.body?i.body.clientWidth:0,window.screen.width),c=a.android();return g=a.ios()||b>600||c>4.2&&b>500?"high":c>=4&&b>450?"middle":"low"}function c(){for(var a=Date.now(),b=0;1e9>b;b++)(new Object).toString();1/(Date.now()-a)}function d(a,b){var c,d=i.createElement("div"),e="webkit ms Khtml O Moz ".split(" "),f=e.length;for(a=a.substring(0,1).toUpperCase()+a.substring(1);f--;)if(e[f]+a in d.style){c=e[f]+a;break}if(c){if(void 0===b)return c;d.style[c]=b;var g=d.style[c];return g.replace(/\s/g,"")===b?c:!1}return!1}function e(a){var b=j[a];if(!b)return a;if(1==b){if(void 0===c)for(var c,d=["webkit","","o"],e=i.createElement("div"),f=0;f<d.length;f++)if(void 0!==e.style[d[f]+"TransitionProperty"]){c=d[f];break}b=j[a]=c?c+a.substring(0,1).toUpperCase()+a.substring(1):a.toLowerCase()}return b}function f(){var b="";if(a.mobile())b="hui-mobile";else{b="hui-pc";var c=a.ie();c&&(b+=" ie"+c)}a.ios()&&(b+=" hui-ios"),a.phone()&&(b+=" hui-phone"),a.tablet()&&(b+=" hui-tablet"),i.documentElement.className+=" "+b+" hui"}var g,h={perf:b,testPerf:c,ifSupportStyle:d,normalizeEvent:e,mediaQuery:f},i=document,j={animationEnd:1,transitionEnd:1};if(h.mediaQuery(),6==a.ie())try{i.execCommand("BackgroundImageCache",!1,!0)}catch(k){}return h}),define("B.Validator",["B.String","B.Object"],function(a,b){function c(a,b){var c=b.rules;for(var d in c){var e=c[d],f="function"==typeof e?e:s[d],g=f(a,e);if(!g){var h=b.error||s.error,i=b.messages&&b.messages[d]||s.messages[d];return i=i.replace(/\{([^\}]+)\}/g,function(a,c){return e[c]||0==c&&e||b[c]||e||""}),h&&h(i),g}}return!0}function d(b){return a.trim(""+b).length>0}function e(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)}function f(a){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)}function g(a){return!/Invalid|NaN/.test(new Date(a).toString())}function h(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)}function i(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)}function j(a){return/^\d+$/.test(a)}function k(a){if(/[^0-9 \-]+/.test(a))return!1;var b=0,c=0,d=!1;a=a.replace(/\D/g,"");for(var e=a.length-1;e>=0;e--){var f=a.charAt(e);c=parseInt(f,10),d&&(c*=2)>9&&(c-=9),b+=c,d=!d}return b%10===0}function l(a,b){return a>=b}function m(a,b){return b>=a}function n(a,b){return a>=b[0]&&a<=b[1]}function o(c,d){var e=b.isArr(c)?c.length:a.trim(""+c).length;return e>=d}function p(c,d){var e=b.isArr(c)?c.length:a.trim(""+c).length;return d>=e}function q(c,d){var e=b.isArr(c)?c.length:a.trim(""+c).length;return e>=d[0]&&e<=d[1]}function r(a,b){return a===b}var s={messages:{required:"{name}不能为空",email:"请输入正确的邮件地址",url:"请输入正确的链接地址",date:"请输入正确的日期",dateISO:"请输入正确格式的日期",number:"{name}须是数字",digits:"{name}须是整数",creditcard:"请输入正确的信用卡号码",equalTo:"请输入相同的{name}",min:"{name}不能小于{0}",max:"{name}不能大于{0}",range:"{name}要在{0}到{1}之间",maxlength:"{name}长度不能超过{0}",minlength:"{name}长度不能少于{0}",rangelength:"{name}长度要在{0}到{1}之间"},valid:c,required:d,email:e,url:f,date:g,dateISO:h,number:i,digits:j,creditcard:k,min:l,max:m,range:n,minlength:o,maxlength:p,rangelength:q,equalTo:r};return s}),define("B.LocalStorage",["L.Browser","B.Event","L.Json"],function(a,b,c){function d(){if(!k&&a.ie()){var b="LocalStorageUserDataDiv";i=document.getElementById(b),i||(i=document.createElement("DIV"),i.style.display="none",i.id=b,i.addBehavior("#default#userData"),document.body.appendChild(i),i.load(m))}}function e(a){var b;return b=k?l.getItem(a):i.getAttribute(a),b=c.parseJson(b)}function f(a,b){b=c.stringify(b);try{k?l.setItem(a,b):(i.setAttribute(a,b),i.save(m))}catch(d){return $D.error(d),!1}return!0}function g(a){k?l.removeItem(a):(i.removeAttribute(a),i.save(m))}function h(){k?l.clear():i.unload()}var i,j={_init:d,getItem:e,setItem:f,removeItem:g,clear:h},k=window.localStorage&&window.localStorage.getItem,l=window.localStorage,m=document.domain;return j._init(),j}),define("B.Adapt",["B.Function","B.Event"],function(a,b){$G={config:{}};var c=window.$;return c.fn.remove=a.intercept(c.fn.remove,function(){var a=this.target;b.trigger("removeEl",a)}),1}),define("U.ImgCompress",["L.Browser","B.Object","B.Class"],function(a,b,c){function d(a,b){var c=1,d=arguments,e=d.length;switch(e){case 4:a.drawImage(b,d[2],d[3]/c);break;case 6:a.drawImage(b,d[2],d[3],d[4],d[5]/c);break;case 8:a.drawImage(b,d[2],d[3],d[4],d[5],d[6],d[7]/c);break;case 10:a.drawImage(b,d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9]/c)}}function e(b,c){function e(a){a=a||1;var e=h.width,f=h.height,g=e,k=f,l=void 0!==c.cropX,m=c.maxWidth,n=c.maxHeight,o=c.width,p=c.height,q=Math.ceil,r=function(a,b){var c=a/b;return o?(a=o,p||(b=a/c)):a>m&&(a=m,b=a/c),p?(b=p,o||(a=b*c)):b>n&&(b=n,a=b*c),{w:q(a),h:q(b)}},s=document.createElement("canvas"),t=s.getContext("2d"),u=c.cropW,v=c.cropH,w=c.cropX,x=c.cropY,y=0,z=0,A=function(){if(!i||!l){var b;(6===a||8===a)&&(l?(b=v,v=u,u=b):(b=f,f=e,e=b)),s.width=e,s.height=f}var c,b;if(!i){switch(a){case 3:l&&(w=g-w-u,x=k-x-v),c=180,y=-e,z=-f;break;case 6:l&&(b=w,w=x,x=k-b-v,b=f,f=e,e=b),c=90,z=-f;break;case 8:l&&(b=x,x=w,w=g-b-u,b=f,f=e,e=b),c=270,y=-e;break;default:c=0}c&&t.rotate(c*Math.PI/180)}};if(l){var B=r(u,v);if(i){u=B.w,v=B.h;var C=u/c.cropW;1!=C&&(e=q(e*C),w=q(w*C)),C=v/c.cropH,1!=C&&(f=q(f*C),x=q(x*C)),d(t,h,y,z,e,f)}else e=B.w,f=B.h,A(),d(t,h,w,x,u,v,y,z,e,f)}else{var B=r(e,f);e=B.w,f=B.h,A(),d(t,h,y,z,e,f)}t.globalCompositeOperation="destination-over",t.fillStyle="#ffffff",t.fillRect(0,0,e,f);var D,E=c.quality||.5;if(i){var F=new MegaPixImage(h);if(F.render(s,{maxWidth:e,maxHeight:f,quality:E,orientation:a}),l){var G=t.getImageData(w,x,u,v);s.width=u,s.height=v,t.putImageData(G,0,0)}D=s.toDataURL("image/jpeg",E)}else if(j){var H=new JPEGEncoder;D=H.encode(t.getImageData(0,0,e,f),100*E)}else D=s.toDataURL("image/jpeg",E);var I={orig:b,base64:D,clearBase64:D.substr(D.indexOf(",")+1)};c&&c.success&&c.success(I)}if(b){var f=b;if("undefined"!=typeof File&&b instanceof File){var g=window.URL||window.webkitURL;f=g.createObjectURL(b)}var h=new Image;h.src=f;var i=a.ios()<7,j=a.android();h.onload=function(){var c=[];i&&c.push("handyRoot/lib/megapix-image.js");var d=a.ios();d&&c.push("handyRoot/lib/exif.js"),j&&c.push("handyRoot/lib/jpeg_encoder_basic.js"),require(c,function(){d?EXIF.getData(b,function(){var a=EXIF.getTag(this,"Orientation");e(a)}):e()})}}}var f=c.createClass();return b.extend(f,{compress:e}),f}),define("E.Animate",["L.Browser","B.Support","B.Object"],function(a,b){function c(a){"number"==typeof a&&(a+="px");var b=void 0===a?"0px":a;return b}function d(){return void 0===f&&(h=b.ifSupportStyle("transform",j+0+k),f=!!h),f}function e(a,d,e){i.support3d()&&(e&&(g=g||b.ifSupportStyle("transition"),a.style[g]="all 0.15s linear"),a.style[h]=j+c(d&&d.x)+","+c(d&&d.y)+","+c(d&&d.z)+")")}var f,g,h,i={support3d:d,slide:e},j="translate3d(",k="px,0px,0px)";return i}),define("E.Draggable",["L.Browser","B.Class","B.Object"],function(a,b,c){function d(a,b){var c=this;c.options=b||{};var d=c.el=$(a),e=c.startHandler=function(a){c.start(a)};d.on(j[0],e),e=c.moveHandler=function(a){c.move(a)},d.on(j[1],e),e=c.endHandler=function(a){c.end(a)},d.on(j[2],e)}function e(b){var d=this;d.drag=!0,a.hasTouch()&&(b=b.originalEvent||b,b=b.touches[0]),d.eventX=b.clientX,d.eventY=b.clientY;var e=d.el[0],f=e.style.left||0;c.isStr(f)&&(f=parseInt(f.replace("px",""))),d.elX=f;var g=e.style.top||0;c.isStr(g)&&(g=parseInt(g.replace("px",""))),d.elY=g;var h=d.options;h.start&&h.start.call(d)}function f(b){var c=this;if(c.options.preventDefault!==!1&&a.mobile()&&b.preventDefault(),c.drag===!0){a.hasTouch()?(oEvt=b.originalEvent||b,oEvt=oEvt.touches[0]):oEvt=b;var d=oEvt.clientX-c.eventX,e=oEvt.clientY-c.eventY,f=c.el[0],g=c.elX+d,h=c.elY+e,i=c.options,j=i.move&&i.move({origX:c.elX,origY:c.elY,curX:g,curY:h,offsetX:d,offsetY:e},b);j!==!1&&(f.style.left=(j&&j.curX||g)+"px",f.style.top=(j&&j.curY||h)+"px")}}function g(){var a=this;a.drag=!1;var b=a.options;b.end&&b.end()}function h(){var a=this,b=a.el;b.off(j[0],a.startHandler),b.off(j[1],a.moveHandler),b.off(j[2],a.endHandler)}var i=b.createClass(),j=a.hasTouch()?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"];return c.extend(i.prototype,{initialize:d,start:e,move:f,end:g,destroy:h}),i}),define("CM.AbstractEvents",["B.Object","B.Class","B.Event"],function(a,b,c){function d(){var a=this;a._eventCache={},a._execEvtCache=[],a._listenTo=[]}function e(b,c,d){var e=this,f=a.toArray(arguments,3);return e._parseEvents(d,function(a){a.unshift(c),e[b].apply(e,a.concat(f))})}function f(a,b,c,d,e){var f=this;if(!f._parseListenToEvents("listenTo",a,b,c,d,e)){"number"==typeof d&&(e=d,d=null),d=d||f;var g=f._delegateHandler(c,d);f._listenTo.push({target:a,name:b,delegation:g,handler:c}),a.on(b,g,d,e)}}function g(b,c,d){var e=this;if(!e._parseListenToEvents("unlistenTo",b,c,d)){var f=e._listenTo;a.each(f,function(a,e){c&&e.name!=c||d&&e.handler!=d||b&&e.target!=b||(e.target.off(e.name,e.delegation),f.splice(a,1))})}}var h=b.createClass();return a.extend(h.prototype,c),a.extend(h.prototype,{initialize:d,_parseListenToEvents:e,listenTo:f,unlistenTo:g}),h}),define("P.Device",function(){function a(){return!!window.cordova}function b(){var a=navigator.connection;return a&&a.type}function c(){return"undefined"!=typeof Connection&&d.getNetType()===Connection.WIFI}var d={isPhonegap:a,getNetType:b,isWifi:c};return d}),define("P.Camera",function(){function a(a){var b=a.success,c=a.error,d=a.sourceType,e=Camera.PictureSourceType[d];navigator.camera.getPicture(function(a){b&&b(a)},function(a){c&&c(a)!==!1&&"no image selected"!=a&&a.indexOf("cancel")<0&&$C.Tips({text:"获取照片失败: "+a,theme:"error"})},{quality:a.quality||50,mediaType:Camera.MediaType.PICTURE,destinationType:Camera.DestinationType.FILE_URI,sourceType:e})}var b={getPicture:a};return b}),define("P.Geolocation","B.Function",function(a){function b(b,c){var d=this,e=a.intercept(d.onSuccess,b),f=a.intercept(d.onError,c);navigator.geolocation?navigator.geolocation.getCurrentPosition(e,f):c&&c({code:"unsupport"})===!1||new $C.Tips({showPos:"top",size:"mini",timeout:null,theme:"error",noMask:!0,text:"当前设备不支持获取位置"})}function c(){}function d(a){var b;switch(a.code){case a.PERMISSION_DENIED:b="您拒绝了位置请求";break;case a.POSITION_UNAVAILABLE:b="位置不可用";break;case a.TIMEOUT:b="请求超时";break;case a.UNKNOWN_ERROR:b="未知错误"}new $C.Tips({showPos:"top",size:"mini",noMask:!0,text:b,theme:"error"})}var e={getCurrentPosition:b,onSuccess:c,onError:d};return e}),define("D.DataStore",["B.Object","B.Class"],function(a,b){function c(b,c){var d;if(0===arguments.length)return g;if(b=a.isClass(b)?b.$rns:a.isInstance(b)?b.constructor.$rns:$H.alias(b),d=g[b]){if(void 0===c)return d;a.isObj(c)||(c={id:c});var e=[];return a.each(d,function(b,d){a.largeThan(d,c)&&e.push(d)}),e.length>0?e[0]:null}}function d(){}function e(a,b){"string"!=typeof a&&(b=a,a=null);var c=b.constructor.$rns,d=g[c]||(g[c]={});d[b.uuid]=b,a&&(g[a]||(g[a]=b))}var f=b.createClass();a.extend(f.prototype,{get:c,find:d,push:e});var g={};return $S=b.getSingleton(f),f}),define("D.AbstractDao",["B.Object","B.Function","B.LocalStorage","B.Class"],function(a,b,c,d){function e(a){var c=this;a=c.parseParam(a);var d=b.intercept(a.error,c.error);a.error=b.intercept(d,a.beforeErr);var e=b.intercept(a.success,c.success);return a.success=b.intercept(e,a.beforeSucc),a.beforeSend=b.intercept(b.bind(c.beforeSend,c,a),a.beforeSend),a.complete=b.intercept(b.bind(c.complete,c,a),a.complete),$.ajax(a)}function f(a){this.showLoading(!0,a)}function g(a){this.showLoading(!1,a)}function h(){}function i(){}function j(){}function k(b,d,e){var f=this;e=e||{};var g=e.storeType||"remote",h={type:"POST",dataType:"json"};e.url||(h.url=d.getUrl()),null!=e.data||!d||"create"!==b&&"update"!==b&&"patch"!==b||(h.data=e.attrs||d.toJSON(e));var i;return"remote"==g?(h.url+="/"+b+".do",a.extend(h,e),i=f.ajax(h)):i=c[f._localMethodMap[b]](h),d.trigger("request",d,e),i}var l=d.createClass();return a.extend(l.prototype,{_ajaxMethodMap:{create:"POST",update:"POST",patch:"PATCH","delete":"DELETE",read:"GET"},_localMethodMap:{create:"setItem",update:"setItem",patch:"setItem","delete":"removeItem",read:"getItem"},ajax:e,parseParam:$H.noop,beforeSend:f,complete:g,error:$H.noop,success:$H.noop,showLoading:$H.noop,get:h,set:i,remove:j,sync:k}),l}),define("D.AbstractData",["B.Util","B.Date","B.Class","D.AbstractDao","CM.AbstractEvents","D.DataStore"],function(a,b,c,d,e){function f(){var b=this;b.callSuper(),b.uuid=a.uuid(),b.dao=b.dao||c.getSingleton(d)}function g(){var a=this,c=a._isDirty;if(!c&&a.lastFetchTime){var d=b.now();c=d.getTime()-a.lastFetchTime.getTime()>=a.dirtyTime}return c}function h(){this._isDirty=!0}function i(a,c,d){var e=this;return"read"===a&&(e.lastFetchTime=b.now(),this._isDirty=!1),e.dao.sync(a,c,d)}function j(a){var b=this;return b.isDirty()?b.fetch(a):void 0}var k=e.derive({_isDirty:!0,dirtyTime:18e5,initialize:f,isDirty:g,setDirty:h,sync:i,fetch:$H.noop,fetchIf:j});return k}),define("D.Model",["B.Object","B.Date","B.String","B.Util","B.Function","D.AbstractData","D.DataStore"],function(a,b,c,d,e,f){function g(b){var c,d=this,e=d.prototype.idAttribute;if(c=b[e])return c;var f=d.prototype.fields;if(f){var g=f[e];if(g){var h=g.deps,i={};a.each(h,function(a,c){i[c]=b[c]});var j=new d(i);return j.id}}}function h(a,b,c){var d,e=this,f=!1;if(a){var g=e.getId(a);g&&(d=$S.get(e,{id:g}))}if(d)f=d.set(a).changed;else{var d=new e(a,b);f=!0,$S.push(d)}return c&&(c.changed=f),d}function i(b,c){var d=this;if(!c.validate||!d.validate)return!0;b=a.extend({},d._attributes,b);var e=d.validationError=d.validate(b,c)||null;return e?(d.trigger("invalid",d,e,a.extend(c,{validationError:e})),!1):!0}function j(a,b){var c=this;b=b||{};var d,e,f,g,h=c.fields,i={};for(var j in h){var d=h[j];if(d&&(e=d.deps))for(var k=0;k<e.length;k++)if(a.hasOwnProperty(e[k])){var l;if(g=d.parseDeps){for(var m=[],n=0;n<e.length;n++)m.push(c.get(e[n]));l=g.apply(c,m)}i[j]=l,f=!0;break}}return f?c.set(i,b).changed:void 0}function k(c,d,e){var f,g=this;if(!(f=g.fields))return d;var h,i,j;if((h=f[c])&&(i=h.type,j=h.options||{},j.saved=e&&e.saved,a.isStr(i)&&("Date"==i?d=b.parseDate(d):"string"==i||"str"==i?d=d?""+d:"":"number"==i||"num"==i?d=d?parseFloat(d):0:"boolean"==i||"bool"==i?d=d&&"false"!==d:i.indexOf(".")>0&&(i=require(i))),a.isClass(i)&&!(d instanceof i)))if(i.get){var k={};d=i.get(d,j,k),d&&(d._changedTmp=k.changed)}else{var l=g.get(c);if(l){var m=l.set(d,j);d=l,d._changedTmp=m.changed}else d=new i(d,j),d._changedTmp=!0}return d}function l(b,c,d,e){if("invalid"!=c&&"sync"!=c&&"request"!=c&&("add"!=c||a.isInstance(e))){var f,g=this,h=g.get(b),i=arguments[arguments.length-1];i&&i.$isStack||(i={uuid:","+d.uuid+",",$isStack:!0},f=!0);var j=i.uuid,k=","+g.uuid+",";if(j.indexOf(k)<0){i.uuid+=k;var l=a.toArray(arguments,1);f&&l.push(i),g.trigger.apply(g,["change:"+b,g,h].concat(l)),g.trigger.apply(g,["change",g,i].concat(l)),g._attrEvts[b]=1}var m=b+k;if(j.indexOf(m)<0){i.uuid+=m;var n={};n[b]=h,g._doDepends(n,{stack:i})}}}function m(b,c){var e=this;e.callSuper();var f=b||{};c||(c={}),e.cid="md_"+d.uuid(),e._attributes={},e._attrEvts={},c.custom&&a.extend(e,c.custom),c.parse&&(f=e.parse(f,c)||{}),e.set(e.getDefaults(),{silent:!0}),e.init&&e.init(f,c),e._savedAttrs={},e.set(f,c),e._changed={}}function n(){var b=this,c=b.constructor,d=c.prototype,e=d._defaults;if(!e||e===c.superProto._defaults){var f,g={};if(e={},f=b.fields)for(var h in f){var i=f[h];if(i&&a.isObj(i))if(i.hasOwnProperty("def"))e[h]=i.def;else{var j=i.type;j&&("string"==typeof j&&j.indexOf(".")>0&&(j=i.type=require(j)),j.prototype&&(g[h]=1,j.prototype.$isCollection&&(e[h]=[])))}else e[h]=i}d._defaults=e,d._nestedFields=g}return e}function o(){return a.clone(this._attributes)}function p(a){return this._attributes[a]}function q(a){return this._savedAttrs[a]}function r(a){return c.escape(this.get(a))}function s(a){var b=this.get(a);return null!==b&&void 0!==b}function t(b,c,d){var f,g=this,h={result:g};if("object"==typeof b?(f=b,d=c):(f={})[b]=c,d||(d={}),f instanceof J&&(f=f._attributes),!g._validate(f,d))return h.invalid=!0,h;var i=d.unset,j=d.silent,k=d.stack,l={};g._pending||(g._preAttrs=a.clone(g._attributes),g._changed={});var m=g._attributes,n=g._preAttrs;g.idAttribute in f&&(g.id=f[g.idAttribute]);var o=[],p=g._nestedFields;for(var q in f)p[q]?o.push(q):o.unshift(q);for(var r=0,s=o.length;s>r;r++){var q=o[r];c=g._parseFields(q,f[q],d);var t=m[q],u=t&&a.isInstance(t),v=c&&a.isInstance(c);u||v?(i?(delete m[q],t&&g.unlistenTo(t)):(m[q]=c,t&&c&&t.id==c.id||(t&&g.unlistenTo(t),c&&(c._changedTmp=!0,g.listenTo(c,"all",e.bind(g._onAttrEvent,g,q))))),(i||!c||c._changedTmp)&&(l[q]=c),c&&delete c._changedTmp):(a.equals(m[q],c)||(l[q]=c),a.equals(n[q],c)?delete g._changed[q]:g._changed[q]=c,i?delete m[q]:m[q]=c)}var w=!a.isEmpty(l);if(!j){w&&(g._pending=d);for(var x in l)g._attrEvts[x]||g.trigger("change:"+x,g,m[x],d,k)}if(w&&!j&&g._pending&&(d=g._pending,g.trigger("change",g,d,k)),w){var y=g._doDepends(l,j);y&&a.extend(l,y)}return g._pending=!1,h.changed=w?l:null,g._attrEvts={},d.saved&&w&&a.extend(g._savedAttrs,l),h}function u(a,b){return b=b||{},b.unset=!0,this.set(a,void 0,b)}function v(a){var b=this,c={};for(var d in b._attributes)c[d]=void 0;return a=a||{},a.unset=!0,b.set(c,a)}function w(b){var c=this._attributes;a.each(c,b)}function x(b,c){if(a.isBool(b)&&(c=b,b=void 0),c){var d=this._changed;return null==b?!a.isEmpty(d):a.contains(d,b)}var d=this.changedAttrs();return null==b?!!d:d&&a.contains(d,b)}function y(b){var c=this;b=b||{};var d=b.diff;!d&&b.diffSaved&&(d=c._attributes);var e,f=b.strictDiff,g=b.includeUnsave,h=!1,i=c.fields,j=b.diffSaved?c._savedAttrs:c._changing?c._preAttrs:c._attributes,k=function(b){for(var c in b){var k=!0;if(e=b[c],!g){var l=i.hasOwnProperty(c);k=!l||l&&a.isSimple(e)&&!i[c].unsave}if(k){var m=j[c];(!d||d&&!(f?a.equals(m,e):m==e||void 0===m&&""==e))&&((h||(h={}))[c]=e)}}};return k(d?d:c._changed),h}function z(b){var c=this,d=c.fields;b=b||c._attributes;var e={};return a.each(b,function(b,c){var f=d.hasOwnProperty(b),g=!f||f&&a.isSimple(c)&&!d[b].unsave;g&&(e[b]=c)}),e}function A(a){var b=this;return null!=a&&b._preAttrs?b._preAttrs[a]:null}function B(b){var c=this;b=b?a.clone(b):{},void 0===b.parse&&(b.parse=!0),b.saved=!0;var d=b.success,e=b.beforeSet;return b.success=function(a){c.set("fetching",!1);var f=c.parse(a,b);if(!e||0!=e(c,f,b)){var g=c.set(f,b);if(g.invalid)return!1;d&&d(c,f,b),c.trigger("sync",c,f,b)}},c.set("fetching",!0),c.sync("read",c,b)}function C(b,c,d){var e,f,g=this;if(null==b||"object"==typeof b?(e=b,d=c):"string"==typeof b&&(1===arguments.length&&(c=g.get(b)),(e={})[b]=c),a.isFunc(d)&&(d={success:d}),d=a.extend({validate:!0},d),e&&d.now){if(g.set(e,d).invalid)return!1}else if(!g._validate(e,d))return!1;void 0===d.parse&&(d.parse=!0),d.saved=!0;var h=d.success;d.success=function(b){g.saving=!1;var c=g.parse(b,d)||{};return d.now||(c=a.extend(e||{},c)),g.set(c,d).invalid?!1:(h&&h(g,b,d),void g.trigger("sync",g,b,d))};var i=d.error;d.error=function(){g.saving=!1,i&&i.apply(g,arguments)},f=g.isNew()?"create":d.update?"update":"patch";var j;if("patch"===f){var k=g.changedAttrs({diff:e,diffSaved:!0});if(!k){var l=d.noChange;return void(l&&l(g,d))}j=k}else{var m=a.extend({},g._attributes);j=a.extend(m,e)}j=g.filterUnsave(j),d.extAttrs&&a.extend(j,d.extAttrs),d.attrs=j,g.saving=!0,g.sync(f,g,d)}function D(b){var c=this;b=b?a.clone(b):{};var d=b.success,e=function(){c.trigger("destroy",c,b),c.off(),c.destroyed=!0};return b.success=function(a){(!b.now||c.isNew())&&e(),d&&d(c,a,b),c.isNew()||c.trigger("sync",c,a,b)},c.isNew()?(b.success(),!1):(c.sync("delete",c,b),void(b.now&&e()))}function E(){var a=this,b=d.result(a,"url");return b||$D.error(new Error("必须设置一个url属性或者函数")),a.isNew()?b:b.replace(/([^\/])$/,"$1/")+encodeURIComponent(a.id)}function F(a){return a.code?a.data:a}function G(){var a=this;return new a.constructor(a._attributes)}function H(){var a=this;return void 0===a.id}function I(b){return this._validate({},a.extend(b||{},{validate:!0}))}var J=f.derive({idAttribute:"id",$isModel:!0,_pending:!1,_validate:i,_doDepends:j,_parseFields:k,_onAttrEvent:l,initialize:m,getDefaults:n,toJSON:o,get:p,getSaved:q,escape:r,has:s,set:t,unset:u,clear:v,each:w,hasChanged:x,changedAttrs:y,filterUnsave:z,previous:A,fetch:B,save:C,destroy:D,getUrl:E,parse:F,clone:G,isNew:H,isValid:I},{getId:g,get:h});return J}),define("D.Collection",["B.Object","B.Array","B.Function","D.AbstractData","D.Model","D.DataStore"],function(a,b,c,d,e){function f(b){return a.isFunc(b)?b:function(a){return a.get(b)}}function g(){var a=this;a.length=0,a._models=[],a._byId={}}function h(b,c,d){var f=this;if(b instanceof e)return b;c=c?a.clone(c):{};var g=f.model.get(b,c,d);return g.validationError?(f.trigger("invalid",f,g.validationError,c),!1):g}function i(a){var b=this;b._byId[a.cid]=a,null!=a.id&&(b._byId[a.id]=a),b.listenTo(a,"all",c.bind(b._onModelEvent,b))}function j(a){var b=this;b.unlistenTo(a,"all")}function k(b,c,d,e){var f=this;if("add"!==b&&"remove"!==b||d===f){"destroy"===b&&f.remove(c,e),c&&b==="change:"+c.idAttribute&&(delete f._byId[c.previous(c.idAttribute)],null!=c.id&&(f._byId[c.id]=c));var g,h=arguments[arguments.length-1];h&&h.$isStack||(h={uuid:","+c.uuid+",",$isStack:!0},g=!0);var i=h.uuid,j=","+f.uuid+",";if(i.indexOf(j)<0){h.uuid+=j;var k=a.toArray(arguments);g&&k.push(h),f.trigger.apply(f,k)}}}function l(b,c){var d=this;d.callSuper(),c||(c={}),c.model&&(d.model=c.model),c.custom&&a.extend(d,c.custom),d._reset(),b&&d.reset(b,a.extend({silent:!0},c));var e=d.comparator;a.isStr(e)&&d.on("change:"+e,function(a,b){d.sortItem(b)})}function m(a){var c=this;return b.map(c._models,function(b){return b.toJSON(a)
})}function n(b,c){return c=a.extend({add:!0,remove:!1,merge:!1},c),this.set(b,c).result}function o(b,c){var d=this,e=!a.isArr(b);b=e?[b]:b,c||(c={});var f,g,h,i,j=[];for(f=0,g=b.length;g>f;f++)i=b[f],i=j[f]=a.isObj(i)&&!i.$isModel?d.findWhere(i):d.get(i),i&&(delete d._byId[i.id],delete d._byId[i.cid],h=d.indexOf(i),d._models.splice(h,1),d.length--,c.silent||(c.index=h,i.trigger("remove",i,d,c)),d._removeReference(i,c));return e?j[0]:j}function p(b,c){var d=this;if(!b)return{result:d};c=a.extend({add:!0,remove:!1,merge:!0},c),b instanceof L&&(b=b._models),c.parse&&(b=d.parse(b,c));var f,g,h,i,j,k,l=!a.isArr(b),m=l?b?[b]:[]:a.clone(b),n=d._models,o=c.at,p=d.model,q=d.comparator&&null==o&&c.sort!==!1,r=c.add,s=c.merge,t=c.remove,u=!1;for(f=0,g=m.length;g>f;f++)if(j=m[f]||{},h=j instanceof e?i=j:p.getId(j),k=d.get(h)){if(t&&(d.remove(k,c),u=!0),s){j=j===i?i.attributes:j,c.parse&&(j=k.parse(j,c));var v=k.set(j,c).changed;u=u||v}m[f]=k}else if(r){if(c.id=h,i=m[f]=d._prepareModel(j,c),!i)continue;d._addReference(i,c),q&&(o=d.sortedIndex(i)),null!=o?n.splice(o,0,i):n.push(i),d.length+=1,c.silent||i.trigger("add",i,d,c,o),u=!0}return{changed:u,result:d}}function q(b){a.each(this._models,b)}function r(a){for(var b=this._models,c=b.length-1;c>=0;c--)a(c,b[c])}function s(b,c){var d=this;c||(c={});for(var e=0,f=d._models.length;f>e;e++)d._removeReference(d._models[e],c);return c.previousModels=d._models,d._reset(),b&&(b=d.add(b,a.extend({silent:!0},c)).result),c.silent||d.trigger("reset",d,c),b}function t(b,c){var d=this;return d.add(b,a.extend({at:d.length},c)).result}function u(a){var b=this,c=b.at(b.length-1);return b.remove(c,a),c}function v(b,c){return this.add(b,a.extend({at:0},c)).result}function w(a){var b=this,c=b.at(0);return b.remove(c,a),c}function x(){return Array.prototype.slice.apply(this._models,arguments)}function y(a){var b=this;return null==a?void 0:b._byId[a]||b._byId[a.id]||b._byId[a.cid]}function z(){return this.length}function A(a){return this._models[a]}function B(b,c){var d=this;return a.isEmpty(b)?c?void 0:[]:d[c?"find":"filter"](function(a){for(var c in b)if(b[c]!==a.get(c))return!1;return!0})}function C(a){return this.where(a,!0)}function D(a){var b=this;return b.comparator||$D.error(new Error("没有比较器")),a||(a={}),"string"==typeof b.comparator||1===b.comparator.length?b._models=b.sortBy(b.comparator,b,a.desc):b._models.sort(c.bind(b.comparator,b)),a.silent||b.trigger("sort",b,a),b}function E(a,b){var c=this;void 0===b&&(b=c.sortedIndex(a));var d=c.indexOf(a),e=c._models;e.splice(d,1),e.splice(b,0,a),c.trigger("sortItem",a,b,d,c)}function F(a){return b.invoke(this._models,"get",a)}function G(){return this.url}function H(b){var c=this;b=b?a.clone(b):{};var d=b.success,e=b.beforeSet;return b.saved=!0,b.success=function(a){c.fetching=!1;var f=c.parse(a,b);if(!e||0!=e(c,f,b)){var g=b.reset?"reset":b.add?"add":"set";c[g](f,b),d&&d(c,f,b),c.trigger("sync",c,f,b)}},c.fetching=!0,c.sync("read",c,b)}function I(b,c){var d=this;if(c=c?a.clone(c):{},!(b=d._prepareModel(b,c)))return!1;c.now&&d.add(b,c);var e=c.success;return c.success=function(a,b){c.now||d.add(a,c),e&&e(a,b,c)},b.save(null,c),b}function J(a){return a.code?a.data:a}function K(){var a=this;return new a.constructor(a._models)}var L=d.derive({model:e,$isCollection:!0,_getIterator:f,_reset:g,_prepareModel:h,_addReference:i,_removeReference:j,_onModelEvent:k,initialize:l,toJSON:m,add:n,remove:o,set:p,each:q,eachDesc:r,reset:s,push:t,pop:u,unshift:v,shift:w,slice:x,get:y,size:z,at:A,where:B,findWhere:C,sort:D,sortItem:E,pluck:F,getUrl:G,fetch:H,create:I,parse:J,clone:K});return a.each(["map","some","every","find","filter","invoke","indexOf"],function(a,c){L.prototype[c]=function(){var a=Array.prototype.slice.call(arguments);return a.unshift(this._models),b[c].apply(b,a)}}),L.prototype.sortedIndex=function(a,c,d){var e=this._getIterator(this.comparator);return d=this.desc||d,b.sortedIndex(this._models,a,e,c,d)},a.each(["sortBy","groupBy","countBy"],function(a,c){L.prototype[c]=function(a,d,e){var f=this._getIterator(a);return e=this.desc||e,b[c](this._models,f,d,e)}}),L}),define("V.AbstractManager",["B.Class","B.Object","B.Util"],function(a,b,c){function d(){var a=this;a._types={},a._all={},a._allForCid={}}function e(a,b){var c=this;c._types[a]=b,b.prototype.xtype=a}function f(a){return b.isClass(a)?a:this._types[a]||$H.ns(a)}function g(a,b){var d=this,e=a.cid=b.cid||c.uuid(),f=a._id=d.generateId(e,a.xtype);d._all[f]=a,d._allForCid[e]=a}function h(a){var b=this._all,c=a.getId(),d=a.getCid();b[c]==a&&delete b[c];var e=this._allForCid;e[d]==a&&delete e[d]}function i(a,b){var c=this,d=a.find(".js-"+c.type);d.each(function(a,d){d=$(d);var e=d.attr("id"),f=c.get(e);f&&b(f)})}function j(a,b){var d=this,e=$H.expando+"-"+d.type+"-"+b+"-"+(a||c.uuid());return d._all[e]?void $D.error("id重复:"+e):e}function k(a){var b=this;return b._all[a]||b._allForCid[a]}function l(a){var b=this,c=b._all,d=[];for(var e in c){var f=c[e];if(!f.parent){f.match(a)&&d.push(f);var g=f.find(a);g.length>0&&(d=d.concat(g))}}return d}var m=a.createClass();return b.extend(m.prototype,{initialize:d,type:"manager",registerType:e,getClass:f,register:g,unregister:h,eachInEl:i,generateId:j,get:k,find:l}),m}),define("V.ViewManager",["B.Event","B.Class","V.AbstractManager"],function(a,b,c){function d(){var b=this;b.callSuper(),a.on("afterRender",function(a,c){b.afterRender(c)}),a.on("removeEl",function(a,c){b.destroy(c)})}function e(a){this.eachInEl(a,function(a){a.afterRender()})}function f(a){this.eachInEl(a,function(a){a.destroy(!0)})}var g=c.derive({type:"view",initialize:d,afterRender:e,destroy:f});return $V=b.getSingleton(g),g}),define("V.AbstractView",["L.Browser","B.Object","B.Class","B.Support","V.ViewManager","CM.AbstractEvents"],function(a,b,c,d,e,f){function g(a,c){var d=this,e=c.name;return d._parseEvents(e,function(e){var f=b.extend({},c);f.name=e[0],2==e.length&&(f.handler=e[1]),d[a].call(d,f)})}function h(a){var b=this;a=a||{},b.callSuper(),b._listeners=[],b.listeners=b.listeners.slice(0),b.manager=b.constructor.manager||c.getSingleton(e),b.manager.register(b,a),b.doConfig(a),b.init(a),b.parseItems(),0!=b.autoRender&&b.render(),b.inited=!0}function i(a){var c=this;c.initParam=a;var d=a||{};b.extend(c,d);var e;c.renderTo=$((e=d.renderTo)?e:document.body)}function j(){return this._id}function k(){return this.cid}function l(){return this._container}function m(){return this.html}function n(){var a=this,b=a.getHtml();a.renderTo[a.renderBy](b),a._container=$("#"+a.getId()),a.initListeners()}function o(a){return this.getEl().find(a)}function p(c){var e=this;if(!e._parseListenEvents("listen",c)&&(!c.hasOwnProperty("condition")||c.condition)){var f=c.name,g=c.context,h=c.times,i=c.target,j=c.custom||i||e._customEvents[f],k=c.handler;if(b.isFunc(i)&&(i=i.call(e)),j){var l=b.removeUndefined([i,f,k,g,h]);e[i?"listenTo":"on"].apply(e,l)}else{if(!e.listened)return void e.listeners.push(c);var m=e._listeners,n=c.el,o=c.method||"bind",p=c.selector,q=c.data,r=c.delay;b.isFunc(n)&&(n=n.call(e)),n=n?"string"==typeof n?e.findEl(n):n:e.getEl(),f=d.normalizeEvent(f),"mclick"===f&&(f="click",a.mobile()||void 0!==r||(r=50));var s=c.delegation=e._delegateHandler(k,g,r);if(a.mobile()&&n.tap){var t={click:"tap",dblclick:"doubleTap"};f=t[f]||f}p?q?n[o](p,f,q,s):n[o](p,f,s):q?n[o](f,q,s):n[o](f,s),m.push(c)}}}function q(a){var b=this;if(!b._parseListenEvents("unlisten",a)){var c=a.name,d=a.handler;if(a.custom)b.off(c,d);else{var e,f=a.el,g="delegate"==a.method?"undelegate":"unbind",h=a.selector;f=f?"string"==typeof f?b.findEl(f):f:b.getEl();for(var i=b._listeners.length-1;i>=0;i--){var j=b._listeners[i];if(j.handler==d){e=j.delegation,b._listeners.splice(i,1);break}}h?f[g](h,c,e):f[g](c,e)}}}function r(){var a=this;if(a.listened)return!1;a.listened=!0;for(var b=a.listeners,c=b.length-1;c>=0;c--)a.listen(b[c]);a.callChild()}function s(){for(var a=this,b=a._listeners,c=b.length-1;c>=0;c--)a.unlisten(b[c]);a.off(),a.unlistenTo(),a.callChild()}function t(){var a=this;if(!a.destroyed)return a.clearListeners(),a.unlistenTo(),a.getEl().remove(),a.destroyed=!0,a.manager.unregister(a),delete a._container,delete a.renderTo,delete a.html,!0}var u=f.derive({xtype:"View",renderBy:"append",autoRender:!0,_customEvents:{},listeners:[],_parseListenEvents:g,initialize:h,init:$H.noop,doConfig:i,getId:j,getCid:k,getEl:l,getHtml:m,render:n,findEl:o,parseItems:$H.noop,callChild:$H.noop,listen:p,unlisten:q,initListeners:r,clearListeners:s,destroy:t});return u}),define("V.ModelView",["B.Object","B.Template","V.AbstractView","D.Model","D.Collection"],function(a,b,c,d,e){function f(b,c){var d=c.context,e=c.data,f=c.exp;a.isFunc(b)&&(b=b.call(e));var g;(b&&!c.inverse||!b&&c.inverse)&&(g=c.fn(e));var h=c.num,i=d.getCid()+"-"+h;return d.ifBind(h,e)&&d.listenTo(e,"change:"+f,function(a,b,e){var f;(e&&!c.inverse||!e&&c.inverse)&&(f=c.fn(b)),d.updateMetaMorph(i,f)}),d.wrapMetaMorph(i,g)}function g(a,b){return b.inverse=!0,b.helpers["if"].call(this,a,b)}function h(a,b){var c=b.context,d=b.fn,f=E?"":[],g=b.num,h=c.getCid()+"-"+g;if(a){var i;if(a instanceof e)a.each(function(a,b){i=c.wrapMetaMorph(h+"-"+b.uuid,d(b)),E?f+=i:f.push(i)}),c.ifBind(g,a)&&(c.listenTo(a,"add",function(a,b,e,f){var g=c.wrapMetaMorph(h+"-"+b.uuid,d(b)),i=f.at;if(i){var j=e.at(i-1),k=h+"-"+j.uuid;$("#metamorph-"+k+"-end").after(g)}else $("#metamorph-"+h+"-end").before(g)}),c.listenTo(a,"remove",function(a,b){var d=h+"-"+b.uuid;c.updateMetaMorph(d,"","remove")}));else if(void 0!==a.length)for(var j=0,k=a.length;k>j;j++)i=c.wrapMetaMorph(h+"-"+j,d(a[j])),E?f+=i:f.push(i);else for(var j in a)i=c.wrapMetaMorph(h+"-"+j,d(a[j])),E?f+=i:f.push(i);return c.wrapMetaMorph(h,E?f:f.join(""))}}function i(a,b){var c=b.get?b.get(a):b[a];return c}function j(a,c){var d=c.context,e=c.data,f=c.exp,g=b.isEscape,h=c.helpers,i=c.num,j=d.getCid()+"-"+i;return d.ifBind(i,e)&&d.listenTo(e,"change:"+f,function(a,b,c){g&&(c=h.escape(c)),d.updateMetaMorph(j,c)}),g&&(a=h.escape(a)),d.wrapMetaMorph(j,a)}function k(a,b){for(var c,d=b.context,e=b.data,f=b.num,g=b.type,h=d.getCid()+"-"+f,i="bindAttr-"+h,j=[],k=[],n=d.ifBind(f,e),o=g&&d.ifBind(f,e,!0);c=F.exec(a);)"id"==c[2]?i=0==c[3].indexOf("this.")?d[c[3].substring(5)]:l(c[3],e):k.push(c);j.push('id="'+i+'"');for(var p,q,r,s,t,u=0,v=k.length;v>u;u++){c=k[u],q=c[2],p=c[3],r=p.split(" "),s=[];for(var w=0;w<r.length;w++)t=m(d,i,q,r[w],n,o,e),(t||0===t)&&s.push(t);var x=s.join(" ");if(q){if(g&&"value"==q&&(b.value=x,"textarea"===g))continue;x=(c[1]||"")+x+c[4]}else x&&(x=x+'="'+x+'"');x&&j.push(x)}return" "+j.join(" ")+" "}function l(a,b){return a?0==a.indexOf("#")?a.substring(1):i(a,b):a}function m(a,b,c,d,e,f,g){var h,i=a,b="#"+b,j=d.indexOf("?"),k=d.indexOf(":");if(0==d.indexOf("this."))return i[d.substring(5)];if(j>0||k>0){var m=d.substring(0,j>0?j:k),n=0>j?"":d.substring(j+1,k>0?k:d.length),o=0>k?"":d.substring(k+1,d.length);return h=l(m,g),e&&0!=m.indexOf("#")&&i.listenTo(g,"change:"+m,function(a,d,e){var f=$(b);c?"class"==c?e?(o&&f.removeClass(o),n&&f.addClass(n)):(n&&f.removeClass(n),o&&f.addClass(o)):f.attr(c,e?n:o):e?f.prop(n,!0):f.prop(n,!1)}),h?n:o}return h=l(d,g),0!=d.indexOf("#")&&(e&&i.listenTo(g,"change:"+d,function(a,d,e){var f=$(b);if("class"==c)f.removeClass(h),f.addClass(e),h=e;else{var g=e||"";"value"===c?g!==f.val()&&f.val(g):f.attr(c,g)}}),"value"==c&&f&&i.listen({name:"input propertychange",el:b,handler:function(a){g.set(d,a.target.value)}})),h}function n(a,b){b.type="input";var c=k(a,b);return"<input "+c+"/>"}function o(a,b){b.type="textarea";var c=k(a,b);return"<textarea "+c+">"+b.value+"</textarea>"}function p(){var a=this;a._bindModelNums={},a._bindElNums={},a.callSuper()}function q(){var a=this;a.callSuper();var b=a.modelClass||d;a.model||(a.model=new b(a.data)),a.xmodel=a.model}function r(){var b=this,c=b.tmpl;a.isArr(c)&&(c=c.join(""));var d=H.test(c),e="#js-"+b.manager.type+" #js-"+b.xtype;if(d){var f=c.match(I)[1];f&&(K.test(c)||(f=f.replace(/([^\s]+)/g,"#$1")),e+=" "+f),c=c.replace(I,"")}var g=' id=this._id class="'+e+'"';c=J.test(c)?c.replace(L,"$1"+g):c.replace(G,"$1 {{bindAttr"+g+"}}"),b.tmpl=c}function s(){var c=this,d=c.tmpl;return a.isFunc(d)||(c.preTmpl(),d=c.constructor.prototype.tmpl=b.tmpl({tmpl:c.tmpl,ns:"ModelView"})),c.tmpl=d}function t(){var a=this;if(a.html)return a.html;var b=a.getTmplFn(),c=a.html=b(a.xmodel,a);return c}function u(a,b,c){var f=this,g=f.bindType;if("none"===g||!c&&"el"===g||c&&"model"===g)return!1;var h=c?f._bindElNums:f._bindModelNums,i=!h[a]&&(b&&(b instanceof d||b instanceof e)||!b);return h[a]=1,i}function v(a,b){return $("#metamorph-"+a+(b?"-end":"-start"))}function w(a,b,c){var d=this;if("append"==c)return void d.getMetaMorph(a,!0).before(b);var e=d.getMetaMorph(a);if(0!=e.length){for(var f,g="metamorph-"+a+"-end",h=e[0].nextSibling;h&&h.id!=g;)f=$(h),h=h.nextSibling,f.remove();void 0!==b&&e.after(b),"remove"==c&&(e.remove(),$(h).remove())}}function x(a,b){if(b=void 0===b?"":b,"none"!==this.bindType){var c='<script id="metamorph-',d='" type="text/x-placeholder"></script>';b=c+a+"-start"+d+b+c+a+"-end"+d}return b}function y(a){return this.xmodel.get(a)}function z(a,b){this.xmodel.set(a,b)}function A(a){this.xmodel.set(a)}function B(){return this.xmodel}function C(){var a=this;if(!a.destroyed)return delete a.model,delete a.xmodel,a.callSuper(),!0}var D=c.derive({bindType:"both",initialize:p,doConfig:q,preTmpl:r,getTmplFn:s,getHtml:t,ifBind:u,getMetaMorph:v,updateMetaMorph:w,wrapMetaMorph:x,get:y,set:z,update:A,getXmodel:B,destroy:C});b.registerHelper("ModelView",{"if":f,unless:g,each:h,getValue:i,parseValue:j,bindAttr:k,input:n,textarea:o});var E=b.getIfPlusJoin(),F=/((\w+)=['"]?)?([#\w][\s\w\.\?:#-]*)(['"]?)(?!\w*=)/g,G=/[^<]*(<[a-zA-Z]+)/,H=/^[^>]+class=/,I=/class=['"]?([#\w][\s\w\.\?:#-]*)(['"]?)(?!\w*=)/,J=/^[^>]+{{bindAttr/,K=/^[^>]+{{bindAttr((?!}}).)class=/,L=/({{bindAttr)/;return D}),define("V.View",["B.Object","B.Template","V.ViewManager","V.ModelView","D.Model"],function(a,b,c,d,e){function f(a,b){var c=b.context,d=b.num,e=c.getCid()+"-"+d,f=c.findHtml(a);return c.ifBind(d)&&c.on("add",function(b,d,f){if(d.match(a.replace(/^>\s?/,""))){if(void 0!==f){for(var g=c.getMetaMorph(e),h=0;f>h;h++)g=g.next();g.after(d.getHtml())}else c.updateMetaMorph(e,d.getHtml(),"append");d.afterRender()}}),c.wrapMetaMorph(e,f)}function g(b){var c=this.prototype;a.extend(c,b,{notCover:function(d){return"listeners"==d?(c[d]=(b[d]||[]).concat(c[d]||[]),!0):"xtype"==d||"constructor"==d?!0:"_customEvents"==d||"xConfig"==d||"fastUpdateMethod"==d?(c[d]=a.extendIf(b[d],c[d]),!0):void 0}})}function h(b){var c=new this(a.extend({autoRender:!1},b));return c.getHtml()}function i(b,c){var d=this,e=arguments,f=e.callee.caller,g=f.$owner.prototype;return 0==e.length?(e=f.arguments,e=a.toArray(e),b=f.$name,c=e.shift()):e=a.toArray(e,2),a.isArr(c)?(a.each(c,function(a,c){g[b].apply(d,[c].concat(e))}),!0):!1}function j(){var a=this;a.items=[],a.children=[],a.callSuper()}function k(b){var c=this;if(!c.configed){c.configed=!0,c.initParam=b,"string"==typeof b&&(b={text:b});var d=b||{};a.extend(c,d,{notCover:function(b,e){var f;(f=/^{{(((?!}}).)+)}}$/.exec(e))&&(f=f[1],(c.refModelAttrs||(c.refModelAttrs={}))[b]=f);c[b];return c._defaultEvents[b]?(c.listeners.push({name:b,handler:d[b]}),!0):c._customEvents[b]?(c.on(b,d[b]),!0):"defItem"==b?(c[b]=a.extend(c[b],e),!0):"listeners"==b?(c.listeners=c.listeners.concat(a.isArr(e)?e:[e]),!0):"items"==b?(c.add(e),!0):"extCls"==b&&c[b]?(c[b]+=" "+e,!0):"xtype"==b?("View"==c[b]&&(c[b]="string"==typeof e?e:e.$ns),!0):void 0}});var f;if(f=d.renderTo){if(a.isFunc(f))f=f.call(c);else if(a.isStr(f)&&0==f.indexOf(">")){var g=c.parent;f=g.inited&&g.findEl(f.substring(1))}else f=$(f);c.renderTo=f}else c.renderTo=$(document.body);var h=c.getRefModel();if(h){var i=c.refModelAttrs;for(var j in i){var k,l=i[j];if(l.indexOf(".")>0){var m=l.split(".");k=h.get(m[0]),k=k&&k.get(m[1])}else k=h.get(l);c[j]=k}}var n=c.xConfig,o=c.modelClass,p=c.constructor;if(oProto=p.prototype,!o||(o=oProto.modelClass)&&o===p.superProto.modelClass){var q;q=n?e.derive({fields:n}):e,o=oProto.modelClass=q}var r={};a.each(n,function(a){var b=c[a];void 0!==b&&(r[a]=b)}),c.xmodel=new o(r),c.bindRefModel()}}function l(){var a,b=this,c=(b.getId(),(b.extCls||"")+" "+b.constructor.$ns.replace(/\./g,"-"));"visibility"==b.displayMode?a="visibility:hidden;":c+=" hui-hidden";var d=b.callSuper();a&&(d=d.replace(Z,'$1 style="'+a+'"')),c&&(d=d.replace(/(class=['"])/,"$1"+c+" "));var e;return(e=b.wrapHtml)&&(d=e[0]+d+e[1]),b.html=d}function m(a){for(var b=this,c=b.find(a),d=[],e=0;e<c.length;e++)d.push(c[e].getHtml());return d.join("")}function n(){var a=this,b=this.getEl(),c=a.style||{};void 0!==a.width&&(c.width=a.width),void 0!==a.height&&(c.height=a.height),b.css(c)}function o(){return this.trigger("beforeRender")}function p(){var a=this;if(0==a.beforeRender())return!1;var b=a.getHtml();a.renderTo[a.renderBy](b),a.afterRender()}function q(a){var b=this;return b.rendered?!1:(b.trigger("render"),b._container=$("#"+b.getId()),b.callChild([!0]),b.rendered=!0,b.initStyle(),1!=b.notListen&&b.initListeners(),b.disabled&&b.disable(),b.trigger("afterRender"),void(a||b.hidden||b.show()))}function r(){return this.trigger("beforeShow")}function s(a,b){var c=this;if(c.showed||0==c.beforeShow()||b&&c.hidden)return!1;if(!a&&c.delayShow)return void setTimeout(function(){_.prototype.show.call(c,!0)},0);c.trigger("show"),c.showed=!0,c.hidden=!1;var d=c.getEl();"visibility"==c.displayMode?d.css({visibility:"visible"}):d.removeClass("hui-hidden"),c.callChild([null,!0]),c.afterShow()}function t(){var a=this;setTimeout(function(){a.trigger("afterShow")},0)}function u(){return this.trigger("beforeHide")}function v(a){var b=this;if(!b.showed||0==b.beforeHide())return!1;b.showed=!1;var c=b.getEl();"visibility"==b.displayMode?c.css({visibility:"hidden"}):c.addClass("hui-hidden"),1!=a&&(b.hidden=!0),b.trigger("hide"),b.callChild([!0]),b.afterHide()}function w(){this.trigger("afterHide")}function x(){var a=this;a.resume(),a.getEl().removeClass("hui-disable").find("input,textarea,select").removeAttr("disabled")}function y(){var a=this;a.suspend(),a.getEl().addClass("hui-disable").find("input,textarea,select").attr("disabled","disabled")}function z(a,b){var c=this;if(b?!b instanceof _&&(b=c.find(b)[0]):b=c,0==a){var d=b.children;return d}return b.getEl().html()}function A(a,b){var c=this;return b?(!b instanceof _&&(b=c.find(b)[0]),b.setContent(a)):"string"!=typeof a?(c.set("content",""),c.add(a)):(c.set("content",a),void c.remove())}function B(){var a=this;return a.isSuspend?!1:(a.isSuspend=!0,void a.callChild())}function C(){var a=this;return a.isSuspend?(a.isSuspend=!1,void a.callChild()):!1}function D(a){return this.getEl().parents(a)}function E(a){var b,c=this,d=c.xConfig,e=c.xmodel;return b=e&&void 0!==d[a]?e.get(a):c[a]}function F(a,b){var c=this,d={};d[a]=b,c.fastUpdate(d)||(c[a]=b)}function G(){var a,b=this;if(a=b.refModel||b.model)return a;for(var c=b.parent;c;){if(a=c.refModel||c.model)return b.refModel=a;if(!c.parent)return c.model;c=c.parent}}function H(){function a(a,d){var g;if(d.indexOf(".")>0){var h=d.split(".");d=h[0],g=h[1]}("both"==c||"bindRef"==c)&&b.listenTo(e,"change:"+d,function(c,d,e){g&&(e=e&&e.get(g)),b.set(a,e)}),("both"==c||"bindXmodel"==c)&&b.listenTo(f,"change:"+a,function(a,b,c){if(g){var f=e;f=f.get(d),f&&f.set(g,c)}else e.set(d,c)})}var b=this,c=b.bindRefType,d=b.refModelAttrs;if(c&&d){var e=b.getRefModel(),f=b.xmodel;for(var g in d)a(g,d[g])}}function I(a,b){for(var c,d=this.children,e=d.length,f=0;e>f;){var g=d[f];if(c=b?a.apply(g,b):a(f,g),c===!1)break;e==d.length?f++:e=d.length}}function J(a,b){if("*"==a)return!0;b=b||this;var c,d,e,f,g;a=a.replace(/^#([^\s,\[]+)/,"[cid=$1]"),a=a.replace(/^\.([^\s,\[]+)/,"[cClass=$1]"),a=a.replace(/^([^\[]+)/,"[xtype=$1]");for(var h=function(a){return b.get?b.get(a):b[a]},i=/\[(\!?[^=|\!]+)(=|\!=)?([^=]*)?\]/g;c=i.exec(a);)if(d=c[1],e=c[2]){if(g=h(d),f=c[3],"false"===f?f=!1:"true"===f?f=!0:"null"===f?f=null:"undefined"===f&&(f=void 0),"="===e?g!=f:g==f)return!1}else if(g=h(d.replace("!","")),0==d.indexOf("!")&&g||d.indexOf("!")<0&&!g)return!1;return!0}function K(b,c,d){var e=this,c=c||[];if(b){if(a.isNum(b)){var f=e.children[b];c.push(f)}else if(a.isStr(b)){if(b.indexOf(",")>0)return a.each(b.split(","),function(a,b){c=c.concat(e.find(b))}),c;d=0==b.indexOf(">");var g,h,g=b.replace(/^>?\s?/,""),i=g.search(/\s/);i>0&&(h=g.substring(i+1),g=g.substring(0,i)),e.each(function(a,e){var f=e.match(g);f&&(h?e.find(h,c):c.push(e)),d||e.find(b,c)})}else if(a.isFunc(b)){var j=a.isClass(b);e.each(function(a,e){(j&&e instanceof b||!j&&b(e))&&c.push(e),d||e.find(b,c)})}}else c=c.concat(e.children);return c}function L(a){for(var b=this,c=b;c.parent;)if(c=c.parent,a&&b.match(a,c))return c;return a||c===b?null:c}function M(){var a=this,b=a.parent;if(b){var c;return b.each(function(b,d){return d==a?(c=b,!1):void 0}),c}return null}function N(a,b){var c=this;0!=c.children.length&&(a&&"string"!=typeof a&&(b=a,a=null),a=a||arguments.callee.caller.$name,c.each(function(c,d){b?d[a].apply(d,b):d[a].call(d)}))}function O(b,c){var d=this;if(!d._applyArray()&&(!b.hasOwnProperty("condition")||b.condition)){var e=void 0===c;if(!d.startParseItems){var f=d.items;return void(e?f.push(b):f.splice(c,0,b))}if(b instanceof _)b.parent=d;else{d.defItem&&a.extend(b,d.defItem,{notCover:!0}),d.parseItem(b);var g=d.manager.getClass(b.xtype);if(g){var h=d._inheritAttrs;for(var i in h)void 0!==b[i]||g.prototype.hasOwnProperty(i)||(b[i]=d[i]);var j=b.renderTo;!d.inited&&a.isStr(j)&&0==j.indexOf(">")&&(j=null),j||(b.autoRender=!1),b.parent=d,b=new g(b)}else $D.error("xtype:"+b.xtype+"未找到")}var k=d.children;return e?k.push(b):k.splice(c,0,b),d.trigger("add",b,c),b}}function P(b){var c=this;if(!c._applyArray()){var d,e=c.children,f=!1;if(a.isNum(b))d=b,b=e[d];else if(a.isStr(b)||a.isFunc(b)){b=c.find(b,null,!0);for(var g=0,h=b.length;h>g;g++){if(0==c.remove(b[g]))return!1;f=!0}}else if(b instanceof _){if(b.parent!=c)return b.parent.remove(b);for(var g=0,h=e.length;h>g;g++)if(e[g]==b){d=g;break}}return void 0!==d&&0!=b.destroy(!0)&&(e.splice(d,1),f=!0),c.trigger("remove",b),f}}function Q(){var b=this;b.startParseItems=!0;var c=b.items;if(c){c=a.isArr(c)?c:[c];for(var d=0,e=c.length;e>d;d++)b.add(c[d])}}function R(){return this.trigger("beforeUpdate")}function S(b){var c=this,d=c.xmodel;if(!d)return!1;var e=c.xConfig,f=c.fastUpdateMethod,g=!0,h={},i={},j={};return a.each(b,function(a,b){e.hasOwnProperty(a)?h[a]=b:f[a]?i[a]=b:(j[a]=b,g=!1)}),g?(d.set(h),a.each(i,function(a,b){f[a].call(c,b)}),!0):!1}function T(b,c){var d=this;if(!b||0==d.beforeUpdate())return!1;var e;if(d.fastUpdate(b)===!0)e=d;else{var f=d.parent,g=$("<span></span>").insertBefore(d.getEl());if(c||(void 0===b.autoRender&&(b.autoRender=!0),b=a.extend(b,d.initParam,{notCover:!0})),b=a.extend(b,{xtype:d.xtype,renderBy:"replaceWith",renderTo:g},{notCover:["xtype"]}),b.cid&&b.cid!=d.cid||(b._id=d._id),f){var h=d.index();if(0==f.remove(d))return g.remove(),!1;e=f.add(b,h)}else{if(0==d.destroy())return g.remove(),!1;e=new d.constructor(b)}}return d.trigger("update",e),d.afterUpdate(e),e}function U(a){return this.update(a,!0)}function V(a){this.trigger("afterUpdate",a)}function W(){return this.trigger("beforeDestroy")}function X(a){var b=this;if(0==b.beforeDestroy())return!1;if(!b.destroyed)return b.callChild(),b.trigger("destroy"),b.clearListeners(),b.getEl().remove(),b.destroyed=!0,!a&&b.parent&&b.parent.remove(b),b.manager.unregister(b),delete b.initParam,delete b._container,delete b.renderTo,delete b._listeners,delete b.html,delete b.xmodel,delete b.model,delete b.children,b.afterDestroy(),!0}function Y(){this.trigger("afterDestroy")}var Z=/^(<[a-zA-Z]+)/,_=d.derive({xtype:"View",xConfig:{},tmpl:"<div>{{placeItem}}</div>",bindRefType:"bindRef",fastUpdateMethod:{renderTo:function(a){this.getEl()[this.renderBy]($(a))},hidden:function(a){a?this.hide():this.show()},disabled:function(a){a?this.disable():this.enable()}},_inheritAttrs:{bindType:1,bindRefType:1,model:1},_customEvents:{beforeRender:1,render:1,afterRender:1,beforeShow:1,show:1,afterShow:1,beforeHide:1,hide:1,afterHide:1,beforeUpdate:1,update:1,afterUpdate:1,beforeDestroy:1,destroy:1,afterDestroy:1,add:1,remove:1,Select:1,Unselect:1},_defaultEvents:{mousedown:1,mouseup:1,mouseover:1,mousemove:1,mouseenter:1,mouseleave:1,dragstart:1,drag:1,dragenter:1,dragleave:1,dragover:1,drop:1,dragend:1,touchstart:1,touchmove:1,touchend:1,touchcancel:1,keydown:1,keyup:1,keypress:1,click:1,dblclick:1,focus:1,focusin:1,focusout:1,contextmenu:1,change:1,submit:1,swipe:1,swipeLeft:1,swipeRight:1,swipeUp:1,swipeDown:1,doubleTap:1,tap:1,singleTap:1,longTap:1},_applyArray:i,initialize:j,doConfig:k,getHtml:l,findHtml:m,initStyle:n,beforeRender:o,render:p,afterRender:q,beforeShow:r,show:s,afterShow:t,beforeHide:u,hide:v,afterHide:w,enable:x,disable:y,getContent:z,setContent:A,suspend:B,resume:C,parentsEl:D,get:E,set:F,getRefModel:G,bindRefModel:H,each:I,match:J,find:K,parents:L,index:M,callChild:N,add:O,remove:P,parseItem:$H.noop,parseItems:Q,beforeUpdate:R,fastUpdate:S,update:T,replace:U,afterUpdate:V,beforeDestroy:W,destroy:X,afterDestroy:Y},{extend:g,html:h});b.registerHelper("ModelView",{placeItem:f});var Z=/[^<]*(<[a-zA-Z]+)/;return _}),define("M.AbstractModule","V.View",function(a){function b(a){var b=this;!a.model&&b.modCls&&(b.model=new b.modCls,b.model.id=a.modelId),b.callSuper()}function c(){this.clearCache=!0}var d=a.derive({xtype:"Module",init:$H.noop,entry:$H.noop,useCache:$H.noop,cacheLevel:0,cache:$H.noop,reset:$H.noop,exit:function(){return!0},initialize:b,cleanCache:c});return d}),define("M.AbstractNavigator",["B.Object","B.Class"],function(a,b){var c=b.createClass();return a.extend(c.prototype,{navigate:$H.noop}),c}),define("M.Navigator",["L.Browser","B.Support","M.AbstractNavigator"],function(a,b,c){function d(c,d,e,f){var g=c.modName,h=$V.get("mainFooterTb"),i=c.hasFooter;if(i?(c.getEl().addClass("has-footer"),h.show(),h.children[0].select("[dataMod="+g+"]")):h.hide(),(!a.mobile()||"high"===b.perf())&&Modernizr.csstransforms3d){var j,k=c.getEl(),l=d&&d.getEl(),m="animationEnd",n=b.normalizeEvent(m);if(d&&!d.hasFooter&&f?(l.length>0&&(l.addClass("hui-mod-zindex hui-scale-fadeout"),c.show(),l.data("hideMod",d)),j=l):i||(k.length>0&&(k.addClass("hui-mod-zindex hui-scale-fadein"),c.show()),j=k),j)return j.length>0&&j.one(n,function(){d&&d.hide(),j.removeClass("hui-mod-zindex hui-scale-fadein hui-scale-fadeout")}),!1}}var e=c.derive({navigate:d});return e}),define("M.History",["L.Json","L.Debug","B.HashChange","B.Class","B.Object","B.Function","B.Event","B.Url"],function(a,b,c,d,e,f,g,h){function i(a,b){var d=this;"function"==typeof a&&(b=a,a=null),d.error=b||$H.noop,d.key=a||"handy",d.states=[],c.listen(f.bind(d.stateChange,d))}function j(){var a=this,b=a.getHashParam();if(b&&!e.isEmpty(b)){var c=b.hKey,d=a.currentKey,f=a.states,h=f[d];if(c==d)return!1;var i=f[c];if(!i)return void history.back();var j;if(a._byManager?a._byManager=!1:j=g.trigger("hisoryChange",i,h),j!==!1&&(i?j=i.onStateChange(i.param,!0):($D.warn("hisory state not found"),j=a.error("stateNotFound",b))),j===!1){var k=h.param;b=e.extend({hKey:d},k),a.saveHash(b)}else a.currentKey=c}}function k(a){var b=this,c=b.currentKey=b.key+ ++t;b.states.push(c),b.states[c]=a;var d=a.param,f=e.extend({hKey:c},d);b.saveHash(f)}function l(a){var b=this;void 0===a&&(a=b.currentKey);for(var c=b.states,d=0,e=c.length;e>d;d++)if(c[d]===a){c.splice(d,1);break}delete c[a]}function m(a){h.setHashParam(a,null,!0)}function n(){return h.getHashParam()}function o(){var b=this,c=h.getHashParam();if(e.isEmpty(c)){var d=h.getQueryParam(null,"retPage");if(!d)return;try{c=a.parseJson(decodeURIComponent(d))}catch(f){$D.warn("parse retPage param from hash error:"+f.message)}}return b.states&&b.states[c.hKey]||c}function p(){var a=this;try{for(var c=a.getHashParam(),d=c.hKey,e=a.states,f=e.length,g=1;f>g;g++)if(e[g]==d)return g>0?e[e[--g]]:null}catch(h){b.error("History.getPreState error:"+h.message,h)}}function q(){var a=this,b=a.getPreState();b&&b.onStateChange(b.param)}function r(){var b=h.getHashParam();delete b.hKey;var c={retPage:encodeURIComponent(a.stringify(b))},d=h.setQueryParam(c,location.href);return d}var s=d.createClass(),t=0;return e.extend(s.prototype,{initialize:i,stateChange:j,saveState:k,removeState:l,saveHash:m,getHashParam:n,getCurrentState:o,getPreState:p,back:q,getSafeUrl:r}),s}),define("M.ModuleManager",["L.Browser","B.Event","B.Object","B.Function","M.History","V.AbstractManager"],function(a,b,c,d,e,f){function g(a,b){return a+(b?"-"+b:"")}function h(a){var d=this,e=a.modName,f=a.modId,g=require(e),h={renderTo:d.container,modName:e,modId:f,name:e,xtype:e,cid:f.replace(/\./g,"-"),extCls:"js-module m-module",hidden:!0};c.extend(h,a);var i=new g(h),j=d._modules[f];j&&(i.referer=j.referer),d._modules[f]=i,b.trigger("afterRender",i.getEl()),i.entry(a),d.requestMod==f&&d._showMod(i);return i}function i(a){var b=this,c=b._modules[b.currentMod],d=b.navigator&&b.navigator.navigate(a,c,b,c&&c.referer===a);d!==!1&&(c&&c.hide(),a.show()),c&&(c.isActive=!1),a.isActive=!0,b.currentMod=a.modId}function j(a){var b=this;b.callSuper(),a&&(b.conf=a,c.extend(b,a),b.container=$(a.container?a.container:document.body)),b.history=new e(function(a,c){b.go(c.param)}),b._modules={},b._modStack=[],b._modNum={};var d=b.history.getCurrentState();if(!c.isEmpty(d)){var f=a.chkEntry,g=f&&f(d);if(g!==!1)return void b.go(d)}var h=a.entry||a.defEntry;b.go(h)}function k(a,b,d){var e=this,f=e._modules,g=e._modStack,h=e._modNum,i=e._getModId(b,d);f[i]=a,g.push({modId:i,modName:b}),h[b]?h[b]++:h[b]=1;var j=g.length,k=c.count(h),l=e.maxCacheNum/k;l=1>l?1:l;for(var m,n=-1,o=0,p=g.length;p>o;o++){var q=g[o];if(a.cacheNum&&b===q.modName&&h[b]>a.cacheNum)m=!0;else if(j>e.maxCacheNum){var r=f[q.modId].cacheLevel;if(r){if(-1===n)for(var s in h){var t=$H.ns(s),u=t&&t.prototype.cacheLevel;(0>n||n>u)&&(n=u)}n>=r&&(m=!0)}else h[q.modName]>l&&(m=!0)}if(m){q.modId!=a.modId&&q.modId!=(a.referer&&a.referer.modId)&&e.destroy(f[q.modId]);break}}}function l(a,b){var c=this,d=a?c._getModId(a,b):c.currentMod;return c._modules[d]}function m(a,b){if(a){var c=this;"string"==typeof a&&(a={modName:a});var e=a.modName,f=a.modelId;a.model&&(f=a.modelId=a.model.id);var g=c._getModId(e,f);a.modId=g;var h,i=c.currentMod,j=c._modules,k=j[i];if(a.referer?(h=a.referer,delete a.referer):h=k,i==g)return void(k&&!k.waiting&&k.reset());if(k&&!k.waiting)if(k._forceExit)k._forceExit=!1;else if(k.exit()===!1)return!1;c.requestMod=g;var l=j[g];if(l){if(l.waiting)return;if(k){var m=k.referer===l;m||(l.referer=h)}1!=l.notCache&&1!=l.clearCache&&0!=l.useCache(a)?(0==l.clearCache,c._showMod(l),l.cache(a),l.entry(a)):(c.destroy(l),l=c._createMod(a),m||(l.referer=h))}else c.setModule({waiting:!0,referer:h},e,f),require(e,function(){c._createMod(a)});if(1!=b){var n={modName:a.modName};f&&(n.modelId=f),c.history.saveState({onStateChange:d.bind(c.go,c),param:n})}return!0}}function n(a,b){var c=this,d=c._modules,e=c._modStack,f=a.modName,g=c._getModId(f,b);for(var h in d){var i=d[h];a==i&&(delete d[h],d[g]=a,a.modId=g,c.currentMod===h&&(c.currentMod=g))}for(var j=0,k=e;k>j;j++){var l=e[j];l.modName===f&&void 0===l.modId&&(l.modId=g)}}function o(a){var b=this,c=b._modStack,d=a.modId;b.currentMod===d&&b.back();for(var e=0,f=c.length;f>e;e++)if(c[e].modId===d){c.splice(e,1),b._modNum[a.modName]--;break}a.destroy(),delete b._modules[d]}function p(a){this.history.removeState(a)}function q(a,c){var d=a.update(c);return d&&(this._modules[a.modId]=d,b.trigger("afterRender",d.getEl())),d}function r(a,b){c.isStr(a)&&(a=this.getModule(a,b)),a&&(a.notCache=!0)}function s(a){var b=this,c=b._modules[b.currentMod];a&&(c._forceExit=!0),b.history.getPreState()?(b.history._byManager=!0,history.back()):b.go(b.defEntry)}function t(){return this.history.getSafeUrl()}var u=f.derive({type:"module",maxCacheNum:a.mobile()?a.android()>=4||a.ios()>=7?15:6:30,_getModId:g,_createMod:h,_showMod:i,initialize:j,setModule:k,getModule:l,go:m,setModId:n,destroy:o,removeState:p,update:q,clearCache:r,back:s,getSafeUrl:t});
return u}),define("C.ComponentManager",["B.Class","V.AbstractManager","V.ViewManager"],function(a,b,c){function d(){var b=this,d=a.getSingleton(c);b._types=d._types,b._all=d._all}var e=b.derive({type:"component",initialize:d});return $CM=new e,e}),define("C.AbstractComponent",["B.Class","B.Object","B.Validator","V.ViewManager","V.View","C.ComponentManager"],function(a,b,c,d,e){function f(b,c){var e=a.createClass(),f=c||n;return a.inherit(e,f,null,null,{notCover:function(a){return"define"==a}}),a.getSingleton(d).registerType(b,e),$C[b]=e,e}function g(a,c){var d=this;if(!c)return!1;if(b.isArr(c)){for(var e=0,f=c.length;f>e;e++)if(d.match(a,c[e]))return!0}else if(d.match(a,c))return!0;return!1}function h(){var a=this;a.callSuper();var b;(b=a.icon)&&("string"==typeof b?a.add({xtype:"Icon",name:b}):(b.xtype="Icon",a.add(b)))}function i(){var a=this;a.callSuper(),a.tmpl=a.tmpl.replace(/(class=['"])/,"$1#js-component cmpCls tTypeCls themeCls radiusCls sizeCls shadow?hui-shadow gradient?hui-gradient shadowSurround?hui-shadow-surround shadowOverlay?hui-shadow-overlay shadowInset?hui-shadow-inset activeClass isFocus?hui-focus isInline?hui-inline ")}function j(){this.update({isActive:!0})}function k(){this.update({isActive:!1})}function l(a){var b=this;return void 0!==a?b.set("text",a):b.get("text")}function m(){var a=this,b=a.validator;if(b){var d=a.val();b.error||(b.error=function(a){new $C.Tips({text:a,theme:"error"})});var e=c.valid(d,b);return e}for(var f=a.children,g=0,h=f.length;h>g;g++){var e=f[g].valid();if(!e)return e}return!0}$C=$H.ns("C",{});var n=e.derive({xtype:"AbstractComponent",xConfig:{extCls:"",tType:"",theme:"",cls:"",radius:null,shadow:!1,shadowInset:!1,gradient:!1,shadowSurround:!1,shadowOverlay:!1,size:"",isActive:!1,isFocus:!1,isInline:!1,activeCls:"hui-active",cmpCls:{deps:["cls"],parseDeps:function(a){return"hui-"+a}},sizeCls:{deps:["size"],parseDeps:function(a){return a&&"hui-size-"+a}},tTypeCls:{deps:["tType"],parseDeps:function(a){return a?"hui-"+this.get("cls")+"-"+a:""}},themeCls:{deps:["theme"],parseDeps:function(a){return a?"hui-"+this.get("cls")+"-"+a:""}},activeClass:{deps:["isActive","activeCls"],parseDeps:function(a,b){return a?b:""}},radiusCls:{deps:["radius"],parseDeps:function(a){return a?"hui-radius-"+a:""}}},hasConfig:g,doConfig:h,preTmpl:i,active:j,unactive:k,txt:l,valid:m},{define:f});return n}),define("C.Icon",["B.Object","C.AbstractComponent"],function(a,b){function c(b){var c=this;a.isStr(b)&&(b={name:b}),b.bgColor&&(b.style=a.extend(b.style,{backgroundColor:b.bgColor})),c.callSuper([b])}var d=b.define("Icon");return d.extend({xConfig:{cls:"icon",theme:"bg-gray",isAlt:!1,radius:"big",name:"",iconName:{deps:["name"],parseDeps:function(a){return"hui-icon-"+a}}},bgColor:"",tmpl:'<span {{bindAttr class="isAlt?hui-alt-icon iconName"}}></span>',doConfig:c}),d}),define("C.Link","C.AbstractComponent",function(a){var b=a.define("Link");return b.extend({xConfig:{cls:"link",text:""},tmpl:'<a hidefocus="true" href="javascript:;">{{text}}</a>'}),b}),define("C.Button",["B.Object","B.Support","C.AbstractComponent"],function(a,b,c){function d(b){var c=this;("black"===b.theme||"dark"===b.theme)&&(c.defItem=a.clone(c.defItem),a.extend(c.defItem,{isAlt:!1,theme:null})),"adapt"===b.tType&&(b=a.clone(b),a.extend(b,{isInline:!0,radius:null,shadow:null,shadowSurround:null}),"string"==typeof b.icon&&(b.icon={name:b.icon,theme:null})),c.callSuper([b])}var e=c.define("Button"),f="high"==b.perf();return e.extend({xConfig:{cls:"btn",text:"",extTxt:"",theme:"gray",markType:"",iconPos:"",activeCls:"hui-btn-active",isBack:!1,radius:"little",shadow:f,gradient:f,isInline:!0,noTxtCls:{deps:["text","tType"],parseDeps:function(a,b){return"adapt"==b||a||0===a?void 0:"hui-btn-icon-notxt"}},iconPosCls:{deps:["iconPos"],parseDeps:function(a){return a?"hui-btn-icon-"+a:""}},markCls:{deps:["markType"],parseDeps:function(a){return a?"hui-btn-mark-"+a:""}}},defItem:{xtype:"Icon",theme:"gray",isAlt:!0},tmpl:['<a href="javascript:;" hidefocus="true" {{bindAttr class="noTxtCls isBack?hui-btn-back gradient?hui-gradient markCls iconPosCls"}}>','<span class="hui-btn-txt">{{text}}</span>','<span class="hui-btn-ext">{{extTxt}}</span>',"{{placeItem}}",'<span class="hui-btn-mark"></span>',"</a>"].join(""),doConfig:d}),e}),define("C.Desc",["B.Object","C.AbstractComponent","D.Model","D.Collection"],function(a,b){function c(b){"Icon"===b.xtype&&a.extendIf(b,{xrole:"icon",isAlt:!0,extCls:"hui-light",size:"mini",theme:null})}var d=b.define("Desc");return d.extend({xConfig:{cls:"desc",icon:"",text:"",txtOverflow:!0,iconCls:{deps:["icon"],parseDeps:function(a){return a?"hui-icon-"+a:""}}},tmpl:['<div {{bindAttr class="#c-clear txtOverflow?c-txt-overflow"}}>',"{{placeItem > [xrole=icon]}}",'<span class="hui-desc-txt">{{text}}</span>','<div class="hui-desc-right">',"{{placeItem > [xrole=right]}}","</div>","{{placeItem > [!xrole]}}","</div>"].join(""),parseItem:c}),d}),define("C.Panel","C.AbstractComponent",function(a){var b=a.define("Panel");return b.extend({xConfig:{cls:"panel",content:"",isLoading:!1,loadingTxt:"正在加载中..."},tmpl:["<div>","{{#if isLoading}}",'<div class="hui-panel-loading">','<div class="hui-mask"></div>','<div class="hui-loading-container">','<div class="hui-tips hui-tips-big hui-tips-black hui-radius-little">','<span class="hui-icon hui-icon-loading"></span>','<span class="hui-tips-txt">{{loadingTxt}}</span>',"</div>","</div>","</div>","{{/if}}","{{#if content}}","{{content}}","{{else}}","{{placeItem}}","{{/if}}","</div>"].join("")}),b}),define("C.Popup",["L.Browser","B.Util","B.Event","C.AbstractComponent"],function(a,b,c,d){function e(){var a=this;a.callSuper(),a.extCls=(a.extCls||"")+" hui-popup"+(a.isFixed?" hui-popup-fixed":""),a.clickHide&&a.listeners.push({name:"click",el:$(document),handler:function(){this.hide()}})}function f(){var a=this,b=a.getEl();if(b.css("z-index",1e3*p+1e3),!a.width&&a.parent){var d=a.parent.getEl(),e=a.width=d[0].clientWidth;b.css("width",e)}var f=a.showPos,g=typeof f;"string"===g?a[f]():"function"===g?f.call(a):"object"===g&&null!==f&&b.css(a.showPos),a.noMask||a.mask(),a.timeout&&setTimeout(function(){a.destroyed||a.hide()},a.timeout),c.once("hisoryChange",function(){return a.showed&&!a.destroyed?(a.hide(),c.stop(),!1):void 0}),a.callSuper()}function g(){var a=this,b=a.callSuper();0!=b&&(a.noMask||a.unmask(),a.destroyWhenHide&&a.destroy())}function h(){var a=this,c=a.getEl();c.css({left:"50%",top:b.em2px(.5),position:"fixed"})}function i(){var c,d=this,e=d.getEl(),f=e[0].clientWidth,g=e[0].clientHeight,h=document,i=h.documentElement,j=h.body;if(a.ie()<=8){var k=i.currentStyle.width;c=k?k.indexOf("em")>0?b.em2px(k):parseInt(k.replace("px","")):i.offsetWidth||j.offsetWidth}else c=j.offsetWidth;var l=(c-f)/2,m=i.clientHeight||j.clientHeight,n=m-g,o=n/2-n/10;d.isFixed||(o+=i.scrollTop||j.scrollTop),o=10>o?window.screen.height/2-200:o,e.css({left:l+"px",top:o-(d.offsetTop||0)+"px"})}function j(){var a=this,b=a.getEl(),c=b[0].clientWidth,d=document,e=((d.documentElement.offsetWidth||d.body.offsetWidth)-c)/2;b.css({left:e+"px",bottom:a.get("hasArrow")?"1em":0})}function k(a){var c=this;a=a||c.parent.getEl(),a=a[0];var d=b.position(a),e=c.getEl(),f=document,g=f.documentElement,h=f.body,i=e[0].clientHeight,j=g.clientHeight||h.clientHeight,k=b.scrollTop(a);d.top-=k;var l=d.top+i,m=l-j;m>0&&(d.top=d.top-m),e.css(d)}function l(){var a=this;n?n.appendTo(a.renderTo):n=$('<div class="hui-mask hui-hidden"></div>').appendTo(a.renderTo),n.css("z-index",1e3*p+998),0==p&&n.removeClass("hui-hidden"),p++}function m(){p--,0==p?n.addClass("hui-hidden"):n.css("z-index",1e3*(p-1)+998)}var n,o=d.define("Popup"),p=0;return o.extend({delayShow:!0,clickHide:!0,isFixed:!1,showPos:"center",destroyWhenHide:!0,shadowOverlay:!0,tmpl:"<div>{{placeItem}}</div>",doConfig:e,afterShow:f,hide:g,top:h,center:i,bottom:j,followEl:k,mask:l,unmask:m}),o}),define("C.ControlGroup",["B.Object","C.AbstractComponent"],function(a,b){function c(){var a=this;a.callSuper(),"h"==a.get("direction")&&a.listen({name:"afterRender add remove",custom:!0,handler:function(){a.layout()}})}function d(a){a.extCls=(a.extCls||"")+" js-item"}function e(){var a=this;if(a.rendered){var b,c=a.children.length,d=Math.floor(100/c);b=a.getLayoutItems?a.getLayoutItems():a.getEl().children(".js-item");var e="hui-item-first",f="hui-item-last";b.each(function(a,b){var g=$(b);0==a?(g.addClass(e),1===c?g.addClass(f):g.removeClass(f)):a==c-1?(g.removeClass(e),g.addClass(f)):(g.removeClass(e),g.removeClass(f)),b.style.width=c-1>a?d+"%":100-d*(c-1)+"%"})}}function f(a){var b,c=this;if(!c.notSelect&&(b="number"==typeof a?c.children[a]:"string"==typeof a?c.find(a)[0]:a))if(c.multi||b.multi)c.selectItem(b,!b.get("selected"));else{var d=c.getSelected();d&&c.selectItem(d,!1),c.selectItem(b)}}function g(a){var b=this,c=[];return b.each(function(b,d){d.get(d.select?"selected":"isActive")&&c.push(a?b:d)}),c.length>0?b.multi?c:c[0]:null}function h(a,b){b=0!=b,b?(a.select?a.select():a.active(),a.trigger("Select")):(a.select?a.select(b):a.unactive(),a.trigger("Unselect"))}function i(b){var c=this;if(void 0===b){var d=[];return c.each(function(a,b){b.get("selected")&&d.push(b.value)}),d.join(",")}var d=(""+b).split(",");c.each(function(b,e){a.contains(d,e.get("value"))?c.selectItem(e,!0):c.selectItem(e,!1)})}function j(a){var b,c=this;if(c.itemClick){var d=c.children[a];b=c.itemClick(d,a)}b!==!1&&c.select(a)}var k=b.define("ControlGroup");return k.extend({xConfig:{cls:"ctrlgp",direction:"v",directionCls:{deps:["direction"],parseDeps:function(a){return"hui-ctrlgp-"+a}}},multi:!1,defItem:{xtype:"Button",radius:null,shadow:!1,isInline:!1},_customEvents:{Select:1,Unselect:1},tmpl:'<div {{bindAttr class="directionCls"}}>{{placeItem}}</div>',listeners:[{name:"click",selector:".js-item",method:"delegate",handler:function(a){var b=this,c=$(a.currentTarget),d=b.find("> [_id="+c.attr("id")+"]");if(d.length>0){var e=d[0].index();b.onItemSelect(e)}}}],doConfig:c,parseItem:d,layout:e,select:f,getSelected:g,selectItem:h,val:i,onItemSelect:j}),k}),define("C.Radio","C.AbstractComponent",function(a){function b(a){this.update({selected:!(0==a)})}function c(a){var b=this;return void 0===a?b.get("value"):void b.set("value",a)}var d=a.define("Radio");return d.extend({xConfig:{cls:"radio",name:"",text:"",value:"",selected:!1},tmpl:['<div {{bindAttr class="#hui-btn #hui-btn-gray selected?hui-radio-on"}}>','<span class="hui-icon hui-icon-radio"></span>','<input type="radio" {{bindAttr selected?checked name="name" value="value"}}/>','<span class="hui-radio-txt">{{text}}</span>',"</div>"].join(""),select:b,val:c}),d}),define("C.Checkbox","C.AbstractComponent",function(a){function b(a){this.update({selected:!(0==a)})}function c(a){var b=this;return void 0===a?b.get("value"):void b.set("value",a)}var d=a.define("Checkbox");return d.extend({xConfig:{cls:"chkbox",name:"",text:"",value:"",selected:!1},multi:!0,tmpl:['<div {{bindAttr class="#hui-btn #hui-btn-gray selected?hui-chkbox-on"}}>','<span class="hui-icon hui-icon-chkbox"></span>','<input type="checkbox" {{bindAttr selected?checked name="name" value="value"}}/>','<span class="hui-chkbox-txt">{{text}}</span>',"</div>"].join(""),select:b,val:c}),d}),define("C.Select",["L.Browser","B.Object","C.AbstractComponent"],function(a,b,c){function d(a){var c=this;c.callSuper();var d=b.clone(a.options);c.defTxt=c.get("text");for(var e=c.get("value"),f=!1,g=0,h=d.length;h>g;g++){var i=d[g],j=i.value;if(void 0!==j&&j==e){c.set("text",i.text),i.selected=!0,f=!0;break}}f||delete c.value,c.add({itemClick:function(a){var b=a.get("value");c.val(b)},width:c.optionWidth||c.width,items:d})}function e(){var a=this;a.children[0].show()}function f(a){var b=this;if(void 0===a)return b.get("value");if(b.get("value")!=a){var c=b.children[0],d=c.find("> [value="+a+"]");d.length>0&&(d=d[0],b.set("value",a),b.txt(d.get("text")),c.select(d),b.trigger("change",a,d))}}function g(){var a=this,b=a.children[0];b.selectItem(b.getSelected(),!1),a.set("value",""),a.set("text",a.defTxt)}var h=c.define("Select");return h.extend({xConfig:{cls:"select",name:"",text:"请选择...",value:"",radius:"little",gradient:!0,iconPos:"right",iconPosCls:{deps:["iconPos"],parseDeps:function(a){return a?"hui-btn-icon-"+a:""}}},optionClick:function(){},defItem:{xtype:"Menu",hidden:!0,markType:"hook",showPos:a.mobile()?"center":"followEl",renderTo:"body"},_customEvents:{change:1},tmpl:['<div {{bindAttr class="#hui-btn #hui-btn-gray iconPosCls"}}>','<span class="hui-icon hui-alt-icon hui-icon-carat-d hui-light"></span>','<input {{bindAttr value="value" name="name"}}/>','<span class="hui-btn-txt">{{text}}</span>',"</div>"].join(""),listeners:[{name:"click",handler:function(){this.showOptions()}}],doConfig:d,showOptions:e,val:f,clearValue:g}),h}),define("C.Input",["L.Browser","B.Util","B.Event","C.AbstractComponent"],function(a,b,c,d){function e(c){var d=this;"search"==c.type&&(d.icon="search"),d.callSuper(),d.maxHeight=b.em2px(d.maxHeight),c.isTextarea&&d.listeners.push({name:"input propertychange",el:".js-input",handler:function(){var a=d.getEl();a.height("auto");var b=d.findEl(".js-input"),c=b[0].scrollHeight;if(c>=50){var e=d.inputHeight&&d.maxHeight<d.inputHeight?d.inputHeight:d.maxHeight;c=e>=c?c:e,b.css("height",c)}}}),d.withClear&&d.add({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.findEl("input").val("").focus()}}),c.inputHeight&&d.on("afterRender",function(){d.findEl("input,textarea").css("height",c.inputHeight)}),a.ios()&&d.listen({name:"touchend",el:$(document),handler:function(a){d.focused&&!/(input|textarea)/.test(a.target.nodeName)&&d.blur()}}),c.enterSubmit&&d.listen({name:"keypress",handler:function(a){var b=this;"enter"!=b.enterKey&&!a.ctrlKey||13!=a.keyCode&&10!=a.keyCode||(c.enterSubmit.call(b),a.preventDefault())}})}function f(a){var b=this;"Icon"==a.xtype?b.get("iconPos")||b.set("iconPos","left"):"Button"==a.xtype&&(b.get("btnPos")||b.set("btnPos","right"))}function g(a){var b=this.findEl(".js-input");return void 0===a?b.val():void b.val(a)}function h(){this.findEl(".js-input").focus()}function i(){this.findEl(".js-input").blur()}var j=d.define("Input");return j.extend({xConfig:{cls:"input",isTextarea:!1,name:"",value:"",placeholder:"",radius:"little",iconPos:"",btnPos:"",iconPosCls:{deps:["iconPos"],parseDeps:function(a){return a?"hui-input-icon-"+a:""}},btnPosCls:{deps:["btnPos"],parseDeps:function(a){return a?"hui-input-btn-"+a:""}}},fastUpdateMethod:{inputHeight:function(a){this.findEl("input,textarea").css("height",a)}},type:"",maxHeight:"5.313em",withClear:!1,enterKey:"",tmpl:['<div {{bindAttr class="iconPosCls btnPosCls"}}>',"{{placeItem}}","{{#if isTextarea}}",'{{textarea class="#js-input #hui-input-txt" name="name" placeholder="placeholder" value=value}}',"{{else}}",'{{input type="#text" class="#js-input #hui-input-txt" name="name" placeholder="placeholder" value="value"}}',"{{/if}}","</div>"].join(""),listeners:[{name:"focus",el:".js-input",handler:function(){var b=this;b.getEl().addClass("hui-focus"),b.focused=!0,a.mobile()&&b.listen({name:"hisoryChange",target:c,times:1,handler:function(){return b.focused?(b.blur(),c.stop(),!1):void 0}})}},{name:"blur",el:".js-input",handler:function(){var a=this;a.getEl().removeClass("hui-focus"),a.focused=!1}}],doConfig:e,parseItem:f,val:g,focus:h,blur:i}),j}),define("C.Label","C.AbstractComponent",function(a){var b=a.define("Label");return b.extend({xConfig:{cls:"label",text:"",color:"",textAlign:"",forName:"",colorCls:{deps:["color"],parseDeps:function(a){return a?"hui-label-"+a:""}},textAlignCls:{deps:["textAlign"],parseDeps:function(a){return a?"c-txt-"+a:""}}},tmpl:['<label {{bindAttr class="colorCls textAlignCls" for="forName"}}>',"{{text}}","</label>"].join("")}),b}),define("C.RowItem","C.AbstractComponent",function(a){function b(a){var b=this;b.callSuper();var c=b.get("text");c||0===c||b.set("text","&nbsp;"),void 0===b.text||a.hasOwnProperty("underline")||b.set("underline",!0),a.click&&!a.hasOwnProperty("clickable")&&b.set("clickable",!0),b.get("clickable")&&!a.hasOwnProperty("hasArrow")&&b.set("hasArrow",!0),a.comment&&void 0===a.padding&&b.set("padding","normal")}var c=a.define("RowItem");return c.extend({xConfig:{cls:"rowitem",text:"",comment:"",extTxt:"",underline:!1,clickable:!1,newsNum:0,padding:"big",hasArrow:!1,paddingCls:{deps:["padding"],parseDeps:function(a){return a?"hui-rowitem-padding-"+a:""}},newsNumTxt:{deps:["newsNum"],parseDeps:function(a){return a?a>9?"9+":a:0}}},tmpl:['<div {{bindAttr class="underline?hui-rowitem-underline paddingCls clickable?hui-clickable"}}>',"{{placeItem}}",'<div class="hui-rowitem-txt">{{text}}</div>','<div class="hui-rowitem-comment">{{comment}}</div>','<div class="hui-rowitem-ext">{{extTxt}}</div>',"{{#if newsNumTxt}}",'<span class="hui-news-tips">{{newsNumTxt}}</span>',"{{else}}","{{#if hasArrow}}",'<a href="javascript:;" hidefocus="true" class="hui-click-arrow" title="详情"><span class="hui-icon hui-alt-icon hui-icon-carat-r hui-light"></span></a>',"{{/if}}","{{/if}}","</div>"].join(""),doConfig:b}),c}),define("C.Set","C.AbstractComponent",function(a){var b=a.define("Set");return b.extend({xConfig:{cls:"set",theme:"normal",title:""},tmpl:["<div>",'<div class="hui-set-title">',"{{#if title}}",'<h1 class="hui-title-txt">{{title}}</h1>',"{{/if}}","{{placeItem > [xrole=title]}}","</div>",'<div class="hui-set-content">',"{{placeItem > [xrole!=title]}}","</div>","</div>"].join("")}),b}),define("C.Field",["B.Object","C.AbstractComponent"],function(a,b){function c(b){var c=this,d=b.title;a.isSimple(d)&&(d={text:d}),d=a.extend({xtype:"Label",xrole:"title"},d),c.add(d);var e=b.content;void 0!==e||b.items||(e=""),a.isSimple(e)&&(e={text:e,underline:!0}),e&&(c.noPadding=!0,c.add(e));var f=$.extend({},b);delete f.title,delete f.content,b.click&&void 0===b.clickable&&c.set("clickable",!0),c.callSuper([f])}var d=b.define("Field");return d.extend({xConfig:{cls:"field",clickable:!1,noPadding:!1},defItem:{xtype:"RowItem",xrole:"content"},tmpl:['<div {{bindAttr class="clickable?hui-clickable"}}>','<div class="hui-field-left">',"{{placeItem > [xrole=title]}}","</div>",'<div {{bindAttr class="#hui-field-right noPadding?hui-field-nopadding"}}>',"{{placeItem > [xrole=content]}}","</div>","</div>"].join(""),doConfig:c}),d}),define("C.Form",["B.Object","C.AbstractComponent"],function(a,b){function c(){for(var b=this,c=b.findEl("form"),d=a.fromArray(c.serializeArray()),e=b.find("ImgUpload"),f=0,g=e.length;g>f;f++){var h=e[f],i=h.get("inputName");""===d[i]&&delete d[i]}return delete d[""],d}function d(){var a=this,b=!1;return a.findEl("input,textarea").each(function(a,c){if("checkbox"===c.type||"radio"===c.type){if(c.checked!=c.defaultChecked)return b=!0,!1}else if(c.value!=c.defaultValue)return b=!0,!1}),a.findEl("select").each(function(a,c){for(var d,e=0,a=0,f=c.options.length;f>a;a++)d=c.options[a],b=b||d.selected!=d.defaultSelected,d.defaultSelected&&(e=a);return b&&!c.multiple&&(b=e!=c.selectedIndex),b?!1:void 0}),b}var e=b.define("Form");return e.extend({xConfig:{cls:"form"},tmpl:["<div>",'<form action="">','<div class="hui-form-tips c-txt-error"></div>',"{{placeItem}}","</form>","</div>"].join(""),getFormData:c,hasChanged:d}),e}),define("C.TabItem",["B.Object","C.AbstractComponent","C.Panel"],function(a,b){function c(){var a=this;a.callSuper(),a.titleCmp=a.find("> [xrole=title]")[0],a.contentCmp=a.find("> [xrole=content]")[0]}function d(b){var c=this;c.callSuper();var d=b.title;"string"==typeof d&&(d={text:d}),"object"==typeof d&&c.add(d);var e=b.content;"string"==typeof e&&(e={xtype:"Panel",content:e}),"object"==typeof e&&(a.extend(e,{xrole:"content",hidden:!c.selected,extCls:(e.extCls||"")+" hui-tab-content js-tab-content"}),c.add(e))}function e(a){var b=this;b.selected&&"title"==a.xrole&&(a.isActive=!0),a.icon&&void 0===a.iconPos&&(a.iconPos="top"),b.activeType&&(a.activeCls="hui-btn-active-"+b.activeType)}function f(a){var b=this,c=b.titleCmp,d=b.contentCmp;0==a?(c.unactive(),d&&d.hide(),b.set("selected",!1),b.trigger("selectchange",!1)):(c.active(),d&&d.show(),b.set("selected",!0),b.trigger("selectchange",!0))}function g(a,b){var c=this;return b||(b=c.contentCmp),c.callSuper([a,b])}function h(a,b){var c=this;return b||(b=c.contentCmp),c.callSuper([a,b])}var i=b.define("TabItem");return i.extend({xConfig:{cls:"tabitem"},defItem:{xtype:"Button",xrole:"title",radius:null,isInline:!1,shadow:!1},_customEvents:{selectchange:1},tmpl:"<div>{{placeItem > [xrole=title]}}</div>",initialize:c,doConfig:d,parseItem:e,select:f,getContent:g,setContent:h}),i}),define("C.Tab",["L.Browser","E.Animate","C.AbstractComponent","C.TabItem","C.ControlGroup"],function(a,b,c,d,e){function f(){var a=this;if(a.callSuper(),a.slidable&&b.support3d()){var c,d=".js-contents",e="hui-ani-100";a.listen({name:"afterRender",custom:!0,handler:function(){c=a.findEl(d).addClass("hui-ani-3d")}}),a.listen({name:"touchstart",selector:d,method:"delegate",handler:function(b){a.startTime=(new Date).getTime();var c=b.currentTarget;b=b.originalEvent||b,a.contentWidth=c.clientWidth,a.selIndex=a.getSelected(!0),b=b.touches[0],a.startX=b.clientX,a.startY=b.clientY,a.delX=0}}),a.listen({name:"touchmove",selector:d,method:"delegate",handler:function(d){d=d.originalEvent||d,oTouch=d.touches[0];var e=oTouch.clientX,f=oTouch.clientY,g=e-a.startX,h=f-a.startY;if(Math.abs(g)>Math.abs(5*h/4)){d.preventDefault();var i=a.selIndex;if(0===i&&g>0||i===a.children.length-1&&0>g)return;a.delX=g;var j=a.contentWidth;if(!a._sliding){a._sliding=!0;var k=a.brotherCmp=a.children[g>0?i-1:i+1].contentCmp,l=a.brotherEl=k.getEl();l[0].style.left=(g>0?-j:j)+"px",k.show()}b.slide(c[0],{x:g})}}}),a.listen({name:"touchend",selector:d,method:"delegate",handler:function(d){a._sliding=!1,d=d.originalEvent||d;var f=a.contentWidth,g=f/4,h=a.delX,i=(new Date).getTime()-a.startTime,j=500>i&&Math.abs(h)>20,k=a.getSelected(!0);c.addClass(e),a._slideIndex=null;var l;h>g||j&&h>0?(l=f,a._slideIndex=k-1):-g>h||j&&0>h?(l=-f,a._slideIndex=k+1):0!==h&&(b.slide(c[0]),a.brotherCmp.hide()),l&&b.slide(c[0],{x:l})}}),a.listen({name:"transitionEnd",el:c,handler:function(){var d=a._slideIndex;d>=0&&a.onItemSelect(d),c.removeClass(e),b.slide(c[0]);var f=a.brotherEl;f&&(f[0].style.left="0px")}})}}function g(a){var b=this;b.activeType&&(a.activeType=b.activeType),b.callSuper()}function h(){return this.getEl().children(".js-titles").children(".js-item")}function i(){var a=this;return nIndex=a.getSelected(!0),a.children[nIndex]}function j(a,b){var c=this;b=b||c.getSelected(!0),c.findEl(".js-tab-content").index(b).html(a)}var k=c.define("Tab",e);return k.extend({xConfig:{cls:"tab",hasContent:!0,direction:"h"},slidable:a.mobile(),defItem:{xtype:"TabItem"},tmpl:["<div>",'<div class="hui-tab-titles js-titles c-clear">',"{{placeItem > TabItem}}","</div>","{{#if hasContent}}",'<div class="hui-tab-contents js-contents">',"{{placeItem > TabItem > [xrole=content]}}","</div>","{{/if}}","</div>"].join(""),doConfig:f,parseItem:g,getLayoutItems:h,getSelectedItem:i,setTabContent:j}),k}),define("C.Toolbar","C.AbstractComponent",function(a){function b(){var a=this;a.callSuper(),a.scrollHide&&a.listen({name:"scroll",el:$(window),handler:function(){var b,c=window.scrollY,d=c-a.lastScroll;a.isHeader?d>0&&c>10?b=!0:0>d&&a.show():0>d?b=!0:d>0&&a.show(),b&&a.hide()!==!1&&a.getEl()[0].offsetHeight,a.lastScroll=c}})}function c(a){"Button"===a.xtype&&void 0===a.shadowSurround&&(a.shadowSurround=!0)}var d=a.define("Toolbar");return d.extend({xConfig:{cls:"tbar",title:"",isHeader:!1,isFooter:!1},defItem:{xtype:"Button",theme:"black",xrole:"content"},tmpl:['<div {{bindAttr class="isHeader?hui-header isFooter?hui-footer"}}>','<div class="hui-tbar-left">',"{{placeItem > [xrole=left]}}","</div>","{{placeItem > [xrole=content]}}",'{{#if title}}<div class="hui-tbar-title js-tbar-txt">{{title}}</div>{{/if}}','<div class="hui-tbar-right">',"{{placeItem > [xrole=right]}}","</div>","</div>"].join(""),doConfig:b,parseItem:c}),d}),define("C.Tips",["B.Object","B.Util","C.AbstractComponent","C.Popup","C.ControlGroup"],function(a,b,c,d){function e(c){var d=this;"loading"==c.type?a.extend(d,{text:"正在加载中...",timeout:null,noMask:!0,icon:"loading"}):"miniLoading"==c.type?a.extend(d,{showPos:{left:"50%",marginLeft:"-1em",top:b.em2px(.625)},clickHide:!1,destroyWhenHide:!1,timeout:null,delayShow:!1,shadowOverlay:null,theme:"tbar-black",noMask:!0,tType:"mini",items:{xtype:"Icon",name:"loading-mini",theme:null}}):"topTips"==c.type?a.extend(d,{showPos:"top",noMask:!0,tType:"mini"}):"inlineLoading"===c.type&&a.extend(d,{noMask:!0,clickHide:!1,destroyWhenHide:!1,timeout:null,delayShow:!1,shadowOverlay:null,size:"mini",tType:"inline",width:"auto",style:{zIndex:0},theme:null,showPos:{left:b.em2px(.625),top:b.em2px(.625)},items:{xtype:"Icon",name:"loading-mini",theme:null}}),d.callSuper()}var f=c.define("Tips",d);return f.extend({xConfig:{cls:"tips",text:"",radius:"normal",hasArrow:!1,theme:"black"},timeout:1500,tmpl:['<div {{bindAttr class="text:hui-tips-notxt c-clear"}}>',"{{placeItem}}",'{{#if text}}<span class="hui-tips-txt">{{text}}</span>{{/if}}',"{{#if hasArrow}}",'<div class="hui-triangle"><div class="hui-triangle hui-triangle-inner"></div></div>',"{{/if}}","</div>"].join(""),doConfig:e}),f}),define("C.Dialog",["B.Object","C.AbstractComponent","C.Popup"],function(a,b,c){function d(a){return new h({contentMsg:a,noClose:!0,noCancel:!0})}function e(a,b){return new h({contentMsg:a,noClose:!0,okCall:function(){return b&&b(!0)},cancelCall:function(){return b&&b(!1)}})}function f(a,b,c){return c||(c=b,b=""),new h({contentMsg:a,noClose:!0,items:{xtype:"Input",xrole:"dialog-content",value:b},okCall:function(){var a=this.find("Input")[0].val();return c&&c(a)}})}function g(a){var b=this;b.callSuper();var c=a.items;if(b.title&&!b.hasConfig("[xrole=dialog-header]",c)&&b.add({xtype:"Toolbar",title:b.title,theme:"gray",xrole:"dialog-header",extCls:"hui-dialog-header",items:!b.noClose&&{xtype:"Button",radius:"big",icon:"delete",shadow:!1,shadowSurround:!1,theme:"gray",xrole:"left",click:function(){b.closeCall&&0==b.closeCall()||b.hide()}}}),!b.noAction&&!b.hasConfig("[xrole=dialog-action]",c)){var d=[];b.noCancel||d.push({title:{isActive:1==b.activeBtn,text:b.cancelTxt,cClass:"cancelBtn",click:function(){b.cancelCall&&0==b.cancelCall()||b.hide()}}}),b.noIgnore||d.push({title:{isActive:3==b.activeBtn,text:b.ignoreTxt,cClass:"ignoreBtn",click:function(){b.ignoreCall&&0==b.ignoreCall()||b.hide()}}}),b.noOk||d.push({title:{text:b.okTxt,cClass:"okBtn",isActive:2==b.activeBtn,click:function(){b.okCall&&0==b.okCall()||b.hide()}}}),b.add({xtype:"Tab",xrole:"dialog-action",theme:"no-border",tType:"sep",notSelect:!0,items:d})}}var h=b.define("Dialog",c);return a.extend(h,{alert:d,confirm:e,prompt:f}),h.extend({xConfig:{cls:"dialog",radius:"little",content:"",contentTitle:"",contentMsg:""},noIgnore:!0,okTxt:"确定",cancelTxt:"取消",ignoreTxt:"不保存",clickHide:!1,tmpl:["<div>","{{placeItem > [xrole=dialog-header]}}",'<div class="hui-dialog-body">',"{{#if content}}","{{content}}","{{else}}",'<div class="hui-body-content c-clear">','<h1 class="hui-content-title">{{contentTitle}}</h1>','<div class="hui-content-msg">{{contentMsg}}</div>',"{{placeItem > [xrole=dialog-content]}}","</div>","{{/if}}","{{#unless noAction}}",'<div class="hui-body-action">',"{{placeItem > [xrole=dialog-action]}}","</div>","{{/unless}}","</div>","</div>"].join(""),doConfig:g}),h}),define("C.Menu",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(a,b,c){function d(){var a=this;a.callSuper(c),a.callSuper()}function e(a){var b=this;c.prototype.parseItem.call(b,a);var d=b.markType;d?"hook"==d&&(a.items={name:"check",isAlt:!0,theme:null},a.iconPos="left",a.activeCls="hui-item-select"):b.notSelect=!0,a.isActive=a.selected}var f=a.define("Menu",b);return f.extend(c.prototype),f.extend({xConfig:{cls:"menu",radius:"little"},markType:null,destroyWhenHide:!1,defItem:{xtype:"Button",radius:null,shadow:!1,theme:null,isInline:!1},tmpl:'<div {{bindAttr class="directionCls"}}>{{placeItem}}</div>',doConfig:d,parseItem:e}),f}),define("C.DatePicker",["B.Object","B.Util","B.Date","C.AbstractComponent","C.Dialog"],function(a,b,c,d,e){function f(b){var c,d=b.formator||"default",e=j.instance||(j.instance={});return(c=e[d])?(c.host!=b.host&&(c.host=b.host,c.off("change confirm"),b.change&&c.on("change",b.change),b.confirm&&c.on("confirm",b.confirm),b.date&&c.val(b.date)),c.show()):c=e[d]=new j(a.extend(b,{destroyWhenHide:!1})),c}function g(a,d,e,f,g){for(var h={xtype:"Select",xrole:"dialog-content",name:"dialogSelect",value:a,width:b.em2px(3.125),cClass:f,optionWidth:b.em2px(6.25),iconPos:"bottom",extCls:"hui-dp-"+f,options:[],defItem:{showPos:"center"},change:function(){var a=this,b=a.parent,d=b.val(!0);if("month"==a.cClass){var e=c.getDaysInMonth(d),f=b.find(".date > Menu")[0],g=f.find();f.val()>e&&f.val(e);for(var h=28;31>h;h++){var i=g[h];i.hidden=e>h?!1:!0}}var j=b.val();b.val(j),b.trigger("change")}},i=d;e>=i;i++)h.options.push({text:"minute"==f&&10>i?"0"+i:i,value:i,hidden:g&&i>g});return h}function h(b){var d=this;b=b||{};var e=b.date;a.isStr(e)&&(e=c.parseDate(e));for(var e=e||c.now(),f=b.formator||(b.formator="yyyy-MM-dd HH:mm"),h=c.formatDate(e,f),i=[],j=c.getDaysInMonth(e),k=f.match(/[a-zA-Z]+/g),l=h.match(/\d+/g),m=0;m<k.length;m++){var n=k[m],o=parseInt(l[m]);switch(n){case"yyyy":i.push(g(o,o,o+10,"year"));break;case"MM":i.push(g(o,1,12,"month"));break;case"dd":i.push(g(o,1,31,"date",j));break;case"HH":i.push(g(o,0,23,"hour"));break;case"mm":i.push(g(o,0,59,"minute"))}}a.extend(b,{contentTitle:h+" 星期"+c.getWeek(e),items:i,okCall:function(){return d.trigger("confirm")}}),d.callSuper([b])}function i(b){var d=this,e=d.find("Select"),f=d.formator;if(!b||a.isBool(b)){for(var g="",h=0;h<e.length;h++)1==h||2==h?g+="-":3==h?g+=" ":4==h&&(g+=":"),g+=e[h].val();var i=c.parseDate(g);return b?i:c.formatDate(i,f)}var g=b,j=b;a.isStr(b)?j=c.parseDate(b,f):g=c.formatDate(b,f);for(var k=g.match(/\d+/g),h=0;h<e.length;h++)e[h].val(k[h]);d.set("contentTitle",g+" 星期"+c.getWeek(j))}var j=d.define("DatePicker",e);return j.getInstance=f,j.extend({xConfig:{cls:"dp"},extCls:"hui-dialog",_customEvents:{change:1,confirm:1},doConfig:h,val:i}),j}),define("C.DateSelect",["B.Object","B.Date","C.AbstractComponent","C.DatePicker"],function(a,b,c,d){function e(a){var c=this,d=a.date;d||(d=b.now(),d.setMinutes(0)),c.date=d;var e=b.formatDate(d,a.formator||(a.formator="yyyy-MM-dd HH:mm"));c.set("value",e),c.callSuper()}function f(){var a=this;d.getInstance({date:a.get("value"),formator:a.formator,host:a,confirm:function(){return a.set("value",this.val()),a.trigger("change"),a.trigger("confirm")}})}function g(c){var d=this;if(!c||a.isBool(c)){var e=d.get("value");return c?b.parseDate(e):e}c=b.formatDate(c,d.formator),d.get("value")!=c&&(d.set("value",c),d.trigger("change"))}var h=c.define("DateSelect");return h.extend({xConfig:{cls:"dsel",name:"",value:"",text:{deps:["value"],parseDeps:function(a){return a?a+" 星期"+b.getWeek(b.parseDate(a)):"请选择..."}},radius:"little",gradient:!0,iconPos:"right",iconPosCls:{deps:["iconPos"],parseDeps:function(a){return a?"hui-btn-icon-"+a:""}}},_customEvents:{change:1,confirm:1},tmpl:['<div {{bindAttr class="#hui-btn #hui-btn-gray iconPosCls"}}>','<span class="hui-icon hui-alt-icon hui-icon-carat-d hui-light"></span>','{{input type="#text" name="name" value="value"}}','<span class="hui-btn-txt">{{text}}</span>',"</div>"].join(""),listeners:[{name:"click",handler:function(){this.showDialog()}}],doConfig:e,showDialog:f,val:g}),h}),define("C.AbstractImage",["B.Object","B.Util","C.AbstractComponent"],function(a,b,c){function d(c,d){var e=this,f=$(c).removeAttr("width").removeAttr("height").css({width:"",height:""}),g=e.getEl()[0],h=nOrigW=c.width,i=nOrigH=c.height,j=h/i,k=e.width,l=e.height;if(a.isStr(k)&&k.indexOf("em")>0?k=b.em2px(k):void 0===k&&(k=g.clientWidth),a.isStr(l)&&l.indexOf("em")>0?l=b.em2px(l):void 0===l&&(l=g.clientHeight),d){(k||l)&&(k&&h!=k&&(h=k,i=Math.ceil(h/j)),l&&i>l&&(i=l,h=Math.ceil(i*j)),f.css({width:h,height:i}));
var m=0,n=0;k>h&&(m=(k-h)/2,m=Math.ceil(m)),f.css("left",m),l>i&&(n=(l-i)/2,n=Math.ceil(n)),f.css("top",n)}else{(k||l)&&(k&&h!=k&&(h=k,i=Math.ceil(h/j)),l&&l>i&&(i=l,h=Math.ceil(i*j)),f.css({width:h,height:i}));var m=0,n=0;h>k&&(m=(k-h)/2,m=Math.ceil(m)),f.css("left",m),i>l&&(n=(l-i)/2,n=Math.ceil(n)),f.css("top",n)}return f.removeClass("hui-unvisible"),e.trigger("imgFixed",f),{width:h,height:i,origW:nOrigW,origH:nOrigH,left:m,top:n}}var e=c.define("AbstractImage");return e.extend({_customEvents:{imgFixed:1},fixImgSize:d}),e}),define("C.Image",["C.AbstractComponent","C.AbstractImage"],function(a,b){var c=a.define("Image",b);return c.extend({xConfig:{cls:"image",imgSrc:"",radius:"normal"},listeners:[{name:"load",el:"img",handler:function(a){var b=this,c=a.target;b.fixImgSize(c)}}],tmpl:'<div><img {{bindAttr src="imgSrc"}} class="hui-unvisible"/></div>'}),c}),define("C.ImgUpload",["L.Browser","B.Object","B.Util","C.AbstractComponent","U.ImgCompress","P.Device","P.Camera"],function(a,b,c,d,e,f,g){function h(a){var c=this;c.callSuper();var d=a.compressOptions,e=d&&d.success;c.compressOptions=b.extend({},c.compressOptions),c.compressOptions.success=function(a){c.findEl(".js-file-content").val(a.clearBase64),e&&e(a)},void 0===a.useFileInput&&c.set("useFileInput",!f.isPhonegap()),c.get("useFileInput")||c.listen({name:"click",handler:function(){c.showSelDialog()}})}function i(){{var a=this;new $C.Dialog({contentMsg:"上传照片",width:c.em2px(15.625),noAction:!0,clickHide:!0,items:{xtype:"Panel",xrole:"dialog-content",items:[{xtype:"Button",theme:"green",text:"拍照",isInline:!1,click:function(){g.getPicture({sourceType:"CAMERA",success:function(b){a.processImg(b)}})}},{xtype:"Button",text:"相册",theme:"green",isInline:!1,click:function(){g.getPicture({sourceType:"PHOTOLIBRARY",success:function(b){a.processImg(b)}})}}]}})}}function j(a,c){var d=this;if(d.crop){var f=d.cropOptions||{};f.imgSrc=a,require("C.CropWindow",function(g){var h=new g({cropOptions:f,width:d.cropWinW,height:d.cropWinH,success:function(f){h.hide();var g=b.extend(f,d.compressOptions);e.compress(c||a,g)}})})}else e.compress(c||a,d.compressOptions)}function k(){this.findEl(".js-file-content").val("")}var l=d.define("ImgUpload");return l.extend({xConfig:{cls:"img-upload",inputName:"fileContent",transparent:!1,useFileInput:!0,showImg:!0},crop:!0,tmpl:['<div {{bindAttr class="transparent?hui-transparent"}}>',"{{#unless transparent}}","<div>",'<img {{bindAttr class="#js-orig showImg?:hui-hide"}}/>',"</div>","<div>",'<img src="" class="js-preview">',"</div>","{{/unless}}",'<input type="hidden" class="js-file-content" {{bindAttr name="inputName"}}>',"{{#if useFileInput}}",'<input type="file" class="js-file-input hui-file-input" accept="image/*">',"{{/if}}","</div>"].join(""),listeners:[{el:"input",name:"change",handler:function(a){var b,c,d,e,f=a.target;if(e=f.files){if(0==e.length)return;b=e[0],f.value="",c=b.name;var g=window.URL||window.webkitURL;d=g.createObjectURL(b)}else{if(f.select(),f.blur(),d=document.selection.createRange().text,!d)return;c=d}return/.+\.(jpg|gif|png|jpeg|bmp)$/i.test(c)?void this.processImg(d,b):void $C.Tips({text:"您选择的文件不是图片",theme:"error"})}},{name:"click",el:".js-file-input",handler:function(b){a.ie()<10&&(b.preventDefault(),new $C.Dialog({contentMsg:"上传功能暂时不支持IE9及以下版本，请使用其它浏览器，推荐chrome浏览器。",noCancel:!0,width:"15.625em",okTxt:"我知道了"}))}}],doConfig:h,showSelDialog:i,processImg:j,cleanContent:k}),l}),define("C.DisplayImage",["B.Object","B.Util","C.AbstractComponent","C.Popup","C.AbstractImage"],function(a,b,c,d,e){function f(a){var b=this;b.findEl(".js-loading")[a===!1?"addClass":"removeClass"]("hui-hidden")}var g=c.define("DisplayImage",d);return a.extendIf(g.prototype,e.prototype),g.extend({xConfig:{cls:"dispimg"},showPos:null,noMask:!0,isFixed:!0,listeners:[{name:"afterShow",custom:!0,handler:function(){var a=this,c=a.getEl()[0];a.findEl(".js-loading").css({left:c.clientWidth/2-b.em2px(1.375),top:c.clientHeight/2-b.em2px(1.375)}),a.showLoading(),a.findEl(".js-img").attr("src",a.imgSrc),a.findEl(".js-orig").attr("src",a.origSrc)}},{name:"load",el:".js-img",handler:function(a){var b=this;b.fixImgSize(a.target,!0)}},{name:"load",el:".js-orig",handler:function(a){var b=this;b.showLoading(!1),b.findEl(".js-img").addClass("hui-hidden"),b.fixImgSize(a.target,!0)}}],tmpl:['<div class="c-v-middle-container">','<span class="js-loading hui-icon hui-icon-loading hui-icon-bg hui-hidden"></span>','<img class="js-img hui-unvisible"/>','<img class="js-orig hui-unvisible">',"</div>"].join(""),showLoading:f}),g}),define("C.Crop",["L.Browser","B.Object","B.Util","C.AbstractComponent","C.AbstractImage","E.Draggable"],function(a,b,c,d,e,f){function g(){var a=this,d=a.origImg=a.findEl(".js-orig-img"),e=a.fixImgSize(d[0],!0);a.origW=e.origW,a.origH=e.origH;var g=a.cropWidth;b.isStr(g)&&(a.cropWidth=g.indexOf("%")>0?e.width*parseInt(g.replace("%",""))/100:c.em2px(g));var h=a.cropHeight;b.isStr(h)&&(a.cropHeight=g.indexOf("%")>0?e.height*parseInt(h.replace("%",""))/100:c.em2px(h));var i=a.fixedScale;if(i===!0)a.fixedScale=a.cropWidth/a.cropHeight;else if(i){var h=a.cropWidth/i;a.cropHeight>h?a.cropHeight=h:a.cropWidth=a.cropHeight*i}var j=a.leftOffset=e.left,k=a.topOffset=e.top,l=a.imgWidth=e.width,m=a.imgHeight=e.height;a.scale=m/e.origH;var n=a.cropX=Math.ceil((l-a.cropWidth)/2),o=a.cropY=Math.ceil((m-a.cropHeight)/2);a.cropBox=a.findEl(".js-crop-box").css({left:j+n,top:k+o,width:a.cropWidth,height:a.cropHeight}),a.cropImg=a.findEl(".js-crop-img").css({height:m,width:l,marginLeft:-n,marginTop:-o}).removeClass("hui-unvisible"),a.draggable=new f(a.getEl(),{move:function(b){return a.move(b)},end:function(){a.dragging=!1,a.zooming=!1}})}function h(){var a=this;a.dragging=!0,a.initCropX=a.cropX,a.initCropY=a.cropY}function i(a){var b=this;b.zooming=!0,b.initCropWidth=b.cropWidth,b.initCropHeight=b.cropHeight;var c=a.currentTarget.className;b.zoomDirect=c.indexOf("-n")>0?"n":c.indexOf("-e")>0?"e":c.indexOf("-s")>0?"s":"w",b.initCropX=b.cropX,b.initCropY=b.cropY}function j(a){var b=this;return b.dragging?b.dragCrop(a):b.zooming&&b.zoomCrop(a),!1}function k(a){var b=this,c=b.initCropX+a.offsetX,d=b.initCropY+a.offsetY;0>c&&(c=0);var e=b.imgWidth-b.cropWidth;c>e&&(c=e),0>d&&(d=0);var f=b.imgHeight-b.cropHeight;d>f&&(d=f),b.cropImg.css({marginLeft:-c,marginTop:-d}),b.cropBox.css({left:b.leftOffset+c,top:b.topOffset+d}),b.cropX=c,b.cropY=d}function l(a){var b=this,c=b.zoomDirect,d=b.fixedScale,e=a.offsetX,f=a.offsetY;if("n"===c||"w"===c){var g=b.initCropX,h=b.initCropY;"n"===c?(d&&(h=Math.min(h,g/d)),0>h+f&&(f=-h),e=d?f*d:0):(d&&(g=Math.min(g,h*d)),0>g+e&&(e=-g),f=d?e/d:0),b.dragCrop({offsetX:e,offsetY:f}),e=-e,f=-f}else{var g=b.imgWidth-b.cropX-b.initCropWidth,h=b.imgHeight-b.cropY-b.initCropHeight;"e"===c?(d&&(g=Math.min(g,h*d)),e>g&&(e=g),f=d?e/d:0):(d&&(h=Math.min(h,g/d)),f>h&&(f=h),e=d?f*d:0)}return b.cropWidth=b.initCropWidth+e,b.cropHeight=b.initCropHeight+f,b.cropBox.css({width:b.cropWidth,height:b.cropHeight}),!1}function m(){var a=this,b=a.scale,c=Math.ceil;return{cropX:c(a.cropX/b),cropY:c(a.cropY/b),cropW:c(a.cropWidth/b),cropH:c(a.cropHeight/b),origW:a.origW,origH:a.origH}}function n(){var a=this;a.draggable.destroy(),a.callSuper()}var o=d.define("Crop",e),p=a.hasTouch()?"touchstart":"mousedown";return o.extend({xConfig:{cls:"crop"},listeners:[{name:"show",custom:!0,handler:function(){var a=this;a.findEl(".js-orig-img,.js-crop-img").attr("src",a.imgSrc)}},{name:"load",el:".js-orig-img",handler:function(){this.initCrop()}},{name:p,el:".js-box-img",handler:function(){this.startDrag()}},{name:p,el:".js-op-bar",handler:function(a){this.startZoom(a)}}],imgSrc:"",cropWidth:"70%",cropHeight:"70%",fixedScale:1,tmpl:["<div>",'<img class="js-orig-img hui-orig-img hui-unvisible">','<div class="hui-mask"></div>','<div class="js-crop-box hui-crop-box">','<div class="js-box-img hui-box-img">','<img class="js-crop-img hui-crop-img hui-unvisible">',"</div>",'<div class="hui-box-op">','<div class="hui-op-handle hui-op-handle-n"></div>','<div class="hui-op-handle hui-op-handle-e"></div>','<div class="hui-op-handle hui-op-handle-s"></div>','<div class="hui-op-handle hui-op-handle-w"></div>','<div class="js-op-bar hui-op-bar hui-op-bar-n"></div>','<div class="js-op-bar hui-op-bar hui-op-bar-e"></div>','<div class="js-op-bar hui-op-bar hui-op-bar-s"></div>','<div class="js-op-bar hui-op-bar hui-op-bar-w"></div>',"</div>","</div>","</div>"].join(""),initCrop:g,startDrag:h,startZoom:i,move:j,dragCrop:k,zoomCrop:l,getResult:m,destroy:n}),o}),define("C.CropWindow",["B.Object","C.AbstractComponent","C.Popup","C.Crop"],function(a,b,c){function d(){var b=this;b.callSuper();var c={xtype:"Crop"};a.extend(c,b.cropOptions),b.add([{xtype:"Toolbar",title:b.title,isHeader:!0,items:[{xtype:"Button",xrole:"left",theme:"dark",tType:"adapt",icon:"carat-l",click:function(){b.hide()}},{xtype:"Button",xrole:"right",theme:"dark",tType:"adapt",icon:"check",click:function(){var a=b.find("Crop")[0].getResult();b.success&&b.success(a)}}]},c])}var e=b.define("CropWindow",c);return e.extend({xConfig:{cls:"cropwin"},title:"裁切图片",showPos:null,noMask:!0,clickHide:!1,doConfig:d}),e}),define("C.Hcard","C.AbstractComponent",function(a){function b(a){var b=this;b.callSuper(),a.click&&void 0===b.clickable&&b.set("clickable",!0);var c=b.desc;c&&(1==c.length&&b.set("theme","little"),b.add(c)),b.imgClick&&b.listen({name:"click",selector:".js-img",method:"delegate",handler:function(){b.imgClick.call(b)}}),b.contentClick&&b.listen({name:"click",selector:".js-content",method:"delegate",handler:function(){b.contentClick.call(b)}})}var c=a.define("Hcard");return c.extend({xConfig:{cls:"hcard",image:"",title:"",titleExt:"",titleDesc:"",hasImg:!0,txtOverflow:!0,clickable:!1,newsNum:0,hasBorder:!1,hasImgCls:{deps:["image","hasImg"],parseDeps:function(a,b){return a||b?"hui-hcard-hasimg":""}},newsNumTxt:{deps:["newsNum"],parseDeps:function(a){return a?a>9?"9+":a:0}}},defItem:{xtype:"Desc",xrole:"content"},tmpl:['<div {{bindAttr class="hasImgCls hasBorder?hui-border clickable?hui-clickable"}}>',"{{#if image}}",'<div class="hui-hcard-img js-img">','<img {{bindAttr src="image"}}>',"</div>","{{/if}}",'<div class="hui-hcard-content js-content">','<div {{bindAttr class="#hui-content-title txtOverflow?c-txt-overflow"}}>',"{{title}}",'<span class="hui-title-ext">{{titleExt}}</span>','<span class="hui-title-desc">{{titleDesc}}</span>',"</div>","{{placeItem > [xrole=content]}}","</div>","{{placeItem > [xrole!=content]}}","{{#if newsNumTxt}}",'<span class="hui-news-tips">{{newsNumTxt}}</span>',"{{else}}","{{#if clickable}}",'<a href="javascript:;" hidefocus="true" class="hui-click-arrow" title="详情">','<span class="hui-icon hui-alt-icon hui-icon-carat-r hui-light"></span>',"</a>","{{/if}}","{{/if}}","</div>"].join(""),doConfig:b}),c}),define("C.Vcard",["B.Object","C.AbstractComponent"],function(a,b){function c(b){var c=this;c.callSuper();var d=b.action;d&&(d=a.extend({xtype:"Button",radius:null,isInline:!1,xrole:"action"},d),c.add(d))}var d=b.define("Vcard");return d.extend({xConfig:{cls:"vcard",hasImg:!1,title:"",hasBorder:!1,extTitle:""},tmpl:['<div {{bindAttr class="hasBorder?hui-border"}}>','<div {{bindAttr class="#hui-vcard-title hasImg?hui-title-hasimg #c-clear"}}>',"{{placeItem > [xrole=title]}}","{{#if title}}",'<div class="hui-title-txt">{{title}}</div>',"{{/if}}","{{#if extTitle}}",'<div class="hui-title-extra">{{extTitle}}</div>',"{{/if}}","</div>","{{placeItem > [xrole!=title][xrole!=action]}}",'<div class="hui-vcard-action">',"{{placeItem > [xrole=action]}}","</div>","</div>"].join(""),doConfig:c}),d}),define("C.Conversation","C.AbstractComponent",function(a){function b(){var a=this;a.callSuper(),a.imgClick&&a.listen({name:"click",selector:".js-conver-img",method:"delegate",handler:function(){a.imgClick.call(a)}})}var c=a.define("Conversation");return c.extend({xConfig:{cls:"conversation",theme:"left",time:"",image:"",content:""},tmpl:['<div class="c-clear">','<div class="hui-conver-time">{{time}}</div>','<div class="hui-conver-img js-conver-img">',"{{#if image}}",'<img {{bindAttr src="image"}}>',"{{else}}","{{placeItem}}","{{/if}}","</div>",'<div class="hui-conver-content">',"{{content}}",'<div class="hui-triangle">',"</div>","</div>","</div>"].join(""),doConfig:b}),c}),define("C.ModelList",["L.Browser","B.Util","B.Object","B.Date","B.Support","C.AbstractComponent","E.Draggable"],function(a,b,c,d,e,f,g){function h(){var a=this;a.callSuper(),a.set("pdTxt",a.pullTxt),a.itemXtype&&((a.defItem||(a.defItem={})).xtype=a.itemXtype);var b=a.model;0==b.size()&&a.set("isEmpty",!0),a.loadMore(!0),b.fetching&&a.set("emptyTips","加载中..."),a.listenTo(b,{add:function(b,c){a.addListItem(c)},remove:function(b,c){a.removeListItem(c)},sortItem:function(b,c,d){var e=a.find(function(a){return a.model&&a.model.id==c.id});e=e[0];var f=e.getEl(),g=f.parent(),h=g.children("div").eq(d);h.before(f)},reset:function(){a.removeListItem("emptyAll")},sync:function(){0===b.size()&&a.set("isEmpty",!0),a.set("emptyTips","暂无")}});var c=a.hasPullRefresh;a.set("hasPullRefresh",c),c&&a.initPdRefresh(),a.get("hasMoreBtn")&&a.listen({name:"click",method:"delegate",selector:".hui-list-more",handler:function(){a.pulldownIsRefresh?a.loadMore():a.refresh()}})}function i(){var c=this;c.listen({name:"afterRender",handler:function(){var e=c.getEl(),f=c.innerEl=e.find(".hui-list-inner"),h=e.find(".hui-list-pulldown");f[0].style[q]="-3.125em";var i=b.em2px(3.125),j=b.em2px(2.313),k="hui-pd-refresh",l="hui-pd-release",m=a.mobile();c.draggable=new g(f,{preventDefault:!1,start:function(){c._scrollY=c.getEl()[0].scrollTop},move:function(a,b){if(a.offsetY>0&&a.offsetY>Math.abs(a.offsetX)){var d=c._scrollY-a.offsetY;0>d&&(d=-d,m&&b.preventDefault(),d=Math.pow(d,.85),f[0].style[q]=-i+d+"px",d>j&&!h.hasClass(l)?(h.addClass(l),c.set("pdTxt",c.flipTxt)):j>d&&h.hasClass(l)&&(h.removeClass(l),c.set("pdTxt",c.pullTxt)))}return!1},end:function(){var a={};h.hasClass(l)?(h.addClass(k),c.set("pdTxt",c.releaseTxt),a[q]=0,f.animate(a,"fast",function(){c.pulldownIsRefresh?c.refresh():c.loadMore()})):(a[q]=-i,f.animate(a))}}),c.listenTo(c.model,"sync",function(){if(c.set("pdTime",d.formatDate(d.now(),"HH:mm")),h.hasClass(k)){h.removeClass(k+" "+l),c.set("pdTxt",c.pullTxt);var a={};a[q]=-i,f.animate(a)}})}}),c.listen({name:"afterShow",handler:function(){"bottom"==c.scrollPos&&setTimeout(function(){c.scrollTo("bottom")},0)}})}function j(a,b){var c=this;if(c.set("isEmpty",!1),c.model.size()===c.get("showBtnLimit")&&c.set("showMoreBtn",!0),void 0===b){b=c.model.indexOf(a);var d=c.inited?c.children.length:c.items.length;b=b>d?d:b}c.add({model:a},b),c.stayBottom&&c.scrollTo("bottom")}function k(a){var b=this;b.remove("emptyAll"==a?b.children:function(b){return b.model&&b.model.id==a.id}),0==b.children.length&&b.set("isEmpty",!0)}function l(a){var b=this,d=b.getEl();if(!d)return!1;if(d=d[0],c.isStr(a)){if("bottom"==a){var e=b.findEl(".hui-list-inner")[0].clientHeight;d.scrollTop=e}}else d.scrollTop=a}function m(a){var b=this,c=b.model,d=b.children.length,e=c.size(),f=b.cachePageSize;if(e>d){var g=d,h=d+f;b.pulldownIsRefresh?c.each(function(a,c){a>=g&&h>a&&b.addListItem(c)}):(h=e-d,g=h-f,c.eachDesc(function(a,c){a>=g&&h>a&&b.addListItem(c,0)}))}f>e-d&&(!a||!c.fetching&&b.autoFetch)&&b.getMore()}function n(a){var b=this;if(b.scrollTo(0),b.innerEl[0].style[q]=0,a){var c=b.findEl(".hui-list-pulldown");c.addClass("hui-pd-refresh"),b.set("pdTxt",b.releaseTxt),b.pulldownIsRefresh?b.refresh():b.loadMore()}}function o(){var a=this,b=a.draggable;b&&(b.destroy(),a.draggable=null),a.callSuper()}var p=f.define("ModelList");p.extend({xConfig:{cls:"mlist",isEmpty:!1,emptyTips:"暂无",pdTxt:"",pdComment:"上次刷新时间：",pdTime:"",hasMoreBtn:!0,moreBtnTxt:"查看更多",showBtnLimit:15,hasPullRefresh:!1,showMoreBtn:!1},pullTxt:"下拉可刷新",flipTxt:"松开可刷新",releaseTxt:"正在刷新",cachePageSize:15,scrollPos:"top",pulldownIsRefresh:!0,refresh:$H.noop,autoFetch:!0,stayBottom:!1,getMore:$H.noop,tmpl:['<div class="hui-list">','<div class="hui-list-inner">',"{{#if hasPullRefresh}}",'<div class="hui-list-pulldown hui-pd-pull c-h-middle-container">','<div class="c-h-middle hui-pull-container">','<span class="hui-icon hui-alt-icon hui-icon-arrow-d hui-light"></span>','<span class="hui-icon hui-alt-icon hui-icon-loading-mini"></span>','<div class="hui-pd-txt">','{{#if pdTxt}}<div class="js-txt">{{pdTxt}}</div>{{/if}}',"{{#if pdComment}}",'<div class="js-comment hui-pd-comment">','<span class="js-pdComment">{{pdComment}}</span>','<span class="js-pdTime">{{pdTime}}</span>',"</div>","{{/if}}","</div>","</div>","</div>","{{/if}}","{{#if isEmpty}}",'<div class="hui-list-empty js-empty">{{emptyTips}}</div>',"{{/if}}",'<div class="hui-list-container js-item-container">{{placeItem}}</div>',"{{#if hasMoreBtn}}",'<div {{bindAttr class="#hui-list-more showMoreBtn:hui-hidden"}}>','<a href="javascript:;" hidefocus="true" class="hui-btn hui-btn-gray hui-shadow hui-gradient hui-inline hui-radius-little">','<span class="hui-btn-txt">{{moreBtnTxt}}</span>',"</a>","</div>","{{/if}}","</div>","</div>"].join(""),doConfig:h,initPdRefresh:i,addListItem:j,removeListItem:k,scrollTo:l,loadMore:m,pullLoading:n,destroy:o});var q="marginTop";return p}),define("C.Editor",["L.Browser","C.AbstractComponent"],function(a,b){function c(){var a=this;return"<head><style>				html{word-wrap:break-word;}				body{color:"+a.color+";font-size:"+a.fontSize+";font-family:"+a.fontFamily+";line-height:1.7;padding:0.5em 0.625em;margin:0;				background-color:#ffffff;}				img{max-width:100%;}				pre{					white-space: pre-wrap; /* css-3 */					white-space: -moz-pre-wrap; /* Mozilla, since 1999 */					white-space: -pre-wrap; /* Opera 4-6 */					white-space: -o-pre-wrap; /* Opera 7 */					word-wrap: break-word; /* Internet Explorer 5.5+ */					/* white-space : normal ;Internet Explorer 5.5+ */					font-family:arial;				}				span.typoRed{border-bottom:0.125em dotted #ff0000;cursor:pointer;}				</style></head><body>"+(a.value||"")+"</body>"}function d(){var b=this,c=b.findEl("iframe")[0],d=b.ifrWin=c.contentWindow||c.window,e=b.ifrDoc=d.document,f=b.getInitHtml();e.open("text/html","replace"),e.writeln(f),e.close(),a.ie()?"5.0"==a.ie()?e.designMode="on":e.body.contentEditable=!0:(e.designMode="on",e.execCommand("useCSS",!1,!0)),b.ifrBody=e.body}function e(a){var b=this,c=b.ifrBody;return void 0===a?c.innerHTML:void(c.innerHTML=a)}function f(){var a=this,b=a.val();a.findEl("textarea").val(b)}var g=b.define("Editor");return g.extend({xConfig:{cls:"editor",name:"",value:""},listeners:[{name:"afterRender",custom:!0,handler:function(){this.makeEditable()}}],color:"#333",fontSize:"1em",fontFamily:"tahoma,arial,sans-serif",value:"",tmpl:["<div>",'<iframe class="hui-editor-iframe" hideFocus=true frameborder=0></iframe>','{{textarea class="#hui-editor-textarea" name="name" placeholder="placeholder" value=value}}',"</div>"].join(""),getInitHtml:c,makeEditable:d,val:e,sync:f}),g}),define("C.Share",["B.Object","C.AbstractComponent"],function(a,b){var c=b.define("Share");return c.extend({xConfig:{cls:"share"},listeners:[{name:"afterRender",custom:!0,handler:function(){var b=this;require("http://static.bshare.cn/b/buttonLite.js#style=-1&uuid=f19aa603-e8fa-437c-8069-f5a12dff7e4e",function(){bShare.init(),b.listen({name:"click",selector:"a",method:"delegate",handler:function(c){var d={title:b.get("title")||document.title,url:b.url||location.href,summary:b.get("summary")||""};if(b.getEntry){var e=b.getEntry();a.extend(d,e)}bShare.entries=[],bShare.addEntry(d);var f=c.currentTarget.className;"more"===f?bShare.more():bShare.share(c.originalEvent,f)}})})}}],tmpl:["<div>",'<ul class="bshare c-clear">',"<li>分享到:</li>",'<li><a title="分享到微信" class="weixin" href="javascript:void(0);" ><img src="http://static.bshare.cn/frame/images/logos/s4/weixin.gif "/></a></li>','<li><a title="分享到新浪微博" class="sinaminiblog" href="javascript:void(0);" ><img src="http://static.bshare.cn/frame/images/logos/s4/sinaminiblog.gif "/></a></li>','<li><a title="分享到QQ空间" class="qzone" href="javascript:void(0);" ><img src="http://static.bshare.cn/frame/images/logos/s4/qzone.gif "/></a></li>','<li><a title="分享到人人网" class="renren" href="javascript:void(0);" ><img src="http://static.bshare.cn/frame/images/logos/s4/renren.gif "/></a></li>','<li><a title="分享到豆瓣"  class="douban" href="javascript:void(0);" ><img src="http://static.bshare.cn/frame/images/logos/s4/douban.gif "/></a></li>','<li><a title="更多" class="more" href="javascript:void(0);" ><img src="http://static.bshare.cn/frame/images/logos/s4/more-style-addthis.png"/></a></li>','<li><a class="bshareDiv" href="http://www.bshare.cn/share"></a></li>',"</ul>","</div>"].join("")}),c}),define("C.PicCard","C.AbstractComponent",function(a){var b=a.define("PicCard");return b.extend({xConfig:{cls:"picard",radius:"normal",shadowOverlay:!0,headerImg:"",desc:"",avatar:"",userName:"",opDesc:"",opNum:0},listeners:[{name:"mouseover",el:".js-header",handler:function(a){$(a.currentTarget).addClass("hui-header-hover")}},{name:"mouseout",el:".js-header",handler:function(a){$(a.currentTarget).removeClass("hui-header-hover")}},{name:"click",selector:".js-avatar",method:"delegate",handler:function(){this.avatarClick&&this.avatarClick()}},{name:"click",selector:".js-op",method:"delegate",handler:function(){this.opClick&&this.opClick()}}],tmpl:["<div>",'<div class="js-header hui-picard-header">','<a href="javascript:;" hidefocus="true" class="hui-header-img">','<img class="js-header-img" {{bindAttr src="headerImg"}}/>',"</a>",'<div class="hui-header-op">','<div class="hui-mask"></div>','<div class="hui-op-container c-h-middle-container">',"{{placeItem > [xrole=headerOp]}}","</div>","</div>","</div>",'<div class="hui-picard-footer">','<div class="hui-picard-desc c-comment">{{desc}}</div>','<div class="hui-picard-op c-clear">','<a class="js-avatar hui-op-avatar" href="javascript:;" hidefocus="true">','<div class="hui-avatar hui-radius-large">','<div class="hui-avatar-img hui-radius-large">','<img {{bindAttr src="avatar"}}>',"</div>","</div>",'<span class="hui-op-link">{{userName}}</span>',"</a>",'<span class="hui-op-desc">{{opDesc}}</span>','<a class="js-op hui-op-like" href="javascript:;" hidefocus="true">','<span class="hui-op-num">{{opNum}}</span>','<span class="hui-icon hui-alt-icon hui-radius-big hui-icon-heart hui-light"></span>',"</a>","</div>","</div>","</div>"].join("")}),b}),define("C.Waterfall","C.AbstractComponent",function(a){function b(a){var b=this;b.listen({name:"afterShow",custom:!0,times:1,handler:function(){b.range()}}),b.callSuper([a])}function c(a,b){var c=this;a=a||0;var d=c.columnGap,e=c.columnWidth,f=c.columnCount,g=c.children,h=c.columnHeights,i=0;if(0===a||b){var j=c.getEl()[0].offsetWidth;if(f=Math.floor(j/(e+2*d)),(f===c.columnCount||0===f)&!b)return;c.columnCount=f,h=c.columnHeights=[];for(var k=0;f>k;k++)h.push(0)}for(var k=a,l=g.length;l>k;k++){for(var m=g[k],n=0,o=1,p=f;p>o;o++)h[n]>h[o]&&(n=o);var q=d+n*(e+2*d),r=d+h[n],s=m.getEl();s.css({left:q,top:r});var t=h[n]=r+s[0].offsetHeight+d;i=i>t?i:t,c.height=i}c.getEl().css({height:c.height})}var d=a.define("Waterfall");return d.extend({xConfig:{cls:"wfall"},columnCount:0,columnWidth:220,columnGap:15,listeners:[{name:"resize",el:$(window),handler:function(){this.range()}},{name:"scroll",el:$(window),handler:function(){var a=this,b=document.documentElement.scrollTop||document.body.scrollTop,c=$(window).height();if((!a._lastScroll||Math.abs(a._lastScroll-b)>150)&&b+c>a.height-50){var d=a.children.length;a._lastScroll=b,a.add(a.getMore()),a.range(d)}}}],doConfig:b,range:c}),d}),define("C.Slide",["B.Util","C.AbstractComponent"],function(a,b){function c(a){var b=this,c=a.pics;c[0].active=!0,b.callSuper([a])}function d(a){var b=this,c=b.findEl(".js-pic"),d=b.findEl(".js-op"),e="hui-hidden",f="hui-active",g=b.getEl()[0].clientWidth;c.each(function(b,h){var i=$(h);i.hasClass(e)||(i.animate({left:-g},function(){$(d[b]).removeClass(f),i.addClass(e)}),void 0===a&&(a=b==c.length-1?0:b+1))});var h=$(c[a]);h.css({left:g}).removeClass(e).animate({left:0},function(){$(d[a]).addClass(f)})}function e(a){var b=this;return a?void clearTimeout(b.slideTimer):void(b.slideTimer=setTimeout(function(){b.slide(),b.autoSlide()},b.timeout))}function f(){var a=this;clearTimeout(a.slideTimer),a.callSuper()}var g=b.define("Slide");return g.extend({xConfig:{cls:"slide",pics:[]},height:a.em2px(20),timeout:3e3,listeners:[{name:"afterRender",handler:function(){this.autoSlide()}},{name:"mouseover",handler:function(){this.autoSlide(!0)}},{name:"mouseout",handler:function(){this.autoSlide()}},{name:"click",selector:".js-op",method:"delegate",handler:function(a){var b=this,c=a.currentTarget;b.findEl(".js-op").each(function(a,d){return d===c?(b.slide(a),!1):void 0})}}],tmpl:['<div class="hui-slide">','<div class="hui-slide-cont">',"{{#each pics}}",'<div {{bindAttr class="#js-pic #hui-cont-pic active:hui-hidden"}}>','<img class="hui-pic-img" {{bindAttr src="img"}}/>','<h1 class="hui-pic-desc">{{title}}</h1>',"</div>","{{/each}}","</div>",'<div class="hui-slide-op">',"{{#each pics}}",'<a href="javascript:;" hidefocus="true" {{bindAttr class="#js-op #hui-op-btn active?hui-active"}}></a>',"{{/each}}","</div>","</div>"].join(""),doConfig:c,slide:d,autoSlide:e,destroy:f}),g});