/* Handy v1.0.0-dev | 2014-05-08 | zhengyinhui100@gmail.com */
$Define("C.ComponentManager",["CM.AbstractManager","CM.ViewManager"],function(a,b){var c=a.derive({type:"component",initialize:function(){var g=$H.getSingleton(b);this._types=g._types;this._all=g._all}});$CM=new c;return c});
$Define("C.AbstractComponent",["CM.ViewManager","CM.View"],function(a,b){$C=$H.ns("C",{});var c=$H.createClass();$H.inherit(c,b,{xtype:"AbstractComponent",activeCls:"hui-active",hasConfig:function(b,c){if(!c)return!1;if($H.isArr(c))for(var a=0,d=c.length;a<d;a++){if(this.match(b,c[a]))return!0}else if(this.match(b,c))return!0;return!1},doConfig:function(){this.callSuper();this.cls||(this.cls=this.xtype.toLowerCase());this.extCls=this.getExtCls();this.icon&&this.add({xtype:"Icon",name:this.icon});
this.isMini&&(this.defItem=$H.extend({isMini:!0},this.defItem))},getExtCls:function(){var b=["js-component","hui-"+this.cls];this.extCls&&b.push(this.extCls);this.theme&&b.push("hui-"+this.cls+"-"+this.theme);this.radius&&b.push("hui-radius-"+this.radius);this.isMini&&b.push("hui-mini");this.shadow&&b.push("hui-shadow");this.shadowSurround&&b.push("hui-shadow-surround");this.shadowOverlay&&b.push("hui-shadow-overlay");this.shadowInset&&b.push("hui-shadow-inset");this.isActive&&b.push(this.activeCls);
this.isFocus&&b.push("hui-focus");this.isInline&&b.push("hui-inline");return 0<b.length?b.join(" "):""},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},txt:function(b){var c=this.findEl(".js-"+this.cls+"-txt");0==c.length&&(c=this.findEl(".hui-"+this.cls+"-txt"));if(void 0!=b)c.text(b);else return c.text()},valid:function(){var b=this.validator;if(b){var c=this.val();b.error||(b.error=function(b){new $C.Tips({text:b,theme:"error"})});
return b=$H.Validator.valid(c,b)}for(var c=this.children,a=0,d=c.length;a<d;a++)if(b=c[a].valid(),!b)return b;return!0}},{define:function(b,e){var f=$H.createClass();$H.inherit(f,e||c,null,null,{notCover:function(b){return"define"==b}});$H.getSingleton(a).registerType(b,f);return $C[b]=f}});return c});$Define("C.Panel","C.AbstractComponent",function(a){a=a.define("Panel");a.extend({tmpl:['<div><%=this.content||this.findHtml(">*")%></div>']});return a});
$Define("C.Popup","C.AbstractComponent",function(a){a=a.define("Popup");var b=0,c;a.extend({delayShow:!0,clickHide:!0,showPos:"center",shadowOverlay:!0,tmpl:['<div><%=this.findHtml(">*")%></div>'],doConfig:function(){this.callSuper();this.clickHide&&this.listeners.push({name:"click",el:$(document),handler:function(){this.hide()}});$H.android()&&(this.listeners.push({name:"show",custom:!0,handler:function(){!0!=$H.Events.trigger("component.popup.show")&&$("input,textarea,select").attr("disabled","disabled")}}),
this.listeners.push({name:"hide",custom:!0,handler:function(){!0!=$H.Events.trigger("component.popup.hide")&&setTimeout(function(){$("input,textarea,select").removeAttr("disabled")},500)}}))},afterShow:function(){var c=this,a=c.getEl();a.css("z-index",1E3*b+1E3);if(!c.width&&c.parent){var f=c.width=c.parent.getEl().outerWidth();a.css("width",f)}a=c.showPos;if("string"==typeof a)c[a]();else"function"==typeof a&&a.call(c);c.noMask||c.mask();c.timeout&&setTimeout(function(){c.destroyed||c.hide()},c.timeout)},
hide:function(){!1!=this.callSuper()&&(this.noMask||this.unmask(),this.notDestroy||this.destroy())},top:function(){this.getEl().css({left:"100px",top:"8px",position:"fixed"})},center:function(){var b=this.getEl(),c=this.width||b.width(),a=this.height||b.height(),d=document,c=((d.documentElement.offsetWidth||d.body.offsetWidth)-c)/2,a=((d.documentElement.clientHeight||d.body.clientHeight)-a)/2+(d.documentElement.scrollTop||d.body.scrollTop),a=10>a?window.screen.height/2-200:a;b.css({left:c+"px",top:a-
(this.offsetTop||0)+"px"})},followEl:function(b){b=(b||this.parent.getEl()).position();this.getEl().css(b)},mask:function(){c||(c=$('<div class="hui-mask" style="display:none;"></div>').appendTo(document.body));c.css("z-index",1E3*b+998);0==b&&c.show();b++},unmask:function(){b--;0==b?c.hide():c.css("z-index",1E3*(b-1)+998)}});return a});
$Define("C.ControlGroup","C.AbstractComponent",function(a){a=a.define("ControlGroup");a.extend({multi:!1,cls:"ctrlgp",defItem:{xtype:"Button",extCls:"js-item",radius:null,shadow:!1,isInline:!1},tmpl:['<div class="<%if(this.direction=="h"){%> hui-ctrlgp-h<%}else{%> hui-ctrlgp-v<%}%>">','<%=this.findHtml(">*")%>',"</div>"],listeners:[{name:"click",selector:".js-item",method:"delegate",handler:function(b){var c=$(b.currentTarget),c=this.find(">[_id="+c.attr("id")+"]");0<c.length&&(c=c[0].index(),this.onItemClick(b,
c))}}],select:function(b){if(!this.notSelect&&(b="number"==typeof b?this.children[b]:"string"==typeof b?this.find(b)[0]:b))if(!this.multi&&!b.multi){var c=this.getSelected();c&&this.selectItem(c,!1);this.selectItem(b)}else this.selectItem(b,!b.selected)},getSelected:function(b){var c=[];this.each(function(a,e){e.selected&&c.push(b?a:e)});return 0<c.length?this.multi?c:c[0]:null},selectItem:function(b,c){(c=!1!=c)?(b.selected=c,b.select?b.select():b.active()):(b.selected=c,b.select?b.select(c):b.unactive())},
val:function(b){if(b){var c=b.split(",");this.each(function(b,a){a.select($H.contains(c,a.value))})}else return b=this.find(">[selected=true]"),c=[],$H.each(b,function(b,a){c.push(a.value)}),c.join(",")},onItemClick:function(b,c){this.select(c);this.itemClick&&this.itemClick(this.children[c],c)}});return a});
$Define("C.Icon","C.AbstractComponent",function(a){a=a.define("Icon");a.extend({tmpl:'<span class=";<%if(this.isAlt){%>; hui-alt-icon;<%}%>; hui-icon-<%=this.name%>;<%if(!this.noBg){%>; hui-icon-bg;<%}%>"></span>'.split(";"),doConfig:function(b){$H.isStr(b)&&(b={name:b});this.callSuper([b])}});return a});
$Define("C.Button","C.AbstractComponent",function(a){a=a.define("Button");a.extend({iconPos:"left",theme:"gray",activeCls:"hui-btn-active",cls:"btn",defItem:{xtype:"Icon"},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a href="javascript:;" hidefocus="true" class=",<%if(!this.text){%> hui-btn-icon-notxt<%},if(this.isBack){%> hui-btn-back<%},if(this.hasIcon&&this.text){%> hui-btn-icon-<%=this.iconPos%><%}%>">,<span class="hui-btn-txt"><%=this.text%></span>,<%=this.findHtml(">*")%>,</a>'.split(","),parseItem:function(b){"Icon"==
b.xtype&&(this.hasIcon=!0)}});return a});
$Define("C.Radio","C.AbstractComponent",function(a){a=a.define("Radio");a.extend({tmpl:'<div class="hui-btn hui-btn-gray<%if(this.selected){%> hui-radio-on<%}%>">;<span class="hui-icon hui-icon-radio"></span>;<input type="radio"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-radio-txt"><%=this.text%></span>;</div>'.split(";"),select:function(b){this.selected=b=!1!=b;var c=this.findEl("input"),
a=this.getEl();b?(c.attr("checked",!0),a.addClass("hui-radio-on")):(c.removeAttr("checked"),a.removeClass("hui-radio-on"))},val:function(b){if(b)this.value=b,this.findEl("input").val(b);else return this.value}});return a});
$Define("C.Checkbox","C.AbstractComponent",function(a){a=a.define("Checkbox");a.extend({text:"",value:"",selected:!1,multi:!0,cls:"chkbox",tmpl:'<div class="hui-btn hui-btn-gray<%if(this.selected){%> hui-chkbox-on<%}%>">;<span class="hui-icon hui-icon-chkbox"></span>;<input type="checkbox"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-chkbox-txt"><%=this.text%></span>;</div>'.split(";"),select:function(b){this.selected=
b=!1!=b;var c=this.findEl("input"),a=this.getEl();b?(c.attr("checked",!0),a.addClass("hui-chkbox-on")):(c.removeAttr("checked"),a.removeClass("hui-chkbox-on"))},val:function(b){if(b)this.value=b,this.findEl("input").val(b);else return this.value}});return a});
$Define("C.Select","C.AbstractComponent",function(a){a=a.define("Select");a.extend({text:"\u8bf7\u9009\u62e9...",value:"",radius:"little",optionClick:function(){},defItem:{xtype:"Menu",hidden:!0,markType:"dot",renderTo:"body"},_customEvents:["change"],tmpl:['<div class="hui-btn hui-btn-gray hui-btn-icon-right">','<span class="hui-icon hui-alt-icon hui-icon-carat-d hui-light"></span>','<input value="<%=this.value%>" name="<%=this.name%>"/>','<span class="hui-btn-txt js-select-txt"><%=this.text%></span>',
"</div>"],listeners:[{name:"click",handler:function(){this.showOptions()}}],doConfig:function(b){var c=this;c.callSuper();for(var a=b.options,e=!1,f=0,d=a.length;f<d;f++){var h=a[f];if(h.value==b.value){c.text=h.text;e=h.selected=!0;break}}e||delete c.value;c.add({itemClick:function(b){c.val(b.value)},width:c.width,items:a})},showOptions:function(){this.children[0].show()},val:function(b){if(b){if(this.value!=b){var c=this.children[0],a=c.find(">[value="+b+"]");0<a.length&&(this.trigger("change"),
a=a[0],this.value=b,this.findEl("input").attr("value",b),this.txt(a.text),c.select(a))}}else return this.value}});return a});
$Define("C.Input","C.AbstractComponent",function(a){a=a.define("Input");a.extend({radius:"little",iconPos:"left",btnPos:"right",tmpl:'<div class=";<%if(this.hasIcon){%>; hui-input-icon-<%=this.iconPos%>;<%}%>;<%if(this.hasBtn){%>; hui-input-btn-<%=this.btnPos%>;<%}%>">;<%=this.findHtml(">*")%>;<%if(this.type=="textarea"){%>;<textarea class="js-input";<%}else{%>;<input type="text" class="js-input hui-input-txt";<%}%> ; name="<%=this.name%>";<%if(this.placeholder){%>; placeholder="<%=this.placeholder%>";<%}%>;<%if(this.type=="textarea"){%>;><%=this.value%></textarea>;<%}else{%>; value="<%=this.value%>"/>;<%}%> ;</div>'.split(";"),listeners:[{name:"focus",
el:".js-input",handler:function(){this.getEl().addClass("hui-focus")}},{name:"blur",el:".js-input",handler:function(){this.getEl().removeClass("hui-focus")}}],doConfig:function(b){var a=this;"search"==b.type&&(a.icon="search");a.callSuper();"textarea"==a.type&&a.listeners.push({name:"input propertychange",el:".js-input",handler:function(){var b=a.findEl(".js-input"),e=b[0].scrollHeight;50<=e&&b.css("height",e)}});a.withClear&&a.add({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.findEl("input").val("").focus()}})},
parseItem:function(b){"Icon"==b.xtype?this.hasIcon=!0:"Button"==b.xtype&&(this.hasBtn=!0)},val:function(b){var a=this.findEl("input,textarea");if(b)a.val(b);else return a.val()},focus:function(){this.findEl("input").focus()}});return a});
$Define("C.Label","C.AbstractComponent",function(a){a=a.define("Label");a.extend({tmpl:['<label class="','<%if(this.color){%> hui-label-<%=this.color%><%}%><%if(this.textAlign){%> c-txt-<%=this.textAlign%><%}%>" for="<%=this.forName%>">',"<%=this.text%>","</label>"]});return a});
$Define("C.RowItem","C.AbstractComponent",function(a){a=a.define("RowItem");a.extend({cls:"rowitem",tmpl:'<div class="<%if(this.text){%> hui-rowitem-txt<%}%><%if(this.underline){%> hui-rowitem-underline<%}%>">,<%=this.text%>,<%=this.findHtml(">*")%>,<%if(this.hasArrow){%>,<a href="javascript:;" hidefocus="true" class="hui-click-arrow" title="\u8be6\u60c5"><span class="hui-icon hui-alt-icon hui-icon-carat-r hui-light"></span></a>,<%}%>,</div>'.split(","),doConfig:function(b){this.callSuper();this.text||
(this.text="&nbsp;");this.text&&void 0==this.underline&&(this.underline=!0);b.click&&void 0==this.hasArrow&&(this.hasArrow=!0)}});return a});$Define("C.Set","C.AbstractComponent",function(a){a=a.define("Set");a.extend({tmpl:'<div>;<h1 class="hui-set-title"><%=this.title%></h1>;<div class="hui-set-content">;<%=this.findHtml(">*")%>;</div>;</div>'.split(";")});return a});
$Define("C.Field","C.AbstractComponent",function(a){a=a.define("Field");a.extend({defItem:{xtype:"RowItem",xrole:"content"},tmpl:'<div class="<%if(this.noPadding){%> hui-field-nopadding<%}%>">;<div class="hui-field-left">;<%=this.findHtml(">[xrole=title]")%>;</div>;<div class="hui-field-right">;<%=this.findHtml(">[xrole=content]")%>;</div>;</div>'.split(";"),doConfig:function(b){this.callSuper();var a=this.title;$H.isSimple(a)&&(a={text:a});a=$H.extend({xtype:"Label",xrole:"title"},a);this.add(a);
a=this.content;void 0==a&&!b.items&&(a="");$H.isSimple(a)&&(a={text:a,underline:!0});a&&(this.noPadding=!0,this.add(a))}});return a});$Define("C.Form","C.AbstractComponent",function(a){a=a.define("Form");a.extend({tmpl:'<div>;<form action="">;<div class="hui-form-tips c-txt-error"></div>;<%=this.findHtml(">*")%>;</form>;</div>'.split(";")});return a});
$Define("C.TabItem",["C.AbstractComponent","C.Panel"],function(a){a=a.define("TabItem");a.extend({defItem:{xtype:"Button",xrole:"title",radius:null,isInline:!1,iconPos:"top",shadow:!1},extCls:"js-item",tmpl:['<div><%=this.findHtml(">[xrole=title]")%></div>'],initialize:function(){this.callSuper();this.titleCmp=this.find(">[xrole=title]")[0];this.contentCmp=this.find(">[xrole=content]")[0]},doConfig:function(b){this.callSuper();var a=b.title;"string"==typeof a&&(a={text:a});"object"==typeof a&&this.add(a);
b=b.content;"string"==typeof b&&(b={xtype:"Panel",content:b});"object"==typeof b&&($H.extend(b,{xrole:"content",hidden:!this.selected,extCls:"js-content"}),this.add(b));this.activeType&&(this.defItem.activeCls="hui-btn-active-"+this.activeType)},parseItem:function(b){this.selected&&"title"==b.xrole&&(b.isActive=!0)},select:function(b){var a=this.titleCmp,g=this.contentCmp;!1==b?(a.unactive(),g&&g.hide()):(a.active(),g&&g.show())},getContent:function(b,a){a||(a=this.contentCmp);return this.callSuper([b,
a])},setContent:function(b,a){a||(a=this.contentCmp);return this.callSuper([b,a])}});return a});
$Define("C.Tab",["C.AbstractComponent","C.TabItem","C.ControlGroup"],function(a,b,c){a=a.define("Tab",c);a.extend({cls:"tab",defItem:{xtype:"TabItem"},listeners:[{name:"afterRender add remove",custom:!0,handler:function(){this.layout()}}],tmpl:["<div>",'<ul class="js-tab-btns c-clear">','<%var aBtns=this.find(">TabItem");',"for(var i=0,len=aBtns.length;i<len;i++){%>",'<li class="hui-tab-item">',"<%=aBtns[i].getHtml()%>","</li>","<%}%>","</ul>",'<%=this.findHtml(">TabItem>[xrole=content]")%>',"</div>"],
doConfig:function(){this.callSuper();this.activeType&&(this.defItem.activeType=this.activeType)},layout:function(){var a=this.children.length,b=Math.floor(100/a);this.findEl(".js-tab-btns>li").each(function(c,d){d.style.width=c<a-1?b+"%":100-b*(a-1)+"%"})},setTabContent:function(a,b){b=b||this.getSelected(!0);this.findEl(".js-tab-content").index(b).html(a)}});return a});
$Define("C.Toolbar","C.AbstractComponent",function(a){a=a.define("Toolbar");a.extend({cls:"tbar",defItem:{xtype:"Button",theme:"black"},tmpl:['<div class="<%if(this.type=="header"){%> hui-header<%}else if(this.type=="footer"){%> hui-footer<%}%>">','<%=this.findHtml(">*")%>','<%if(this.title){%><h1 class="hui-tbar-title js-tbar-txt"><%=this.title%></h1><%}%>',"</div>"],parseItem:function(a){"Button"==a.xtype&&(a.shadowSurround=!0,"left"==a.pos?a.extCls=(a.extCls||"")+" hui-tbar-btn-left":"right"==
a.pos&&(a.extCls=(a.extCls||"")+" hui-tbar-btn-right"))}});return a});
$Define("C.Tips",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(a,b){var c=a.define("Tips",b);c.extend({cls:"tips",theme:"black",timeout:1E3,radius:"normal",tmpl:['<div class="<%if(!this.text){%> hui-tips-notxt<%}%>">','<%=this.findHtml(">*")%>','<%if(this.text){%><span class="hui-tips-txt"><%=this.text%></span><%}%>',"</div>"],doConfig:function(a){"top"==a.showPos&&($H.extend(this,{isMini:!0},{noCover:!0}),"loading-mini"==a.icon&&$H.extend(this,{shadowOverlay:null,theme:null},{noCover:!0}));
this.callSuper()}});return c});
$Define("C.Dialog",["C.AbstractComponent","C.Popup"],function(a,b){var c=a.define("Dialog",b);$H.extend(c,{alert:function(a){return new c({contentMsg:a,noClose:!0,noCancel:!0})},confirm:function(a,b){return new c({contentMsg:a,noClose:!0,okCall:function(){return b&&b(!0)},cancelCall:function(){return b&&b(!1)}})},prompt:function(a,b,f){f||(f=b,b="");return new c({contentMsg:a,noClose:!0,items:{xtype:"Input",xrole:"dialog-content",value:b},okCall:function(){var a=this.find("Input")[0].val();return f&&
f(a)}})}});c.extend({okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",clickHide:!1,radius:"little",tmpl:'<div>;<%=this.findHtml(">[xrole=dialog-header]")%>;<div class="hui-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="hui-body-content">;<h1 class="hui-content-title"><%=this.contentTitle%></h1>;<div class="hui-content-msg"><%=this.contentMsg%></div>;<%=this.findHtml(">[xrole=dialog-content]")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="hui-body-action">;<%=this.findHtml(">[xrole=dialog-action]")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(a){var b=this;b.callSuper();a=a.items;b.title&&!b.hasConfig("[xrole=dialog-header]",a)&&b.add({xtype:"Toolbar",title:b.title,theme:"gray",xrole:"dialog-header",extCls:"hui-dialog-header",items:!b.noClose&&{xtype:"Button",radius:"big",icon:"delete",isMini:!1,theme:"gray",pos:"left",click:function(){b.hide()}}});!b.noAction&&!b.hasConfig("[xrole=dialog-action]",a)&&(a=[],b.noCancel||a.push({title:{isActive:1==b.activeBtn,text:b.cancelTxt,click:function(){!1!=(b.cancelCall&&b.cancelCall())&&
b.hide()}}}),b.noOk||a.push({title:{text:b.okTxt,isActive:2==b.activeBtn,click:function(){!1!=(b.okCall&&b.okCall())&&b.hide()}}}),b.add({xtype:"Tab",xrole:"dialog-action",theme:"border-top",notSelect:!0,items:a}))}});return c});
$Define("C.Menu",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(a,b,c){a=a.define("Menu",b);a.extend(c.prototype);a.extend({notDestroy:!0,cls:"menu",tmpl:['<div class="<%if(this.markType=="dot"){%> hui-menu-mark<%}%>">',"<ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-menu-item<%if(this.children[i].selected){%> hui-item-mark<%}%>">',"<%=this.children[i].getHtml()%>",'<%if(this.markType=="dot"){%><span class="hui-icon-mark"></span><%}%>',"</li>","<%}%>","</ul>",
"</div>"],selectItem:function(a,b){b=!1!=b;"dot"==this.markType?(a.selected=b,a.getEl().parent()[!1==b?"removeClass":"addClass"]("hui-item-mark")):"active"==this.markType?c.prototype.selectItem.call(this,a,b):a.selected=b}});return a});
$Define("C.Hcard","C.AbstractComponent",function(a){a=a.define("Hcard");a.extend({tmpl:'<div class="hui-hcard,<%if(this.image){%> hui-hcard-hasimg">,<div class="hui-hcard-img">,<img src="<%=this.image%>">,</div>,<%}else{%>,"><%}%>,<div class="hui-hcard-content">,<div class="hui-content-title"><%=this.title%></div>,<%var aDesc=this.desc;aDesc=$H.isArr(aDesc)?aDesc:[aDesc];for(var i=0;i<aDesc.length;i++){%>,<div class="hui-content-desc">,<%var icon;if(icon=aDesc[i].icon){%>,<span class="hui-icon hui-mini hui-alt-icon hui-icon-<%=icon%> hui-light"></span>,<%}%>,<%=aDesc[i].text%>,</div>,<%}%>,</div>,<%=this.findHtml(">*")%>,<%if(this.hasArrow){%>,<a href="javascript:;" hidefocus="true" class="hui-click-arrow" title="\u8be6\u60c5">,<span class="hui-icon hui-alt-icon hui-icon-carat-r hui-light"></span>,</a>,<%}%>,</div>'.split(","),doConfig:function(a){this.callSuper();
a.click&&void 0==this.hasArrow&&(this.hasArrow=!0)}});return a});
$Define("C.Vcard","C.AbstractComponent",function(a){a=a.define("Vcard");a.extend({tmpl:'<div class="hui-vcard">;<div class="hui-vcard-title hui-title-hasimg c-clear">;<div class="hui-title-img">;<img alt="" src="<%=this.image%>">;</div>;<div class="hui-title-txt"><%=this.title%></div>;<div class="hui-title-extra"><%=this.extraTitle%></div>;</div>;<%=this.findHtml(">[xrole!=action]")%>;<div class="hui-vcard-action">;<%=this.findHtml(">[xrole=action]")%>;</div>;</div>'.split(";"),doConfig:function(a){this.callSuper();
if(a=a.action)a=$H.extend({xtype:"Button",radius:null,isInline:!1,xrole:"action"},a),this.add(a)}});return a});
$Define("C.ModelList","C.AbstractComponent",function(a){a=a.define("ModelList");a.extend({emptyTips:"\u6682\u65e0\u7ed3\u679c",pdText:"\u4e0b\u62c9\u53ef\u5237\u65b0",pdComment:"\u4e0a\u6b21\u5237\u65b0\u65f6\u95f4\uff1a",tmpl:'<div class="hui-list s-scroll">,<div class="hui-list-inner">,<div<%if(this.children.length>0){%> style="display:none"<%}%> class="hui-list-empty js-empty"><%=this.emptyTips%></div>,<%if(this.hasPullRefresh){%>,<div class="hui-list-pulldown hui-pd-pull c-h-middle-container">,<div class="c-h-middle">,<span class="hui-icon hui-alt-icon hui-icon-arrow-d hui-light"></span>,<span class="hui-icon hui-alt-icon hui-icon-loading-white"></span>,<div class="hui-pd-txt">,<%if(this.pdText){%><div class="js-txt"><%=this.pdText%></div><%}%>,<%if(this.pdComment){%><div class="js-comment hui-pd-comment"><span class="js-pdComment"><%=this.pdComment%></span><span class="js-pdTime"><%=this.pdTime%></span></div><%}%>,</div>,</div>,</div>,<%}%>,<div class="js-item-container"><%=this.findHtml(">*")%></div>,<%if(this.hasPullRefresh){%>,<div class="hui-list-more">,<a href="javascript:;" hidefocus="true" class="hui-btn hui-btn-gray hui-shadow hui-inline hui-radius-normal">,<span class="hui-btn-txt">\u67e5\u770b\u66f4\u591a</span>,</a>,</div>,<%}%>,</div>,</div>'.split(","),init:function(){var a=
this;a.itemXtype&&((a.defItem||(a.defItem={})).xtype=a.itemXtype);var c=a.model;c.each(function(c,e){a.addListItem(e)});a.listenTo(c,{add:function(c,e){a.addListItem(e)},remove:function(c,e){a.removeListItem(e)},reset:function(){a.removeListItem("emptyAll")}});a.hasPullRefresh&&(a.listeners=a.listeners.concat([{name:"afterRender",handler:function(){var a=this,b=a.getEl();b.css({height:document.body.clientHeight-40});var c=b.find(".hui-list-pulldown"),d=c.find(".js-txt");a.scroller=new window.iScroll(b[0],
{useTransition:!0,topOffset:50,onRefresh:function(){c.hasClass("hui-pd-refresh")&&(c.removeClass("hui-pd-refresh hui-pd-release"),d.html("\u4e0b\u62c9\u53ef\u5237\u65b0"))},onScrollMove:function(){5<this.y&&!c.hasClass("hui-pd-release")?(c.addClass("hui-pd-release"),d.html("\u677e\u5f00\u53ef\u5237\u65b0"),this.minScrollY=0):5>this.y&&c.hasClass("hui-pd-release")&&(c.removeClass("hui-pd-release"),d.html("\u4e0b\u62c9\u53ef\u5237\u65b0"),this.minScrollY=-50)},onScrollEnd:function(){c.hasClass("hui-pd-release")&&
(c.addClass("hui-pd-refresh"),d.html("\u6b63\u5728\u5237\u65b0"),a.refresh())}});a.listenTo(a.model,"sync",function(){setTimeout(function(){b[0].clientHeight&&a.scroller.refresh()},0)})}},{name:"click",method:"delegate",selector:".hui-list-more",handler:function(){a.getMore()}}]))},addListItem:function(a){this.inited&&this.findEl(".js-empty").hide();this.add({model:a,renderTo:">.js-item-container"})},removeListItem:function(a){"emptyAll"==a?this.remove(this.children):this.remove(function(c){return c.model&&
c.model.id==a.id});0==this.children.length&&this.findEl(".js-empty").show()},destroy:function(){this.scroller&&(this.scroller.destroy(),this.scroller=null);this.callSuper()}});return a});
