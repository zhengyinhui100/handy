/* Handy v1.0.0-dev | 2014-03-19 | zhengyinhui100@gmail.com */
$Define("C.AbstractComponent",["CM.ViewManager","CM.AbstractView"],function(c,a){var b=$H.createClass();$C=$H.component;$H.inherit(b,a,{xtype:"AbstractComponent",activeCls:"hui-active",hasConfig:function(d,a){if(!a)return!1;if($HO.isArray(a))for(var b=0,c=a.length;b<c;b++){if(this.match(d,a[b]))return!0}else if(this.match(d,a))return!0;return!1},doConfig:function(d){this.callSuper([d]);this.cls||(this.cls=this.xtype.toLowerCase());this.extCls=this.getExtCls();this.icon&&this.addItem({xtype:"Icon",
name:this.icon});this.isMini&&(this.defItem=$HO.extend({isMini:!0},this.defItem))},getExtCls:function(){var d=["js-component"];this.extCls&&d.push(this.extCls);this.theme&&d.push("hui-"+this.cls+"-"+this.theme);this.radius&&d.push("hui-radius-"+this.radius);this.isMini&&d.push("hui-mini");this.shadow&&d.push("hui-shadow");this.shadowSurround&&d.push("hui-shadow-surround");this.shadowOverlay&&d.push("hui-shadow-overlay");this.shadowInset&&d.push("hui-shadow-inset");this.isActive&&d.push(this.activeCls);
this.isFocus&&d.push("hui-focus");this.isInline&&d.push("hui-inline");return 0<d.length?d.join(" "):""},active:function(){this.getEl().addClass(this.activeCls)},unactive:function(){this.getEl().removeClass(this.activeCls)},txt:function(d){var a=this.find(".js-"+this.cls+"-txt");0==a.length&&(a=this.find(".hui-"+this.cls+"-txt"));if(void 0!=d)a.text(d);else return a.text()},valid:function(){var d=this.settings.validator;if(d){var a=this.val();d.error||(d.error=function(d){new $C.Tips({text:d,theme:"error"})});
return d=$H.Validator.valid(a,d)}for(var a=this.children,b=0,c=a.length;b<c;b++)if(d=a[b].valid(),!d)return d;return!0}},{define:function(d,a){var e=$H.createClass();$H.inherit(e,a||b,null,null,{notCover:function(d){return"define"==d}});$HO.getSingleton(c).registerType(d,e);return $C[d]=e}});return b});
$Define("C.Popup","C.AbstractComponent",function(c){c=c.define("Popup");var a=0,b;c.extend({delayShow:!0,clickHide:!0,showPos:"center",shadowOverlay:!0,tmpl:['<div class="hui-popup"><%=this.findHtml("$>*")%></div>'],doConfig:function(d){this.callSuper([d]);this.clickHide&&this._listeners.push({name:"click",el:$(document),handler:function(){this.hide()}});$H.Browser.android()&&(this._listeners.push({name:"show",custom:!0,handler:function(){!0!=$H.Events.trigger("component.popup.show")&&$("input,textarea,select").attr("disabled",
"disabled")}}),this._listeners.push({name:"hide",custom:!0,handler:function(){!0!=$H.Events.trigger("component.popup.hide")&&setTimeout(function(){$("input,textarea,select").removeAttr("disabled")},500)}}))},afterShow:function(){var d=this,b=d.getEl();b.css("z-index",1E3*a+1E3);if(!d.width&&d.parent){var c=d.width=d.parent.getEl().outerWidth();b.css("width",c)}b=d.showPos;if("string"==typeof b)d[b]();else"function"==typeof b&&b.call(d);d.noMask||d.mask();d.timeout&&setTimeout(function(){d.destroyed||
d.hide()},d.timeout)},hide:function(){!1!=this.callSuper()&&(this.noMask||this.unmask(),this.notDestroy||this.destroy())},center:function(){var d=this.getEl(),a=this.width||d.width(),b=this.height||d.height(),c=document,a=((c.documentElement.offsetWidth||c.body.offsetWidth)-a)/2,b=((c.documentElement.clientHeight||c.body.clientHeight)-b)/2+(c.documentElement.scrollTop||c.body.scrollTop),b=10>b?window.screen.height/2-200:b;d.css({left:a+"px",top:b-(this.offsetTop||0)+"px"})},followEl:function(a){a=
(a||this.parent.getEl()).position();this.getEl().css(a)},mask:function(){b||(b=$('<div class="hui-mask" style="display:none;"></div>').appendTo(document.body));b.css("z-index",1E3*a+998);0==a&&b.show();a++},unmask:function(){a--;0==a?b.hide():b.css("z-index",1E3*(a-1)+998)}});return c});
$Define("C.ControlGroup","C.AbstractComponent",function(c){c=c.define("ControlGroup");c.extend({multi:!1,defItem:{xtype:"Button",extCls:"js-item",radius:null,shadow:!1,isInline:!1},tmpl:['<div class="hui-ctrlgp<%if(this.direction=="h"){%> hui-ctrlgp-h<%}else{%> hui-ctrlgp-v<%}%>">','<%=this.findHtml("$>*")%>',"</div>"],listeners:[{name:"click",selector:".js-item",method:"delegate",handler:function(a){var b=$(a.currentTarget),b=$V.get(b.attr("id")).index();this.onItemClick(a,b)}}],select:function(a){if(!this.notSelect&&
(a="number"==typeof a?this.children[a]:"string"==typeof a?this.find(a)[0]:a))if(!this.multi&&!a.multi){var b=this.getSelected();b&&this.selectItem(b,!1);this.selectItem(a)}else this.selectItem(a,!a.selected)},getSelected:function(a){var b=[];this.each(function(d,c){c.selected&&b.push(a?d:c)});return 0<b.length?this.multi?b:b[0]:null},selectItem:function(a,b){(b=!1!=b)?(a.selected=b,a.select?a.select():a.active()):(a.selected=b,a.select?a.select(b):a.unactive())},val:function(a){if(a){var b=a.split(",");
this.each(function(a,c){c.select($HO.contains(b,c.value))})}else return a=this.find("$>[selected=true]"),b=[],$HO.each(a,function(a,c){b.push(c.value)}),b.join(",")},onItemClick:function(a,b){this.select(b);this.itemClick&&this.itemClick(this.children[b],b)}});return c});
$Define("C.Icon","C.AbstractComponent",function(c){c=c.define("Icon");c.extend({tmpl:'<span class="hui-icon;<%if(this.isAlt){%>; hui-alt-icon;<%}%>; hui-icon-<%=this.name%>;<%if(!this.noBg){%>; hui-icon-bg;<%}%>"></span>'.split(";")});return c});
$Define("C.Button","C.AbstractComponent",function(c){c=c.define("Button");c.extend({iconPos:"left",theme:"gray",activeCls:"hui-btn-blue",cls:"btn",defItem:{xtype:"Icon"},radius:"normal",shadow:!0,isInline:!0,tmpl:'<a href="javascript:;" hidefocus="true" class="hui-btn,<%if(!this.text){%> hui-btn-icon-notxt<%},if(this.isBack){%> hui-btn-back<%},if(this.hasIcon&&this.text){%> hui-btn-icon-<%=this.iconPos%><%}%>">,<span class="hui-btn-txt"><%=this.text%></span>,<%=this.findHtml("$>*")%>,</a>'.split(","),parseItem:function(a){"Icon"==
a.xtype&&(this.hasIcon=!0)}});return c});
$Define("C.Radio","C.AbstractComponent",function(c){c=c.define("Radio");c.extend({tmpl:'<div class="hui-radio hui-btn hui-btn-gray<%if(this.selected){%> hui-radio-on<%}%>">;<span class="hui-icon hui-icon-radio"></span>;<input type="radio"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-radio-txt"><%=this.text%></span>;</div>'.split(";"),select:function(a){this.selected=a=!1!=a;var b=this.find("input"),
d=this.getEl();a?(b.attr("checked",!0),d.addClass("hui-radio-on")):(b.removeAttr("checked"),d.removeClass("hui-radio-on"))},val:function(a){if(a)this.value=a,this.find("input").val(a);else return this.value}});return c});
$Define("C.Checkbox","C.AbstractComponent",function(c){c=c.define("Checkbox");c.extend({text:"",value:"",selected:!1,multi:!0,cls:"chkbox",tmpl:'<div class="hui-chkbox hui-btn hui-btn-gray<%if(this.selected){%> hui-chkbox-on<%}%>">;<span class="hui-icon hui-icon-chkbox"></span>;<input type="checkbox"<%if(this.selected){%> checked=true<%}%>;<%if(this.name){%> name="<%=this.name%>"<%}%>;<%if(this.value){%> value="<%=this.value%>"<%}%>/>;<span class="hui-chkbox-txt"><%=this.text%></span>;</div>'.split(";"),select:function(a){this.selected=
a=!1!=a;var b=this.find("input"),d=this.getEl();a?(b.attr("checked",!0),d.addClass("hui-chkbox-on")):(b.removeAttr("checked"),d.removeClass("hui-chkbox-on"))},val:function(a){if(a)this.value=a,this.find("input").val(a);else return this.value}});return c});
$Define("C.Select","C.AbstractComponent",function(c){c=c.define("Select");c.extend({text:"\u8bf7\u9009\u62e9...",value:"",radius:"little",optionClick:function(){},defItem:{xtype:"Menu",hidden:!0,markType:"dot",renderTo:"body"},_customEvents:["change"],tmpl:['<div class="hui-select hui-btn hui-btn-gray hui-btn-icon-right">','<span class="hui-icon hui-alt-icon hui-icon-carat-d hui-light"></span>','<input value="<%=this.value%>" name="<%=this.name%>"/>','<span class="hui-btn-txt js-select-txt"><%=this.text%></span>',
"</div>"],listeners:[{name:"click",handler:function(){this.showOptions()}}],doConfig:function(a){var b=this;b.callSuper([a]);for(var d=a.options,c=0,e=d.length;c<e;c++){var f=d[c];if(f.value==a.value){b.text=f.text;f.selected=!0;break}}b.addItem({itemClick:function(a){b.val(a.value)},width:b.width,items:d})},showOptions:function(){this.children[0].show()},val:function(a){if(a){if(this.value!=a){var b=this.children[0],d=b.find('$>[value="'+a+'"]');0<d.length&&(this.trigger("change"),d=d[0],this.value=
a,this.find("input").attr("value",a),this.txt(d.text),b.select(d))}}else return this.value}});return c});
$Define("C.Input","C.AbstractComponent",function(c){c=c.define("Input");c.extend({radius:"little",iconPos:"left",btnPos:"right",tmpl:'<div class="hui-input;<%if(this.hasIcon){%>; hui-input-icon-<%=this.iconPos%>;<%}%>;<%if(this.hasBtn){%>; hui-input-btn-<%=this.btnPos%>;<%}%>">;<%=this.findHtml("$>*")%>;<%if(this.type=="textarea"){%>;<textarea class="js-input";<%}else{%>;<input type="text" class="js-input hui-input-txt";<%}%> ; name="<%=this.name%>";<%if(this.placeholder){%>; placeholder="<%=this.placeholder%>";<%}%>;<%if(this.type=="textarea"){%>;><%=this.value%></textarea>;<%}else{%>; value="<%=this.value%>"/>;<%}%> ;</div>'.split(";"),listeners:[{name:"focus",
el:".js-input",handler:function(){this.getEl().addClass("hui-focus")}},{name:"blur",el:".js-input",handler:function(){this.getEl().removeClass("hui-focus")}}],doConfig:function(a){var b=this;b.callSuper([a]);"search"==b.type?b.icon="search":"textarea"==b.type&&b._listeners.push({name:"input propertychange",el:".js-input",handler:function(){var a=b.find(".js-input");a.css("height",a[0].scrollHeight)}});b.withClear&&b.addItem({xtype:"Button",radius:"big",icon:"delete",click:function(){this.parent.find("input").val("").focus()}})},
parseItem:function(a){"Icon"==a.xtype?this.hasIcon=!0:"Button"==a.xtype&&(this.hasBtn=!0)},val:function(a){var b=this.find("input,textarea");if(a)b.val(a);else return b.val()},focus:function(){this.find("input").focus()}});return c});$Define("C.Set","C.AbstractComponent",function(c){c=c.define("Set");c.extend({tmpl:'<div class="hui-set">;<h1 class="hui-set-title"><%=this.title%></h1>;<div class="hui-set-content">;<%=this.findHtml("$>*")%>;</div>;</div>'.split(";")});return c});
$Define("C.Field","C.AbstractComponent",function(c){c=c.define("Field");c.extend({tmpl:'<div class="hui-form-field">;<label class="hui-form-left" for="<%=this.forName%>"><%=this.label%></label>;<div class="hui-form-right">;<%=this.text%>;<%=this.findHtml("$>*")%>;</div>;</div>'.split(";")});return c});
$Define("C.Form","C.AbstractComponent",function(c){c=c.define("Form");c.extend({tmpl:'<div class="hui-form">;<form action="">;<div class="hui-form-tips c-error"></div>;<%=this.findHtml("$>*")%>;</form>;</div>'.split(";")});return c});
$Define("C.Tab",["C.AbstractComponent","C.ControlGroup"],function(c,a){var b=c.define("Tab",a);b.extend({defItem:{xtype:"Button",radius:null,isInline:!1,extCls:"js-item",iconPos:"top",shadow:!1},tmpl:['<div class="hui-tab">','<ul class="c-clear">',"<%for(var i=0,len=this.children.length;i<len;i++){","var width=Math.floor(100/len);%>",'<li class="hui-tab-item" style="width:<%=(i==len-1)?(100-width*(len-1)):width%>%">',"<%=this.children[i].getHtml()%>","</li>","<%}%>","</ul>","<%if(this.hasContent){%>",
"<%for(var i=0,len=this.children.length;i<len;i++){%>",'<div class="js-tab-content"<%if(!this.children[i].selected){%> style="display:none"<%}%>>',"<%=this.children[i].content%>","</div>","<%}%>","<%}%>","</div>"],doConfig:function(a){this.callSuper([a]);this.activeType&&(this.defItem.activeCls="hui-btn-active-"+this.activeType)},parseItem:function(a){a.selected&&(a.isActive=!0)},onItemClick:function(a,b){this.hasContent&&this.find(".js-tab-content").hide().eq(b).show();this.callSuper([a,b])},setContent:function(a,
b){a=a||this.getSelected(!0);this.find("js-tab-content").index(a).html(b)}});return b});
$Define("C.Toolbar","C.AbstractComponent",function(c){c=c.define("Toolbar");c.extend({cls:"tbar",defItem:{xtype:"Button",theme:"black",pos:"right",isMini:!0},tmpl:['<div class="hui-tbar<%if(this.type=="header"){%> hui-header<%}else if(this.type=="footer"){%> hui-footer<%}%>">','<%=this.findHtml(">*")%>','<%if(this.title){%><h1 class="hui-tbar-title js-tbar-txt"><%=this.title%></h1><%}%>',"</div>"],parseItem:function(a){"Button"==a.xtype&&(a.shadowSurround=!0,"left"==a.pos?a.extCls=(a.extCls||"")+
" hui-tbar-btn-left":"right"==a.pos&&(a.extCls=(a.extCls||"")+" hui-tbar-btn-right"))}});return c});$Define("C.Tips",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(c,a){var b=c.define("Tips",a);b.extend({theme:"black",timeout:2E3,radius:"normal",tmpl:['<div class="hui-tips<%if(!this.text){%> hui-tips-notxt<%}%>">','<%=this.findHtml("$>*")%>','<%if(this.text){%><span class="hui-tips-txt"><%=this.text%></span><%}%>',"</div>"]});return b});
$Define("C.Dialog",["C.AbstractComponent","C.Popup"],function(c,a){var b=c.define("Dialog",a);$HO.extend(b,{alert:function(a){return new b({contentMsg:a,noClose:!0,noCancel:!0})},confirm:function(a,c){return new b({contentMsg:a,noClose:!0,okCall:function(){return c&&c(!0)},cancelCall:function(){return c&&c(!1)}})},prompt:function(a,c,e){e||(e=c,c="");return new b({contentMsg:a,noClose:!0,items:{xtype:"Input",xrole:"dialog-content",value:c},okCall:function(){var a=this.find("$Input")[0].val();return e&&
e(a)}})}});b.extend({okTxt:"\u786e\u5b9a",cancelTxt:"\u53d6\u6d88",clickHide:!1,radius:"little",tmpl:'<div class="hui-dialog">;<%=this.findHtml("$>[xrole=\'dialog-header\']")%>;<div class="hui-dialog-body">;<%if(this.content){%><%=this.content%><%}else{%>;<div class="hui-body-content">;<h1 class="hui-content-title"><%=this.contentTitle%></h1>;<div class="hui-content-msg"><%=this.contentMsg%></div>;<%=this.findHtml("$>[xrole=\'dialog-content\']")%>;</div>;<%}%>;<%if(!this.noAction){%>;<div class="hui-body-action">;<%=this.findHtml("$>[xrole=\'dialog-action\']")%>;</div>;<%}%>;</div>;</div>'.split(";"),
doConfig:function(a){var b=this;b.callSuper([a]);a=a.items;b.title&&!b.hasConfig('[xrole="dialog-header"]',a)&&b.addItem({xtype:"Toolbar",title:b.title,theme:"gray",xrole:"dialog-header",extCls:"hui-dialog-header",items:!b.noClose&&{xtype:"Button",radius:"big",icon:"delete",isMini:!1,theme:"gray",pos:"left",click:function(){b.hide()}}});!b.noAction&&!b.hasConfig('[xrole="dialog-action"]',a)&&(a=[],b.noCancel||a.push({xtype:"Button",radius:null,isActive:1==b.activeBtn,text:b.cancelTxt,click:function(){!1!=
(b.cancelCall&&b.cancelCall())&&b.hide()}}),b.noOk||a.push({xtype:"Button",text:b.okTxt,isActive:2==b.activeBtn,radius:null,click:function(){!1!=(b.okCall&&b.okCall())&&b.hide()}}),b.addItem({xtype:"Tab",xrole:"dialog-action",theme:"border-top",notSelect:!0,items:a}))}});return b});
$Define("C.Menu",["C.AbstractComponent","C.Popup","C.ControlGroup"],function(c,a,b){c=c.define("Menu",a);c.extend(b.prototype);c.extend({notDestroy:!0,tmpl:['<div class="hui-menu<%if(this.markType=="dot"){%> hui-menu-mark<%}%>">',"<ul>","<%for(var i=0,len=this.children.length;i<len;i++){%>",'<li class="hui-menu-item<%if(this.children[i].selected){%> hui-item-mark<%}%>">',"<%=this.children[i].getHtml()%>",'<%if(this.markType=="dot"){%><span class="hui-icon-mark"></span><%}%>',"</li>","<%}%>","</ul>",
"</div>"],selectItem:function(a,c){c=!1!=c;"dot"==this.markType?(a.selected=c,a.getEl().parent()[!1==c?"removeClass":"addClass"]("hui-item-mark")):"active"==this.markType?b.prototype.selectItem.call(this,a,c):a.selected=c}});return c});$Define("C.List",["C.AbstractComponent","C.ControlGroup"],function(c,a){var b=c.define("List",a);b.extend({tmpl:['<div class="hui-list">','<div class="hui-list-item c-clear">',"</div>","</div>"]});return b});
