/* Handy v1.0.0-dev | 2014-02-21 | zhengyinhui100@gmail.com */
(function(){var c=window.handy,a=window.$,d=window.handy=window.$=function(){};d.version="1.0.0";d.expando="handy"+(d.version+Math.random()).replace(/\D/g,"");d.add=function(b,f,e){e||(e=f,f=null);if(!f||!d.Loader){d.base||(d.base={});var g=[];if(f)if("string"==typeof f)g.push(d.base.Object.namespace(f));else for(var a=0;a<f.length;a++)g.push(d.base.Object.namespace(f[a]));g.push(d);d.base[b]=d[b]=e.apply(window,g)}else d.Loader.require(f,function(){Array.prototype.push.call(arguments,d);d.base[b]=
d[b]=e.apply(window,arguments)})};d.noConflict=function(b){window.$===d&&(window.$=a);b&&window.handy===d&&(window.handy=c);return d};d.noop=function(){}})();
handy.add("Json",function(){var c;c||(c={});(function(){function a(b){return 10>b?"0"+b:b}function d(b){e.lastIndex=0;return e.test(b)?'"'+b.replace(e,function(b){var f=h[b];return"string"===typeof f?f:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function b(f,e){var a,c,x,y,h=g,v,p=e[f];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(f));"function"===typeof j&&(p=j.call(e,f,p));switch(typeof p){case "string":return d(p);case "number":return isFinite(p)?
String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";g+=k;v=[];if("[object Array]"===Object.prototype.toString.apply(p)){y=p.length;for(a=0;a<y;a+=1)v[a]=b(a,p)||"null";x=0===v.length?"[]":g?"[\n"+g+v.join(",\n"+g)+"\n"+h+"]":"["+v.join(",")+"]";g=h;return x}if(j&&"object"===typeof j){y=j.length;for(a=0;a<y;a+=1)"string"===typeof j[a]&&(c=j[a],(x=b(c,p))&&v.push(d(c)+(g?": ":":")+x))}else for(c in p)Object.prototype.hasOwnProperty.call(p,c)&&(x=b(c,p))&&v.push(d(c)+
(g?": ":":")+x);x=0===v.length?"{}":g?"{\n"+g+v.join(",\n"+g)+"\n"+h+"}":"{"+v.join(",")+"}";g=h;return x}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,k,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;"function"!==typeof c.stringify&&(c.stringify=function(f,e,a){var d;k=g="";if("number"===typeof a)for(d=0;d<a;d+=1)k+=" ";else"string"===typeof a&&(k=a);if((j=e)&&"function"!==typeof e&&("object"!==typeof e||"number"!==typeof e.length))throw Error("JSON.stringify");return b("",{"":f})});"function"!==
typeof c.parse&&(c.parse=function(b,e){function a(b,f){var g,d,c=b[f];if(c&&"object"===typeof c)for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&(d=a(c,g),void 0!==d?c[g]=d:delete c[g]);return e.call(b,f,c)}var g;b=String(b);f.lastIndex=0;f.test(b)&&(b=b.replace(f,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return g=eval("("+b+")"),"function"===typeof e?a({"":g},""):g;throw new SyntaxError("JSON.parse");})})();return c});
handy.add("Object",function(c){function a(){var b=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return b&&9>parseInt(b[0])?function(b,e,a){var d=[];if(b.length){e=e||0;for(a=a||b.length;e<a;e++)d.push(b[e])}return d}:function(b,e,a){return Array.prototype.slice.call(b,e||0,a||b.length)}}var d={_alias:{b:"handy.base",c:"handy.component",m:"handy.module",cm:"handy.common"},namespace:function(b,f){var a=null,g,c,h,j;b=d.alias(b);c=b.split(".");a=c[0];a=(h=2==arguments.length)?eval("(function(){if (typeof "+
a+' == "undefined"){'+a+" = {};}return "+a+";})()"):eval("(function(){if (typeof "+a+' != "undefined")return '+a+";})()");g=1;for(j=c.length;g<j;++g){if(g==j-1&&h)a[c[g]]=f;else if(h||a&&a[c[g]])a[c[g]]=a[c[g]]||{};else return;a=a[c[g]]}return a},alias:function(b,a){var e=d._alias;if(a)e[b]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+b+":"+e[b]):e[b]=a;else{if(b){var g=b,c=b.length-1;do{if(e[g])return e[g]+b.substring(c);c=g.lastIndexOf(".")}while(0<c&&(g=g.substring(0,c)));return b}return e}},
createClass:function(b){var a=function(){var b,d;b=this.constructor==a?this:arguments.callee;if(d=b.initialize)return d.apply(b,arguments)};a.$isClass=!0;a.prototype.callSuper=function(b,a){b&&(!b.$isClass&&void 0!=b.length)&&(a=b,b=null);var f=arguments.callee.caller,c=f.$owner.superProto;b=b?b.prototype:c||this.constructor.superProto;f=f.$name;if(b&&(f=b[f],d.isFunction(f)))return a?f.apply(this,a):f.call(this)};b&&this.namespace(b,a);return a},extend:function(b,a,e){var g=e?e.notCover:!1,c=e?e.cover:
null;e=e?e.notClone:!1;var h=b.constructor,j=h.$isClass,m;for(m in a)if((!c||d.contains(c,m))&&a.hasOwnProperty(m)){var s=b.hasOwnProperty(m),u=!0===g?s:!1;d.isArray(g)?u=d.contains(g,m)&&s:d.isFunction(g)&&(u=g(m));u||(s=e?a[m]:d.clone(a[m]),j&&d.isFunction(s)&&(s.$name=m,s.$owner=h),b[m]=s)}return b},mix:function(b,a,e,g){b.superProto||(b.superProto={});for(var c in a)b.superProto[c]=d.isFunction(a[c])?b.superProto[c]?function(b,d){return function(){d.apply(this,arguments);a[b].apply(this,arguments)}}(c,
b.superProto[c]):a[c]:a[c],b[c]||(b[c]=a[c]);e&&d.extend(b,e);a.toString!=a.constructor.prototype.toString&&(b.superProto.toString=function(){a.toString.apply(b,arguments)});g&&(b.prototype&&a.prototype)&&d.inherit(b,a,null,g);return b},inherit:function(b,a,e,g,k){var h=function(){};h.prototype=a.prototype;k=k||{notCover:!0};d.extend(b,a,k);b.prototype=new h;b.prototype.constructor=b;b.superClass=a;b.superProto=a.prototype;if(a._onInherit)try{a._onInherit(b)}catch(j){c.Debug.error("_onInherit error",
j)}e&&d.extend(b,e);g&&d.extend(b.prototype,g)},isFunction:function(b){return"[object Function]"===window.Object.prototype.toString.call(b)},isArray:function(b){return"[object Array]"===window.Object.prototype.toString.call(b)},equals:function(b,a){if(typeof b==typeof a){if("object"!=typeof b)return b===a;if(b===a)return!0;if(d.isArray(b)&&d.isArray(a)){if(b.length!=a.length)return!1;for(var e=0,g=b.length;e<g;e++)if(!d.equals(b[e],a[e]))return!1;return!0}if(!d.isArray(b)&&!d.isArray(a)){if(d.count(b)!=
d.count(a))return!1;for(e in b)if(void 0==a[e]||!d.equals(b[e],a[e]))return!1;return!0}}return!1},clone:function(b){if(null==b||"object"!=typeof b)return b;var a=b.constructor;if(a!=window.Object&&a!=window.Array)return b;if(a==window.Date||a==window.RegExp||a==window.Function||a==window.String||a==window.Number||a==window.Boolean)return new a(b);try{var e=new a,g;for(g in b)e[g]=d.clone(b[g]);return e}catch(c){return b}},isEmpty:function(a){if(d.isArray(a))return 0==a.length;for(var f in a)return!1;
return!0},each:function(a,f,e){var g,c=0,h=a.length,j=void 0===h||d.isFunction(a);if(e)if(j)for(g in a){if(!1===f.apply(a[g],e))break}else for(;c<h&&!1!==f.apply(a[c++],e););else if(j)for(g in a){if(!1===f.call(a[g],g,a[g]))break}else for(;c<h&&!1!==f.call(a[c],c,a[c++]););return a},contains:function(a,c){var e=!1;d.each(a,function(a,b){if(d.equals(b,c))return e=!0,!1});return e},largeThan:function(a,c){if("object"==typeof a&&"object"==typeof c){var e=!0;d.each(c,function(g){if(!d.equals(c[g],a[g]))return e=
!1});return e}},count:function(a){if(d.isArray(a))return a.length;var c=0,e;for(e in a)c++;return c},toArray:a,generateMethod:function(a,c,e){c=d.isArray(c)?c:c.split(",");for(var g=0;g<c.length;g++){var k=c[g];a[k]=e(k)}}},a=a();return d});
handy.add("Browser","handy.base.Object",function(c){var a={},d={};c.generateMethod(d,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(d){var c=a[b];return!d&&"string"===typeof c&&/^[\d\.]+$/.test(c)?parseInt(c):c}});c=window.navigator.userAgent;var b;(b=c.match(/MSIE ([\d.]+)/))?a.ie=b[1]:(b=c.match(/Firefox\/([\d.]+)/))?a.firefox=b[1]:(b=c.match(/Chrome\/([\d.]+)/))?
a.chrome=b[1]:(b=c.match(/Opera.([\d.]+)/))?a.opera=b[1]:(b=c.match(/Version\/([\d.]+).*Safari/))?a.safari=b[1]:0;/windows|win32/i.test(c)?a.windows=!0:/linux/i.test(c)?a.linux=!0:/macintosh/i.test(c)?a.mac=!0:0;/trident/i.test(c)?a.trident=!0:/webkit/i.test(c)?a.webkit=!0:/gecko/i.test(c)?a.gecko=!0:/presto/i.test(c)?a.presto=!0:0;/MetaSr/i.test(c)?a.sogou=!0:/Maxthon/i.test(c)?a.maxthon=!0:/TencentTraveler/i.test(c)?a.tt=!0:/TheWorld/i.test(c)?a.theWorld=!0:/360[S|E]E/i.test(c)?a.is360=!0:0;var f;
if((f=c.match(/AppleWebKit\/([\d.]*)/))&&f[1])if(/ Mobile\//.test(c)&&c.match(/iPad|iPod|iPhone/)){a.mobile="ios";if((f=c.match(/OS ([^\s]*)/))&&f[1])a.ios=f[1].replace("_",".");if((f=c.match(/iPad|iPod|iPhone/))&&f[0])a[f[0].toLowerCase()]=a.ios}else if(/ Android/i.test(c)){if(/Mobile/.test(c)&&(a.mobile="android"),(f=c.match(/Android ([^\s]*);/))&&f[1])a.android=f[1]}else if(f=c.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))a.mobile=f[0].toLowerCase();var e;try{if(a.ie){var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
g&&(e=g.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(g=navigator.plugins["Shockwave Flash"])){var k=g.description.split(" ");b=0;for(var h=k.length;b<h;b++)if(0<parseInt(k[b])){e=k[b];break}}}catch(j){}a.flash=e?e:null;return d});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(c,a,d){function b(a,b,c){c=c||"log";if(b||f.showInPage){var h=d.expando+"debugDiv",j=top.document;(b=j.getElementById(h))?b.style.display="block":(b=j.createElement("DIV"),b.id=h,b.innerHTML='<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\''+
j.body.offsetHeight+'px\';">\u5168\u5c4f</a>&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.style.height=\'100px\';">\u6536\u8d77</a><div style="padding-top:5px"></div>',b.style.position="absolute",b.style.width=j.body.offsetWidth-20+"px",b.style.left=0,b.style.top=0,b.style.right=0,b.style.height="100px",b.style.backgroundColor="#aaa",b.style.fontSize="12px",b.style.padding="10px",b.style.overflow="auto",b.style.zIndex=99999999,b.style.opacity=0.5,b.style.filter="alpha(opacity=50)",j.body.appendChild(b));
h=j.createElement("DIV");h.innerHTML=c+" : "+JSON.stringify(a,null,"<br/>");b=b.getElementsByTagName("DIV")[0];b.innerHTML=b.innerHTML+h.innerHTML+"<br/>"}try{console[c](a)}catch(m){}}var f={level:0,LOG_LEVEL:1,INFO_LEVEL:2,WARN_LEVEL:3,ERROR_LEVEL:4,DEBUG_LEVEL:5,log:function(a,d){f.level>f.LOG_LEVEL||b(a,!!d,"log")},info:function(a,d){this.level>f.INFO_LEVEL||b(a,!!d,"info")},warn:function(a,d){f.level>f.WARN_LEVEL||b(a,!!d,"warn")},error:function(a,d,c){if(!(f.level>f.ERROR_LEVEL)&&("boolean"==
typeof d&&(c=d),b(a,!!c,"error"),"object"==typeof d))throw d;},time:function(a,d,c){f.level>f.INFO_LEVEL||(d?b((a||"")+", \u6d88\u8017\u65f6\u95f4:"+((new Date).getTime()-(f.lastTime||0)),!!c):f.lastTime=(new Date).getTime())},debug:function(a){if(!(f.level>f.DEBUG_LEVEL)&&!1!==a)debugger}};return f});
handy.add("Function",function(c){return{bind:function(a,d,b){var c=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(c,arguments);return a.apply(d,c)}},intercept:function(a,d,b,f){return c.Object.isFunction(a)&&c.Object.isFunction(d)?function(){var c=b||this,g={},k=arguments;g.scope=f;g.target=c;g.method=a;return!1!=d.apply(g,k)?a.apply(c,k):!1}:a}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(c,a,d,b){function f(b){function d(b){return/\.(css|js)$/.test(b)?u[b]&&"loaded"==u[b].status:n.urlMap&&n.urlMap[b]?n.urlMap[b].chkExist():a.namespace(b)}if("string"==typeof b)return d(b);for(var c=[],e=0,f=b.length;e<f;e++){var g=d(b[e]);if(g)c.push(g);else return!1}return c}function e(a,b){function d(){d.isCalled||(d.isCalled=!0,clearTimeout(k),b())}if("SCRIPT"===a.nodeName){var e=a,f=d;e.onload=e.onerror=
e.onreadystatechange=function(){/loaded|complete|undefined/.test(e.readyState)&&(e.onload=e.onerror=e.onreadystatechange=null,j.removeChild(e),e=null,setTimeout(f,0))}}else{var h=d;window.hasOwnProperty("attachEvent")?a.attachEvent("onload",h):setTimeout(function(){g(a,h)},0)}var k=setTimeout(function(){c.error("Time is out:",a.src);d()},n.timeout)}function g(a,b){if(!b.isCalled){var d;if(m)a.sheet&&(d=!0);else if(a.sheet)try{a.sheet.cssRules&&(d=!0)}catch(c){if("SecurityError"===c.name||"NS_ERROR_DOM_SECURITY_ERR"===
c.name)d=!0}setTimeout(function(){d?b():g(a,b)},1)}}function k(a){n.showLoading(!1);u[a].status="loaded";n.traceLog&&c.info("Loader Response: "+a);h()}function h(){for(var a=s.length-1;0<=a;a--){var b=s[a],d=f(b.deps);if(d){s.splice(a,1);b.callback.apply(null,d);h();break}}}var j=document.head||document.getElementsByTagName("head")[0]||document.documentElement,m=navigator.userAgent.indexOf("AppleWebKit"),s=[],u={},n={traceLog:!0,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,
d,e){2==arguments.length&&(e=d,d=[]);n.require(d,function(){var d;if("function"==typeof e)try{d=e.apply(null,arguments),c.info("Loader define: "+b)}catch(f){c.error("Loader "+b+":factory define error:"+f.message,f);return}else d=e;a.namespace(b,d)})},require:function(a,g){for(var h="string"==typeof a?[a]:a,m=[],p=[],q=!0,r=0,w=h.length;r<w;r++){var l=h[r],t=f(l);t?p.push(t):(m.push(l),q&&(q=!1,s.push({deps:h,callback:g})),n.traceLog&&c.info("Resource not found: "+l))}if(0==m.length)return g&&g.apply(null,
p),0==p.length?p[0]:p;q=!1;h=0;for(p=m.length;h<p;h++)if(r=m[h],!u[r]){q=r;l=n.urlMap&&n.urlMap[q]&&n.urlMap[q].url;if(!l){w="";q=b.Object.alias(q);l=n.rootPath;if("string"==typeof l)w=l;else if("object"==typeof l)for(t in t=void 0,l)0==q.indexOf(t)&&(w=l[t],q=q.replace(t,""));else w="";l=/.css$/.test(q)?0==q.indexOf("/")?q:"/css/"+q:/.js$/.test(q)?q:q.replace(/\./g,"/")+".js";0!=l.indexOf("/")&&(l="/"+l);l=w+l}q=!0;u[r]={id:r,status:"loading"};w=d.bind(k,null,r);if(/.css$/.test(l))a:{r=l;l=j.getElementsByTagName("link");
for(t=0;t<l.length;t++){var z=l[t].href;!n.skinNode&&0<=z.indexOf(n.skinName)&&(n.skinNode=l[t]);if(0<=z.indexOf(r)||0<=r.indexOf(z))break a}l=document.createElement("link");l.rel="stylesheet";l.href=r;e(l,w);j.insertBefore(l,n.skinNode);n.traceLog&&c.info("Loader request:"+r)}else r=l,l=document.createElement("script"),l.async="async",l.src=r,l.type="text/javascript",e(l,w),j.appendChild(l),n.traceLog&&c.info("Loader request:"+r)}q&&n.showLoading(!0)}};return n});
handy.add("Listener",function(){var c={};return{add:function(a,d){var b=c[a];b||(b=c[a]=[]);b.push(d)},remove:function(a,d){var b=c[a];if(!b)return!1;if(d)for(var f=0,e=b.length;f<e;f++){if(b[f]==d)return b.splice(f,1),!0}else delete c[a];return!1},fire:function(a,d){var b=c[a];if(!b)return!1;for(var f=Array.prototype.slice.call(arguments,1),e=0,g=b.length;e<g;e++){if(e==g-1)return b[e].apply(null,f);b[e].apply(null,f)}}}});
handy.add("Date",function(){var c=window.Date,a={getWeek:function(a,b){var c=a.getDay();b&&(c=(c+(b%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[c]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new c(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var b=new c(a.getFullYear(),0,0);a=new c(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-b.getTime())/864E5)},getDayIndexOfYear:function(a){var b=new c("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-b.getTime())/864E5)},format:function(d,b){b=b||"yyyy-MM-dd HH:mm:ss";d=d||new c;var f=d.getHours(),e=Math.floor((d.getMonth()+3)/3),f={"y+":d.getFullYear(),"M+":d.getMonth()+1,"d+":d.getDate(),"h+":0==f%12?12:f%12,"H+":f,"m+":d.getMinutes(),"s+":d.getSeconds(),"w+":a.getWeek(d),"q+":e,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][e-1],"S+":d.getMilliseconds()},g;for(g in f)RegExp("("+g+")").test(b)&&(e=RegExp.$1.length,b=b.replace(RegExp.$1,1==e?f[g]:("00"+
f[g]).slice(-e)));return b},parse:function(a,b){for(var f=(b||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),e=a.match(/\d+/g),g=new c,k=0;k<e.length;k++){var h=f[k],j=parseInt(e[k]);switch(h){case "yyyy":g.setFullYear(j);break;case "MM":g.setMonth(j-1);break;case "dd":g.setDate(j);break;case "HH":g.setHours(j);break;case "mm":g.setMinutes(j);break;case "ss":g.setSeconds(j);break;case "SS":g.setMilliseconds(j)}}return g},parseObject:function(a){return new c(a.year+1900,a.month,a.date,a.hours,a.minutes,
a.seconds)}};return a});
handy.add("String",function(){var c={stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(a){var c=document.createElement("div");a=document.createTextNode(a);c.appendChild(a);return c.innerHTML},unescapeHTML:function(a){var d=document.createElement("div");d.innerHTML=c.stripTags(a);return d.childNodes[0].nodeValue},decodeHTML:function(a){a=a.replace(/&lt;/gi,"<");a=a.replace(/&gt;/gi,">");a=a.replace(/&quot;/gi,'"');a=a.replace(/&apos;/gi,"'");a=a.replace(/<\/?br>/gi,"\n");
a=a.replace(/&amp;/gi,"&");return a=a.replace(/&nbsp;/gi," ")},encodeHTML:function(a){a=a.replace(/&/gi,"&amp;");a=a.replace(/</gi,"&lt;");a=a.replace(/>/gi,"&gt;");a=a.replace(/\"/gi,"&quot;");a=a.replace(/\'/gi,"&apos;");a=a.replace(/\n/gi,"</br>");return a=a.replace(/ /gi,"&nbsp;")},trim:function(a){return a=a.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(a,c){c||(c=/[,%\'\"\/\\;|\<\>\^]/);return-1<a.search(c)},len:function(a){return a.replace(/[^\x00-\xff]/g,"**").length},left:function(a,
d,b){if(c.len(a)>d){!0===b?b=2:0<b||(b=0);var f=0,e=0;for(d-=b;e<d;)255<a.charCodeAt(f)?e+=2:e++,f++;a=a.substring(0,f);for(f=0;f<b;f++)a+="."}return a},isNumber:function(a){return 0==a.search(/^\d+$/g)},hasChn:function(a){return/[\u4E00-\u9FA5]+/.test(a)},isChn:function(a){return/^[\u4E00-\u9FA5]+$/.test(a)},addParam:function(a,c){c&&(a+=(-1<a.indexOf("?")?"&":"?")+c);return a}};return c});
handy.add("Cookie",function(){return{get:function(c,a){var d=c+"=",b="",f=document.cookie;if(0<f.length){var e=f.indexOf(d);-1!=e&&(e+=d.length,d=f.indexOf(";",e),-1==d&&(d=f.length),b=f.substring(e,d),a||(b=unescape(b)))}return b},set:function(c,a,d){var b=[];void 0!=c&&void 0!=a&&b.push(c+"="+escape(a));d&&(void 0!=d.path&&b.push("path="+d.path),void 0!=d.domain&&b.push("domain="+d.domain),void 0!=d.expires&&b.push("expires="+d.expires),d.secure&&b.push("secure"));document.cookie=b.join(";")},del:function(c){var a=
new Date;a.setTime(a.getTime()-1);document.cookie=c+"=;expires="+a.toGMTString()}}});handy.add("Util",function(){var c=0;return{isWindow:function(a){return null!=a&&a==a.window},getUuid:function(){return c++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(a){var c=top.location.hash;0<=c.indexOf("#")&&(a=c.replace(/#[^\?]*/,a));top.location.hash=a}}});
handy.add("Template",function(c){var a={},d=/^=/,b="".trim,f={openTag:"<%",closeTag:"%>",_add:function(a){return b?"$r+="+a+";\n":"$r.push("+a+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return f._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=f._add(a.replace(d,"")+'||""'));return a+"\n"},_compile:function(a){var d="var $r="+(b?'""':"[]")+";\n";c.Object.each(a.split(f.openTag),function(a,b){var c=
b.split(f.closeTag);1==c.length?d+=f._parseHtml(c[0]):(d+=f._parseScript(c[0]),c[1]&&(d+=f._parseHtml(c[1])))});d+="return "+(b?"$r;":'$r.join("");');return new Function("$data",d)},tmpl:function(b,d){var k,h,j;if("string"==typeof b)k=b;else if(k=b.tmpl,j=b.id)if(a[j])h=a[j];else{var m=document.getElementById(j);m&&(k=(m.value||m.innerHTML).replace(/\s/g,""))}if(!h){if(!k){c.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}h=f._compile(k);j&&(a[j]=h)}return d?h(d):h}};return f});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(c,a,d){function b(a){if(a==m)return!1;var b=j.contentWindow.document;b.open();b.write("<!doctype html><html><body>"+a+"</body></html>");b.close();m=a;c.log("set:"+j.contentWindow.document.body.innerText)}function f(){var d=a.getHash(),f=j.contentWindow.document.body.innerText;d!=m?(b(d),e(d)):f!=m&&(c.log("update:"+j.contentWindow.document.body.innerText),a.setHash(f))}function e(a){var b=n.listeners,c;for(c in b)b[c](a)}var g,
k=0,h=document,j,m,s=h.documentMode,u="onhashchange"in window&&(void 0===s||7<s),n={delay:50,listen:function(c,m){if(!g)if(g=!0,n.listeners={},u)$(window).on("hashchange",function(){e(a.getHash())});else j=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(h.body)[0],$(j).one("load",function(){b(a.getHash());setInterval(f,n.delay)});if(m in n.listeners)throw Error("Duplicate name");m=m||d.expando+ ++k;n.listeners[m]=c;return m},unListen:function(a){for(var b in n.listeners)(!a||
a==b)&&delete n.listeners[b]}};return n});
handy.add("Support",function(c){var a={mediaQuery:function(){var a;if(c.Browser.mobile())a="hui-mobile";else{a="hui-pc";var d=c.Browser.ie();d&&(a+=" ie"+d)}document.documentElement.className+=" "+a}};a.mediaQuery();if(6==c.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){}return a})(function(c){Hui=H=$H=c.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HL=$H.Listener;$Define=$H.Loader.define;$Require=
$H.Loader.require;$G={config:{}};c=window.$;c.fn.remove=$HF.intercept(c.fn.remove,function(){$HL.fire("removeEl",this.target)})})(handy);
