/* Handy v1.0.0-dev | 2014-03-03 | zhengyinhui100@gmail.com */
(function(){var e=window.handy,a=window.$,c=window.handy=window.$=function(){};c.version="1.0.0";c.expando="handy"+(c.version+Math.random()).replace(/\D/g,"");c.add=function(b,f,d){d||(d=f,f=null);if(!f||!c.Loader){c.base||(c.base={});var a=[];if(f)if("string"==typeof f)a.push(c.base.Object.namespace(f));else for(var g=0;g<f.length;g++)a.push(c.base.Object.namespace(f[g]));a.push(c);c.base[b]=c[b]=d.apply(window,a)}else c.Loader.require(f,function(){Array.prototype.push.call(arguments,c);c.base[b]=
c[b]=d.apply(window,arguments)})};c.noConflict=function(b){window.$===c&&(window.$=a);b&&window.handy===c&&(window.handy=e);return c};c.noop=function(){}})();
handy.add("Json",function(){var e;e||(e={});(function(){function a(b){return 10>b?"0"+b:b}function c(b){d.lastIndex=0;return d.test(b)?'"'+b.replace(d,function(b){var f=h[b];return"string"===typeof f?f:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function b(f,d){var a,e,h,x,y=j,v,p=d[f];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(f));"function"===typeof k&&(p=k.call(d,f,p));switch(typeof p){case "string":return c(p);case "number":return isFinite(p)?
String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";j+=g;v=[];if("[object Array]"===Object.prototype.toString.apply(p)){x=p.length;for(a=0;a<x;a+=1)v[a]=b(a,p)||"null";h=0===v.length?"[]":j?"[\n"+j+v.join(",\n"+j)+"\n"+y+"]":"["+v.join(",")+"]";j=y;return h}if(k&&"object"===typeof k){x=k.length;for(a=0;a<x;a+=1)"string"===typeof k[a]&&(e=k[a],(h=b(e,p))&&v.push(c(e)+(j?": ":":")+h))}else for(e in p)Object.prototype.hasOwnProperty.call(p,e)&&(h=b(e,p))&&v.push(c(e)+
(j?": ":":")+h);h=0===v.length?"{}":j?"{\n"+j+v.join(",\n"+j)+"\n"+y+"}":"{"+v.join(",")+"}";j=y;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,g,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof e.stringify&&(e.stringify=function(f,d,a){var c;g=j="";if("number"===typeof a)for(c=0;c<a;c+=1)g+=" ";else"string"===typeof a&&(g=a);if((k=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return b("",{"":f})});"function"!==
typeof e.parse&&(e.parse=function(b,d){function a(b,f){var c,j,g=b[f];if(g&&"object"===typeof g)for(c in g)Object.prototype.hasOwnProperty.call(g,c)&&(j=a(g,c),void 0!==j?g[c]=j:delete g[c]);return d.call(b,f,g)}var c;b=String(b);f.lastIndex=0;f.test(b)&&(b=b.replace(f,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return c=eval("("+b+")"),"function"===typeof d?a({"":c},""):c;throw new SyntaxError("JSON.parse");})})();return e});
handy.add("Object",function(e){function a(){var b=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return b&&9>parseInt(b[0])?function(b,d,a){var c=[];if(b.length){d=d||0;for(a=a||b.length;d<a;d++)c.push(b[d])}return c}:function(b,d,a){return Array.prototype.slice.call(b,d||0,a||b.length)}}var c={_alias:{b:"handy.base",c:"handy.component",m:"handy.module",cm:"handy.common"},namespace:function(b,f){var d=null,a,g,e,k;b=c.alias(b);g=b.split(".");d=g[0];d=(e=2==arguments.length)?eval("(function(){if (typeof "+
d+' == "undefined"){'+d+" = {};}return "+d+";})()"):eval("(function(){if (typeof "+d+' != "undefined")return '+d+";})()");a=1;for(k=g.length;a<k;++a){if(a==k-1&&e)d[g[a]]=f;else if(e||d&&d[g[a]])d[g[a]]=d[g[a]]||{};else return;d=d[g[a]]}return d},alias:function(b,f){var d=c._alias;if(f)d[b]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+b+":"+d[b]):d[b]=f;else{if(b){var a=b,g=b.length-1;do{if(d[a])return d[a]+b.substring(g);g=a.lastIndexOf(".")}while(0<g&&(a=a.substring(0,g)));return b}return d}},
createClass:function(b){var f=function(){var b,a;b=this.constructor==f?this:arguments.callee;if(a=b.initialize){for(var g in b)"object"==typeof b[g]&&(b[g]=c.clone(b[g]));return a.apply(b,arguments)}};f.$isClass=!0;f.prototype.callSuper=function(b,f){b&&(!b.$isClass&&void 0!=b.length)&&(f=b,b=null);var a=arguments.callee.caller,e=a.$owner.superProto;b=b?b.prototype:e||this.constructor.superProto;a=a.$name;if(b&&(a=b[a],c.isFunction(a)))return f?a.apply(this,f):a.call(this)};b&&this.namespace(b,f);
return f},extend:function(b,f,a){var j=a?a.notCover:!1,e=a?a.cover:null;a=a?a.notClone:!1;var h=b.constructor,k=h.$isClass,m;for(m in f)if((!e||c.contains(e,m))&&f.hasOwnProperty(m)){var s=b.hasOwnProperty(m),u=!0===j?s:!1;c.isArray(j)?u=c.contains(j,m)&&s:c.isFunction(j)&&(u=j(m));u||(s=a?f[m]:c.clone(f[m]),k&&c.isFunction(s)&&(s.$name=m,s.$owner=h),b[m]=s)}return b},mix:function(b,a,d,j){b.superProto||(b.superProto={});for(var e in a)b.superProto[e]=c.isFunction(a[e])?b.superProto[e]?function(b,
d){return function(){d.apply(this,arguments);a[b].apply(this,arguments)}}(e,b.superProto[e]):a[e]:a[e],b[e]||(b[e]=a[e]);d&&c.extend(b,d);a.toString!=a.constructor.prototype.toString&&(b.superProto.toString=function(){a.toString.apply(b,arguments)});j&&(b.prototype&&a.prototype)&&c.inherit(b,a,null,j);return b},inherit:function(b,a,d,j,g){var h=function(){};h.prototype=a.prototype;g=g||{notCover:!0};c.extend(b,a,g);b.prototype=new h;b.prototype.constructor=b;b.superClass=a;b.superProto=a.prototype;
if(a._onInherit)try{a._onInherit(b)}catch(k){e.Debug.error("_onInherit error",k)}j&&c.extend(b,j);d&&c.extend(b.prototype,d)},isFunction:function(b){return"[object Function]"===window.Object.prototype.toString.call(b)},isArray:function(b){return"[object Array]"===window.Object.prototype.toString.call(b)},equals:function(b,a){if(typeof b==typeof a){if("object"!=typeof b)return b===a;if(b===a)return!0;if(c.isArray(b)&&c.isArray(a)){if(b.length!=a.length)return!1;for(var d=0,e=b.length;d<e;d++)if(!c.equals(b[d],
a[d]))return!1;return!0}if(!c.isArray(b)&&!c.isArray(a)){if(c.count(b)!=c.count(a))return!1;for(d in b)if(void 0==a[d]||!c.equals(b[d],a[d]))return!1;return!0}}return!1},clone:function(b){if(null==b||"object"!=typeof b)return b;var a=b.constructor;if(a!=window.Object&&a!=window.Array)return b;if(a==window.Date||a==window.RegExp||a==window.Function||a==window.String||a==window.Number||a==window.Boolean)return new a(b);try{var d=new a,e;for(e in b)d[e]=c.clone(b[e]);return d}catch(g){return b}},isEmpty:function(b){if(c.isArray(b))return 0==
b.length;for(var a in b)return!1;return!0},each:function(b,a,d){var e,g=0,h=b.length,k=void 0===h||c.isFunction(b);if(d)if(k)for(e in b){if(!1===a.apply(b[e],d))break}else for(;g<h&&!1!==a.apply(b[g++],d););else if(k)for(e in b){if(!1===a.call(b[e],e,b[e]))break}else for(;g<h&&!1!==a.call(b[g],g,b[g++]););return b},contains:function(b,a){var d=!1;c.each(b,function(b,e){if(c.equals(e,a))return d=!0,!1});return d},largeThan:function(b,a){if("object"==typeof b&&"object"==typeof a){var d=!0;c.each(a,
function(e){if(!c.equals(a[e],b[e]))return d=!1});return d}},count:function(b){if(c.isArray(b))return b.length;var a=0,d;for(d in b)a++;return a},toArray:a,generateMethod:function(b,a,d){a=c.isArray(a)?a:a.split(",");for(var e=0;e<a.length;e++){var g=a[e];b[g]=d(g)}}},a=a();return c});
handy.add("Browser","handy.base.Object",function(e){var a={},c={};e.generateMethod(c,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(d){var c=a[b];return!d&&"string"===typeof c&&/^[\d\.]+$/.test(c)?parseInt(c):c}});e=window.navigator.userAgent;var b;(b=e.match(/MSIE ([\d.]+)/))?a.ie=b[1]:(b=e.match(/Firefox\/([\d.]+)/))?a.firefox=b[1]:(b=e.match(/Chrome\/([\d.]+)/))?
a.chrome=b[1]:(b=e.match(/Opera.([\d.]+)/))?a.opera=b[1]:(b=e.match(/Version\/([\d.]+).*Safari/))?a.safari=b[1]:0;/windows|win32/i.test(e)?a.windows=!0:/linux/i.test(e)?a.linux=!0:/macintosh/i.test(e)?a.mac=!0:0;/trident/i.test(e)?a.trident=!0:/webkit/i.test(e)?a.webkit=!0:/gecko/i.test(e)?a.gecko=!0:/presto/i.test(e)?a.presto=!0:0;/MetaSr/i.test(e)?a.sogou=!0:/Maxthon/i.test(e)?a.maxthon=!0:/TencentTraveler/i.test(e)?a.tt=!0:/TheWorld/i.test(e)?a.theWorld=!0:/360[S|E]E/i.test(e)?a.is360=!0:0;var f;
if((f=e.match(/AppleWebKit\/([\d.]*)/))&&f[1])if(/ Mobile\//.test(e)&&e.match(/iPad|iPod|iPhone/)){a.mobile="ios";if((f=e.match(/OS ([^\s]*)/))&&f[1])a.ios=f[1].replace("_",".");if((f=e.match(/iPad|iPod|iPhone/))&&f[0])a[f[0].toLowerCase()]=a.ios}else if(/ Android/i.test(e)){if(/Mobile/.test(e)&&(a.mobile="android"),(f=e.match(/Android ([^\s]*);/))&&f[1])a.android=f[1]}else if(f=e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))a.mobile=f[0].toLowerCase();var d;try{if(a.ie){var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
j&&(d=j.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(j=navigator.plugins["Shockwave Flash"])){var g=j.description.split(" ");b=0;for(var h=g.length;b<h;b++)if(0<parseInt(g[b])){d=g[b];break}}}catch(k){}a.flash=d?d:null;return c});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(e,a,c){var b={level:0,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:!("console"in window)||!!a.mobile(),out:function(a,d,e){e=e||"log";if(d||b.showInPage){d=c.expando+"debugDiv";var g=top.document,h=g.getElementById(d);h?h.style.display="block":(h=g.createElement("DIV"),h.id=d,h.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+g.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',h.style.position="fixed",h.style.width=g.body.offsetWidth-20+"px",h.style.left=0,h.style.top=0,h.style.right=0,h.style.height="150px",h.style.backgroundColor="#aaa",h.style.fontSize="12px",h.style.padding="10px",h.style.zIndex=9999999999,h.style.opacity=0.8,h.style.filter="alpha(opacity=80)",g.body.appendChild(h));d=h.getElementsByTagName("DIV")[0];d.innerHTML+=e+" : "+c.Json.stringify(a,null,"<br/>")+"<br/>";d.scrollTop=d.scrollHeight}try{console[e](a)}catch(k){}},
log:function(a,d){b.level>b.LOG_LEVEL||b.out(a,!!d,"log")},info:function(a,d){this.level>b.INFO_LEVEL||b.out(a,!!d,"info")},warn:function(a,d){b.level>b.WARN_LEVEL||b.out(a,!!d,"warn")},error:function(a,d,c){if(!(b.level>b.ERROR_LEVEL)&&("boolean"==typeof d&&(c=d),b.out(a,!!c,"error"),"object"==typeof d))throw d;},time:function(a,d,c){b.level>b.INFO_LEVEL||(a?("boolean"==typeof d&&(c=d,d=""),b.out((d||"")+((new Date).getTime()-(b.lastTime||0)),!!c)):b.lastTime=(new Date).getTime())},debug:function(a){if(!(b.level>
b.DEBUG_LEVEL)&&!1!==a)debugger}};return b});handy.add("Function",function(e){return{bind:function(a,c,b){var e=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(e,arguments);return a.apply(c,e)}},intercept:function(a,c,b,f){return e.Object.isFunction(a)&&e.Object.isFunction(c)?function(){var d=b||this,e={},g=arguments;e.scope=f;e.target=d;e.method=a;return!1!=c.apply(e,g)?a.apply(d,g):!1}:a}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(e,a,c,b){function f(b){function c(b){return/\.(css|js)$/.test(b)?u[b]&&"loaded"==u[b].status:n.urlMap&&n.urlMap[b]?n.urlMap[b].chkExist():a.namespace(b)}if("string"==typeof b)return c(b);for(var d=[],e=0,f=b.length;e<f;e++){var g=c(b[e]);if(g)d.push(g);else return!1}return d}function d(b,a){function c(){c.isCalled||(c.isCalled=!0,clearTimeout(h),a())}if("SCRIPT"===b.nodeName){var d=b,f=c;d.onload=d.onerror=
d.onreadystatechange=function(){/loaded|complete|undefined/.test(d.readyState)&&(d.onload=d.onerror=d.onreadystatechange=null,k.removeChild(d),d=null,setTimeout(f,0))}}else{var g=c;window.hasOwnProperty("attachEvent")?b.attachEvent("onload",g):setTimeout(function(){j(b,g)},0)}var h=setTimeout(function(){e.error("Time is out:",b.src);c()},n.timeout)}function j(b,a){if(!a.isCalled){var d;if(m)b.sheet&&(d=!0);else if(b.sheet)try{b.sheet.cssRules&&(d=!0)}catch(c){if("SecurityError"===c.name||"NS_ERROR_DOM_SECURITY_ERR"===
c.name)d=!0}setTimeout(function(){d?a():j(b,a)},1)}}function g(b){n.showLoading(!1);u[b].status="loaded";n.traceLog&&e.info("Loader Response: "+b);h()}function h(){for(var b=s.length-1;0<=b;b--){var a=s[b],d=f(a.deps);if(d){s.splice(b,1);a.callback.apply(null,d);h();break}}}var k=document.head||document.getElementsByTagName("head")[0]||document.documentElement,m=navigator.userAgent.indexOf("AppleWebKit"),s=[],u={},n={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,
d,c){2==arguments.length&&(c=d,d=[]);n.require(d,function(){var d;if("function"==typeof c)try{d=c.apply(null,arguments),n.traceLog&&e.info("Loader define: "+b)}catch(f){e.error("Loader "+b+":factory define error:"+f.message,f);return}else d=c;a.namespace(b,d)})},require:function(a,j){for(var h="string"==typeof a?[a]:a,m=[],p=[],q=!0,r=0,w=h.length;r<w;r++){var l=h[r],t=f(l);t?p.push(t):(m.push(l),q&&(q=!1,s.push({deps:h,callback:j})),n.traceLog&&e.info("Resource not found: "+l))}if(0==m.length)return j&&
j.apply(null,p),0==p.length?p[0]:p;q=!1;h=0;for(p=m.length;h<p;h++)if(r=m[h],!u[r]){q=r;l=n.urlMap&&n.urlMap[q]&&n.urlMap[q].url;if(!l){w="";q=b.Object.alias(q);l=n.rootPath;if("string"==typeof l)w=l;else if("object"==typeof l)for(t in t=void 0,l)0==q.indexOf(t)&&(w=l[t],q=q.replace(t,""));else w="";l=/.css$/.test(q)?0==q.indexOf("/")?q:"/css/"+q:/.js$/.test(q)?q:q.replace(/\./g,"/")+".js";0!=l.indexOf("/")&&(l="/"+l);l=w+l}q=!0;u[r]={id:r,status:"loading"};w=c.bind(g,null,r);if(/.css$/.test(l))a:{r=
l;l=k.getElementsByTagName("link");for(t=0;t<l.length;t++){var z=l[t].href;!n.skinNode&&0<=z.indexOf(n.skinName)&&(n.skinNode=l[t]);if(0<=z.indexOf(r)||0<=r.indexOf(z))break a}l=document.createElement("link");l.rel="stylesheet";l.href=r;d(l,w);k.insertBefore(l,n.skinNode);n.traceLog&&e.info("Loader request:"+r)}else r=l,l=document.createElement("script"),l.async="async",l.src=r,l.type="text/javascript",d(l,w),k.appendChild(l),n.traceLog&&e.info("Loader request:"+r)}q&&n.showLoading(!0)}};return n});
handy.add("Listener",function(){var e={};return{add:function(a,c){var b=e[a];b||(b=e[a]=[]);b.push(c)},remove:function(a,c){var b=e[a];if(!b)return!1;if(c)for(var f=0,d=b.length;f<d;f++){if(b[f]==c)return b.splice(f,1),!0}else delete e[a];return!1},fire:function(a,c){var b=e[a];if(!b)return!1;for(var f=Array.prototype.slice.call(arguments,1),d=0,j=b.length;d<j;d++){if(d==j-1)return b[d].apply(null,f);b[d].apply(null,f)}}}});
handy.add("Date",function(){var e=window.Date,a={getWeek:function(a,b){var e=a.getDay();b&&(e=(e+(b%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[e]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new e(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var b=new e(a.getFullYear(),0,0);a=new e(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-b.getTime())/864E5)},getDayIndexOfYear:function(a){var b=new e("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-b.getTime())/864E5)},format:function(c,b){b=b||"yyyy-MM-dd HH:mm:ss";c=c||new e;var f=c.getHours(),d=Math.floor((c.getMonth()+3)/3),f={"y+":c.getFullYear(),"M+":c.getMonth()+1,"d+":c.getDate(),"h+":0==f%12?12:f%12,"H+":f,"m+":c.getMinutes(),"s+":c.getSeconds(),"w+":a.getWeek(c),"q+":d,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][d-1],"S+":c.getMilliseconds()},j;for(j in f)RegExp("("+j+")").test(b)&&(d=RegExp.$1.length,b=b.replace(RegExp.$1,1==d?f[j]:("00"+
f[j]).slice(-d)));return b},parse:function(a,b){for(var f=(b||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),d=a.match(/\d+/g),j=new e,g=0;g<d.length;g++){var h=f[g],k=parseInt(d[g]);switch(h){case "yyyy":j.setFullYear(k);break;case "MM":j.setMonth(k-1);break;case "dd":j.setDate(k);break;case "HH":j.setHours(k);break;case "mm":j.setMinutes(k);break;case "ss":j.setSeconds(k);break;case "SS":j.setMilliseconds(k)}}return j},parseObject:function(a){return new e(a.year+1900,a.month,a.date,a.hours,a.minutes,
a.seconds)}};return a});
handy.add("String",function(){var e={stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(a){var c=document.createElement("div");a=document.createTextNode(a);c.appendChild(a);return c.innerHTML},unescapeHTML:function(a){var c=document.createElement("div");c.innerHTML=e.stripTags(a);return c.childNodes[0].nodeValue},decodeHTML:function(a){a=a.replace(/&lt;/gi,"<");a=a.replace(/&gt;/gi,">");a=a.replace(/&quot;/gi,'"');a=a.replace(/&apos;/gi,"'");a=a.replace(/<\/?br>/gi,"\n");
a=a.replace(/&amp;/gi,"&");return a=a.replace(/&nbsp;/gi," ")},encodeHTML:function(a){a=a.replace(/&/gi,"&amp;");a=a.replace(/</gi,"&lt;");a=a.replace(/>/gi,"&gt;");a=a.replace(/\"/gi,"&quot;");a=a.replace(/\'/gi,"&apos;");a=a.replace(/\n/gi,"</br>");return a=a.replace(/ /gi,"&nbsp;")},trim:function(a){return a=a.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(a,c){c||(c=/[,%\'\"\/\\;|\<\>\^]/);return-1<a.search(c)},len:function(a){return a.replace(/[^\x00-\xff]/g,"**").length},left:function(a,
c,b){if(e.len(a)>c){!0===b?b=2:0<b||(b=0);var f=0,d=0;for(c-=b;d<c;)255<a.charCodeAt(f)?d+=2:d++,f++;a=a.substring(0,f);for(f=0;f<b;f++)a+="."}return a},isNumber:function(a){return 0==a.search(/^\d+$/g)},hasChn:function(a){return/[\u4E00-\u9FA5]+/.test(a)},isChn:function(a){return/^[\u4E00-\u9FA5]+$/.test(a)},addParam:function(a,c){c&&(a+=(-1<a.indexOf("?")?"&":"?")+c);return a}};return e});
handy.add("Cookie",function(){return{get:function(e,a){var c=e+"=",b="",f=document.cookie;if(0<f.length){var d=f.indexOf(c);-1!=d&&(d+=c.length,c=f.indexOf(";",d),-1==c&&(c=f.length),b=f.substring(d,c),a||(b=unescape(b)))}return b},set:function(e,a,c){var b=[];void 0!=e&&void 0!=a&&b.push(e+"="+escape(a));c&&(void 0!=c.path&&b.push("path="+c.path),void 0!=c.domain&&b.push("domain="+c.domain),void 0!=c.expires&&b.push("expires="+c.expires),c.secure&&b.push("secure"));document.cookie=b.join(";")},del:function(e){var a=
new Date;a.setTime(a.getTime()-1);document.cookie=e+"=;expires="+a.toGMTString()}}});handy.add("Util",function(){var e=0;return{isWindow:function(a){return null!=a&&a==a.window},getUuid:function(){return e++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(a){var c=top.location.hash;0<=c.indexOf("#")&&(a=c.replace(/#[^\?]*/,a));top.location.hash=a}}});
handy.add("Template",function(e){var a={},c=/^=/,b="".trim,f={openTag:"<%",closeTag:"%>",_add:function(a){return b?"$r+="+a+";\n":"$r.push("+a+");\n"},_parseHtml:function(b){b=b.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return f._add('"'+b+'"')},_parseScript:function(b){b=b.replace(/this/g,"$data");0==b.indexOf("=")&&(b=f._add(b.replace(c,"")+'||""'));return b+"\n"},_compile:function(a){var c="var $r="+(b?'""':"[]")+";\n";e.Object.each(a.split(f.openTag),function(b,a){var d=
a.split(f.closeTag);1==d.length?c+=f._parseHtml(d[0]):(c+=f._parseScript(d[0]),d[1]&&(c+=f._parseHtml(d[1])))});c+="return "+(b?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(b,c){var g,h,k;if("string"==typeof b)g=b;else if(g=b.tmpl,k=b.id)if(a[k])h=a[k];else{var m=document.getElementById(k);m&&(g=(m.value||m.innerHTML).replace(/\s/g,""))}if(!h){if(!g){e.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}h=f._compile(g);k&&(a[k]=h)}return c?h(c):h}};return f});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(e,a,c){function b(b){if(b==m)return!1;var a=k.contentWindow.document;a.open();a.write("<!doctype html><html><body>"+b+"</body></html>");a.close();m=b;e.log("set:"+k.contentWindow.document.body.innerText)}function f(){var c=a.getHash(),f=k.contentWindow.document.body.innerText;c!=m?(b(c),d(c)):f!=m&&(e.log("update:"+k.contentWindow.document.body.innerText),a.setHash(f))}function d(b){var a=n.listeners,d;for(d in a)a[d](b)}var j,
g=0,h=document,k,m,s=h.documentMode,u="onhashchange"in window&&(void 0===s||7<s),n={delay:50,listen:function(e,m){if(!j&&!j)if(j=!0,n.listeners={},u)$(window).on("hashchange",function(){d(a.getHash())});else k=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(h.body)[0],$(k).one("load",function(){b(a.getHash());setInterval(f,n.delay)});if(m in n.listeners)$D.error("Duplicate name",Error("Duplicate name"));else return m=m||c.expando+ ++g,n.listeners[m]=
e,m},unListen:function(b){for(var a in n.listeners)(!b||b==a)&&delete n.listeners[a]}};return n});handy.add("Support",function(e){var a={mediaQuery:function(){var b;if(e.Browser.mobile())b="hui-mobile";else{b="hui-pc";var a=e.Browser.ie();a&&(b+=" ie"+a)}document.documentElement.className+=" "+b}};a.mediaQuery();if(6==e.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}return a});
handy.add("Validator",["b.String","b.Object"],function(e,a){var c={messages:{required:"{name}\u4e0d\u80fd\u4e3a\u7a7a",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94fe\u63a5\u5730\u5740",date:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f",number:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57",digits:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u7528\u5361\u53f7\u7801",
equalTo:"\u8bf7\u8f93\u5165\u76f8\u540c\u7684",min:"\u8bf7\u8f93\u5165\u5927\u4e8e\u6216\u7b49\u4e8e{0}\u7684{name}",max:"\u8bf7\u8f93\u5165\u5c0f\u4e8e\u6216\u7b49\u4e8e{0}\u7684{name}",range:"\u8bf7\u8f93\u5165{0}\u5230{1}\u7684{name}",maxlength:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e0d\u8d85\u8fc7{0}\u7684{name}",minlength:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e0d\u5c11\u4e8e{0}\u7684{name}",rangelength:"\u8bf7\u8f93\u5165\u957f\u5ea6\u5728{0}\u5230{1}\u7684{name}"},valid:function(b,a){var d=a.rules,e;
for(e in d){var g=d[e],h=("function"==typeof g?g:c[e])(b,g);if(!h)return d=a.error||c.error,e=a.messages&&a.messages[e]||c.messages[e],e=e.replace(/\{([^\}]+)\}/g,function(b,d){return g[d]||a[d]||""}),d&&d(e),h}return!0},required:function(b){return 0<e.trim(b).length},email:function(b){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(b)},
url:function(b){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},
date:function(b){return!/Invalid|NaN/.test((new Date(b)).toString())},dateISO:function(b){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(b)},number:function(b){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(b)},digits:function(b){return/^\d+$/.test(b)},creditcard:function(b){if(/[^0-9 \-]+/.test(b))return!1;var a=0,d=0,c=!1;b=b.replace(/\D/g,"");for(var e=b.length-1;0<=e;e--){d=b.charAt(e);d=parseInt(d,10);if(c&&9<(d*=2))d-=9;a+=d;c=!c}return 0===a%10},min:function(b,a){return b>=a},max:function(a,
c){return a<=c},range:function(a,c){return a>=c[0]&&a<=c[1]},minlength:function(b,c){return(a.isArray(b)?b.length:e.trim(b).length)>=c},maxlength:function(b,c){return(a.isArray(b)?b.length:e.trim(b).length)<=c},rangelength:function(b,c){var d=a.isArray(b)?b.length:e.trim(b).length;return d>=c[0]&&d<=c[1]},equalTo:function(a,c){return a===c}};return c})(function(e){Hui=H=$H=e.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HL=
$H.Listener;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};e=window.$;e.fn.remove=$HF.intercept(e.fn.remove,function(){$HL.fire("removeEl",this.target)})})(handy);
