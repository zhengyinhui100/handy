/* Handy v1.0.0-dev | 2014-02-26 | zhengyinhui100@gmail.com */
(function(){var e=window.handy,a=window.$,c=window.handy=window.$=function(){};c.version="1.0.0";c.expando="handy"+(c.version+Math.random()).replace(/\D/g,"");c.add=function(b,f,d){d||(d=f,f=null);if(!f||!c.Loader){c.base||(c.base={});var a=[];if(f)if("string"==typeof f)a.push(c.base.Object.namespace(f));else for(var j=0;j<f.length;j++)a.push(c.base.Object.namespace(f[j]));a.push(c);c.base[b]=c[b]=d.apply(window,a)}else c.Loader.require(f,function(){Array.prototype.push.call(arguments,c);c.base[b]=
c[b]=d.apply(window,arguments)})};c.noConflict=function(b){window.$===c&&(window.$=a);b&&window.handy===c&&(window.handy=e);return c};c.noop=function(){}})();
handy.add("Json",function(){var e;e||(e={});(function(){function a(b){return 10>b?"0"+b:b}function c(b){d.lastIndex=0;return d.test(b)?'"'+b.replace(d,function(b){var f=k[b];return"string"===typeof f?f:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function b(f,d){var a,e,x,y,k=g,v,p=d[f];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(f));"function"===typeof h&&(p=h.call(d,f,p));switch(typeof p){case "string":return c(p);case "number":return isFinite(p)?
String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";g+=j;v=[];if("[object Array]"===Object.prototype.toString.apply(p)){y=p.length;for(a=0;a<y;a+=1)v[a]=b(a,p)||"null";x=0===v.length?"[]":g?"[\n"+g+v.join(",\n"+g)+"\n"+k+"]":"["+v.join(",")+"]";g=k;return x}if(h&&"object"===typeof h){y=h.length;for(a=0;a<y;a+=1)"string"===typeof h[a]&&(e=h[a],(x=b(e,p))&&v.push(c(e)+(g?": ":":")+x))}else for(e in p)Object.prototype.hasOwnProperty.call(p,e)&&(x=b(e,p))&&v.push(c(e)+
(g?": ":":")+x);x=0===v.length?"{}":g?"{\n"+g+v.join(",\n"+g)+"\n"+k+"}":"{"+v.join(",")+"}";g=k;return x}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,j,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof e.stringify&&(e.stringify=function(f,d,a){var c;j=g="";if("number"===typeof a)for(c=0;c<a;c+=1)j+=" ";else"string"===typeof a&&(j=a);if((h=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return b("",{"":f})});"function"!==
typeof e.parse&&(e.parse=function(b,d){function a(b,f){var c,g,j=b[f];if(j&&"object"===typeof j)for(c in j)Object.prototype.hasOwnProperty.call(j,c)&&(g=a(j,c),void 0!==g?j[c]=g:delete j[c]);return d.call(b,f,j)}var c;b=String(b);f.lastIndex=0;f.test(b)&&(b=b.replace(f,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return c=eval("("+b+")"),"function"===typeof d?a({"":c},""):c;throw new SyntaxError("JSON.parse");})})();return e});
handy.add("Object",function(e){function a(){var b=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return b&&9>parseInt(b[0])?function(b,d,a){var c=[];if(b.length){d=d||0;for(a=a||b.length;d<a;d++)c.push(b[d])}return c}:function(b,d,a){return Array.prototype.slice.call(b,d||0,a||b.length)}}var c={_alias:{b:"handy.base",c:"handy.component",m:"handy.module",cm:"handy.common"},namespace:function(b,f){var d=null,a,j,e,h;b=c.alias(b);j=b.split(".");d=j[0];d=(e=2==arguments.length)?eval("(function(){if (typeof "+
d+' == "undefined"){'+d+" = {};}return "+d+";})()"):eval("(function(){if (typeof "+d+' != "undefined")return '+d+";})()");a=1;for(h=j.length;a<h;++a){if(a==h-1&&e)d[j[a]]=f;else if(e||d&&d[j[a]])d[j[a]]=d[j[a]]||{};else return;d=d[j[a]]}return d},alias:function(b,a){var d=c._alias;if(a)d[b]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+b+":"+d[b]):d[b]=a;else{if(b){var g=b,j=b.length-1;do{if(d[g])return d[g]+b.substring(j);j=g.lastIndexOf(".")}while(0<j&&(g=g.substring(0,j)));return b}return d}},
createClass:function(b){var a=function(){var b,g;b=this.constructor==a?this:arguments.callee;if(g=b.initialize){for(var j in b)"object"==typeof b[j]&&(b[j]=c.clone(b[j]));return g.apply(b,arguments)}};a.$isClass=!0;a.prototype.callSuper=function(b,a){b&&(!b.$isClass&&void 0!=b.length)&&(a=b,b=null);var f=arguments.callee.caller,e=f.$owner.superProto;b=b?b.prototype:e||this.constructor.superProto;f=f.$name;if(b&&(f=b[f],c.isFunction(f)))return a?f.apply(this,a):f.call(this)};b&&this.namespace(b,a);
return a},extend:function(b,a,d){var g=d?d.notCover:!1,e=d?d.cover:null;d=d?d.notClone:!1;var k=b.constructor,h=k.$isClass,m;for(m in a)if((!e||c.contains(e,m))&&a.hasOwnProperty(m)){var s=b.hasOwnProperty(m),u=!0===g?s:!1;c.isArray(g)?u=c.contains(g,m)&&s:c.isFunction(g)&&(u=g(m));u||(s=d?a[m]:c.clone(a[m]),h&&c.isFunction(s)&&(s.$name=m,s.$owner=k),b[m]=s)}return b},mix:function(b,a,d,g){b.superProto||(b.superProto={});for(var e in a)b.superProto[e]=c.isFunction(a[e])?b.superProto[e]?function(b,
c){return function(){c.apply(this,arguments);a[b].apply(this,arguments)}}(e,b.superProto[e]):a[e]:a[e],b[e]||(b[e]=a[e]);d&&c.extend(b,d);a.toString!=a.constructor.prototype.toString&&(b.superProto.toString=function(){a.toString.apply(b,arguments)});g&&(b.prototype&&a.prototype)&&c.inherit(b,a,null,g);return b},inherit:function(b,a,d,g,j){var k=function(){};k.prototype=a.prototype;j=j||{notCover:!0};c.extend(b,a,j);b.prototype=new k;b.prototype.constructor=b;b.superClass=a;b.superProto=a.prototype;
if(a._onInherit)try{a._onInherit(b)}catch(h){e.Debug.error("_onInherit error",h)}d&&c.extend(b,d);g&&c.extend(b.prototype,g)},isFunction:function(b){return"[object Function]"===window.Object.prototype.toString.call(b)},isArray:function(b){return"[object Array]"===window.Object.prototype.toString.call(b)},equals:function(b,a){if(typeof b==typeof a){if("object"!=typeof b)return b===a;if(b===a)return!0;if(c.isArray(b)&&c.isArray(a)){if(b.length!=a.length)return!1;for(var d=0,g=b.length;d<g;d++)if(!c.equals(b[d],
a[d]))return!1;return!0}if(!c.isArray(b)&&!c.isArray(a)){if(c.count(b)!=c.count(a))return!1;for(d in b)if(void 0==a[d]||!c.equals(b[d],a[d]))return!1;return!0}}return!1},clone:function(b){if(null==b||"object"!=typeof b)return b;var a=b.constructor;if(a!=window.Object&&a!=window.Array)return b;if(a==window.Date||a==window.RegExp||a==window.Function||a==window.String||a==window.Number||a==window.Boolean)return new a(b);try{var d=new a,g;for(g in b)d[g]=c.clone(b[g]);return d}catch(e){return b}},isEmpty:function(a){if(c.isArray(a))return 0==
a.length;for(var f in a)return!1;return!0},each:function(a,f,d){var g,e=0,k=a.length,h=void 0===k||c.isFunction(a);if(d)if(h)for(g in a){if(!1===f.apply(a[g],d))break}else for(;e<k&&!1!==f.apply(a[e++],d););else if(h)for(g in a){if(!1===f.call(a[g],g,a[g]))break}else for(;e<k&&!1!==f.call(a[e],e,a[e++]););return a},contains:function(a,f){var d=!1;c.each(a,function(a,b){if(c.equals(b,f))return d=!0,!1});return d},largeThan:function(a,f){if("object"==typeof a&&"object"==typeof f){var d=!0;c.each(f,
function(g){if(!c.equals(f[g],a[g]))return d=!1});return d}},count:function(a){if(c.isArray(a))return a.length;var f=0,d;for(d in a)f++;return f},toArray:a,generateMethod:function(a,f,d){f=c.isArray(f)?f:f.split(",");for(var g=0;g<f.length;g++){var e=f[g];a[e]=d(e)}}},a=a();return c});
handy.add("Browser","handy.base.Object",function(e){var a={},c={};e.generateMethod(c,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(c){var d=a[b];return!c&&"string"===typeof d&&/^[\d\.]+$/.test(d)?parseInt(d):d}});e=window.navigator.userAgent;var b;(b=e.match(/MSIE ([\d.]+)/))?a.ie=b[1]:(b=e.match(/Firefox\/([\d.]+)/))?a.firefox=b[1]:(b=e.match(/Chrome\/([\d.]+)/))?
a.chrome=b[1]:(b=e.match(/Opera.([\d.]+)/))?a.opera=b[1]:(b=e.match(/Version\/([\d.]+).*Safari/))?a.safari=b[1]:0;/windows|win32/i.test(e)?a.windows=!0:/linux/i.test(e)?a.linux=!0:/macintosh/i.test(e)?a.mac=!0:0;/trident/i.test(e)?a.trident=!0:/webkit/i.test(e)?a.webkit=!0:/gecko/i.test(e)?a.gecko=!0:/presto/i.test(e)?a.presto=!0:0;/MetaSr/i.test(e)?a.sogou=!0:/Maxthon/i.test(e)?a.maxthon=!0:/TencentTraveler/i.test(e)?a.tt=!0:/TheWorld/i.test(e)?a.theWorld=!0:/360[S|E]E/i.test(e)?a.is360=!0:0;var f;
if((f=e.match(/AppleWebKit\/([\d.]*)/))&&f[1])if(/ Mobile\//.test(e)&&e.match(/iPad|iPod|iPhone/)){a.mobile="ios";if((f=e.match(/OS ([^\s]*)/))&&f[1])a.ios=f[1].replace("_",".");if((f=e.match(/iPad|iPod|iPhone/))&&f[0])a[f[0].toLowerCase()]=a.ios}else if(/ Android/i.test(e)){if(/Mobile/.test(e)&&(a.mobile="android"),(f=e.match(/Android ([^\s]*);/))&&f[1])a.android=f[1]}else if(f=e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))a.mobile=f[0].toLowerCase();var d;try{if(a.ie){var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
g&&(d=g.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(g=navigator.plugins["Shockwave Flash"])){var j=g.description.split(" ");b=0;for(var k=j.length;b<k;b++)if(0<parseInt(j[b])){d=j[b];break}}}catch(h){}a.flash=d?d:null;return c});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(e,a,c){function b(a,b,e){e=e||"log";if(b||f.showInPage){b=c.expando+"debugDiv";var k=top.document,h=k.getElementById(b);h?h.style.display="block":(h=k.createElement("DIV"),h.id=b,h.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+k.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',h.style.position="fixed",h.style.width=k.body.offsetWidth-20+"px",h.style.left=0,h.style.top=0,h.style.right=0,h.style.height="150px",h.style.backgroundColor="#aaa",h.style.fontSize="12px",h.style.padding="10px",h.style.zIndex=9999999999,h.style.opacity=0.8,h.style.filter="alpha(opacity=80)",k.body.appendChild(h));b=h.getElementsByTagName("DIV")[0];b.innerHTML+=e+" : "+c.Json.stringify(a,null,"<br/>")+"<br/>";b.scrollTop=b.scrollHeight}try{console[e](a)}catch(m){}}
var f={level:0,LOG_LEVEL:1,INFO_LEVEL:2,WARN_LEVEL:3,ERROR_LEVEL:4,DEBUG_LEVEL:5,showInPage:!("console"in window)||!!a.mobile(),log:function(a,c){f.level>f.LOG_LEVEL||b(a,!!c,"log")},info:function(a,c){this.level>f.INFO_LEVEL||b(a,!!c,"info")},warn:function(a,c){f.level>f.WARN_LEVEL||b(a,!!c,"warn")},error:function(a,c,e){if(!(f.level>f.ERROR_LEVEL)&&("boolean"==typeof c&&(e=c),b(a,!!e,"error"),"object"==typeof c))throw c;},time:function(a,c,e){f.level>f.INFO_LEVEL||(a?("boolean"==typeof c&&(e=c,
c=""),b((c||"")+((new Date).getTime()-(f.lastTime||0)),!!e)):f.lastTime=(new Date).getTime())},debug:function(a){if(!(f.level>f.DEBUG_LEVEL)&&!1!==a)debugger}};return f});
handy.add("Function",function(e){return{bind:function(a,c,b){var f=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(f,arguments);return a.apply(c,f)}},intercept:function(a,c,b,f){return e.Object.isFunction(a)&&e.Object.isFunction(c)?function(){var d=b||this,e={},j=arguments;e.scope=f;e.target=d;e.method=a;return!1!=c.apply(e,j)?a.apply(d,j):!1}:a}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(e,a,c,b){function f(b){function c(b){return/\.(css|js)$/.test(b)?u[b]&&"loaded"==u[b].status:n.urlMap&&n.urlMap[b]?n.urlMap[b].chkExist():a.namespace(b)}if("string"==typeof b)return c(b);for(var d=[],e=0,f=b.length;e<f;e++){var g=c(b[e]);if(g)d.push(g);else return!1}return d}function d(a,b){function c(){c.isCalled||(c.isCalled=!0,clearTimeout(k),b())}if("SCRIPT"===a.nodeName){var d=a,f=c;d.onload=d.onerror=
d.onreadystatechange=function(){/loaded|complete|undefined/.test(d.readyState)&&(d.onload=d.onerror=d.onreadystatechange=null,h.removeChild(d),d=null,setTimeout(f,0))}}else{var j=c;window.hasOwnProperty("attachEvent")?a.attachEvent("onload",j):setTimeout(function(){g(a,j)},0)}var k=setTimeout(function(){e.error("Time is out:",a.src);c()},n.timeout)}function g(a,b){if(!b.isCalled){var c;if(m)a.sheet&&(c=!0);else if(a.sheet)try{a.sheet.cssRules&&(c=!0)}catch(d){if("SecurityError"===d.name||"NS_ERROR_DOM_SECURITY_ERR"===
d.name)c=!0}setTimeout(function(){c?b():g(a,b)},1)}}function j(a){n.showLoading(!1);u[a].status="loaded";n.traceLog&&e.info("Loader Response: "+a);k()}function k(){for(var a=s.length-1;0<=a;a--){var b=s[a],c=f(b.deps);if(c){s.splice(a,1);b.callback.apply(null,c);k();break}}}var h=document.head||document.getElementsByTagName("head")[0]||document.documentElement,m=navigator.userAgent.indexOf("AppleWebKit"),s=[],u={},n={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,
c,d){2==arguments.length&&(d=c,c=[]);n.require(c,function(){var c;if("function"==typeof d)try{c=d.apply(null,arguments),n.traceLog&&e.info("Loader define: "+b)}catch(f){e.error("Loader "+b+":factory define error:"+f.message,f);return}else c=d;a.namespace(b,c)})},require:function(a,g){for(var k="string"==typeof a?[a]:a,m=[],p=[],q=!0,r=0,w=k.length;r<w;r++){var l=k[r],t=f(l);t?p.push(t):(m.push(l),q&&(q=!1,s.push({deps:k,callback:g})),n.traceLog&&e.info("Resource not found: "+l))}if(0==m.length)return g&&
g.apply(null,p),0==p.length?p[0]:p;q=!1;k=0;for(p=m.length;k<p;k++)if(r=m[k],!u[r]){q=r;l=n.urlMap&&n.urlMap[q]&&n.urlMap[q].url;if(!l){w="";q=b.Object.alias(q);l=n.rootPath;if("string"==typeof l)w=l;else if("object"==typeof l)for(t in t=void 0,l)0==q.indexOf(t)&&(w=l[t],q=q.replace(t,""));else w="";l=/.css$/.test(q)?0==q.indexOf("/")?q:"/css/"+q:/.js$/.test(q)?q:q.replace(/\./g,"/")+".js";0!=l.indexOf("/")&&(l="/"+l);l=w+l}q=!0;u[r]={id:r,status:"loading"};w=c.bind(j,null,r);if(/.css$/.test(l))a:{r=
l;l=h.getElementsByTagName("link");for(t=0;t<l.length;t++){var z=l[t].href;!n.skinNode&&0<=z.indexOf(n.skinName)&&(n.skinNode=l[t]);if(0<=z.indexOf(r)||0<=r.indexOf(z))break a}l=document.createElement("link");l.rel="stylesheet";l.href=r;d(l,w);h.insertBefore(l,n.skinNode);n.traceLog&&e.info("Loader request:"+r)}else r=l,l=document.createElement("script"),l.async="async",l.src=r,l.type="text/javascript",d(l,w),h.appendChild(l),n.traceLog&&e.info("Loader request:"+r)}q&&n.showLoading(!0)}};return n});
handy.add("Listener",function(){var e={};return{add:function(a,c){var b=e[a];b||(b=e[a]=[]);b.push(c)},remove:function(a,c){var b=e[a];if(!b)return!1;if(c)for(var f=0,d=b.length;f<d;f++){if(b[f]==c)return b.splice(f,1),!0}else delete e[a];return!1},fire:function(a,c){var b=e[a];if(!b)return!1;for(var f=Array.prototype.slice.call(arguments,1),d=0,g=b.length;d<g;d++){if(d==g-1)return b[d].apply(null,f);b[d].apply(null,f)}}}});
handy.add("Date",function(){var e=window.Date,a={getWeek:function(a,b){var e=a.getDay();b&&(e=(e+(b%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[e]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new e(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var b=new e(a.getFullYear(),0,0);a=new e(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-b.getTime())/864E5)},getDayIndexOfYear:function(a){var b=new e("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-b.getTime())/864E5)},format:function(c,b){b=b||"yyyy-MM-dd HH:mm:ss";c=c||new e;var f=c.getHours(),d=Math.floor((c.getMonth()+3)/3),f={"y+":c.getFullYear(),"M+":c.getMonth()+1,"d+":c.getDate(),"h+":0==f%12?12:f%12,"H+":f,"m+":c.getMinutes(),"s+":c.getSeconds(),"w+":a.getWeek(c),"q+":d,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][d-1],"S+":c.getMilliseconds()},g;for(g in f)RegExp("("+g+")").test(b)&&(d=RegExp.$1.length,b=b.replace(RegExp.$1,1==d?f[g]:("00"+
f[g]).slice(-d)));return b},parse:function(a,b){for(var f=(b||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),d=a.match(/\d+/g),g=new e,j=0;j<d.length;j++){var k=f[j],h=parseInt(d[j]);switch(k){case "yyyy":g.setFullYear(h);break;case "MM":g.setMonth(h-1);break;case "dd":g.setDate(h);break;case "HH":g.setHours(h);break;case "mm":g.setMinutes(h);break;case "ss":g.setSeconds(h);break;case "SS":g.setMilliseconds(h)}}return g},parseObject:function(a){return new e(a.year+1900,a.month,a.date,a.hours,a.minutes,
a.seconds)}};return a});
handy.add("String",function(){var e={stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(a){var c=document.createElement("div");a=document.createTextNode(a);c.appendChild(a);return c.innerHTML},unescapeHTML:function(a){var c=document.createElement("div");c.innerHTML=e.stripTags(a);return c.childNodes[0].nodeValue},decodeHTML:function(a){a=a.replace(/&lt;/gi,"<");a=a.replace(/&gt;/gi,">");a=a.replace(/&quot;/gi,'"');a=a.replace(/&apos;/gi,"'");a=a.replace(/<\/?br>/gi,"\n");
a=a.replace(/&amp;/gi,"&");return a=a.replace(/&nbsp;/gi," ")},encodeHTML:function(a){a=a.replace(/&/gi,"&amp;");a=a.replace(/</gi,"&lt;");a=a.replace(/>/gi,"&gt;");a=a.replace(/\"/gi,"&quot;");a=a.replace(/\'/gi,"&apos;");a=a.replace(/\n/gi,"</br>");return a=a.replace(/ /gi,"&nbsp;")},trim:function(a){return a=a.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(a,c){c||(c=/[,%\'\"\/\\;|\<\>\^]/);return-1<a.search(c)},len:function(a){return a.replace(/[^\x00-\xff]/g,"**").length},left:function(a,
c,b){if(e.len(a)>c){!0===b?b=2:0<b||(b=0);var f=0,d=0;for(c-=b;d<c;)255<a.charCodeAt(f)?d+=2:d++,f++;a=a.substring(0,f);for(f=0;f<b;f++)a+="."}return a},isNumber:function(a){return 0==a.search(/^\d+$/g)},hasChn:function(a){return/[\u4E00-\u9FA5]+/.test(a)},isChn:function(a){return/^[\u4E00-\u9FA5]+$/.test(a)},addParam:function(a,c){c&&(a+=(-1<a.indexOf("?")?"&":"?")+c);return a}};return e});
handy.add("Cookie",function(){return{get:function(e,a){var c=e+"=",b="",f=document.cookie;if(0<f.length){var d=f.indexOf(c);-1!=d&&(d+=c.length,c=f.indexOf(";",d),-1==c&&(c=f.length),b=f.substring(d,c),a||(b=unescape(b)))}return b},set:function(e,a,c){var b=[];void 0!=e&&void 0!=a&&b.push(e+"="+escape(a));c&&(void 0!=c.path&&b.push("path="+c.path),void 0!=c.domain&&b.push("domain="+c.domain),void 0!=c.expires&&b.push("expires="+c.expires),c.secure&&b.push("secure"));document.cookie=b.join(";")},del:function(e){var a=
new Date;a.setTime(a.getTime()-1);document.cookie=e+"=;expires="+a.toGMTString()}}});handy.add("Util",function(){var e=0;return{isWindow:function(a){return null!=a&&a==a.window},getUuid:function(){return e++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(a){var c=top.location.hash;0<=c.indexOf("#")&&(a=c.replace(/#[^\?]*/,a));top.location.hash=a}}});
handy.add("Template",function(e){var a={},c=/^=/,b="".trim,f={openTag:"<%",closeTag:"%>",_add:function(a){return b?"$r+="+a+";\n":"$r.push("+a+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return f._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=f._add(a.replace(c,"")+'||""'));return a+"\n"},_compile:function(a){var c="var $r="+(b?'""':"[]")+";\n";e.Object.each(a.split(f.openTag),function(a,b){var d=
b.split(f.closeTag);1==d.length?c+=f._parseHtml(d[0]):(c+=f._parseScript(d[0]),d[1]&&(c+=f._parseHtml(d[1])))});c+="return "+(b?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(b,c){var j,k,h;if("string"==typeof b)j=b;else if(j=b.tmpl,h=b.id)if(a[h])k=a[h];else{var m=document.getElementById(h);m&&(j=(m.value||m.innerHTML).replace(/\s/g,""))}if(!k){if(!j){e.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}k=f._compile(j);h&&(a[h]=k)}return c?k(c):k}};return f});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(e,a,c){function b(a){if(a==m)return!1;var b=h.contentWindow.document;b.open();b.write("<!doctype html><html><body>"+a+"</body></html>");b.close();m=a;e.log("set:"+h.contentWindow.document.body.innerText)}function f(){var c=a.getHash(),f=h.contentWindow.document.body.innerText;c!=m?(b(c),d(c)):f!=m&&(e.log("update:"+h.contentWindow.document.body.innerText),a.setHash(f))}function d(a){var b=n.listeners,c;for(c in b)b[c](a)}var g,
j=0,k=document,h,m,s=k.documentMode,u="onhashchange"in window&&(void 0===s||7<s),n={delay:50,listen:function(e,m){if(!g&&!g)if(g=!0,n.listeners={},u)$(window).on("hashchange",function(){d(a.getHash())});else h=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(k.body)[0],$(h).one("load",function(){b(a.getHash());setInterval(f,n.delay)});if(m in n.listeners)$D.error("Duplicate name",Error("Duplicate name"));else return m=m||c.expando+ ++j,n.listeners[m]=
e,m},unListen:function(a){for(var b in n.listeners)(!a||a==b)&&delete n.listeners[b]}};return n});
handy.add("Support",function(e){var a={mediaQuery:function(){var a;if(e.Browser.mobile())a="hui-mobile";else{a="hui-pc";var c=e.Browser.ie();c&&(a+=" ie"+c)}document.documentElement.className+=" "+a}};a.mediaQuery();if(6==e.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}return a})(function(e){Hui=H=$H=e.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HL=$H.Listener;$Define=$H.Loader.define;$Require=
$H.Loader.require;$G={config:{}};e=window.$;e.fn.remove=$HF.intercept(e.fn.remove,function(){$HL.fire("removeEl",this.target)})})(handy);
