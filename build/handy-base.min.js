/* Handy v1.0.0-dev | 2014-03-18 | zhengyinhui100@gmail.com */
(function(){var g=window.handy,b=window.$,e=window.handy=window.$=function(){};e.version="1.0.0";e.expando="handy"+(e.version+Math.random()).replace(/\D/g,"");e.add=function(a,c,d){d||(d=c,c=null);if(!c||!e.Loader){e.base||(e.base={});var j=[];if(c)if("string"==typeof c)j.push(e.base.Object.namespace(c));else for(var b=0;b<c.length;b++)j.push(e.base.Object.namespace(c[b]));j.push(e);c=d.apply(window,j);e.base[a]=e[a]=c;if(0<="Browser,Events,Function,Object,String,Template,Util".indexOf(a)){for(var h in c)"undefined"!=
typeof e[h]&&("undefined"!=typeof console&&!Function[h])&&(console.log(e[h]),console.log(a+"\u547d\u540d\u51b2\u7a81:"+h)),e[h]=c[h];"Events"==a&&(e._eventCache={})}}else e.Loader.require(c,function(){Array.prototype.push.call(arguments,e);e.base[a]=e[a]=d.apply(window,arguments)})};e.noConflict=function(a){window.$===e&&(window.$=b);a&&window.handy===e&&(window.handy=g);return e};e.noop=function(){}})();
handy.add("Json",function(){function g(d){a.lastIndex=0;a.test(d)&&(d=d.replace(a,function(a){var d=c[a];return"string"===typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));return'"'+d+'"'}function b(a,c){var e,h,k,l,r=j,q,p=c[a];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(a));"function"===typeof d&&(p=d.call(c,a,p));switch(typeof p){case "string":return g(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";
j+=f;q=[];if("[object Array]"===Object.prototype.toString.apply(p)){l=p.length;for(e=0;e<l;e+=1)q[e]=b(e,p)||"null";k=0===q.length?"[]":j?"[\n"+j+q.join(",\n"+j)+"\n"+r+"]":"["+q.join(",")+"]";j=r;return k}if(d&&"object"===typeof d){l=d.length;for(e=0;e<l;e+=1)"string"===typeof d[e]&&(h=d[e],(k=b(h,p))&&q.push(g(h)+(j?": ":":")+k))}else for(h in p)Object.prototype.hasOwnProperty.call(p,h)&&(k=b(h,p))&&q.push(g(h)+(j?": ":":")+k);k=0===q.length?"{}":j?"{\n"+j+q.join(",\n"+j)+"\n"+r+"}":"{"+q.join(",")+
"}";j=r;return k}}var e="JSON"in window,a,c,d,j,f,h,k,l,s,t;e&&(a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,s=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
t=/(?:^|:|,)(?:\s*\[)+/g);return{stringify:function(a,c,h){if(e)return JSON.stringify.apply(null,arguments);var g;f=j="";if("number"===typeof h)for(g=0;g<h;g+=1)f+=" ";else"string"===typeof h&&(f=h);if((d=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))$D.error(Error("Json.stringify:\u66ff\u6362\u53c2\u6570\u53ea\u80fd\u662f\u51fd\u6570\u6216\u8005\u6570\u7ec4"));else return b("",{"":a})},parse:function(a,c){function d(a,e){var j,b,f=a[e];if(f&&"object"===typeof f)for(j in f)Object.prototype.hasOwnProperty.call(f,
j)&&(b=d(f,j),void 0!==b?f[j]=b:delete f[j]);return c.call(a,e,f)}if(e)return JSON.parse.apply(null,arguments);var j;a=String(a);h.lastIndex=0;h.test(a)&&(a=a.replace(h,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(k.test(a.replace(l,"@").replace(s,"]").replace(t,"")))return j=eval("("+a+")"),"function"===typeof c?d({"":j},""):j;$D.error(new SyntaxError("JSON.parse"))}}});
handy.add("Object",function(g){var b;b=(b=window.navigator.userAgent.match(/MSIE ([\d.]+)/))&&9>parseInt(b[0])?function(a,c,d){var e=[];if(a.length){c=c||0;for(d=d||a.length;c<d;c++)e.push(a[c])}return e}:function(a,c,d){return Array.prototype.slice.call(a,c||0,d||a.length)};var e={_alias:{B:"handy.base",C:"handy.component",M:"handy.module",CM:"handy.common"},namespace:function(a,c){var d=null,j,b,h,g;a=e.alias(a);b=a.split(".");d=b[0];d=(h=2==arguments.length)?eval("(function(){if (typeof "+d+' == "undefined"){'+
d+" = {};}return "+d+";})()"):eval("(function(){if (typeof "+d+' != "undefined")return '+d+";})()");j=1;for(g=b.length;j<g;++j){if(j==g-1&&h)d[b[j]]=c;else if(h||d&&d[b[j]])d[b[j]]=d[b[j]]||{};else return;d=d[b[j]]}return d},alias:function(a,c){var d=e._alias;if(c)d[a]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+a+":"+d[a]):d[a]=c;else{if(a){var b=a,f=a.length-1;do{if(d[b])return d[b]+a.substring(f);f=b.lastIndexOf(".")}while(0<f&&(b=b.substring(0,f)));return a}return d}},createClass:function(a){var c=
function(){var a,b;a=this.constructor==c?this:arguments.callee;if(b=a.initialize){for(var f in a)"object"==typeof a[f]&&(a[f]=e.clone(a[f]));return b.apply(a,arguments)}};c.$isClass=!0;c.prototype.callSuper=function(a,c){a&&(!a.$isClass&&void 0!=a.length)&&(c=a,a=null);var b=arguments.callee.caller,h=b.$owner.superProto;a=a?a.prototype:h||this.constructor.superProto;b=b.$name;if(a&&(b=a[b],e.isFunction(b)))return c?b.apply(this,c):b.call(this)};a&&this.namespace(a,c);return c},extend:function(a,c,
d){var b=d?d.notCover:!1,f=d?d.cover:null;d=d?d.notClone:!1;a=a||{};var h=a.constructor,g=h.$isClass,l;for(l in c)if((!f||e.contains(f,l))&&c.hasOwnProperty(l)){var s=a.hasOwnProperty(l),t=!0===b?s:!1;e.isArray(b)?t=e.contains(b,l)&&s:e.isFunction(b)&&(t=b(l));t||(s=d?c[l]:e.clone(c[l]),g&&e.isFunction(s)&&(s.$name=l,s.$owner=h),a[l]=s)}return a},mix:function(a,c,d,b){a.superProto||(a.superProto={});for(var f in c)a.superProto[f]=e.isFunction(c[f])?a.superProto[f]?function(a,d){return function(){d.apply(this,
arguments);c[a].apply(this,arguments)}}(f,a.superProto[f]):c[f]:c[f],a[f]||(a[f]=c[f]);d&&e.extend(a,d);c.toString!=c.constructor.prototype.toString&&(a.superProto.toString=function(){c.toString.apply(a,arguments)});b&&(a.prototype&&c.prototype)&&e.inherit(a,c,null,b);return a},inherit:function(a,c,d,b,f){var h=function(){};h.prototype=c.prototype;f=f||{notCover:!0};e.extend(a,c,f);a.prototype=new h;a.prototype.constructor=a;a.superClass=c;a.superProto=c.prototype;if(c._onInherit)try{c._onInherit(a)}catch(k){g.Debug.error(k)}b&&
e.extend(a,b);d&&e.extend(a.prototype,d)},isFunction:function(a){return"[object Function]"===window.Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===window.Object.prototype.toString.call(a)},equals:function(a,c){if(typeof a==typeof c){if("object"!=typeof a)return a===c;if(a===c)return!0;if(e.isArray(a)&&e.isArray(c)){if(a.length!=c.length)return!1;for(var d=0,b=a.length;d<b;d++)if(!e.equals(a[d],c[d]))return!1;return!0}if(!e.isArray(a)&&!e.isArray(c)){if(e.count(a)!=
e.count(c))return!1;for(d in a)if(void 0==c[d]||!e.equals(a[d],c[d]))return!1;return!0}}return!1},clone:function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor;if(c!=window.Object&&c!=window.Array)return a;if(c==window.Date||c==window.RegExp||c==window.Function||c==window.String||c==window.Number||c==window.Boolean)return new c(a);try{var d=new c,b;for(b in a)d[b]=e.clone(a[b]);return d}catch(f){return a}},isEmpty:function(a){if(e.isArray(a))return 0==a.length;for(var c in a)return!1;
return!0},each:function(a,c,d){var b,f=0,h=a.length,g=void 0===h||e.isFunction(a);if(d)if(g)for(b in a){if(!1===c.apply(a[b],d))break}else for(;f<h&&!1!==c.apply(a[f++],d););else if(g)for(b in a){if(!1===c.call(a[b],b,a[b]))break}else for(;f<h&&!1!==c.call(a[f],f,a[f++]););return a},contains:function(a,c){var d=!1;e.each(a,function(a,b){if(e.equals(b,c))return d=!0,!1});return d},largeThan:function(a,c){if("object"==typeof a&&"object"==typeof c){var d=!0;e.each(c,function(b){if(!e.equals(c[b],a[b]))return d=
!1});return d}},count:function(a){if(e.isArray(a))return a.length;var c=0,d;for(d in a)c++;return c},toArray:b,getSingleton:function(a){a="string"==typeof a?e.namespace(a):a;return a._singleton||(a._singleton=new a)},generateMethod:function(a,c,d){c=e.isArray(c)?c:c.split(",");for(var b=0;b<c.length;b++){var f=c[b];a[f]=d(f)}}};return e});
handy.add("Browser","handy.base.Object",function(g){var b={},e={};g.generateMethod(e,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(a){return function(c){var d=b[a];return!c&&"string"===typeof d&&/^[\d\.]+$/.test(d)?parseInt(d):d}});g=window.navigator.userAgent;var a;(a=g.match(/MSIE ([\d.]+)/))?b.ie=a[1]:(a=g.match(/Firefox\/([\d.]+)/))?b.firefox=a[1]:(a=g.match(/Chrome\/([\d.]+)/))?
b.chrome=a[1]:(a=g.match(/Opera.([\d.]+)/))?b.opera=a[1]:(a=g.match(/Version\/([\d.]+).*Safari/))?b.safari=a[1]:0;/windows|win32/i.test(g)?b.windows=!0:/linux/i.test(g)?b.linux=!0:/macintosh/i.test(g)?b.mac=!0:0;/trident/i.test(g)?b.trident=!0:/webkit/i.test(g)?b.webkit=!0:/gecko/i.test(g)?b.gecko=!0:/presto/i.test(g)?b.presto=!0:0;/MetaSr/i.test(g)?b.sogou=!0:/Maxthon/i.test(g)?b.maxthon=!0:/TencentTraveler/i.test(g)?b.tt=!0:/TheWorld/i.test(g)?b.theWorld=!0:/360[S|E]E/i.test(g)?b.is360=!0:0;var c;
if((c=g.match(/AppleWebKit\/([\d.]*)/))&&c[1])if(/ Mobile\//.test(g)&&g.match(/iPad|iPod|iPhone/)){b.mobile="ios";if((c=g.match(/OS ([^\s]*)/))&&c[1])b.ios=c[1].replace("_",".");if((c=g.match(/iPad|iPod|iPhone/))&&c[0])b[c[0].toLowerCase()]=b.ios}else if(/ Android/i.test(g)){if(/Mobile/.test(g)&&(b.mobile="android"),(c=g.match(/Android ([^\s]*);/))&&c[1])b.android=c[1]}else if(c=g.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))b.mobile=c[0].toLowerCase();var d;try{if(b.ie){var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
j&&(d=j.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(j=navigator.plugins["Shockwave Flash"])){var f=j.description.split(" ");a=0;for(var h=f.length;a<h;a++)if(0<parseInt(f[a])){d=f[a];break}}}catch(k){}b.flash=d?d:null;return e});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(g,b,e){var a={level:0,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:!("console"in window)||!!b.mobile(),out:function(c,d,b){b=b||"log";if(d||a.showInPage){d=e.expando+"debugDiv";var f=top.document,h=f.getElementById(d);h?h.style.display="block":(h=f.createElement("DIV"),h.id=d,h.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+f.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',h.style.position="fixed",h.style.width=f.body.offsetWidth-20+"px",h.style.left=0,h.style.top=0,h.style.right=0,h.style.height="150px",h.style.backgroundColor="#aaa",h.style.fontSize="12px",h.style.padding="10px",h.style.zIndex=9999999999,h.style.opacity=0.8,h.style.filter="alpha(opacity=80)",f.body.appendChild(h));d=h.getElementsByTagName("DIV")[0];d.innerHTML+=b+" : "+e.Json.stringify(c,null,"<br/>")+"<br/>";d.scrollTop=d.scrollHeight}try{console[b](c)}catch(g){}},
log:function(c,d){a.level>a.LOG_LEVEL||a.out(c,!!d,"log")},info:function(c,d){this.level>a.INFO_LEVEL||a.out(c,!!d,"info")},warn:function(c,d){a.level>a.WARN_LEVEL||a.out(c,!!d,"warn")},error:function(c,d){if(!(a.level>a.ERROR_LEVEL)&&(a.out(c,!!d,"error"),c instanceof Error))throw c;},time:function(c,d,b){a.level>a.INFO_LEVEL||(c?("boolean"==typeof d&&(b=d,d=""),a.out((d||"")+((new Date).getTime()-(a.lastTime||0)),!!b)):a.lastTime=(new Date).getTime())},debug:function(c){if(!(a.level>a.DEBUG_LEVEL)&&
!1!==c)debugger}};return a});handy.add("Function",function(g){return{bind:function(b,e,a){var c=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(c,arguments);return b.apply(e,c)}},intercept:function(b,e,a,c){return g.Object.isFunction(b)&&g.Object.isFunction(e)?function(){var d=a||this,j={},f=arguments;j.scope=c;j.target=d;j.method=b;return!1!=e.apply(j,f)?b.apply(d,f):!1}:b}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(g,b,e,a){function c(a){function c(a){return/\.(css|js)$/.test(a)?t[a]&&"loaded"==t[a].status:n.urlMap&&n.urlMap[a]?n.urlMap[a].chkExist():b.namespace(a)}if("string"==typeof a)return c(a);for(var d=[],e=0,f=a.length;e<f;e++){var j=c(a[e]);if(j)d.push(j);else return!1}return d}function d(a,c){function d(){d.isCalled||(d.isCalled=!0,clearTimeout(h),c())}if("SCRIPT"===a.nodeName){var b=a,e=d;b.onload=b.onerror=
b.onreadystatechange=function(){/loaded|complete|undefined/.test(b.readyState)&&(b.onload=b.onerror=b.onreadystatechange=null,k.removeChild(b),b=null,setTimeout(e,0))}}else{var f=d;window.hasOwnProperty("attachEvent")?a.attachEvent("onload",f):setTimeout(function(){j(a,f)},0)}var h=setTimeout(function(){g.error("Time is out:"+a.src);d()},n.timeout)}function j(a,c){if(!c.isCalled){var d;if(l)a.sheet&&(d=!0);else if(a.sheet)try{a.sheet.cssRules&&(d=!0)}catch(b){if("SecurityError"===b.name||"NS_ERROR_DOM_SECURITY_ERR"===
b.name)d=!0}setTimeout(function(){d?c():j(a,c)},1)}}function f(a){n.showLoading(!1);t[a].status="loaded";n.traceLog&&g.info("Loader Response: "+a);h()}function h(){for(var a=s.length-1;0<=a;a--){var d=s[a],b=c(d.deps);if(b){s.splice(a,1);d.callback.apply(null,b);h();break}}}var k=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=navigator.userAgent.indexOf("AppleWebKit"),s=[],t={},n={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(a,
c,d){2==arguments.length&&(d=c,c=[]);n.require(c,function(){var c;if("function"==typeof d)try{c=d.apply(null,arguments),n.traceLog&&g.info("Loader define: "+a)}catch(e){g.error("Loader "+a+":factory define error:"+e.message,e);return}else c=d;b.namespace(a,c);var f=typeof c;if("object"==f||"Function"==f)c.$ns=a})},require:function(b,j){for(var h="string"==typeof b?[b]:b,l=[],v=[],r=!0,q=0,p=h.length;q<p;q++){var m=h[q],u=c(m);u?v.push(u):(l.push(m),r&&(r=!1,s.push({deps:h,callback:j})),n.traceLog&&
g.info("Resource not found: "+m))}if(0==l.length)return j&&j.apply(null,v),0==v.length?v[0]:v;r=!1;h=0;for(v=l.length;h<v;h++)if(q=l[h],!t[q]){r=q;m=n.urlMap&&n.urlMap[r]&&n.urlMap[r].url;if(!m){p="";r=a.Object.alias(r);m=n.rootPath;if("string"==typeof m)p=m;else if("object"==typeof m)for(u in u=void 0,m)0==r.indexOf(u)&&(p=m[u],r=r.replace(u,""));else p="";m=/.css$/.test(r)?0==r.indexOf("/")?r:"/css/"+r:/.js$/.test(r)?r:r.replace(/\./g,"/")+".js";0!=m.indexOf("/")&&(m="/"+m);m=p+m}r=!0;t[q]={id:q,
status:"loading"};p=e.bind(f,null,q);if(/.css$/.test(m))a:{q=m;m=k.getElementsByTagName("link");for(u=0;u<m.length;u++){var w=m[u].href;!n.skinNode&&0<=w.indexOf(n.skinName)&&(n.skinNode=m[u]);if(0<=w.indexOf(q)||0<=q.indexOf(w))break a}m=document.createElement("link");m.rel="stylesheet";m.href=q;d(m,p);k.insertBefore(m,n.skinNode);n.traceLog&&g.info("Loader request:"+q)}else q=m,m=document.createElement("script"),m.async="async",m.src=q,m.type="text/javascript",d(m,p),k.appendChild(m),n.traceLog&&
g.info("Loader request:"+q)}r&&n.showLoading(!0)}};return n});
handy.add("Events",function(){var g=Array.prototype;return{_eventCache:{},_parseEvents:function(b,e,a){var c=/\s+/,d=g.slice.call(arguments,2);if("object"==typeof e){for(var j in e)this[b].apply(this,[j,e[j]].concat(d));return!0}if(c.test(e)){c=e.split(c);j=0;for(var f=c.length;j<f;j++)this[b].apply(this,[c[j]].concat(d));return!0}return!1},on:function(b,e,a,c){var d=this;if(!d._parseEvents("on",b,e,a,c)){var j=d._eventCache,f=j[b];f||(f=j[b]=[]);f.push({times:c,handler:e,context:a,delegation:function(){if(!0!=
d.isSuspend)return e.apply(a||d,arguments)}})}},once:function(b,e,a){if(!this._parseEvents("once",b,e,a,1))this.on(b,e,a,1)},off:function(b,e){if("all"==b)return this._eventCache={},!0;if(!this._parseEvents("off",b,e)){var a=this._eventCache,c=b.indexOf(".");if(!e&&0>=c){for(var d in a)(d.split(".")[0]==b||0==c&&0<=d.indexOf(b))&&delete a[d];return!0}c=a[b];if(!c)return!1;if(e){a=0;for(d=c.length;a<d;a++)if(c[a].handler==e)return c.splice(a,1),!0}else return delete a[b],!0;return!1}},suspend:function(){if(this.isSuspend)return!1;
this.isSuspend=!0},resume:function(){if(!this.isSuspend)return!1;this.isSuspend=!1},trigger:function(b,e){function a(a){if(a)for(var d=0,b=a.length;d<b;d++){var e=a[d],h=e.delegation;"number"==typeof e.times&&(1<e.times?e.times--:c.off(k,e.handler));f=h.apply(null,j)}}var c=this,d=$HO.toArray(arguments);d.unshift("trigger");if(!c._parseEvents.apply(c,d)){var d=c._eventCache,j=g.slice.call(arguments,1),f,h;if(0<b.indexOf("."))h=d[b],a(h);else for(var k in d)if(h=b.indexOf("."),k.split(".")[0]==b||
0==h&&0<=k.indexOf(b))h=d[k],a(h);a(d.all);return f}}}});
handy.add("Date",function(){var g=window.Date,b={getWeek:function(b,a){var c=b.getDay();a&&(c=(c+(a%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[c]},isWeeken:function(b){return 0==b.getDay()||6==b.getDay()},getDaysInMonth:function(b){b=new g(b.getFullYear(),b.getMonth()+1,0);return b.getDate()},getDaysInYear:function(b){var a=new g(b.getFullYear(),0,0);b=new g(b.getFullYear()+1,0,0);return Math.floor((b.getTime()-a.getTime())/864E5)},getDayIndexOfYear:function(b){var a=new g("1/1/"+
b.getFullYear());return Math.ceil((b.getTime()-a.getTime())/864E5)},format:function(e,a){a=a||"yyyy-MM-dd HH:mm:ss";e=e||new g;var c=e.getHours(),d=Math.floor((e.getMonth()+3)/3),c={"y+":e.getFullYear(),"M+":e.getMonth()+1,"d+":e.getDate(),"h+":0==c%12?12:c%12,"H+":c,"m+":e.getMinutes(),"s+":e.getSeconds(),"w+":b.getWeek(e),"q+":d,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][d-1],"S+":e.getMilliseconds()},j;for(j in c)RegExp("("+j+")").test(a)&&(d=RegExp.$1.length,a=a.replace(RegExp.$1,1==d?c[j]:("00"+
c[j]).slice(-d)));return a},parse:function(b,a){for(var c=(a||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),d=b.match(/\d+/g),j=new g,f=0;f<d.length;f++){var h=c[f],k=parseInt(d[f]);switch(h){case "yyyy":j.setFullYear(k);break;case "MM":j.setMonth(k-1);break;case "dd":j.setDate(k);break;case "HH":j.setHours(k);break;case "mm":j.setMinutes(k);break;case "ss":j.setSeconds(k);break;case "SS":j.setMilliseconds(k)}}return j},parseObject:function(b){return new g(b.year+1900,b.month,b.date,b.hours,b.minutes,
b.seconds)}};return b});
handy.add("String",function(){var g={stripTags:function(b){return b.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(b){var e=document.createElement("div");b=document.createTextNode(b);e.appendChild(b);return e.innerHTML},unescapeHTML:function(b){var e=document.createElement("div");e.innerHTML=g.stripTags(b);return e.childNodes[0].nodeValue},decodeHTML:function(b){b=b.replace(/&lt;/gi,"<");b=b.replace(/&gt;/gi,">");b=b.replace(/&quot;/gi,'"');b=b.replace(/&apos;/gi,"'");b=b.replace(/<\/?br>/gi,"\n");
b=b.replace(/&amp;/gi,"&");return b=b.replace(/&nbsp;/gi," ")},encodeHTML:function(b){b=b.replace(/&/gi,"&amp;");b=b.replace(/</gi,"&lt;");b=b.replace(/>/gi,"&gt;");b=b.replace(/\"/gi,"&quot;");b=b.replace(/\'/gi,"&apos;");b=b.replace(/\n/gi,"</br>");return b=b.replace(/ /gi,"&nbsp;")},trim:function(b){return b=b.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(b,e){e||(e=/[,%\'\"\/\\;|\<\>\^]/);return-1<b.search(e)},len:function(b){return b.replace(/[^\x00-\xff]/g,"**").length},left:function(b,
e,a){if(g.len(b)>e){!0===a?a=2:0<a||(a=0);var c=0,d=0;for(e-=a;d<e;)255<b.charCodeAt(c)?d+=2:d++,c++;b=b.substring(0,c);for(c=0;c<a;c++)b+="."}return b},isNumber:function(b){return 0==b.search(/^\d+$/g)},hasChn:function(b){return/[\u4E00-\u9FA5]+/.test(b)},isChn:function(b){return/^[\u4E00-\u9FA5]+$/.test(b)},addParam:function(b,e){e&&(b+=(-1<b.indexOf("?")?"&":"?")+e);return b}};return g});
handy.add("Cookie",function(){return{get:function(g,b){var e=g+"=",a="",c=document.cookie;if(0<c.length){var d=c.indexOf(e);-1!=d&&(d+=e.length,e=c.indexOf(";",d),-1==e&&(e=c.length),a=c.substring(d,e),b||(a=unescape(a)))}return a},set:function(g,b,e){var a=[];void 0!=g&&void 0!=b&&a.push(g+"="+escape(b));e&&(void 0!=e.path&&a.push("path="+e.path),void 0!=e.domain&&a.push("domain="+e.domain),void 0!=e.expires&&a.push("expires="+e.expires),e.secure&&a.push("secure"));document.cookie=a.join(";")},del:function(g){var b=
new Date;b.setTime(b.getTime()-1);document.cookie=g+"=;expires="+b.toGMTString()}}});handy.add("Util",function(g){var b=0;return{isWindow:function(b){return null!=b&&b==b.window},getUuid:function(){return b++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(b){var a=top.location.hash;0<=a.indexOf("#")&&(b=a.replace(/#[^\?]*/,b));top.location.hash=b},result:function(b,a){var c=b[a];return g.Object.isFunction(c)?c():c}}});
handy.add("Collection","B.Object",function(g){function b(a){return a}function e(a){return function(b){return b[a]}}function a(a){return function(b){if(b===a)return!0;for(var e in a)if(a[e]!==b[e])return!1;return!0}}return{map:function(a,b,e){var f=[];if(null==a)return f;var h=Array.prototype.map;if(h&&a.map===h)return a.map(b,e);g.each(a,function(a,c){f.push(b.call(e,c,a))});return f},pluck:function(a,b){return this.map(a,e(b))},some:function(a,b,e){var f=!1;if(null==a||!b)return f;var h=Array.prototype.some;
if(h&&a.some===h)return a.some(b,e);$HO.each(a,function(a,c,h){if(f||(f=b.call(e,c,a,h)))return!1});return!!f},every:function(a,b,e){var f=!0;if(null==a||!b)return f;var h=Array.prototype.every;if(h&&a.every===h)return a.every(b,e);$HO.each(a,function(a,c,h){if(!(f=b.call(e,c,a,h)))return!1});return!!f},find:function(a,b,e){var f;this.some(a,function(a,c,g){if(b.call(e,a,c,g))return f=a,!0});return f},filter:function(a,b,e){var f=[];if(null==a)return f;var h=Array.prototype.filter;if(h&&a.filter===
h)return a.filter(b,e);$HO.each(a,function(a,c,h){b.call(e,c,a,h)&&f.push(c)});return f},where:function(b,d){return this.filter(b,a(d))},findWhere:function(b,d){return this.find(b,a(d))},invoke:function(a,b){var e=Array.prototype.slice.call(arguments,2),f=g.isFunction(b);return this.map(a,function(a){return(f?b:a[b]).apply(a,e)})},sortBy:function(a,d,j){var f=d;d=null==f?b:$HO.isFunction(f)?f:e(f);return this.pluck(this.map(a,function(a,b,c){return{value:a,index:b,criteria:d.call(j,a,b,c)}}).sort(function(a,
b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")}}});
handy.add("Template",function(g){var b={},e=/^=/,a="".trim,c={openTag:"<%",closeTag:"%>",_add:function(b){return a?"$r+="+b+";\n":"$r.push("+b+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return c._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=c._add(a.replace(e,"")+'||""'));return a+"\n"},_compile:function(b){var e="var $r="+(a?'""':"[]")+";\n";g.Object.each(b.split(c.openTag),function(a,b){var d=
b.split(c.closeTag);1==d.length?e+=c._parseHtml(d[0]):(e+=c._parseScript(d[0]),d[1]&&(e+=c._parseHtml(d[1])))});e+="return "+(a?"$r;":'$r.join("");');return new Function("$data",e)},tmpl:function(a,e){var f,h,k;if("string"==typeof a)f=a;else if(f=a.tmpl,k=a.id)if(b[k])h=b[k];else{var l=document.getElementById(k);l&&(f=(l.value||l.innerHTML).replace(/\s/g,""))}if(!h){if(!f){g.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}h=c._compile(f);k&&(b[k]=h)}return e?h(e):h}};return c});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(g,b,e){function a(a){if(a==l)return!1;var b=k.contentWindow.document;b.open();b.write("<!doctype html><html><body>"+a+"</body></html>");b.close();l=a;g.log("set:"+k.contentWindow.document.body.innerText)}function c(){var c=b.getHash(),e=k.contentWindow.document.body.innerText;c!=l?(a(c),d(c)):e!=l&&(g.log("update:"+k.contentWindow.document.body.innerText),b.setHash(e))}function d(a){var b=n.listeners,c;for(c in b)b[c](a)}var j,
f=0,h=document,k,l,s=h.documentMode,t="onhashchange"in window&&(void 0===s||7<s),n={delay:50,listen:function(g,l){if(!j&&!j)if(j=!0,n.listeners={},t)$(window).on("hashchange",function(){d(b.getHash())});else k=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(h.body)[0],$(k).one("load",function(){a(b.getHash());setInterval(c,n.delay)});if(l in n.listeners)$D.error(Error("Duplicate name"));else return l=l||e.expando+ ++f,n.listeners[l]=g,l},unListen:function(a){for(var b in n.listeners)(!a||
a==b)&&delete n.listeners[b]}};return n});handy.add("Support",function(g){var b={mediaQuery:function(){var a;if(g.Browser.mobile())a="hui-mobile";else{a="hui-pc";var b=g.Browser.ie();b&&(a+=" ie"+b)}document.documentElement.className+=" "+a}};b.mediaQuery();if(6==g.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}return b});
handy.add("Validator",["B.String","B.Object"],function(g,b){var e={messages:{required:"{name}\u4e0d\u80fd\u4e3a\u7a7a",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94fe\u63a5\u5730\u5740",date:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f",number:"{name}\u987b\u662f\u6570\u5b57",digits:"{name}\u987b\u662f\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u7528\u5361\u53f7\u7801",
equalTo:"\u8bf7\u8f93\u5165\u76f8\u540c\u7684{name}",min:"{name}\u4e0d\u80fd\u5c0f\u4e8e{0}",max:"{name}\u4e0d\u80fd\u5927\u4e8e{0}",range:"{name}\u8981\u5728{0}\u5230{1}\u4e4b\u95f4",maxlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7{0}",minlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e{0}",rangelength:"{name}\u957f\u5ea6\u8981\u5728{0}\u5230{1}\u4e4b\u95f4"},valid:function(a,b){var d=b.rules,g;for(g in d){var f=d[g],h=("function"==typeof f?f:e[g])(a,f);if(!h)return d=b.error||e.error,g=b.messages&&
b.messages[g]||e.messages[g],g=g.replace(/\{([^\}]+)\}/g,function(a,d){return f[d]||0==d&&f||b[d]||f||""}),d&&d(g),h}return!0},required:function(a){return 0<g.trim(""+a).length},email:function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a){return!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a){return/^\d+$/.test(a)},creditcard:function(a){if(/[^0-9 \-]+/.test(a))return!1;var b=0,d=0,e=!1;a=a.replace(/\D/g,"");for(var f=a.length-1;0<=f;f--){d=a.charAt(f);d=parseInt(d,10);if(e&&9<(d*=2))d-=9;b+=d;e=!e}return 0===b%10},min:function(a,b){return a>=b},max:function(a,
b){return a<=b},range:function(a,b){return a>=b[0]&&a<=b[1]},minlength:function(a,c){return(b.isArray(a)?a.length:g.trim(""+a).length)>=c},maxlength:function(a,c){return(b.isArray(a)?a.length:g.trim(""+a).length)<=c},rangelength:function(a,c){var d=b.isArray(a)?a.length:g.trim(""+a).length;return d>=c[0]&&d<=c[1]},equalTo:function(a,b){return a===b}};return e});
handy.add("LocalStorage",["B.Browser","B.Events","B.Json"],function(g,b,e){b={_init:function(){!a&&g.ie()&&(d=document.getElementById("LocalStorageUserDataDiv"),d||(d=document.createElement("DIV"),d.style.display="none",d.id="LocalStorageUserDataDiv",d.addBehavior("#default#userData"),document.body.appendChild(d),d.load(j)))},getItem:function(b){b=a?c.getItem(b):d.getAttribute(b);return b=e.parse(b)},setItem:function(b,g){g=e.stringify(g);try{a?c.setItem(b,g):(d.setAttribute(b,g),d.save(j))}catch(k){return $D.error(k),
!1}return!0},removeItem:function(b){a?c.removeItem(b):(d.removeAttribute(b),d.save(j))},clear:function(){a?c.clear():d.unload()}};var a=window.localStorage&&window.localStorage.getItem,c=window.localStorage,d,j=document.domain;b._init();return b})(function(g){Hui=H=$H=g.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HE=$H.Events;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};g=window.$;g.fn.remove=$HF.intercept(g.fn.remove,
function(){$H.trigger("removeEl",this.target)})})(handy);
