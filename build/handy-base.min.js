/* Handy v1.0.0-dev | 2014-03-19 | zhengyinhui100@gmail.com */
(function(){var e=window.handy,d=window.$,a=window.handy=window.$=function(){};a.version="1.0.0";a.expando="handy"+(a.version+Math.random()).replace(/\D/g,"");a.add=function(c,b,f){f||(f=b,b=null);if(!b||!a.Loader){a.base||(a.base={});var d=[];if(b)if("string"==typeof b)d.push(a.base.Object.namespace(b));else for(var g=0;g<b.length;g++)d.push(a.base.Object.namespace(b[g]));d.push(a);b=f.apply(window,d);a.base[c]=a[c]=b;if(0<="Class,Browser,Events,Function,Object,String,Template,Util".indexOf(c)){for(var e in b)"undefined"!=
typeof a[e]&&("console"in window&&!Function[e])&&(console.log(a[e]),console.log(c+"\u547d\u540d\u51b2\u7a81:"+e)),a[e]=b[e];"Events"==c&&(a._eventCache={})}}else a.Loader.require(b,function(){Array.prototype.push.call(arguments,a);a.base[c]=a[c]=f.apply(window,arguments)})};a.noConflict=function(c){window.$===a&&(window.$=d);c&&window.handy===a&&(window.handy=e);return a};a.noop=function(){}})();
handy.add("Json",function(){function e(b){h.lastIndex=0;h.test(b)&&(b=b.replace(h,function(b){var c=g[b];return"string"===typeof c?c:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));return'"'+b+'"'}function d(a,h){var g,j,k,l,r=b,q,p=h[a];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(a));"function"===typeof c&&(p=c.call(h,a,p));switch(typeof p){case "string":return e(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";
b+=f;q=[];if("[object Array]"===Object.prototype.toString.apply(p)){l=p.length;for(g=0;g<l;g+=1)q[g]=d(g,p)||"null";k=0===q.length?"[]":b?"[\n"+b+q.join(",\n"+b)+"\n"+r+"]":"["+q.join(",")+"]";b=r;return k}if(c&&"object"===typeof c){l=c.length;for(g=0;g<l;g+=1)"string"===typeof c[g]&&(j=c[g],(k=d(j,p))&&q.push(e(j)+(b?": ":":")+k))}else for(j in p)Object.prototype.hasOwnProperty.call(p,j)&&(k=d(j,p))&&q.push(e(j)+(b?": ":":")+k);k=0===q.length?"{}":b?"{\n"+b+q.join(",\n"+b)+"\n"+r+"}":"{"+q.join(",")+
"}";b=r;return k}}var a="JSON"in window,c,b,f,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,s=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,u=/(?:^|:|,)(?:\s*\[)+/g;
return{stringify:function(h,g,e,j){if(a&&!j)return JSON.stringify.apply(null,arguments);var k;f=b="";if("number"===typeof e)for(k=0;k<e;k+=1)f+=" ";else"string"===typeof e&&(f=e);if((c=g)&&"function"!==typeof g&&("object"!==typeof g||"number"!==typeof g.length))$D.error(Error("Json.stringify:\u66ff\u6362\u53c2\u6570\u53ea\u80fd\u662f\u51fd\u6570\u6216\u8005\u6570\u7ec4"));else return d("",{"":h})},parse:function(b,c,f){function d(b,a){var f,h,g=b[a];if(g&&"object"===typeof g)for(f in g)Object.prototype.hasOwnProperty.call(g,
f)&&(h=d(g,f),void 0!==h?g[f]=h:delete g[f]);return c.call(b,a,g)}if(a&&!f)return JSON.parse.apply(null,arguments);var h;b=String(b);j.lastIndex=0;j.test(b)&&(b=b.replace(j,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(k.test(b.replace(l,"@").replace(s,"]").replace(u,"")))return h=eval("("+b+")"),"function"===typeof c?d({"":h},""):h;$D.error(new SyntaxError("JSON.parse"))}}});
handy.add("Object",function(){var e;e=(e=window.navigator.userAgent.match(/MSIE ([\d.]+)/))&&9>parseInt(e[0])?function(a,c,b){var f=[];if(a.length){c=c||0;for(b=b||a.length;c<b;c++)f.push(a[c])}return f}:function(a,c,b){return Array.prototype.slice.call(a,c||0,b||a.length)};var d={_alias:{B:"handy.base",C:"handy.component",M:"handy.module",CM:"handy.common"},namespace:function(a,c){var b=null,f,h,g,e;a=d.alias(a);h=a.split(".");b=h[0];b=(g=2==arguments.length)?eval("(function(){if (typeof "+b+' == "undefined"){'+
b+" = {};}return "+b+";})()"):eval("(function(){if (typeof "+b+' != "undefined")return '+b+";})()");f=1;for(e=h.length;f<e;++f){if(f==e-1&&g)b[h[f]]=c;else if(g||b&&b[h[f]])b[h[f]]=b[h[f]]||{};else return;b=b[h[f]]}return b},alias:function(a,c){var b=d._alias;if(c)b[a]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+a+":"+b[a]):b[a]=c;else{if(a){var f=a,h=a.length-1;do{if(b[f])return b[f]+a.substring(h);h=f.lastIndexOf(".")}while(0<h&&(f=f.substring(0,h)));return a}return b}},extend:function(a,c,
b){var f=b?b.notCover:!1,h=b?b.cover:null;b=b?b.notClone:!1;a=a||{};var g=a.constructor,e=g.$isClass,k;for(k in c)if((!h||d.contains(h,k))&&c.hasOwnProperty(k)){var l=a.hasOwnProperty(k),s=!0===f?l:!1;d.isArray(f)?s=d.contains(f,k)&&l:d.isFunction(f)&&(s=f(k));s||(l=b?c[k]:d.clone(c[k]),e&&d.isFunction(l)&&(l.$name=k,l.$owner=g),a[k]=l)}return a},mix:function(a,c,b){a.superProto||(a.superProto={});for(var f in c)a.superProto[f]=d.isFunction(c[f])?a.superProto[f]?function(b,a){return function(){a.apply(this,
arguments);c[b].apply(this,arguments)}}(f,a.superProto[f]):c[f]:c[f],a[f]||(a[f]=c[f]);b&&d.extend(a,b);c.toString!=c.constructor.prototype.toString&&(a.superProto.toString=function(){c.toString.apply(a,arguments)});return a},isFunction:function(a){return"[object Function]"===window.Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===window.Object.prototype.toString.call(a)},equals:function(a,c){if(typeof a==typeof c){if("object"!=typeof a)return a===c;if(a===c)return!0;
if(d.isArray(a)&&d.isArray(c)){if(a.length!=c.length)return!1;for(var b=0,f=a.length;b<f;b++)if(!d.equals(a[b],c[b]))return!1;return!0}if(!d.isArray(a)&&!d.isArray(c)){if(d.count(a)!=d.count(c))return!1;for(b in a)if(void 0==c[b]||!d.equals(a[b],c[b]))return!1;return!0}}return!1},clone:function(a){if(null==a||"object"!=typeof a)return a;var c=a.constructor;if(c!=window.Object&&c!=window.Array)return a;if(c==window.Date||c==window.RegExp||c==window.Function||c==window.String||c==window.Number||c==
window.Boolean)return new c(a);try{var b=new c,f;for(f in a)b[f]=d.clone(a[f]);return b}catch(h){return a}},isEmpty:function(a){if(d.isArray(a))return 0==a.length;for(var c in a)return!1;return!0},each:function(a,c,b){var f,h=0,g=a.length,e=void 0===g||d.isFunction(a);if(b)if(e)for(f in a){if(!1===c.apply(a[f],b))break}else for(;h<g&&!1!==c.apply(a[h++],b););else if(e)for(f in a){if(!1===c.call(a[f],f,a[f]))break}else for(;h<g&&!1!==c.call(a[h],h,a[h++]););return a},contains:function(a,c){var b=!1;
d.each(a,function(a,h){if(d.equals(h,c))return b=!0,!1});return b},largeThan:function(a,c){if("object"==typeof a&&"object"==typeof c){var b=!0;d.each(c,function(f){if(!d.equals(c[f],a[f]))return b=!1});return b}},count:function(a){if(d.isArray(a))return a.length;var c=0,b;for(b in a)c++;return c},toArray:e,getSingleton:function(a){a="string"==typeof a?d.namespace(a):a;return a._singleton||(a._singleton=new a)},generateMethod:function(a,c,b){c=d.isArray(c)?c:c.split(",");for(var f=0;f<c.length;f++){var h=
c[f];a[h]=b(h)}}};return d});
handy.add("Browser","handy.base.Object",function(e){var d={},a={};e.generateMethod(a,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(c){var a=d[b];return!c&&"string"===typeof a&&/^[\d\.]+$/.test(a)?parseInt(a):a}});e=window.navigator.userAgent;var c;(c=e.match(/MSIE ([\d.]+)/))?d.ie=c[1]:(c=e.match(/Firefox\/([\d.]+)/))?d.firefox=c[1]:(c=e.match(/Chrome\/([\d.]+)/))?
d.chrome=c[1]:(c=e.match(/Opera.([\d.]+)/))?d.opera=c[1]:(c=e.match(/Version\/([\d.]+).*Safari/))?d.safari=c[1]:0;/windows|win32/i.test(e)?d.windows=!0:/linux/i.test(e)?d.linux=!0:/macintosh/i.test(e)?d.mac=!0:0;/trident/i.test(e)?d.trident=!0:/webkit/i.test(e)?d.webkit=!0:/gecko/i.test(e)?d.gecko=!0:/presto/i.test(e)?d.presto=!0:0;/MetaSr/i.test(e)?d.sogou=!0:/Maxthon/i.test(e)?d.maxthon=!0:/TencentTraveler/i.test(e)?d.tt=!0:/TheWorld/i.test(e)?d.theWorld=!0:/360[S|E]E/i.test(e)?d.is360=!0:0;var b;
if((b=e.match(/AppleWebKit\/([\d.]*)/))&&b[1])if(/ Mobile\//.test(e)&&e.match(/iPad|iPod|iPhone/)){d.mobile="ios";if((b=e.match(/OS ([^\s]*)/))&&b[1])d.ios=b[1].replace("_",".");if((b=e.match(/iPad|iPod|iPhone/))&&b[0])d[b[0].toLowerCase()]=d.ios}else if(/ Android/i.test(e)){if(/Mobile/.test(e)&&(d.mobile="android"),(b=e.match(/Android ([^\s]*);/))&&b[1])d.android=b[1]}else if(b=e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))d.mobile=b[0].toLowerCase();var f;try{if(d.ie){var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
h&&(f=h.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(h=navigator.plugins["Shockwave Flash"])){var g=h.description.split(" ");c=0;for(var j=g.length;c<j;c++)if(0<parseInt(g[c])){f=g[c];break}}}catch(k){}d.flash=f?f:null;return a});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(e,d,a){var c={level:0,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:!("console"in window)||!!d.mobile(),out:function(b,f,d){d=d||"log";if(f||c.showInPage){f=a.expando+"debugDiv";var g=top.document,e=g.getElementById(f);e?e.style.display="block":(e=g.createElement("DIV"),e.id=f,e.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+g.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',e.style.position="fixed",e.style.width=g.body.offsetWidth-20+"px",e.style.left=0,e.style.top=0,e.style.right=0,e.style.height="150px",e.style.backgroundColor="#aaa",e.style.fontSize="12px",e.style.padding="10px",e.style.zIndex=9999999999,e.style.opacity=0.8,e.style.filter="alpha(opacity=80)",g.body.appendChild(e));f=e.getElementsByTagName("DIV")[0];g=a.Json.stringify(b,null,"&nbsp;&nbsp;&nbsp;&nbsp;",!0).replace(/\n/g,"<br/>");f.innerHTML+=
d+" : "+g+"<br/>";f.scrollTop=f.scrollHeight}try{console[d](b)}catch(k){}},log:function(b,a){c.level>c.LOG_LEVEL||c.out(b,!!a,"log")},info:function(b,a){this.level>c.INFO_LEVEL||c.out(b,!!a,"info")},warn:function(b,a){c.level>c.WARN_LEVEL||c.out(b,!!a,"warn")},error:function(b,a){if(!(c.level>c.ERROR_LEVEL)&&(c.out(b,!!a,"error"),b instanceof Error))throw b;},time:function(b,a,d){c.level>c.INFO_LEVEL||(b?("boolean"==typeof a&&(d=a,a=""),c.out((a||"")+((new Date).getTime()-(c.lastTime||0)),!!d)):c.lastTime=
(new Date).getTime())},debug:function(b){if(!(c.level>c.DEBUG_LEVEL)&&!1!==b)debugger}};return c});handy.add("Function",function(e){return{bind:function(d,a,c){var b=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(b,arguments);return d.apply(a,b)}},intercept:function(d,a,c,b){return e.Object.isFunction(d)&&e.Object.isFunction(a)?function(){var f=c||this,h={},g=arguments;h.scope=b;h.target=f;h.method=d;return!1!=a.apply(h,g)?d.apply(f,g):!1}:d}}});
handy.add("Class",["B.Object","B.Debug"],function(e,d){var a={createClass:function(c){var b=function(){var a,c;a=this.constructor==b?this:arguments.callee;if(c=a.initialize){for(var d in a)"object"==typeof a[d]&&(a[d]=e.clone(a[d]));return c.apply(a,arguments)}};b.$isClass=!0;b.extend=function(c,d,e){var j=a.createClass();a.inherit(j,b,c,d,e);return j};b.prototype.callSuper=function(b,a){b&&(!b.$isClass&&void 0!=b.length)&&(a=b,b=null);var c=arguments.callee.caller,d=c.$owner.superProto;b=b?b.prototype:
d||this.constructor.superProto;c=c.$name;if(b&&(c=b[c],e.isFunction(c)))return a?c.apply(this,a):c.call(this)};c&&this.namespace(c,b);return b},inherit:function(a,b,f,h,g){var j=function(){};j.prototype=b.prototype;e.extend(a,b,g);a.prototype=new j;a.prototype.constructor=a;a.superClass=b;a.superProto=b.prototype;if(b._onInherit)try{b._onInherit(a)}catch(k){d.error(k)}h&&e.extend(a,h);f&&e.extend(a.prototype,f)}};return a});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(e,d,a,c){function b(b){function a(b){return/\.(css|js)$/.test(b)?u[b]&&"loaded"==u[b].status:n.urlMap&&n.urlMap[b]?n.urlMap[b].chkExist():d.namespace(b)}if("string"==typeof b)return a(b);for(var c=[],f=0,e=b.length;f<e;f++){var h=a(b[f]);if(h)c.push(h);else return!1}return c}function f(b,a){function c(){c.isCalled||(c.isCalled=!0,clearTimeout(j),a())}if("SCRIPT"===b.nodeName){var f=b,d=c;f.onload=f.onerror=
f.onreadystatechange=function(){/loaded|complete|undefined/.test(f.readyState)&&(f.onload=f.onerror=f.onreadystatechange=null,k.removeChild(f),f=null,setTimeout(d,0))}}else{var g=c;window.hasOwnProperty("attachEvent")?b.attachEvent("onload",g):setTimeout(function(){h(b,g)},0)}var j=setTimeout(function(){e.error("Time is out:"+b.src);c()},n.timeout)}function h(b,a){if(!a.isCalled){var c;if(l)b.sheet&&(c=!0);else if(b.sheet)try{b.sheet.cssRules&&(c=!0)}catch(f){if("SecurityError"===f.name||"NS_ERROR_DOM_SECURITY_ERR"===
f.name)c=!0}setTimeout(function(){c?a():h(b,a)},1)}}function g(b){n.showLoading(!1);u[b].status="loaded";n.traceLog&&e.info("Loader Response: "+b);j()}function j(){for(var a=s.length-1;0<=a;a--){var c=s[a],f=b(c.deps);if(f){s.splice(a,1);c.callback.apply(null,f);j();break}}}var k=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=navigator.userAgent.indexOf("AppleWebKit"),s=[],u={},n={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,
a,c){2==arguments.length&&(c=a,a=[]);n.require(a,function(){var a;if("function"==typeof c)try{a=c.apply(null,arguments),n.traceLog&&e.info("Loader define: "+b)}catch(f){f.message="Loader "+b+":factory define error:"+f.message;e.error(f);return}else a=c;d.namespace(b,a);var h=typeof a;if("object"==h||"Function"==h)a.$ns=b})},require:function(d,h){for(var j="string"==typeof d?[d]:d,l=[],v=[],r=!0,q=0,p=j.length;q<p;q++){var m=j[q],t=b(m);t?v.push(t):(l.push(m),r&&(r=!1,s.push({deps:j,callback:h})),
n.traceLog&&e.info("Resource not found: "+m))}if(0==l.length)return h&&h.apply(null,v),0==v.length?v[0]:v;r=!1;j=0;for(v=l.length;j<v;j++)if(q=l[j],!u[q]){r=q;r=c.Object.alias(r);m=n.urlMap&&n.urlMap[r]&&n.urlMap[r].url;if(!m){p="";m=n.rootPath;if("string"==typeof m)p=m;else if("object"==typeof m)for(t in t=void 0,m)0==r.indexOf(t)&&(p=m[t],r=r.replace(t,""));else p="";m=/.css$/.test(r)?0==r.indexOf("/")?r:"/css/"+r:/.js$/.test(r)?r:r.replace(/\./g,"/")+".js";0!=m.indexOf("/")&&(m="/"+m);m=p+m}r=
!0;u[q]={id:q,status:"loading"};p=a.bind(g,null,q);if(/.css$/.test(m))a:{q=m;m=k.getElementsByTagName("link");for(t=0;t<m.length;t++){var w=m[t].href;!n.skinNode&&0<=w.indexOf(n.skinName)&&(n.skinNode=m[t]);if(0<=w.indexOf(q)||0<=q.indexOf(w))break a}m=document.createElement("link");m.rel="stylesheet";m.href=q;f(m,p);k.insertBefore(m,n.skinNode);n.traceLog&&e.info("Loader request:"+q)}else q=m,m=document.createElement("script"),m.async="async",m.src=q,m.type="text/javascript",f(m,p),k.appendChild(m),
n.traceLog&&e.info("Loader request:"+q)}r&&n.showLoading(!0)}};return n});
handy.add("Events",function(){var e=Array.prototype;return{_eventCache:{},_parseEvents:function(d,a,c){var b=/\s+/,f=e.slice.call(arguments,2);if("object"==typeof a){for(var h in a)this[d].apply(this,[h,a[h]].concat(f));return!0}if(b.test(a)){b=a.split(b);h=0;for(var g=b.length;h<g;h++)this[d].apply(this,[b[h]].concat(f));return!0}return!1},on:function(d,a,c,b){var f=this;if(!f._parseEvents("on",d,a,c,b)){var h=f._eventCache,e=h[d];e||(e=h[d]=[]);e.push({times:b,handler:a,context:c,delegation:function(){if(!0!=
f.isSuspend)return a.apply(c||f,arguments)}})}},once:function(d,a,c){if(!this._parseEvents("once",d,a,c,1))this.on(d,a,c,1)},off:function(d,a){if("all"==d)return this._eventCache={},!0;if(!this._parseEvents("off",d,a)){var c=this._eventCache,b=d.indexOf(".");if(!a&&0>=b){for(var f in c)(f.split(".")[0]==d||0==b&&0<=f.indexOf(d))&&delete c[f];return!0}b=c[d];if(!b)return!1;if(a){c=0;for(f=b.length;c<f;c++)if(b[c].handler==a)return b.splice(c,1),!0}else return delete c[d],!0;return!1}},suspend:function(){if(this.isSuspend)return!1;
this.isSuspend=!0},resume:function(){if(!this.isSuspend)return!1;this.isSuspend=!1},trigger:function(d,a){function c(a){if(a)for(var c=0,f=a.length;c<f;c++){var d=a[c],e=d.delegation;"number"==typeof d.times&&(1<d.times?d.times--:b.off(k,d.handler));g=e.apply(null,h)}}var b=this,f=$HO.toArray(arguments);f.unshift("trigger");if(!b._parseEvents.apply(b,f)){var f=b._eventCache,h=e.slice.call(arguments,1),g,j;if(0<d.indexOf("."))j=f[d],c(j);else for(var k in f)if(j=d.indexOf("."),k.split(".")[0]==d||
0==j&&0<=k.indexOf(d))j=f[k],c(j);c(f.all);return g}}}});
handy.add("Date",function(){var e=window.Date,d={getWeek:function(a,c){var b=a.getDay();c&&(b=(b+(c%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[b]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new e(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var c=new e(a.getFullYear(),0,0);a=new e(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-c.getTime())/864E5)},getDayIndexOfYear:function(a){var c=new e("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-c.getTime())/864E5)},format:function(a,c){c=c||"yyyy-MM-dd HH:mm:ss";a=a||new e;var b=a.getHours(),f=Math.floor((a.getMonth()+3)/3),b={"y+":a.getFullYear(),"M+":a.getMonth()+1,"d+":a.getDate(),"h+":0==b%12?12:b%12,"H+":b,"m+":a.getMinutes(),"s+":a.getSeconds(),"w+":d.getWeek(a),"q+":f,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][f-1],"S+":a.getMilliseconds()},h;for(h in b)RegExp("("+h+")").test(c)&&(f=RegExp.$1.length,c=c.replace(RegExp.$1,1==f?b[h]:("00"+
b[h]).slice(-f)));return c},parse:function(a,c){for(var b=(c||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),f=a.match(/\d+/g),d=new e,g=0;g<f.length;g++){var j=b[g],k=parseInt(f[g]);switch(j){case "yyyy":d.setFullYear(k);break;case "MM":d.setMonth(k-1);break;case "dd":d.setDate(k);break;case "HH":d.setHours(k);break;case "mm":d.setMinutes(k);break;case "ss":d.setSeconds(k);break;case "SS":d.setMilliseconds(k)}}return d},parseObject:function(a){return new e(a.year+1900,a.month,a.date,a.hours,a.minutes,
a.seconds)}};return d});
handy.add("String",function(){var e={stripTags:function(d){return d.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(d){var a=document.createElement("div");d=document.createTextNode(d);a.appendChild(d);return a.innerHTML},unescapeHTML:function(d){var a=document.createElement("div");a.innerHTML=e.stripTags(d);return a.childNodes[0].nodeValue},decodeHTML:function(d){d=d.replace(/&lt;/gi,"<");d=d.replace(/&gt;/gi,">");d=d.replace(/&quot;/gi,'"');d=d.replace(/&apos;/gi,"'");d=d.replace(/<\/?br>/gi,"\n");
d=d.replace(/&amp;/gi,"&");return d=d.replace(/&nbsp;/gi," ")},encodeHTML:function(d){d=d.replace(/&/gi,"&amp;");d=d.replace(/</gi,"&lt;");d=d.replace(/>/gi,"&gt;");d=d.replace(/\"/gi,"&quot;");d=d.replace(/\'/gi,"&apos;");d=d.replace(/\n/gi,"</br>");return d=d.replace(/ /gi,"&nbsp;")},trim:function(d){return d=d.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(d,a){a||(a=/[,%\'\"\/\\;|\<\>\^]/);return-1<d.search(a)},len:function(d){return d.replace(/[^\x00-\xff]/g,"**").length},left:function(d,
a,c){if(e.len(d)>a){!0===c?c=2:0<c||(c=0);var b=0,f=0;for(a-=c;f<a;)255<d.charCodeAt(b)?f+=2:f++,b++;d=d.substring(0,b);for(b=0;b<c;b++)d+="."}return d},isNumber:function(d){return 0==d.search(/^\d+$/g)},hasChn:function(d){return/[\u4E00-\u9FA5]+/.test(d)},isChn:function(d){return/^[\u4E00-\u9FA5]+$/.test(d)},addParam:function(d,a){a&&(d+=(-1<d.indexOf("?")?"&":"?")+a);return d}};return e});
handy.add("Cookie",function(){return{get:function(e,d){var a=e+"=",c="",b=document.cookie;if(0<b.length){var f=b.indexOf(a);-1!=f&&(f+=a.length,a=b.indexOf(";",f),-1==a&&(a=b.length),c=b.substring(f,a),d||(c=unescape(c)))}return c},set:function(e,d,a){var c=[];void 0!=e&&void 0!=d&&c.push(e+"="+escape(d));a&&(void 0!=a.path&&c.push("path="+a.path),void 0!=a.domain&&c.push("domain="+a.domain),void 0!=a.expires&&c.push("expires="+a.expires),a.secure&&c.push("secure"));document.cookie=c.join(";")},del:function(e){var d=
new Date;d.setTime(d.getTime()-1);document.cookie=e+"=;expires="+d.toGMTString()}}});handy.add("Util",function(e){var d=0;return{isWindow:function(a){return null!=a&&a==a.window},getUuid:function(){return d++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(a){var c=top.location.hash;0<=c.indexOf("#")&&(a=c.replace(/#[^\?]*/,a));top.location.hash=a},result:function(a,c){var b=a[c];return e.Object.isFunction(b)?b():b}}});
handy.add("Collection","B.Object",function(e){function d(b){return b}function a(b){return function(a){return a[b]}}function c(b){return function(a){if(a===b)return!0;for(var c in b)if(b[c]!==a[c])return!1;return!0}}return{map:function(b,a,c){var d=[];if(null==b)return d;var j=Array.prototype.map;if(j&&b.map===j)return b.map(a,c);e.each(b,function(b,e){d.push(a.call(c,e,b))});return d},pluck:function(b,c){return this.map(b,a(c))},some:function(b,a,c){var d=!1;if(null==b||!a)return d;var e=Array.prototype.some;
if(e&&b.some===e)return b.some(a,c);$HO.each(b,function(b,e,j){if(d||(d=a.call(c,e,b,j)))return!1});return!!d},every:function(b,a,c){var d=!0;if(null==b||!a)return d;var e=Array.prototype.every;if(e&&b.every===e)return b.every(a,c);$HO.each(b,function(b,e,j){if(!(d=a.call(c,e,b,j)))return!1});return!!d},find:function(b,a,c){var d;this.some(b,function(b,e,l){if(a.call(c,b,e,l))return d=b,!0});return d},filter:function(b,a,c){var d=[];if(null==b)return d;var e=Array.prototype.filter;if(e&&b.filter===
e)return b.filter(a,c);$HO.each(b,function(b,e,j){a.call(c,e,b,j)&&d.push(e)});return d},where:function(b,a){return this.filter(b,c(a))},findWhere:function(a,d){return this.find(a,c(d))},invoke:function(a,c){var d=Array.prototype.slice.call(arguments,2),g=e.isFunction(c);return this.map(a,function(a){return(g?c:a[c]).apply(a,d)})},sortBy:function(b,c,e){var g=c;c=null==g?d:$HO.isFunction(g)?g:a(g);return this.pluck(this.map(b,function(a,b,d){return{value:a,index:b,criteria:c.call(e,a,b,d)}}).sort(function(a,
b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")}}});
handy.add("Template",function(e){var d={},a=/^=/,c="".trim,b={openTag:"<%",closeTag:"%>",_add:function(a){return c?"$r+="+a+";\n":"$r.push("+a+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return b._add('"'+a+'"')},_parseScript:function(c){c=c.replace(/this/g,"$data");0==c.indexOf("=")&&(c=b._add(c.replace(a,"")+'||""'));return c+"\n"},_compile:function(a){var d="var $r="+(c?'""':"[]")+";\n";e.Object.each(a.split(b.openTag),function(a,c){var f=
c.split(b.closeTag);1==f.length?d+=b._parseHtml(f[0]):(d+=b._parseScript(f[0]),f[1]&&(d+=b._parseHtml(f[1])))});d+="return "+(c?"$r;":'$r.join("");');return new Function("$data",d)},tmpl:function(a,c){var g,j,k;if("string"==typeof a)g=a;else if(g=a.tmpl,k=a.id)if(d[k])j=d[k];else{var l=document.getElementById(k);l&&(g=(l.value||l.innerHTML).replace(/\s/g,""))}if(!j){if(!g){e.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}j=b._compile(g);k&&(d[k]=j)}return c?j(c):j}};return b});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(e,d,a){function c(a){if(a==l)return!1;var b=k.contentWindow.document;b.open();b.write("<!doctype html><html><body>"+a+"</body></html>");b.close();l=a;e.log("set:"+k.contentWindow.document.body.innerText)}function b(){var a=d.getHash(),b=k.contentWindow.document.body.innerText;a!=l?(c(a),f(a)):b!=l&&(e.log("update:"+k.contentWindow.document.body.innerText),d.setHash(b))}function f(a){var b=n.listeners,c;for(c in b)b[c](a)}var h,
g=0,j=document,k,l,s=j.documentMode,u="onhashchange"in window&&(void 0===s||7<s),n={delay:50,listen:function(e,l){if(!h&&!h)if(h=!0,n.listeners={},u)$(window).on("hashchange",function(){f(d.getHash())});else k=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(j.body)[0],$(k).one("load",function(){c(d.getHash());setInterval(b,n.delay)});if(l in n.listeners)$D.error(Error("Duplicate name"));else return l=l||a.expando+ ++g,n.listeners[l]=e,l},unListen:function(a){for(var b in n.listeners)(!a||
a==b)&&delete n.listeners[b]}};return n});handy.add("Support",function(e){var d={mediaQuery:function(){var a;if(e.Browser.mobile())a="hui-mobile";else{a="hui-pc";var b=e.Browser.ie();b&&(a+=" ie"+b)}document.documentElement.className+=" "+a}};d.mediaQuery();if(6==e.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}return d});
handy.add("Validator",["B.String","B.Object"],function(e,d){var a={messages:{required:"{name}\u4e0d\u80fd\u4e3a\u7a7a",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94fe\u63a5\u5730\u5740",date:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f",number:"{name}\u987b\u662f\u6570\u5b57",digits:"{name}\u987b\u662f\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u7528\u5361\u53f7\u7801",
equalTo:"\u8bf7\u8f93\u5165\u76f8\u540c\u7684{name}",min:"{name}\u4e0d\u80fd\u5c0f\u4e8e{0}",max:"{name}\u4e0d\u80fd\u5927\u4e8e{0}",range:"{name}\u8981\u5728{0}\u5230{1}\u4e4b\u95f4",maxlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7{0}",minlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e{0}",rangelength:"{name}\u957f\u5ea6\u8981\u5728{0}\u5230{1}\u4e4b\u95f4"},valid:function(c,b){var d=b.rules,e;for(e in d){var g=d[e],j=("function"==typeof g?g:a[e])(c,g);if(!j)return d=b.error||a.error,e=b.messages&&
b.messages[e]||a.messages[e],e=e.replace(/\{([^\}]+)\}/g,function(a,c){return g[c]||0==c&&g||b[c]||g||""}),d&&d(e),j}return!0},required:function(a){return 0<e.trim(""+a).length},email:function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a){return!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a){return/^\d+$/.test(a)},creditcard:function(a){if(/[^0-9 \-]+/.test(a))return!1;var b=0,d=0,e=!1;a=a.replace(/\D/g,"");for(var g=a.length-1;0<=g;g--){d=a.charAt(g);d=parseInt(d,10);if(e&&9<(d*=2))d-=9;b+=d;e=!e}return 0===b%10},min:function(a,b){return a>=b},max:function(a,
b){return a<=b},range:function(a,b){return a>=b[0]&&a<=b[1]},minlength:function(a,b){return(d.isArray(a)?a.length:e.trim(""+a).length)>=b},maxlength:function(a,b){return(d.isArray(a)?a.length:e.trim(""+a).length)<=b},rangelength:function(a,b){var f=d.isArray(a)?a.length:e.trim(""+a).length;return f>=b[0]&&f<=b[1]},equalTo:function(a,b){return a===b}};return a});
handy.add("LocalStorage",["B.Browser","B.Events","B.Json"],function(e,d,a){d={_init:function(){!c&&e.ie()&&(f=document.getElementById("LocalStorageUserDataDiv"),f||(f=document.createElement("DIV"),f.style.display="none",f.id="LocalStorageUserDataDiv",f.addBehavior("#default#userData"),document.body.appendChild(f),f.load(h)))},getItem:function(d){d=c?b.getItem(d):f.getAttribute(d);return d=a.parse(d)},setItem:function(d,e){e=a.stringify(e);try{c?b.setItem(d,e):(f.setAttribute(d,e),f.save(h))}catch(k){return $D.error(k),
!1}return!0},removeItem:function(a){c?b.removeItem(a):(f.removeAttribute(a),f.save(h))},clear:function(){c?b.clear():f.unload()}};var c=window.localStorage&&window.localStorage.getItem,b=window.localStorage,f,h=document.domain;d._init();return d})(function(e){Hui=H=$H=e.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HE=$H.Events;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};e=window.$;e.fn.remove=$HF.intercept(e.fn.remove,
function(){$H.trigger("removeEl",this.target)})})(handy);
