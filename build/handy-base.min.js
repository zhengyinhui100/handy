/* Handy v1.0.0-dev | 2014-03-02 | zhengyinhui100@gmail.com */
(function(){var d=window.handy,a=window.$,c=window.handy=window.$=function(){};c.version="1.0.0";c.expando="handy"+(c.version+Math.random()).replace(/\D/g,"");c.add=function(b,f,e){e||(e=f,f=null);if(!f||!c.Loader){c.base||(c.base={});var a=[];if(f)if("string"==typeof f)a.push(c.base.Object.namespace(f));else for(var g=0;g<f.length;g++)a.push(c.base.Object.namespace(f[g]));a.push(c);c.base[b]=c[b]=e.apply(window,a)}else c.Loader.require(f,function(){Array.prototype.push.call(arguments,c);c.base[b]=
c[b]=e.apply(window,arguments)})};c.noConflict=function(b){window.$===c&&(window.$=a);b&&window.handy===c&&(window.handy=d);return c};c.noop=function(){}})();
handy.add("Json",function(){var d;d||(d={});(function(){function a(b){return 10>b?"0"+b:b}function c(b){e.lastIndex=0;return e.test(b)?'"'+b.replace(e,function(b){var e=j[b];return"string"===typeof e?e:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function b(e,f){var a,d,x,j,y=h,v,p=f[e];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(e));"function"===typeof k&&(p=k.call(f,e,p));switch(typeof p){case "string":return c(p);case "number":return isFinite(p)?
String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";h+=g;v=[];if("[object Array]"===Object.prototype.toString.apply(p)){j=p.length;for(a=0;a<j;a+=1)v[a]=b(a,p)||"null";x=0===v.length?"[]":h?"[\n"+h+v.join(",\n"+h)+"\n"+y+"]":"["+v.join(",")+"]";h=y;return x}if(k&&"object"===typeof k){j=k.length;for(a=0;a<j;a+=1)"string"===typeof k[a]&&(d=k[a],(x=b(d,p))&&v.push(c(d)+(h?": ":":")+x))}else for(d in p)Object.prototype.hasOwnProperty.call(p,d)&&(x=b(d,p))&&v.push(c(d)+
(h?": ":":")+x);x=0===v.length?"{}":h?"{\n"+h+v.join(",\n"+h)+"\n"+y+"}":"{"+v.join(",")+"}";h=y;return x}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,g,j={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof d.stringify&&(d.stringify=function(e,f,a){var c;g=h="";if("number"===typeof a)for(c=0;c<a;c+=1)g+=" ";else"string"===typeof a&&(g=a);if((k=f)&&"function"!==typeof f&&("object"!==typeof f||"number"!==typeof f.length))throw Error("JSON.stringify");return b("",{"":e})});"function"!==
typeof d.parse&&(d.parse=function(b,e){function a(b,f){var c,h,d=b[f];if(d&&"object"===typeof d)for(c in d)Object.prototype.hasOwnProperty.call(d,c)&&(h=a(d,c),void 0!==h?d[c]=h:delete d[c]);return e.call(b,f,d)}var c;b=String(b);f.lastIndex=0;f.test(b)&&(b=b.replace(f,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return c=eval("("+b+")"),"function"===typeof e?a({"":c},""):c;throw new SyntaxError("JSON.parse");})})();return d});
handy.add("Object",function(d){function a(){var b=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return b&&9>parseInt(b[0])?function(b,e,a){var c=[];if(b.length){e=e||0;for(a=a||b.length;e<a;e++)c.push(b[e])}return c}:function(b,e,a){return Array.prototype.slice.call(b,e||0,a||b.length)}}var c={_alias:{b:"handy.base",c:"handy.component",m:"handy.module",cm:"handy.common"},namespace:function(b,f){var e=null,a,d,j,k;b=c.alias(b);d=b.split(".");e=d[0];e=(j=2==arguments.length)?eval("(function(){if (typeof "+
e+' == "undefined"){'+e+" = {};}return "+e+";})()"):eval("(function(){if (typeof "+e+' != "undefined")return '+e+";})()");a=1;for(k=d.length;a<k;++a){if(a==k-1&&j)e[d[a]]=f;else if(j||e&&e[d[a]])e[d[a]]=e[d[a]]||{};else return;e=e[d[a]]}return e},alias:function(b,a){var e=c._alias;if(a)e[b]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+b+":"+e[b]):e[b]=a;else{if(b){var h=b,d=b.length-1;do{if(e[h])return e[h]+b.substring(d);d=h.lastIndexOf(".")}while(0<d&&(h=h.substring(0,d)));return b}return e}},
createClass:function(b){var a=function(){var b,d;b=this.constructor==a?this:arguments.callee;if(d=b.initialize){for(var g in b)"object"==typeof b[g]&&(b[g]=c.clone(b[g]));return d.apply(b,arguments)}};a.$isClass=!0;a.prototype.callSuper=function(b,a){b&&(!b.$isClass&&void 0!=b.length)&&(a=b,b=null);var f=arguments.callee.caller,d=f.$owner.superProto;b=b?b.prototype:d||this.constructor.superProto;f=f.$name;if(b&&(f=b[f],c.isFunction(f)))return a?f.apply(this,a):f.call(this)};b&&this.namespace(b,a);
return a},extend:function(b,a,e){var d=e?e.notCover:!1,g=e?e.cover:null;e=e?e.notClone:!1;var j=b.constructor,k=j.$isClass,m;for(m in a)if((!g||c.contains(g,m))&&a.hasOwnProperty(m)){var s=b.hasOwnProperty(m),u=!0===d?s:!1;c.isArray(d)?u=c.contains(d,m)&&s:c.isFunction(d)&&(u=d(m));u||(s=e?a[m]:c.clone(a[m]),k&&c.isFunction(s)&&(s.$name=m,s.$owner=j),b[m]=s)}return b},mix:function(b,a,e,d){b.superProto||(b.superProto={});for(var g in a)b.superProto[g]=c.isFunction(a[g])?b.superProto[g]?function(b,
e){return function(){e.apply(this,arguments);a[b].apply(this,arguments)}}(g,b.superProto[g]):a[g]:a[g],b[g]||(b[g]=a[g]);e&&c.extend(b,e);a.toString!=a.constructor.prototype.toString&&(b.superProto.toString=function(){a.toString.apply(b,arguments)});d&&(b.prototype&&a.prototype)&&c.inherit(b,a,null,d);return b},inherit:function(b,a,e,h,g){var j=function(){};j.prototype=a.prototype;g=g||{notCover:!0};c.extend(b,a,g);b.prototype=new j;b.prototype.constructor=b;b.superClass=a;b.superProto=a.prototype;
if(a._onInherit)try{a._onInherit(b)}catch(k){d.Debug.error("_onInherit error",k)}h&&c.extend(b,h);e&&c.extend(b.prototype,e)},isFunction:function(b){return"[object Function]"===window.Object.prototype.toString.call(b)},isArray:function(b){return"[object Array]"===window.Object.prototype.toString.call(b)},equals:function(b,a){if(typeof b==typeof a){if("object"!=typeof b)return b===a;if(b===a)return!0;if(c.isArray(b)&&c.isArray(a)){if(b.length!=a.length)return!1;for(var e=0,d=b.length;e<d;e++)if(!c.equals(b[e],
a[e]))return!1;return!0}if(!c.isArray(b)&&!c.isArray(a)){if(c.count(b)!=c.count(a))return!1;for(e in b)if(void 0==a[e]||!c.equals(b[e],a[e]))return!1;return!0}}return!1},clone:function(b){if(null==b||"object"!=typeof b)return b;var a=b.constructor;if(a!=window.Object&&a!=window.Array)return b;if(a==window.Date||a==window.RegExp||a==window.Function||a==window.String||a==window.Number||a==window.Boolean)return new a(b);try{var e=new a,d;for(d in b)e[d]=c.clone(b[d]);return e}catch(g){return b}},isEmpty:function(b){if(c.isArray(b))return 0==
b.length;for(var a in b)return!1;return!0},each:function(b,a,e){var d,g=0,j=b.length,k=void 0===j||c.isFunction(b);if(e)if(k)for(d in b){if(!1===a.apply(b[d],e))break}else for(;g<j&&!1!==a.apply(b[g++],e););else if(k)for(d in b){if(!1===a.call(b[d],d,b[d]))break}else for(;g<j&&!1!==a.call(b[g],g,b[g++]););return b},contains:function(b,a){var e=!1;c.each(b,function(b,d){if(c.equals(d,a))return e=!0,!1});return e},largeThan:function(b,a){if("object"==typeof b&&"object"==typeof a){var e=!0;c.each(a,
function(d){if(!c.equals(a[d],b[d]))return e=!1});return e}},count:function(b){if(c.isArray(b))return b.length;var a=0,e;for(e in b)a++;return a},toArray:a,generateMethod:function(a,d,e){d=c.isArray(d)?d:d.split(",");for(var h=0;h<d.length;h++){var g=d[h];a[g]=e(g)}}},a=a();return c});
handy.add("Browser","handy.base.Object",function(d){var a={},c={};d.generateMethod(c,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(b){return function(e){var c=a[b];return!e&&"string"===typeof c&&/^[\d\.]+$/.test(c)?parseInt(c):c}});d=window.navigator.userAgent;var b;(b=d.match(/MSIE ([\d.]+)/))?a.ie=b[1]:(b=d.match(/Firefox\/([\d.]+)/))?a.firefox=b[1]:(b=d.match(/Chrome\/([\d.]+)/))?
a.chrome=b[1]:(b=d.match(/Opera.([\d.]+)/))?a.opera=b[1]:(b=d.match(/Version\/([\d.]+).*Safari/))?a.safari=b[1]:0;/windows|win32/i.test(d)?a.windows=!0:/linux/i.test(d)?a.linux=!0:/macintosh/i.test(d)?a.mac=!0:0;/trident/i.test(d)?a.trident=!0:/webkit/i.test(d)?a.webkit=!0:/gecko/i.test(d)?a.gecko=!0:/presto/i.test(d)?a.presto=!0:0;/MetaSr/i.test(d)?a.sogou=!0:/Maxthon/i.test(d)?a.maxthon=!0:/TencentTraveler/i.test(d)?a.tt=!0:/TheWorld/i.test(d)?a.theWorld=!0:/360[S|E]E/i.test(d)?a.is360=!0:0;var f;
if((f=d.match(/AppleWebKit\/([\d.]*)/))&&f[1])if(/ Mobile\//.test(d)&&d.match(/iPad|iPod|iPhone/)){a.mobile="ios";if((f=d.match(/OS ([^\s]*)/))&&f[1])a.ios=f[1].replace("_",".");if((f=d.match(/iPad|iPod|iPhone/))&&f[0])a[f[0].toLowerCase()]=a.ios}else if(/ Android/i.test(d)){if(/Mobile/.test(d)&&(a.mobile="android"),(f=d.match(/Android ([^\s]*);/))&&f[1])a.android=f[1]}else if(f=d.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))a.mobile=f[0].toLowerCase();var e;try{if(a.ie){var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
h&&(e=h.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(h=navigator.plugins["Shockwave Flash"])){var g=h.description.split(" ");b=0;for(var j=g.length;b<j;b++)if(0<parseInt(g[b])){e=g[b];break}}}catch(k){}a.flash=e?e:null;return c});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(d,a,c){var b={level:0,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:!("console"in window)||!!a.mobile(),out:function(a,e,d){d=d||"log";if(e||b.showInPage){e=c.expando+"debugDiv";var g=top.document,j=g.getElementById(e);j?j.style.display="block":(j=g.createElement("DIV"),j.id=e,j.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+g.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',j.style.position="fixed",j.style.width=g.body.offsetWidth-20+"px",j.style.left=0,j.style.top=0,j.style.right=0,j.style.height="150px",j.style.backgroundColor="#aaa",j.style.fontSize="12px",j.style.padding="10px",j.style.zIndex=9999999999,j.style.opacity=0.8,j.style.filter="alpha(opacity=80)",g.body.appendChild(j));e=j.getElementsByTagName("DIV")[0];e.innerHTML+=d+" : "+c.Json.stringify(a,null,"<br/>")+"<br/>";e.scrollTop=e.scrollHeight}try{console[d](a)}catch(k){}},
log:function(a,e){b.level>b.LOG_LEVEL||b.out(a,!!e,"log")},info:function(a,e){this.level>b.INFO_LEVEL||b.out(a,!!e,"info")},warn:function(a,e){b.level>b.WARN_LEVEL||b.out(a,!!e,"warn")},error:function(a,e,c){if(!(b.level>b.ERROR_LEVEL)&&("boolean"==typeof e&&(c=e),b.out(a,!!c,"error"),"object"==typeof e))throw e;},time:function(a,c,d){b.level>b.INFO_LEVEL||(a?("boolean"==typeof c&&(d=c,c=""),b.out((c||"")+((new Date).getTime()-(b.lastTime||0)),!!d)):b.lastTime=(new Date).getTime())},debug:function(a){if(!(b.level>
b.DEBUG_LEVEL)&&!1!==a)debugger}};return b});handy.add("Function",function(d){return{bind:function(a,c,b){var d=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(d,arguments);return a.apply(c,d)}},intercept:function(a,c,b,f){return d.Object.isFunction(a)&&d.Object.isFunction(c)?function(){var e=b||this,d={},g=arguments;d.scope=f;d.target=e;d.method=a;return!1!=c.apply(d,g)?a.apply(e,g):!1}:a}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(d,a,c,b){function f(b){function c(b){return/\.(css|js)$/.test(b)?u[b]&&"loaded"==u[b].status:n.urlMap&&n.urlMap[b]?n.urlMap[b].chkExist():a.namespace(b)}if("string"==typeof b)return c(b);for(var d=[],e=0,f=b.length;e<f;e++){var h=c(b[e]);if(h)d.push(h);else return!1}return d}function e(a,b){function c(){c.isCalled||(c.isCalled=!0,clearTimeout(j),b())}if("SCRIPT"===a.nodeName){var e=a,f=c;e.onload=e.onerror=
e.onreadystatechange=function(){/loaded|complete|undefined/.test(e.readyState)&&(e.onload=e.onerror=e.onreadystatechange=null,k.removeChild(e),e=null,setTimeout(f,0))}}else{var g=c;window.hasOwnProperty("attachEvent")?a.attachEvent("onload",g):setTimeout(function(){h(a,g)},0)}var j=setTimeout(function(){d.error("Time is out:",a.src);c()},n.timeout)}function h(a,b){if(!b.isCalled){var c;if(m)a.sheet&&(c=!0);else if(a.sheet)try{a.sheet.cssRules&&(c=!0)}catch(e){if("SecurityError"===e.name||"NS_ERROR_DOM_SECURITY_ERR"===
e.name)c=!0}setTimeout(function(){c?b():h(a,b)},1)}}function g(a){n.showLoading(!1);u[a].status="loaded";n.traceLog&&d.info("Loader Response: "+a);j()}function j(){for(var a=s.length-1;0<=a;a--){var b=s[a],c=f(b.deps);if(c){s.splice(a,1);b.callback.apply(null,c);j();break}}}var k=document.head||document.getElementsByTagName("head")[0]||document.documentElement,m=navigator.userAgent.indexOf("AppleWebKit"),s=[],u={},n={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(b,
c,e){2==arguments.length&&(e=c,c=[]);n.require(c,function(){var c;if("function"==typeof e)try{c=e.apply(null,arguments),n.traceLog&&d.info("Loader define: "+b)}catch(f){d.error("Loader "+b+":factory define error:"+f.message,f);return}else c=e;a.namespace(b,c)})},require:function(a,h){for(var j="string"==typeof a?[a]:a,m=[],p=[],q=!0,r=0,w=j.length;r<w;r++){var l=j[r],t=f(l);t?p.push(t):(m.push(l),q&&(q=!1,s.push({deps:j,callback:h})),n.traceLog&&d.info("Resource not found: "+l))}if(0==m.length)return h&&
h.apply(null,p),0==p.length?p[0]:p;q=!1;j=0;for(p=m.length;j<p;j++)if(r=m[j],!u[r]){q=r;l=n.urlMap&&n.urlMap[q]&&n.urlMap[q].url;if(!l){w="";q=b.Object.alias(q);l=n.rootPath;if("string"==typeof l)w=l;else if("object"==typeof l)for(t in t=void 0,l)0==q.indexOf(t)&&(w=l[t],q=q.replace(t,""));else w="";l=/.css$/.test(q)?0==q.indexOf("/")?q:"/css/"+q:/.js$/.test(q)?q:q.replace(/\./g,"/")+".js";0!=l.indexOf("/")&&(l="/"+l);l=w+l}q=!0;u[r]={id:r,status:"loading"};w=c.bind(g,null,r);if(/.css$/.test(l))a:{r=
l;l=k.getElementsByTagName("link");for(t=0;t<l.length;t++){var z=l[t].href;!n.skinNode&&0<=z.indexOf(n.skinName)&&(n.skinNode=l[t]);if(0<=z.indexOf(r)||0<=r.indexOf(z))break a}l=document.createElement("link");l.rel="stylesheet";l.href=r;e(l,w);k.insertBefore(l,n.skinNode);n.traceLog&&d.info("Loader request:"+r)}else r=l,l=document.createElement("script"),l.async="async",l.src=r,l.type="text/javascript",e(l,w),k.appendChild(l),n.traceLog&&d.info("Loader request:"+r)}q&&n.showLoading(!0)}};return n});
handy.add("Listener",function(){var d={};return{add:function(a,c){var b=d[a];b||(b=d[a]=[]);b.push(c)},remove:function(a,c){var b=d[a];if(!b)return!1;if(c)for(var f=0,e=b.length;f<e;f++){if(b[f]==c)return b.splice(f,1),!0}else delete d[a];return!1},fire:function(a,c){var b=d[a];if(!b)return!1;for(var f=Array.prototype.slice.call(arguments,1),e=0,h=b.length;e<h;e++){if(e==h-1)return b[e].apply(null,f);b[e].apply(null,f)}}}});
handy.add("Date",function(){var d=window.Date,a={getWeek:function(a,b){var d=a.getDay();b&&(d=(d+(b%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[d]},isWeeken:function(a){return 0==a.getDay()||6==a.getDay()},getDaysInMonth:function(a){a=new d(a.getFullYear(),a.getMonth()+1,0);return a.getDate()},getDaysInYear:function(a){var b=new d(a.getFullYear(),0,0);a=new d(a.getFullYear()+1,0,0);return Math.floor((a.getTime()-b.getTime())/864E5)},getDayIndexOfYear:function(a){var b=new d("1/1/"+
a.getFullYear());return Math.ceil((a.getTime()-b.getTime())/864E5)},format:function(c,b){b=b||"yyyy-MM-dd HH:mm:ss";c=c||new d;var f=c.getHours(),e=Math.floor((c.getMonth()+3)/3),f={"y+":c.getFullYear(),"M+":c.getMonth()+1,"d+":c.getDate(),"h+":0==f%12?12:f%12,"H+":f,"m+":c.getMinutes(),"s+":c.getSeconds(),"w+":a.getWeek(c),"q+":e,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][e-1],"S+":c.getMilliseconds()},h;for(h in f)RegExp("("+h+")").test(b)&&(e=RegExp.$1.length,b=b.replace(RegExp.$1,1==e?f[h]:("00"+
f[h]).slice(-e)));return b},parse:function(a,b){for(var f=(b||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),e=a.match(/\d+/g),h=new d,g=0;g<e.length;g++){var j=f[g],k=parseInt(e[g]);switch(j){case "yyyy":h.setFullYear(k);break;case "MM":h.setMonth(k-1);break;case "dd":h.setDate(k);break;case "HH":h.setHours(k);break;case "mm":h.setMinutes(k);break;case "ss":h.setSeconds(k);break;case "SS":h.setMilliseconds(k)}}return h},parseObject:function(a){return new d(a.year+1900,a.month,a.date,a.hours,a.minutes,
a.seconds)}};return a});
handy.add("String",function(){var d={stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(a){var c=document.createElement("div");a=document.createTextNode(a);c.appendChild(a);return c.innerHTML},unescapeHTML:function(a){var c=document.createElement("div");c.innerHTML=d.stripTags(a);return c.childNodes[0].nodeValue},decodeHTML:function(a){a=a.replace(/&lt;/gi,"<");a=a.replace(/&gt;/gi,">");a=a.replace(/&quot;/gi,'"');a=a.replace(/&apos;/gi,"'");a=a.replace(/<\/?br>/gi,"\n");
a=a.replace(/&amp;/gi,"&");return a=a.replace(/&nbsp;/gi," ")},encodeHTML:function(a){a=a.replace(/&/gi,"&amp;");a=a.replace(/</gi,"&lt;");a=a.replace(/>/gi,"&gt;");a=a.replace(/\"/gi,"&quot;");a=a.replace(/\'/gi,"&apos;");a=a.replace(/\n/gi,"</br>");return a=a.replace(/ /gi,"&nbsp;")},trim:function(a){return a=a.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(a,c){c||(c=/[,%\'\"\/\\;|\<\>\^]/);return-1<a.search(c)},len:function(a){return a.replace(/[^\x00-\xff]/g,"**").length},left:function(a,
c,b){if(d.len(a)>c){!0===b?b=2:0<b||(b=0);var f=0,e=0;for(c-=b;e<c;)255<a.charCodeAt(f)?e+=2:e++,f++;a=a.substring(0,f);for(f=0;f<b;f++)a+="."}return a},isNumber:function(a){return 0==a.search(/^\d+$/g)},hasChn:function(a){return/[\u4E00-\u9FA5]+/.test(a)},isChn:function(a){return/^[\u4E00-\u9FA5]+$/.test(a)},addParam:function(a,c){c&&(a+=(-1<a.indexOf("?")?"&":"?")+c);return a}};return d});
handy.add("Cookie",function(){return{get:function(d,a){var c=d+"=",b="",f=document.cookie;if(0<f.length){var e=f.indexOf(c);-1!=e&&(e+=c.length,c=f.indexOf(";",e),-1==c&&(c=f.length),b=f.substring(e,c),a||(b=unescape(b)))}return b},set:function(d,a,c){var b=[];void 0!=d&&void 0!=a&&b.push(d+"="+escape(a));c&&(void 0!=c.path&&b.push("path="+c.path),void 0!=c.domain&&b.push("domain="+c.domain),void 0!=c.expires&&b.push("expires="+c.expires),c.secure&&b.push("secure"));document.cookie=b.join(";")},del:function(d){var a=
new Date;a.setTime(a.getTime()-1);document.cookie=d+"=;expires="+a.toGMTString()}}});handy.add("Util",function(){var d=0;return{isWindow:function(a){return null!=a&&a==a.window},getUuid:function(){return d++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(a){var c=top.location.hash;0<=c.indexOf("#")&&(a=c.replace(/#[^\?]*/,a));top.location.hash=a}}});
handy.add("Template",function(d){var a={},c=/^=/,b="".trim,f={openTag:"<%",closeTag:"%>",_add:function(a){return b?"$r+="+a+";\n":"$r.push("+a+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return f._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=f._add(a.replace(c,"")+'||""'));return a+"\n"},_compile:function(a){var c="var $r="+(b?'""':"[]")+";\n";d.Object.each(a.split(f.openTag),function(a,b){var d=
b.split(f.closeTag);1==d.length?c+=f._parseHtml(d[0]):(c+=f._parseScript(d[0]),d[1]&&(c+=f._parseHtml(d[1])))});c+="return "+(b?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(b,c){var g,j,k;if("string"==typeof b)g=b;else if(g=b.tmpl,k=b.id)if(a[k])j=a[k];else{var m=document.getElementById(k);m&&(g=(m.value||m.innerHTML).replace(/\s/g,""))}if(!j){if(!g){d.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}j=f._compile(g);k&&(a[k]=j)}return c?j(c):j}};return f});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(d,a,c){function b(a){if(a==m)return!1;var b=k.contentWindow.document;b.open();b.write("<!doctype html><html><body>"+a+"</body></html>");b.close();m=a;d.log("set:"+k.contentWindow.document.body.innerText)}function f(){var c=a.getHash(),f=k.contentWindow.document.body.innerText;c!=m?(b(c),e(c)):f!=m&&(d.log("update:"+k.contentWindow.document.body.innerText),a.setHash(f))}function e(a){var b=n.listeners,c;for(c in b)b[c](a)}var h,
g=0,j=document,k,m,s=j.documentMode,u="onhashchange"in window&&(void 0===s||7<s),n={delay:50,listen:function(d,m){if(!h&&!h)if(h=!0,n.listeners={},u)$(window).on("hashchange",function(){e(a.getHash())});else k=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(j.body)[0],$(k).one("load",function(){b(a.getHash());setInterval(f,n.delay)});if(m in n.listeners)$D.error("Duplicate name",Error("Duplicate name"));else return m=m||c.expando+ ++g,n.listeners[m]=
d,m},unListen:function(a){for(var b in n.listeners)(!a||a==b)&&delete n.listeners[b]}};return n});
handy.add("Support",function(d){var a={mediaQuery:function(){var a;if(d.Browser.mobile())a="hui-mobile";else{a="hui-pc";var c=d.Browser.ie();c&&(a+=" ie"+c)}document.documentElement.className+=" "+a}};a.mediaQuery();if(6==d.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}return a})(function(d){Hui=H=$H=d.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=$H.Util;$HL=$H.Listener;$Define=$H.Loader.define;$Require=
$H.Loader.require;$G={config:{}};d=window.$;d.fn.remove=$HF.intercept(d.fn.remove,function(){$HL.fire("removeEl",this.target)})})(handy);
