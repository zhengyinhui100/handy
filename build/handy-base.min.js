/* Handy v1.0.0-dev | 2014-03-14 | zhengyinhui100@gmail.com */
(function(){var e=window.handy,b=window.$,c=window.handy=window.$=function(){};c.version="1.0.0";c.expando="handy"+(c.version+Math.random()).replace(/\D/g,"");c.add=function(a,d,f){f||(f=d,d=null);if(!d||!c.Loader){c.base||(c.base={});var h=[];if(d)if("string"==typeof d)h.push(c.base.Object.namespace(d));else for(var b=0;b<d.length;b++)h.push(c.base.Object.namespace(d[b]));h.push(c);c.base[a]=c[a]=f.apply(window,h)}else c.Loader.require(d,function(){Array.prototype.push.call(arguments,c);c.base[a]=
c[a]=f.apply(window,arguments)})};c.noConflict=function(a){window.$===c&&(window.$=b);a&&window.handy===c&&(window.handy=e);return c};c.noop=function(){}})();
handy.add("Json",function(){var e;e||(e={});(function(){function b(a){return 10>a?"0"+a:a}function c(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var d=j[a];return"string"===typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,f){var b,e,j,x,y=h,v,p=f[d];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(d));"function"===typeof k&&(p=k.call(f,d,p));switch(typeof p){case "string":return c(p);case "number":return isFinite(p)?
String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";h+=g;v=[];if("[object Array]"===Object.prototype.toString.apply(p)){x=p.length;for(b=0;b<x;b+=1)v[b]=a(b,p)||"null";j=0===v.length?"[]":h?"[\n"+h+v.join(",\n"+h)+"\n"+y+"]":"["+v.join(",")+"]";h=y;return j}if(k&&"object"===typeof k){x=k.length;for(b=0;b<x;b+=1)"string"===typeof k[b]&&(e=k[b],(j=a(e,p))&&v.push(c(e)+(h?": ":":")+j))}else for(e in p)Object.prototype.hasOwnProperty.call(p,e)&&(j=a(e,p))&&v.push(c(e)+
(h?": ":":")+j);j=0===v.length?"{}":h?"{\n"+h+v.join(",\n"+h)+"\n"+y+"}":"{"+v.join(",")+"}";h=y;return j}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,g,j={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof e.stringify&&(e.stringify=function(d,f,c){var b;g=h="";if("number"===typeof c)for(b=0;b<c;b+=1)g+=" ";else"string"===typeof c&&(g=c);if((k=f)&&"function"!==typeof f&&("object"!==typeof f||"number"!==typeof f.length))throw Error("JSON.stringify");return a("",{"":d})});"function"!==
typeof e.parse&&(e.parse=function(a,f){function c(a,d){var b,h,g=a[d];if(g&&"object"===typeof g)for(b in g)Object.prototype.hasOwnProperty.call(g,b)&&(h=c(g,b),void 0!==h?g[b]=h:delete g[b]);return f.call(a,d,g)}var b;a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return b=eval("("+a+")"),"function"===typeof f?c({"":b},""):b;throw new SyntaxError("JSON.parse");})})();return e});
handy.add("Object",function(e){function b(){var a=window.navigator.userAgent.match(/MSIE ([\d.]+)/);return a&&9>parseInt(a[0])?function(a,f,c){var b=[];if(a.length){f=f||0;for(c=c||a.length;f<c;f++)b.push(a[f])}return b}:function(a,f,c){return Array.prototype.slice.call(a,f||0,c||a.length)}}var c={_alias:{b:"handy.base",c:"handy.component",m:"handy.module",cm:"handy.common"},namespace:function(a,d){var f=null,b,g,e,k;a=c.alias(a);g=a.split(".");f=g[0];f=(e=2==arguments.length)?eval("(function(){if (typeof "+
f+' == "undefined"){'+f+" = {};}return "+f+";})()"):eval("(function(){if (typeof "+f+' != "undefined")return '+f+";})()");b=1;for(k=g.length;b<k;++b){if(b==k-1&&e)f[g[b]]=d;else if(e||f&&f[g[b]])f[g[b]]=f[g[b]]||{};else return;f=f[g[b]]}return f},alias:function(a,d){var f=c._alias;if(d)f[a]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+a+":"+f[a]):f[a]=d;else{if(a){var b=a,g=a.length-1;do{if(f[b])return f[b]+a.substring(g);g=b.lastIndexOf(".")}while(0<g&&(b=b.substring(0,g)));return a}return f}},
createClass:function(a){var d=function(){var a,b;a=this.constructor==d?this:arguments.callee;if(b=a.initialize){for(var g in a)"object"==typeof a[g]&&(a[g]=c.clone(a[g]));return b.apply(a,arguments)}};d.$isClass=!0;d.prototype.callSuper=function(a,d){a&&(!a.$isClass&&void 0!=a.length)&&(d=a,a=null);var b=arguments.callee.caller,e=b.$owner.superProto;a=a?a.prototype:e||this.constructor.superProto;b=b.$name;if(a&&(b=a[b],c.isFunction(b)))return d?b.apply(this,d):b.call(this)};a&&this.namespace(a,d);
return d},extend:function(a,d,f){var b=f?f.notCover:!1,g=f?f.cover:null;f=f?f.notClone:!1;a=a||{};var e=a.constructor,k=e.$isClass,m;for(m in d)if((!g||c.contains(g,m))&&d.hasOwnProperty(m)){var s=a.hasOwnProperty(m),u=!0===b?s:!1;c.isArray(b)?u=c.contains(b,m)&&s:c.isFunction(b)&&(u=b(m));u||(s=f?d[m]:c.clone(d[m]),k&&c.isFunction(s)&&(s.$name=m,s.$owner=e),a[m]=s)}return a},mix:function(a,d,f,b){a.superProto||(a.superProto={});for(var g in d)a.superProto[g]=c.isFunction(d[g])?a.superProto[g]?function(a,
f){return function(){f.apply(this,arguments);d[a].apply(this,arguments)}}(g,a.superProto[g]):d[g]:d[g],a[g]||(a[g]=d[g]);f&&c.extend(a,f);d.toString!=d.constructor.prototype.toString&&(a.superProto.toString=function(){d.toString.apply(a,arguments)});b&&(a.prototype&&d.prototype)&&c.inherit(a,d,null,b);return a},inherit:function(a,d,f,b,g){var j=function(){};j.prototype=d.prototype;g=g||{notCover:!0};c.extend(a,d,g);a.prototype=new j;a.prototype.constructor=a;a.superClass=d;a.superProto=d.prototype;
if(d._onInherit)try{d._onInherit(a)}catch(k){e.Debug.error("_onInherit error",k)}b&&c.extend(a,b);f&&c.extend(a.prototype,f)},isFunction:function(a){return"[object Function]"===window.Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===window.Object.prototype.toString.call(a)},equals:function(a,d){if(typeof a==typeof d){if("object"!=typeof a)return a===d;if(a===d)return!0;if(c.isArray(a)&&c.isArray(d)){if(a.length!=d.length)return!1;for(var f=0,b=a.length;f<b;f++)if(!c.equals(a[f],
d[f]))return!1;return!0}if(!c.isArray(a)&&!c.isArray(d)){if(c.count(a)!=c.count(d))return!1;for(f in a)if(void 0==d[f]||!c.equals(a[f],d[f]))return!1;return!0}}return!1},clone:function(a){if(null==a||"object"!=typeof a)return a;var d=a.constructor;if(d!=window.Object&&d!=window.Array)return a;if(d==window.Date||d==window.RegExp||d==window.Function||d==window.String||d==window.Number||d==window.Boolean)return new d(a);try{var b=new d,h;for(h in a)b[h]=c.clone(a[h]);return b}catch(g){return a}},isEmpty:function(a){if(c.isArray(a))return 0==
a.length;for(var d in a)return!1;return!0},each:function(a,d,b){var h,g=0,e=a.length,k=void 0===e||c.isFunction(a);if(b)if(k)for(h in a){if(!1===d.apply(a[h],b))break}else for(;g<e&&!1!==d.apply(a[g++],b););else if(k)for(h in a){if(!1===d.call(a[h],h,a[h]))break}else for(;g<e&&!1!==d.call(a[g],g,a[g++]););return a},contains:function(a,d){var b=!1;c.each(a,function(a,g){if(c.equals(g,d))return b=!0,!1});return b},largeThan:function(a,d){if("object"==typeof a&&"object"==typeof d){var b=!0;c.each(d,
function(h){if(!c.equals(d[h],a[h]))return b=!1});return b}},count:function(a){if(c.isArray(a))return a.length;var d=0,b;for(b in a)d++;return d},toArray:b,generateMethod:function(a,d,b){d=c.isArray(d)?d:d.split(",");for(var h=0;h<d.length;h++){var g=d[h];a[g]=b(g)}}},b=b();return c});
handy.add("Browser","handy.base.Object",function(e){var b={},c={};e.generateMethod(c,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(a){return function(d){var f=b[a];return!d&&"string"===typeof f&&/^[\d\.]+$/.test(f)?parseInt(f):f}});e=window.navigator.userAgent;var a;(a=e.match(/MSIE ([\d.]+)/))?b.ie=a[1]:(a=e.match(/Firefox\/([\d.]+)/))?b.firefox=a[1]:(a=e.match(/Chrome\/([\d.]+)/))?
b.chrome=a[1]:(a=e.match(/Opera.([\d.]+)/))?b.opera=a[1]:(a=e.match(/Version\/([\d.]+).*Safari/))?b.safari=a[1]:0;/windows|win32/i.test(e)?b.windows=!0:/linux/i.test(e)?b.linux=!0:/macintosh/i.test(e)?b.mac=!0:0;/trident/i.test(e)?b.trident=!0:/webkit/i.test(e)?b.webkit=!0:/gecko/i.test(e)?b.gecko=!0:/presto/i.test(e)?b.presto=!0:0;/MetaSr/i.test(e)?b.sogou=!0:/Maxthon/i.test(e)?b.maxthon=!0:/TencentTraveler/i.test(e)?b.tt=!0:/TheWorld/i.test(e)?b.theWorld=!0:/360[S|E]E/i.test(e)?b.is360=!0:0;var d;
if((d=e.match(/AppleWebKit\/([\d.]*)/))&&d[1])if(/ Mobile\//.test(e)&&e.match(/iPad|iPod|iPhone/)){b.mobile="ios";if((d=e.match(/OS ([^\s]*)/))&&d[1])b.ios=d[1].replace("_",".");if((d=e.match(/iPad|iPod|iPhone/))&&d[0])b[d[0].toLowerCase()]=b.ios}else if(/ Android/i.test(e)){if(/Mobile/.test(e)&&(b.mobile="android"),(d=e.match(/Android ([^\s]*);/))&&d[1])b.android=d[1]}else if(d=e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))b.mobile=d[0].toLowerCase();var f;try{if(b.ie){var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
h&&(f=h.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(h=navigator.plugins["Shockwave Flash"])){var g=h.description.split(" ");a=0;for(var j=g.length;a<j;a++)if(0<parseInt(g[a])){f=g[a];break}}}catch(k){}b.flash=f?f:null;return c});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(e,b,c){var a={level:0,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:!("console"in window)||!!b.mobile(),out:function(d,b,h){h=h||"log";if(b||a.showInPage){b=c.expando+"debugDiv";var g=top.document,e=g.getElementById(b);e?e.style.display="block":(e=g.createElement("DIV"),e.id=b,e.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+g.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',e.style.position="fixed",e.style.width=g.body.offsetWidth-20+"px",e.style.left=0,e.style.top=0,e.style.right=0,e.style.height="150px",e.style.backgroundColor="#aaa",e.style.fontSize="12px",e.style.padding="10px",e.style.zIndex=9999999999,e.style.opacity=0.8,e.style.filter="alpha(opacity=80)",g.body.appendChild(e));b=e.getElementsByTagName("DIV")[0];b.innerHTML+=h+" : "+c.Json.stringify(d,null,"<br/>")+"<br/>";b.scrollTop=b.scrollHeight}try{console[h](d)}catch(k){}},
log:function(d,b){a.level>a.LOG_LEVEL||a.out(d,!!b,"log")},info:function(d,b){this.level>a.INFO_LEVEL||a.out(d,!!b,"info")},warn:function(d,b){a.level>a.WARN_LEVEL||a.out(d,!!b,"warn")},error:function(d,b,c){if(!(a.level>a.ERROR_LEVEL)&&("boolean"==typeof b&&(c=b),a.out(d,!!c,"error"),"object"==typeof b))throw b;},time:function(b,c,e){a.level>a.INFO_LEVEL||(b?("boolean"==typeof c&&(e=c,c=""),a.out((c||"")+((new Date).getTime()-(a.lastTime||0)),!!e)):a.lastTime=(new Date).getTime())},debug:function(b){if(!(a.level>
a.DEBUG_LEVEL)&&!1!==b)debugger}};return a});handy.add("Function",function(e){return{bind:function(b,c,a){var d=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(d,arguments);return b.apply(c,d)}},intercept:function(b,c,a,d){return e.Object.isFunction(b)&&e.Object.isFunction(c)?function(){var f=a||this,e={},g=arguments;e.scope=d;e.target=f;e.method=b;return!1!=c.apply(e,g)?b.apply(f,g):!1}:b}}});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(e,b,c,a){function d(a){function d(a){return/\.(css|js)$/.test(a)?u[a]&&"loaded"==u[a].status:n.urlMap&&n.urlMap[a]?n.urlMap[a].chkExist():b.namespace(a)}if("string"==typeof a)return d(a);for(var c=[],f=0,e=a.length;f<e;f++){var g=d(a[f]);if(g)c.push(g);else return!1}return c}function f(a,b){function d(){d.isCalled||(d.isCalled=!0,clearTimeout(j),b())}if("SCRIPT"===a.nodeName){var c=a,f=d;c.onload=c.onerror=
c.onreadystatechange=function(){/loaded|complete|undefined/.test(c.readyState)&&(c.onload=c.onerror=c.onreadystatechange=null,k.removeChild(c),c=null,setTimeout(f,0))}}else{var g=d;window.hasOwnProperty("attachEvent")?a.attachEvent("onload",g):setTimeout(function(){h(a,g)},0)}var j=setTimeout(function(){e.error("Time is out:",a.src);d()},n.timeout)}function h(a,b){if(!b.isCalled){var d;if(m)a.sheet&&(d=!0);else if(a.sheet)try{a.sheet.cssRules&&(d=!0)}catch(c){if("SecurityError"===c.name||"NS_ERROR_DOM_SECURITY_ERR"===
c.name)d=!0}setTimeout(function(){d?b():h(a,b)},1)}}function g(a){n.showLoading(!1);u[a].status="loaded";n.traceLog&&e.info("Loader Response: "+a);j()}function j(){for(var a=s.length-1;0<=a;a--){var b=s[a],c=d(b.deps);if(c){s.splice(a,1);b.callback.apply(null,c);j();break}}}var k=document.head||document.getElementsByTagName("head")[0]||document.documentElement,m=navigator.userAgent.indexOf("AppleWebKit"),s=[],u={},n={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(a,
d,c){2==arguments.length&&(c=d,d=[]);n.require(d,function(){var d;if("function"==typeof c)try{d=c.apply(null,arguments),n.traceLog&&e.info("Loader define: "+a)}catch(f){e.error("Loader "+a+":factory define error:"+f.message,f);return}else d=c;b.namespace(a,d)})},require:function(b,h){for(var j="string"==typeof b?[b]:b,m=[],p=[],q=!0,r=0,w=j.length;r<w;r++){var l=j[r],t=d(l);t?p.push(t):(m.push(l),q&&(q=!1,s.push({deps:j,callback:h})),n.traceLog&&e.info("Resource not found: "+l))}if(0==m.length)return h&&
h.apply(null,p),0==p.length?p[0]:p;q=!1;j=0;for(p=m.length;j<p;j++)if(r=m[j],!u[r]){q=r;l=n.urlMap&&n.urlMap[q]&&n.urlMap[q].url;if(!l){w="";q=a.Object.alias(q);l=n.rootPath;if("string"==typeof l)w=l;else if("object"==typeof l)for(t in t=void 0,l)0==q.indexOf(t)&&(w=l[t],q=q.replace(t,""));else w="";l=/.css$/.test(q)?0==q.indexOf("/")?q:"/css/"+q:/.js$/.test(q)?q:q.replace(/\./g,"/")+".js";0!=l.indexOf("/")&&(l="/"+l);l=w+l}q=!0;u[r]={id:r,status:"loading"};w=c.bind(g,null,r);if(/.css$/.test(l))a:{r=
l;l=k.getElementsByTagName("link");for(t=0;t<l.length;t++){var z=l[t].href;!n.skinNode&&0<=z.indexOf(n.skinName)&&(n.skinNode=l[t]);if(0<=z.indexOf(r)||0<=r.indexOf(z))break a}l=document.createElement("link");l.rel="stylesheet";l.href=r;f(l,w);k.insertBefore(l,n.skinNode);n.traceLog&&e.info("Loader request:"+r)}else r=l,l=document.createElement("script"),l.async="async",l.src=r,l.type="text/javascript",f(l,w),k.appendChild(l),n.traceLog&&e.info("Loader request:"+r)}q&&n.showLoading(!0)}};return n});
handy.add("Events",function(){return{_cache:{},on:function(e,b){var c=this._cache,a=c[e];a||(a=c[e]=[]);a.push(b)},off:function(e,b){var c=this._cache,a=c[e];if(!a)return!1;if(b)for(var c=0,d=a.length;c<d;c++){if(a[c]==b)return a.splice(c,1),!0}else delete c[e];return!1},trigger:function(e,b){var c=this._cache;[e];if(!c)return!1;for(var a=Array.prototype.slice.call(arguments,1),d=0,f=c.length;d<f;d++){if(d==f-1)return c[d].apply(null,a);c[d].apply(null,a)}}}});
handy.add("Date",function(){var e=window.Date,b={getWeek:function(b,a){var d=b.getDay();a&&(d=(d+(a%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[d]},isWeeken:function(b){return 0==b.getDay()||6==b.getDay()},getDaysInMonth:function(b){b=new e(b.getFullYear(),b.getMonth()+1,0);return b.getDate()},getDaysInYear:function(b){var a=new e(b.getFullYear(),0,0);b=new e(b.getFullYear()+1,0,0);return Math.floor((b.getTime()-a.getTime())/864E5)},getDayIndexOfYear:function(b){var a=new e("1/1/"+
b.getFullYear());return Math.ceil((b.getTime()-a.getTime())/864E5)},format:function(c,a){a=a||"yyyy-MM-dd HH:mm:ss";c=c||new e;var d=c.getHours(),f=Math.floor((c.getMonth()+3)/3),d={"y+":c.getFullYear(),"M+":c.getMonth()+1,"d+":c.getDate(),"h+":0==d%12?12:d%12,"H+":d,"m+":c.getMinutes(),"s+":c.getSeconds(),"w+":b.getWeek(c),"q+":f,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][f-1],"S+":c.getMilliseconds()},h;for(h in d)RegExp("("+h+")").test(a)&&(f=RegExp.$1.length,a=a.replace(RegExp.$1,1==f?d[h]:("00"+
d[h]).slice(-f)));return a},parse:function(b,a){for(var d=(a||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),f=b.match(/\d+/g),h=new e,g=0;g<f.length;g++){var j=d[g],k=parseInt(f[g]);switch(j){case "yyyy":h.setFullYear(k);break;case "MM":h.setMonth(k-1);break;case "dd":h.setDate(k);break;case "HH":h.setHours(k);break;case "mm":h.setMinutes(k);break;case "ss":h.setSeconds(k);break;case "SS":h.setMilliseconds(k)}}return h},parseObject:function(b){return new e(b.year+1900,b.month,b.date,b.hours,b.minutes,
b.seconds)}};return b});
handy.add("String",function(){var e={stripTags:function(b){return b.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(b){var c=document.createElement("div");b=document.createTextNode(b);c.appendChild(b);return c.innerHTML},unescapeHTML:function(b){var c=document.createElement("div");c.innerHTML=e.stripTags(b);return c.childNodes[0].nodeValue},decodeHTML:function(b){b=b.replace(/&lt;/gi,"<");b=b.replace(/&gt;/gi,">");b=b.replace(/&quot;/gi,'"');b=b.replace(/&apos;/gi,"'");b=b.replace(/<\/?br>/gi,"\n");
b=b.replace(/&amp;/gi,"&");return b=b.replace(/&nbsp;/gi," ")},encodeHTML:function(b){b=b.replace(/&/gi,"&amp;");b=b.replace(/</gi,"&lt;");b=b.replace(/>/gi,"&gt;");b=b.replace(/\"/gi,"&quot;");b=b.replace(/\'/gi,"&apos;");b=b.replace(/\n/gi,"</br>");return b=b.replace(/ /gi,"&nbsp;")},trim:function(b){return b=b.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(b,c){c||(c=/[,%\'\"\/\\;|\<\>\^]/);return-1<b.search(c)},len:function(b){return b.replace(/[^\x00-\xff]/g,"**").length},left:function(b,
c,a){if(e.len(b)>c){!0===a?a=2:0<a||(a=0);var d=0,f=0;for(c-=a;f<c;)255<b.charCodeAt(d)?f+=2:f++,d++;b=b.substring(0,d);for(d=0;d<a;d++)b+="."}return b},isNumber:function(b){return 0==b.search(/^\d+$/g)},hasChn:function(b){return/[\u4E00-\u9FA5]+/.test(b)},isChn:function(b){return/^[\u4E00-\u9FA5]+$/.test(b)},addParam:function(b,c){c&&(b+=(-1<b.indexOf("?")?"&":"?")+c);return b}};return e});
handy.add("Cookie",function(){return{get:function(e,b){var c=e+"=",a="",d=document.cookie;if(0<d.length){var f=d.indexOf(c);-1!=f&&(f+=c.length,c=d.indexOf(";",f),-1==c&&(c=d.length),a=d.substring(f,c),b||(a=unescape(a)))}return a},set:function(e,b,c){var a=[];void 0!=e&&void 0!=b&&a.push(e+"="+escape(b));c&&(void 0!=c.path&&a.push("path="+c.path),void 0!=c.domain&&a.push("domain="+c.domain),void 0!=c.expires&&a.push("expires="+c.expires),c.secure&&a.push("secure"));document.cookie=a.join(";")},del:function(e){var b=
new Date;b.setTime(b.getTime()-1);document.cookie=e+"=;expires="+b.toGMTString()}}});handy.add("Util",function(e){var b=0;return{isWindow:function(b){return null!=b&&b==b.window},getUuid:function(){return b++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(b){var a=top.location.hash;0<=a.indexOf("#")&&(b=a.replace(/#[^\?]*/,b));top.location.hash=b},result:function(b,a){var d=b[a];return e.Object.isFunction(d)?d():d}}});
handy.add("Collection","b.Object",function(e){function b(a){return a}function c(a){return function(b){return b[a]}}function a(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}}return{map:function(a,b,c){var g=[];if(null==a)return g;var j=Array.prototype.map;if(j&&a.map===j)return a.map(b,c);e.each(a,function(a,d){g.push(b.call(c,d,a))});return g},pluck:function(a,b){return this.map(a,c(b))},some:function(a,b,c){var e=!1;if(null==a||!b)return e;var j=Array.prototype.some;
if(j&&a.some===j)return a.some(b,c);$HO.each(a,function(a,d,j){if(e||(e=b.call(c,d,a,j)))return!1});return!!e},every:function(a,b,c){var e=!0;if(null==a||!b)return e;var j=Array.prototype.every;if(j&&a.every===j)return a.every(b,c);$HO.each(a,function(a,d,j){if(!(e=b.call(c,d,a,j)))return!1});return!!e},find:function(a,b,c){var e;this.some(a,function(a,d,m){if(b.call(c,a,d,m))return e=a,!0});return e},filter:function(a,b,c){var e=[];if(null==a)return e;var j=Array.prototype.filter;if(j&&a.filter===
j)return a.filter(b,c);$HO.each(a,function(a,d,j){b.call(c,d,a,j)&&e.push(d)});return e},where:function(b,c){return this.filter(b,a(c))},findWhere:function(b,c){return this.find(b,a(c))},invoke:function(a,b){var c=Array.prototype.slice.call(arguments,2),g=e.isFunction(b);return this.map(a,function(a){return(g?b:a[b]).apply(a,c)})},sortBy:function(a,e,h){var g=e;e=null==g?b:$HO.isFunction(g)?g:c(g);return this.pluck(this.map(a,function(a,b,d){return{value:a,index:b,criteria:e.call(h,a,b,d)}}).sort(function(a,
b){var d=a.criteria,c=b.criteria;if(d!==c){if(d>c||void 0===d)return 1;if(d<c||void 0===c)return-1}return a.index-b.index}),"value")}}});
handy.add("Template",function(e){var b={},c=/^=/,a="".trim,d={openTag:"<%",closeTag:"%>",_add:function(b){return a?"$r+="+b+";\n":"$r.push("+b+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return d._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=d._add(a.replace(c,"")+'||""'));return a+"\n"},_compile:function(b){var c="var $r="+(a?'""':"[]")+";\n";e.Object.each(b.split(d.openTag),function(a,b){var e=
b.split(d.closeTag);1==e.length?c+=d._parseHtml(e[0]):(c+=d._parseScript(e[0]),e[1]&&(c+=d._parseHtml(e[1])))});c+="return "+(a?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(a,c){var g,j,k;if("string"==typeof a)g=a;else if(g=a.tmpl,k=a.id)if(b[k])j=b[k];else{var m=document.getElementById(k);m&&(g=(m.value||m.innerHTML).replace(/\s/g,""))}if(!j){if(!g){e.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}j=d._compile(g);k&&(b[k]=j)}return c?j(c):j}};return d});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(e,b,c){function a(a){if(a==m)return!1;var b=k.contentWindow.document;b.open();b.write("<!doctype html><html><body>"+a+"</body></html>");b.close();m=a;e.log("set:"+k.contentWindow.document.body.innerText)}function d(){var d=b.getHash(),c=k.contentWindow.document.body.innerText;d!=m?(a(d),f(d)):c!=m&&(e.log("update:"+k.contentWindow.document.body.innerText),b.setHash(c))}function f(a){var b=n.listeners,d;for(d in b)b[d](a)}var h,
g=0,j=document,k,m,s=j.documentMode,u="onhashchange"in window&&(void 0===s||7<s),n={delay:50,listen:function(e,m){if(!h&&!h)if(h=!0,n.listeners={},u)$(window).on("hashchange",function(){f(b.getHash())});else k=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(j.body)[0],$(k).one("load",function(){a(b.getHash());setInterval(d,n.delay)});if(m in n.listeners)$D.error("Duplicate name",Error("Duplicate name"));else return m=m||c.expando+ ++g,n.listeners[m]=
e,m},unListen:function(a){for(var b in n.listeners)(!a||a==b)&&delete n.listeners[b]}};return n});handy.add("Support",function(e){var b={mediaQuery:function(){var a;if(e.Browser.mobile())a="hui-mobile";else{a="hui-pc";var b=e.Browser.ie();b&&(a+=" ie"+b)}document.documentElement.className+=" "+a}};b.mediaQuery();if(6==e.Browser.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}return b});
handy.add("Validator",["b.String","b.Object"],function(e,b){var c={messages:{required:"{name}\u4e0d\u80fd\u4e3a\u7a7a",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94fe\u63a5\u5730\u5740",date:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f",number:"{name}\u987b\u662f\u6570\u5b57",digits:"{name}\u987b\u662f\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u7528\u5361\u53f7\u7801",
equalTo:"\u8bf7\u8f93\u5165\u76f8\u540c\u7684{name}",min:"{name}\u4e0d\u80fd\u5c0f\u4e8e{0}",max:"{name}\u4e0d\u80fd\u5927\u4e8e{0}",range:"{name}\u8981\u5728{0}\u5230{1}\u4e4b\u95f4",maxlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7{0}",minlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e{0}",rangelength:"{name}\u957f\u5ea6\u8981\u5728{0}\u5230{1}\u4e4b\u95f4"},valid:function(a,b){var e=b.rules,h;for(h in e){var g=e[h],j=("function"==typeof g?g:c[h])(a,g);if(!j)return e=b.error||c.error,h=b.messages&&
b.messages[h]||c.messages[h],h=h.replace(/\{([^\}]+)\}/g,function(a,c){return g[c]||0==c&&g||b[c]||g||""}),e&&e(h),j}return!0},required:function(a){return 0<e.trim(""+a).length},email:function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a){return!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a){return/^\d+$/.test(a)},creditcard:function(a){if(/[^0-9 \-]+/.test(a))return!1;var b=0,c=0,e=!1;a=a.replace(/\D/g,"");for(var g=a.length-1;0<=g;g--){c=a.charAt(g);c=parseInt(c,10);if(e&&9<(c*=2))c-=9;b+=c;e=!e}return 0===b%10},min:function(a,b){return a>=b},max:function(a,
b){return a<=b},range:function(a,b){return a>=b[0]&&a<=b[1]},minlength:function(a,c){return(b.isArray(a)?a.length:e.trim(""+a).length)>=c},maxlength:function(a,c){return(b.isArray(a)?a.length:e.trim(""+a).length)<=c},rangelength:function(a,c){var f=b.isArray(a)?a.length:e.trim(""+a).length;return f>=c[0]&&f<=c[1]},equalTo:function(a,b){return a===b}};return c})(function(e){Hui=H=$H=e.noConflict();$D=$H.Debug;$HB=$H.Browser;$HC=$H.Cookie;$HD=$H.Date;$HF=$H.Function;$HO=$H.Object;$HS=$H.String;$HU=
$H.Util;$HE=$H.Events;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};e=window.$;e.fn.remove=$HF.intercept(e.fn.remove,function(){$HE.trigger("removeEl",this.target)})})(handy);
