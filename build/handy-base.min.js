/* Handy v1.0.0-dev | 2014-03-21 | zhengyinhui100@gmail.com */
(function(){var f=window.handy,c=window.$,b=window.handy=window.$=function(){};b.version="1.0.0";b.expando="handy"+(b.version+Math.random()).replace(/\D/g,"");b.add=function(a,d,e){e||(e=d,d=null);if(!d||!b.Loader){b.base||(b.base={});var c=[];if(d)if("string"==typeof d)c.push(b.base.Object.namespace(d));else for(var g=0;g<d.length;g++)c.push(b.base.Object.namespace(d[g]));c.push(b);d=e.apply(window,c);b.base[a]=b[a]=d;if(0<="Browser,Class,Collection,Cookie,Events,Function,Json,Object,String,Template,Util".indexOf(a))for(var f in d)"undefined"!=
typeof b[f]&&("console"in window&&!Function[f])&&(console.log(b[f]),console.log(a+"\u547d\u540d\u51b2\u7a81:"+f)),b[f]=d[f]}else b.Loader.require(d,function(){Array.prototype.push.call(arguments,b);b.base[a]=b[a]=e.apply(window,arguments)})};b.noConflict=function(a){window.$===b&&(window.$=c);a&&window.handy===b&&(window.handy=f);return b};b.noop=function(){}})();
handy.add("Json",function(){function f(a){h.lastIndex=0;h.test(a)&&(a=a.replace(h,function(a){var b=g[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));return'"'+a+'"'}function c(b,h){var g,k,j,l,r=d,q,n=h[b];n&&("object"===typeof n&&"function"===typeof n.toJSON)&&(n=n.toJSON(b));"function"===typeof a&&(n=a.call(h,b,n));switch(typeof n){case "string":return f(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);case "object":if(!n)return"null";
d+=e;q=[];if("[object Array]"===Object.prototype.toString.apply(n)){l=n.length;for(g=0;g<l;g+=1)q[g]=c(g,n)||"null";j=0===q.length?"[]":d?"[\n"+d+q.join(",\n"+d)+"\n"+r+"]":"["+q.join(",")+"]";d=r;return j}if(a&&"object"===typeof a){l=a.length;for(g=0;g<l;g+=1)"string"===typeof a[g]&&(k=a[g],(j=c(k,n))&&q.push(f(k)+(d?": ":":")+j))}else for(k in n)Object.prototype.hasOwnProperty.call(n,k)&&(j=c(k,n))&&q.push(f(k)+(d?": ":":")+j);j=0===q.length?"{}":d?"{\n"+d+q.join(",\n"+d)+"\n"+r+"}":"{"+q.join(",")+
"}";d=r;return j}}var b="JSON"in window,a,d,e,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,n=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s=/(?:^|:|,)(?:\s*\[)+/g;
return{stringify:function(h,g,f,k){if(b&&!k)return JSON.stringify.apply(null,arguments);var j;e=d="";if("number"===typeof f)for(j=0;j<f;j+=1)e+=" ";else"string"===typeof f&&(e=f);if((a=g)&&"function"!==typeof g&&("object"!==typeof g||"number"!==typeof g.length))$D.error(Error("Json.stringify:\u66ff\u6362\u53c2\u6570\u53ea\u80fd\u662f\u51fd\u6570\u6216\u8005\u6570\u7ec4"));else return c("",{"":h})},parseJson:function(a,e,d){function c(a,b){var d,h,g=a[b];if(g&&"object"===typeof g)for(d in g)Object.prototype.hasOwnProperty.call(g,
d)&&(h=c(g,d),void 0!==h?g[d]=h:delete g[d]);return e.call(a,b,g)}if(b&&!d)return JSON.parse.apply(null,arguments);var h;a=String(a);k.lastIndex=0;k.test(a)&&(a=a.replace(k,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(j.test(a.replace(l,"@").replace(n,"]").replace(s,"")))return h=eval("("+a+")"),"function"===typeof e?c({"":h},""):h;$D.error(new SyntaxError("JSON.parse"))}}});
handy.add("Object",function(){var f;f=(f=window.navigator.userAgent.match(/MSIE ([\d.]+)/))&&9>parseInt(f[0])?function(b,a,d){var e=[];if(b.length){a=a||0;for(d=d||b.length;a<d;a++)e.push(b[a])}return e}:function(b,a,d){return Array.prototype.slice.call(b,a||0,d||b.length)};var c={_alias:{B:"handy.base",C:"handy.component",M:"handy.module",CM:"handy.common"},namespace:function(b,a){var d=null,e,h,g,f;b=c.alias(b);h=b.split(".");d=h[0];d=(g=2==arguments.length)?eval("(function(){if (typeof "+d+' == "undefined"){'+
d+" = {};}return "+d+";})()"):eval("(function(){if (typeof "+d+' != "undefined")return '+d+";})()");e=1;for(f=h.length;e<f;++e){if(e==f-1&&g)d[h[e]]=a;else if(g||d&&d[h[e]])d[h[e]]=d[h[e]]||{};else return;d=d[h[e]]}return d},alias:function(b,a){var d=c._alias;if(a)d[b]?$D.error("\u522b\u540d\u5df2\u88ab\u4f7f\u7528"+b+":"+d[b]):d[b]=a;else{if(b){var e=b,h=b.length-1;do{if(d[e])return d[e]+b.substring(h);h=e.lastIndexOf(".")}while(0<h&&(e=e.substring(0,h)));return b}return d}},extend:function(b,a,
d){var e=d?d.notCover:!1,h=d?d.cover:null;d=d?d.IsClone:!1;b=b||{};var g=b.constructor,f=g.$isClass,j,l;for(l in a)if(j=a[l],(!h||c.contains(h,l))&&a.hasOwnProperty(l)){var n=b.hasOwnProperty(l),s=!0===e?n:!1;c.isArray(e)?s=c.contains(e,l)&&n:c.isFunction(e)&&(s=e(l,j));s||(j=d?c.clone(j):j,f&&c.isFunction(j)&&(j.$name=l,j.$owner=g),b[l]=j)}return b},mix:function(b,a,d){b.superProto||(b.superProto={});for(var e in a)b.superProto[e]=c.isFunction(a[e])?b.superProto[e]?function(b,e){return function(){e.apply(this,
arguments);a[b].apply(this,arguments)}}(e,b.superProto[e]):a[e]:a[e],b[e]||(b[e]=a[e]);d&&c.extend(b,d);a.toString!=a.constructor.prototype.toString&&(b.superProto.toString=function(){a.toString.apply(b,arguments)});return b},isFunction:function(b){return"[object Function]"===window.Object.prototype.toString.call(b)},isArray:function(b){return"[object Array]"===window.Object.prototype.toString.call(b)},isClass:function(b){return c.isFunction(b)&&!0===b.$isClass},equals:function(b,a){if(typeof b==
typeof a){if("object"!=typeof b)return b===a;if(b===a)return!0;if(c.isArray(b)&&c.isArray(a)){if(b.length!=a.length)return!1;for(var d=0,e=b.length;d<e;d++)if(!c.equals(b[d],a[d]))return!1;return!0}if(!c.isArray(b)&&!c.isArray(a)){if(c.count(b)!=c.count(a))return!1;for(d in b)if(void 0==a[d]||!c.equals(b[d],a[d]))return!1;return!0}}return!1},clone:function(b){if(null==b||"object"!=typeof b)return b;var a=b.constructor;if(a!=window.Object&&a!=window.Array)return b;if(a==window.Date||a==window.RegExp||
a==window.Function||a==window.String||a==window.Number||a==window.Boolean)return new a(b);try{var d=new a,e;for(e in b)d[e]=c.clone(b[e]);return d}catch(h){return b}},isEmpty:function(b){if(c.isArray(b))return 0==b.length;for(var a in b)return!1;return!0},each:function(b,a,d){var e,h=0,g=b.length,f=void 0===g||c.isFunction(b);if(d)if(f)for(e in b){if(!1===a.apply(b[e],d))break}else for(;h<g&&!1!==a.apply(b[h],d);)e=b.length,g==e?h++:g=e;else if(f)for(e in b){if(!1===a.call(b[e],e,b[e]))break}else for(;h<
g&&!1!==a.call(b[h],h,b[h]);)e=b.length,g==e?h++:g=e;return b},contains:function(b,a){var d=!1;c.each(b,function(b,h){if(c.equals(h,a))return d=!0,!1});return d},largeThan:function(b,a){if("object"==typeof b&&"object"==typeof a){var d=!0;c.each(a,function(e){if(!c.equals(a[e],b[e]))return d=!1});return d}},count:function(b){if(c.isArray(b))return b.length;var a=0,d;for(d in b)a++;return a},removeUndefined:function(b,a){var d=c.isArray(b);if(a){if(d){var e=[];c.each(b,function(a,b){void 0!==b&&e.push(b)});
return e}return c.extend({},b,{isClone:!0,notCover:function(a,b){return void 0===b}})}c.each(b,function(a,e){void 0===e&&(d?b.splice(a,1):delete b[a])});return b},toArray:f,getSingleton:function(b){b="string"==typeof b?c.namespace(b):b;return b._singleton||(b._singleton=new b)},generateMethod:function(b,a,d){a=c.isArray(a)?a:a.split(",");for(var e=0;e<a.length;e++){var h=a[e];b[h]=d(h)}}};return c});
handy.add("Browser","handy.base.Object",function(f){var c={},b={};f.generateMethod(b,"ie firefox chrome safari opera windows linux mac trident webkit gecko presto sogou maxthon tt theWorld is360 mobile android ios iPhone iPod iPad flash".split(" "),function(a){return function(b){var e=c[a];return!b&&"string"===typeof e&&/^[\d\.]+$/.test(e)?parseInt(e):e}});f=window.navigator.userAgent;var a;(a=f.match(/MSIE ([\d.]+)/))?c.ie=a[1]:(a=f.match(/Firefox\/([\d.]+)/))?c.firefox=a[1]:(a=f.match(/Chrome\/([\d.]+)/))?
c.chrome=a[1]:(a=f.match(/Opera.([\d.]+)/))?c.opera=a[1]:(a=f.match(/Version\/([\d.]+).*Safari/))?c.safari=a[1]:0;/windows|win32/i.test(f)?c.windows=!0:/linux/i.test(f)?c.linux=!0:/macintosh/i.test(f)?c.mac=!0:0;/trident/i.test(f)?c.trident=!0:/webkit/i.test(f)?c.webkit=!0:/gecko/i.test(f)?c.gecko=!0:/presto/i.test(f)?c.presto=!0:0;/MetaSr/i.test(f)?c.sogou=!0:/Maxthon/i.test(f)?c.maxthon=!0:/TencentTraveler/i.test(f)?c.tt=!0:/TheWorld/i.test(f)?c.theWorld=!0:/360[S|E]E/i.test(f)?c.is360=!0:0;var d;
if((d=f.match(/AppleWebKit\/([\d.]*)/))&&d[1])if(/ Mobile\//.test(f)&&f.match(/iPad|iPod|iPhone/)){c.mobile="ios";if((d=f.match(/OS ([^\s]*)/))&&d[1])c.ios=d[1].replace("_",".");if((d=f.match(/iPad|iPod|iPhone/))&&d[0])c[d[0].toLowerCase()]=c.ios}else if(/ Android/i.test(f)){if(/Mobile/.test(f)&&(c.mobile="android"),(d=f.match(/Android ([^\s]*);/))&&d[1])c.android=d[1]}else if(d=f.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))c.mobile=d[0].toLowerCase();var e;try{if(c.ie){var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
h&&(e=h.getVariable("$version").split(" ")[1])}else if(navigator.plugins&&0<navigator.plugins.length&&(h=navigator.plugins["Shockwave Flash"])){var g=h.description.split(" ");a=0;for(var k=g.length;a<k;a++)if(0<parseInt(g[a])){e=g[a];break}}}catch(j){}c.flash=e?e:null;return b});
handy.add("Debug",["handy.base.Json","handy.base.Browser"],function(f,c,b){var a={level:0,LOG_LEVEL:1,DEBUG_LEVEL:2,INFO_LEVEL:3,WARN_LEVEL:4,ERROR_LEVEL:5,showInPage:!("console"in window)||!!c.mobile(),out:function(d,e,c){c=c||"log";if(e||a.showInPage){e=b.expando+"debugDiv";var g=top.document,f=g.getElementById(e);f?f.style.display="block":(f=g.createElement("DIV"),f.id=e,f.innerHTML=['<a href="javascript:void(0)" onclick="this.parentNode.style.display=\'none\'">\u5173\u95ed</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="this.parentNode.getElementsByTagName(\'DIV\')[0].innerHTML=\'\';">\u6e05\u7a7a</a>',
"<a href=\"javascript:void(0)\" onclick=\"if(this.innerHTML=='\u5168\u5c4f'){this.parentNode.style.height='"+g.body.offsetHeight+"px';this.innerHTML='\u6536\u8d77'}else{this.parentNode.style.height='100px';this.innerHTML='\u5168\u5c4f';}\">\u5168\u5c4f</a>",'<a href="javascript:void(0)" onclick="var oDv=this.parentNode.getElementsByTagName(\'div\')[0];if(this.innerHTML==\'\u5e95\u90e8\'){oDv.scrollTop=oDv.scrollHeight;this.innerHTML=\'\u9876\u90e8\';}else{oDv.scrollTop=0;this.innerHTML=\'\u5e95\u90e8\';}">\u9876\u90e8</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="location.reload();">\u5237\u65b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="history.back();">\u540e\u9000</a>'].join("&nbsp;&nbsp;&nbsp;&nbsp;")+
'<div style="padding-top:5px;height:90%;overflow:auto;"></div>',f.style.position="fixed",f.style.width=g.body.offsetWidth-20+"px",f.style.left=0,f.style.top=0,f.style.right=0,f.style.height="150px",f.style.backgroundColor="#aaa",f.style.fontSize="12px",f.style.padding="10px",f.style.zIndex=9999999999,f.style.opacity=0.8,f.style.filter="alpha(opacity=80)",g.body.appendChild(f));e=f.getElementsByTagName("DIV")[0];g=b.Json.stringify(d,null,"&nbsp;&nbsp;&nbsp;&nbsp;",!0).replace(/\n/g,"<br/>");e.innerHTML+=
c+" : "+g+"<br/>";e.scrollTop=e.scrollHeight}try{console[c](d)}catch(j){}},log:function(b,e){a.level>a.LOG_LEVEL||a.out(b,!!e,"log")},info:function(b,e){this.level>a.INFO_LEVEL||a.out(b,!!e,"info")},warn:function(b,e){a.level>a.WARN_LEVEL||a.out(b,!!e,"warn")},error:function(b,e){if(!(a.level>a.ERROR_LEVEL)&&(a.out(b,!!e,"error"),b instanceof Error))throw b;},time:function(b,e,c){a.level>a.INFO_LEVEL||(b?("boolean"==typeof e&&(c=e,e=""),a.out((e||"")+((new Date).getTime()-(a.lastTime||0)),!!c)):a.lastTime=
(new Date).getTime())},debug:function(b){if(!(a.level>a.DEBUG_LEVEL)&&!1!==b)debugger}};return a});handy.add("Function",function(f){return{bind:function(c,b,a){var d=Array.prototype.slice.call(arguments,2);return function(){Array.prototype.push.apply(d,arguments);return c.apply(b,d)}},intercept:function(c,b,a,d){return f.Object.isFunction(c)&&f.Object.isFunction(b)?function(){var e=a||this,h={},f=arguments;h.scope=d;h.target=e;h.method=c;return!1!=b.apply(h,f)?c.apply(e,f):!1}:c}}});
handy.add("Class",["B.Object","B.Debug"],function(f,c){var b={createClass:function(a){var d=function(){var a,b;a=this.constructor==d?this:arguments.callee;if(b=a.initialize){for(var c in a)"object"==typeof a[c]&&(a[c]=f.clone(a[c]));return b.apply(a,arguments)}};d.$isClass=!0;d.extend=function(a,c,f){var k=b.createClass();b.inherit(k,d,a,c,f);return k};d.prototype.callSuper=function(a,b){a&&(!a.$isClass&&void 0!=a.length)&&(b=a,a=null);var d=arguments.callee.caller,c=d.$owner.superProto;a=a?a.prototype:
c||this.constructor.superProto;d=d.$name;if(a&&(d=a[d],f.isFunction(d)))return b?d.apply(this,b):d.call(this)};a&&this.namespace(a,d);return d},inherit:function(a,b,e,h,g){var k=function(){};k.prototype=b.prototype;f.extend(a,b,g);a.prototype=new k;a.prototype.constructor=a;a.superClass=b;a.superProto=b.prototype;if(b._onInherit)try{b._onInherit(a)}catch(j){c.error(j)}h&&f.extend(a,h);e&&f.extend(a.prototype,e)}};return b});
handy.add("Loader",["handy.base.Debug","handy.base.Object","handy.base.Function"],function(f,c,b,a){function d(a){function b(a){return/\.(css|js)$/.test(a)?s[a]&&"loaded"==s[a].status:p.urlMap&&p.urlMap[a]?p.urlMap[a].chkExist():c.namespace(a)}if("string"==typeof a)return b(a);for(var e=[],d=0,h=a.length;d<h;d++){var f=b(a[d]);if(f)e.push(f);else return!1}return e}function e(a,b){function e(){e.isCalled||(e.isCalled=!0,clearTimeout(k),b())}if("SCRIPT"===a.nodeName){var d=a,c=e;d.onload=d.onerror=
d.onreadystatechange=function(){/loaded|complete|undefined/.test(d.readyState)&&(d.onload=d.onerror=d.onreadystatechange=null,j.removeChild(d),d=null,setTimeout(c,0))}}else{var g=e;window.hasOwnProperty("attachEvent")?a.attachEvent("onload",g):setTimeout(function(){h(a,g)},0)}var k=setTimeout(function(){f.error("Time is out:"+a.src);e()},p.timeout)}function h(a,b){if(!b.isCalled){var d;if(l)a.sheet&&(d=!0);else if(a.sheet)try{a.sheet.cssRules&&(d=!0)}catch(e){if("SecurityError"===e.name||"NS_ERROR_DOM_SECURITY_ERR"===
e.name)d=!0}setTimeout(function(){d?b():h(a,b)},1)}}function g(a){p.showLoading(!1);s[a].status="loaded";p.traceLog&&f.info("Loader Response: "+a);k()}function k(){for(var a=n.length-1;0<=a;a--){var b=n[a],e=d(b.deps);if(e){n.splice(a,1);b.callback.apply(null,e);k();break}}}var j=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=navigator.userAgent.indexOf("AppleWebKit"),n=[],s={},p={traceLog:!1,timeout:15E3,skinName:"skin",showLoading:function(){},define:function(a,
b,d){2==arguments.length&&(d=b,b=[]);p.require(b,function(){var b;if("function"==typeof d)try{b=d.apply(null,arguments),p.traceLog&&f.info("Loader define: "+a)}catch(e){e.message="Loader "+a+":factory define error:"+e.message;f.error(e);return}else b=d;c.namespace(a,b);var h=typeof b;if("object"==h||"Function"==h)b.$ns=a})},require:function(c,h){for(var k="string"==typeof c?[c]:c,l=[],v=[],r=!0,q=0,u=k.length;q<u;q++){var m=k[q],t=d(m);t?v.push(t):(l.push(m),r&&(r=!1,n.push({deps:k,callback:h})),
p.traceLog&&f.info("Resource not found: "+m))}if(0==l.length)return h&&h.apply(null,v),0==v.length?v[0]:v;r=!1;k=0;for(v=l.length;k<v;k++)if(q=l[k],!s[q]){r=q;r=a.Object.alias(r);m=p.urlMap&&p.urlMap[r]&&p.urlMap[r].url;if(!m){u="";m=p.rootPath;if("string"==typeof m)u=m;else if("object"==typeof m)for(t in t=void 0,m)0==r.indexOf(t)&&(u=m[t],r=r.replace(t,""));else u="";m=/.css$/.test(r)?0==r.indexOf("/")?r:"/css/"+r:/.js$/.test(r)?r:r.replace(/\./g,"/")+".js";0!=m.indexOf("/")&&(m="/"+m);m=u+m}r=
!0;s[q]={id:q,status:"loading"};u=b.bind(g,null,q);if(/.css$/.test(m))a:{q=m;m=j.getElementsByTagName("link");for(t=0;t<m.length;t++){var w=m[t].href;!p.skinNode&&0<=w.indexOf(p.skinName)&&(p.skinNode=m[t]);if(0<=w.indexOf(q)||0<=q.indexOf(w))break a}m=document.createElement("link");m.rel="stylesheet";m.href=q;e(m,u);j.insertBefore(m,p.skinNode);p.traceLog&&f.info("Loader request:"+q)}else q=m,m=document.createElement("script"),m.async="async",m.src=q,m.type="text/javascript",e(m,u),j.appendChild(m),
p.traceLog&&f.info("Loader request:"+q)}r&&p.showLoading(!0)}};return p});
handy.add("Events",function(f){return{_eventCache:{},_parseEvents:function(c,b){var a=/\s+/;if("object"==typeof c){for(var d in c)b([d,c[d]]);return!0}if("string"==typeof c&&a.test(c)){a=c.split(a);d=0;for(var e=a.length;d<e;d++)b([a[d]]);return!0}return!1},_parseCustomEvents:function(c,b,a){var d=this,e=f.toArray(arguments,2);return d._parseEvents(b,function(a){d[c].apply(d,a.concat(e))})},_delegateHandler:function(c,b){var a=this;return function(){if(!0!=a.isSuspend)return c.apply(b||a,arguments)}},
on:function(c,b,a,d){if(!this._parseCustomEvents("on",c,b,a,d)){"number"==typeof a&&(d=a,a=null);var e=this._eventCache,h=e[c];h||(h=e[c]=[]);c=this._delegateHandler(b,a);h.push({times:d,handler:b,context:a,delegation:c})}},once:function(c,b,a){var d=f.toArray(arguments);this.on.apply(this,d.push(1))},off:function(c,b){if("all"==c)return this._eventCache={},!0;if(!this._parseCustomEvents("off",c,b)){var a=this._eventCache,d=c.indexOf(".");if(!b&&0>=d){for(var e in a)(e.split(".")[0]==c||0==d&&0<=
e.indexOf(c))&&delete a[e];return!0}d=a[c];if(!d)return!1;if(b){a=0;for(e=d.length;a<e;a++)if(d[a].handler==b)return d.splice(a,1),!0}else return delete a[c],!0;return!1}},suspend:function(){if(this.isSuspend)return!1;this.isSuspend=!0},resume:function(){if(!this.isSuspend)return!1;this.isSuspend=!1},trigger:function(c,b){function a(a){if(a)for(var b=0,e=a.length;b<e;b++){var c=a[b],f=c.delegation;"number"==typeof c.times&&(1<c.times?c.times--:d.off(j,c.handler));g=f.apply(null,h)}}var d=this,e=f.toArray(arguments);
e.unshift("trigger");if(!d._parseCustomEvents.apply(d,e)){var e=d._eventCache,h=f.toArray(arguments,1),g,k;if(0<c.indexOf("."))k=e[c],a(k);else for(var j in e)if(k=c.indexOf("."),j.split(".")[0]==c||0==k&&0<=j.indexOf(c))k=e[j],a(k);a(e.all);return g}}}});
handy.add("Date",function(){var f=window.Date,c={getWeek:function(b,a){var d=b.getDay();a&&(d=(d+(a%7+7))%7);return"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[d]},isWeeken:function(b){return 0==b.getDay()||6==b.getDay()},getDaysInMonth:function(b){b=new f(b.getFullYear(),b.getMonth()+1,0);return b.getDate()},getDaysInYear:function(b){var a=new f(b.getFullYear(),0,0);b=new f(b.getFullYear()+1,0,0);return Math.floor((b.getTime()-a.getTime())/864E5)},getDayIndexOfYear:function(b){var a=new f("1/1/"+
b.getFullYear());return Math.ceil((b.getTime()-a.getTime())/864E5)},format:function(b,a){a=a||"yyyy-MM-dd HH:mm:ss";b=b||new f;var d=b.getHours(),e=Math.floor((b.getMonth()+3)/3),d={"y+":b.getFullYear(),"M+":b.getMonth()+1,"d+":b.getDate(),"h+":0==d%12?12:d%12,"H+":d,"m+":b.getMinutes(),"s+":b.getSeconds(),"w+":c.getWeek(b),"q+":e,"Q+":["\u4e00","\u4e8c","\u4e09","\u56db"][e-1],"S+":b.getMilliseconds()},h;for(h in d)RegExp("("+h+")").test(a)&&(e=RegExp.$1.length,a=a.replace(RegExp.$1,1==e?d[h]:("00"+
d[h]).slice(-e)));return a},parse:function(b,a){for(var d=(a||"yyyy-MM-dd HH:mm:ss").match(/[a-zA-Z]+/g),e=b.match(/\d+/g),c=new f,g=0;g<e.length;g++){var k=d[g],j=parseInt(e[g]);switch(k){case "yyyy":c.setFullYear(j);break;case "MM":c.setMonth(j-1);break;case "dd":c.setDate(j);break;case "HH":c.setHours(j);break;case "mm":c.setMinutes(j);break;case "ss":c.setSeconds(j);break;case "SS":c.setMilliseconds(j)}}return c},parseObject:function(b){return new f(b.year+1900,b.month,b.date,b.hours,b.minutes,
b.seconds)}};return c});
handy.add("String",function(){var f={stripTags:function(c){return c.replace(/<\/?[^>]+>/gi,"")},escapeHTML:function(c){var b=document.createElement("div");c=document.createTextNode(c);b.appendChild(c);return b.innerHTML},unescapeHTML:function(c){var b=document.createElement("div");b.innerHTML=f.stripTags(c);return b.childNodes[0].nodeValue},decodeHTML:function(c){c=c.replace(/&lt;/gi,"<");c=c.replace(/&gt;/gi,">");c=c.replace(/&quot;/gi,'"');c=c.replace(/&apos;/gi,"'");c=c.replace(/<\/?br>/gi,"\n");
c=c.replace(/&amp;/gi,"&");return c=c.replace(/&nbsp;/gi," ")},encodeHTML:function(c){c=c.replace(/&/gi,"&amp;");c=c.replace(/</gi,"&lt;");c=c.replace(/>/gi,"&gt;");c=c.replace(/\"/gi,"&quot;");c=c.replace(/\'/gi,"&apos;");c=c.replace(/\n/gi,"</br>");return c=c.replace(/ /gi,"&nbsp;")},trim:function(c){return c=c.replace(/(^(\s|\u3000)+)|((\s|\u3000)+$)/g,"")},check:function(c,b){b||(b=/[,%\'\"\/\\;|\<\>\^]/);return-1<c.search(b)},len:function(c){return c.replace(/[^\x00-\xff]/g,"**").length},left:function(c,
b,a){if(f.len(c)>b){!0===a?a=2:0<a||(a=0);var d=0,e=0;for(b-=a;e<b;)255<c.charCodeAt(d)?e+=2:e++,d++;c=c.substring(0,d);for(d=0;d<a;d++)c+="."}return c},isNumber:function(c){return 0==c.search(/^\d+$/g)},hasChn:function(c){return/[\u4E00-\u9FA5]+/.test(c)},isChn:function(c){return/^[\u4E00-\u9FA5]+$/.test(c)},addParam:function(c,b){b&&(c+=(-1<c.indexOf("?")?"&":"?")+b);return c}};return f});
handy.add("Cookie",function(){return{getCookie:function(f,c){var b=f+"=",a="",d=document.cookie;if(0<d.length){var e=d.indexOf(b);-1!=e&&(e+=b.length,b=d.indexOf(";",e),-1==b&&(b=d.length),a=d.substring(e,b),c||(a=unescape(a)))}return a},setCookie:function(f,c,b){var a=[];void 0!=f&&void 0!=c&&a.push(f+"="+escape(c));b&&(void 0!=b.path&&a.push("path="+b.path),void 0!=b.domain&&a.push("domain="+b.domain),void 0!=b.expires&&a.push("expires="+b.expires),b.secure&&a.push("secure"));document.cookie=a.join(";")},
delCookie:function(f){var c=new Date;c.setTime(c.getTime()-1);document.cookie=f+"=;expires="+c.toGMTString()}}});handy.add("Util",function(f){var c=0;return{isWindow:function(b){return null!=b&&b==b.window},getUuid:function(){return c++},getHash:function(){return top.location.hash.replace(/\?.*/,"")},setHash:function(b){var a=top.location.hash;0<=a.indexOf("#")&&(b=a.replace(/#[^\?]*/,b));top.location.hash=b},result:function(b,a){var d=b[a];return f.Object.isFunction(d)?d():d}}});
handy.add("Collection","B.Object",function(f,c){function b(a){return a}function a(a){return function(b){return b[a]}}function d(a){return function(b){if(b===a)return!0;for(var d in a)if(a[d]!==b[d])return!1;return!0}}return{map:function(a,b,d){var c=[];if(null==a)return c;var j=Array.prototype.map;if(j&&a.map===j)return a.map(b,d);f.each(a,function(a,e){c.push(b.call(d,e,a))});return c},pluck:function(b,d){return this.map(b,a(d))},some:function(a,b,d){var f=!1;if(null==a||!b)return f;var j=Array.prototype.some;
if(j&&a.some===j)return a.some(b,d);c.each(a,function(a,c,e){if(f||(f=b.call(d,c,a,e)))return!1});return!!f},every:function(a,b,d){var f=!0;if(null==a||!b)return f;var j=Array.prototype.every;if(j&&a.every===j)return a.every(b,d);c.each(a,function(a,c,e){if(!(f=b.call(d,c,a,e)))return!1});return!!f},find:function(a,b,d){var c;this.some(a,function(a,e,f){if(b.call(d,a,e,f))return c=a,!0});return c},filter:function(a,b,d){var f=[];if(null==a)return f;var j=Array.prototype.filter;if(j&&a.filter===j)return a.filter(b,
d);c.each(a,function(a,c,e){b.call(d,c,a,e)&&f.push(c)});return f},where:function(a,b){return this.filter(a,d(b))},findWhere:function(a,b){return this.find(a,d(b))},invoke:function(a,b){var d=Array.prototype.slice.call(arguments,2),c=f.isFunction(b);return this.map(a,function(a){return(c?b:a[b]).apply(a,d)})},sortBy:function(d,f,g){var k=f;f=null==k?b:c.isFunction(k)?k:a(k);return this.pluck(this.map(d,function(a,b,d){return{value:a,index:b,criteria:f.call(g,a,b,d)}}).sort(function(a,b){var d=a.criteria,
c=b.criteria;if(d!==c){if(d>c||void 0===d)return 1;if(d<c||void 0===c)return-1}return a.index-b.index}),"value")}}});
handy.add("Template",function(f){var c={},b=/^=/,a="".trim,d={openTag:"<%",closeTag:"%>",_add:function(b){return a?"$r+="+b+";\n":"$r.push("+b+");\n"},_parseHtml:function(a){a=a.replace(/("|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return d._add('"'+a+'"')},_parseScript:function(a){a=a.replace(/this/g,"$data");0==a.indexOf("=")&&(a=d._add(a.replace(b,"")+'||""'));return a+"\n"},_compile:function(b){var c="var $r="+(a?'""':"[]")+";\n";f.Object.each(b.split(d.openTag),function(a,b){var e=
b.split(d.closeTag);1==e.length?c+=d._parseHtml(e[0]):(c+=d._parseScript(e[0]),e[1]&&(c+=d._parseHtml(e[1])))});c+="return "+(a?"$r;":'$r.join("");');return new Function("$data",c)},tmpl:function(a,b){var g,k,j;if("string"==typeof a)g=a;else if(g=a.tmpl,j=a.id)if(c[j])k=c[j];else{var l=document.getElementById(j);l&&(g=(l.value||l.innerHTML).replace(/\s/g,""))}if(!k){if(!g){f.Debug.error("\u6a21\u677f\u672a\u5b9a\u4e49");return}k=d._compile(g);j&&(c[j]=k)}return b?k(b):k}};return d});
handy.add("HashChange",["handy.base.Debug","handy.base.Util"],function(f,c,b){function a(a){if(a==l)return!1;var b=j.contentWindow.document;b.open();b.write("<!doctype html><html><body>"+a+"</body></html>");b.close();l=a;f.log("set:"+j.contentWindow.document.body.innerText)}function d(){var b=c.getHash(),d=j.contentWindow.document.body.innerText;b!=l?(a(b),e(b)):d!=l&&(f.log("update:"+j.contentWindow.document.body.innerText),c.setHash(d))}function e(a){var b=p.listeners,d;for(d in b)b[d](a)}var h,
g=0,k=document,j,l,n=k.documentMode,s="onhashchange"in window&&(void 0===n||7<n),p={delay:50,listen:function(f,l){if(!h&&!h)if(h=!0,p.listeners={},s)$(window).on("hashchange",function(){e(c.getHash())});else j=$('<iframe id="fff" tabindex="-1" style="display:none" width=0 height=0 title="empty" />').appendTo(k.body)[0],$(j).one("load",function(){a(c.getHash());setInterval(d,p.delay)});if(l in p.listeners)$D.error(Error("Duplicate name"));else return l=l||b.expando+ ++g,p.listeners[l]=f,l},unListen:function(a){for(var b in p.listeners)(!a||
a==b)&&delete p.listeners[b]}};return p});handy.add("Support","B.Browser",function(f){var c={mediaQuery:function(){var a;if(f.mobile())a="hui-mobile";else{a="hui-pc";var b=f.ie();b&&(a+=" ie"+b)}document.documentElement.className+=" "+a}};c.mediaQuery();if(6==f.ie())try{document.execCommand("BackgroundImageCache",!1,!0)}catch(b){}return c});
handy.add("Validator",["B.String","B.Object"],function(f,c){var b={messages:{required:"{name}\u4e0d\u80fd\u4e3a\u7a7a",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94fe\u63a5\u5730\u5740",date:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f",number:"{name}\u987b\u662f\u6570\u5b57",digits:"{name}\u987b\u662f\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u7528\u5361\u53f7\u7801",
equalTo:"\u8bf7\u8f93\u5165\u76f8\u540c\u7684{name}",min:"{name}\u4e0d\u80fd\u5c0f\u4e8e{0}",max:"{name}\u4e0d\u80fd\u5927\u4e8e{0}",range:"{name}\u8981\u5728{0}\u5230{1}\u4e4b\u95f4",maxlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7{0}",minlength:"{name}\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e{0}",rangelength:"{name}\u957f\u5ea6\u8981\u5728{0}\u5230{1}\u4e4b\u95f4"},valid:function(a,d){var c=d.rules,f;for(f in c){var g=c[f],k=("function"==typeof g?g:b[f])(a,g);if(!k)return c=d.error||b.error,f=d.messages&&
d.messages[f]||b.messages[f],f=f.replace(/\{([^\}]+)\}/g,function(a,b){return g[b]||0==b&&g||d[b]||g||""}),c&&c(f),k}return!0},required:function(a){return 0<f.trim(""+a).length},email:function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a){return!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a){return/^\d+$/.test(a)},creditcard:function(a){if(/[^0-9 \-]+/.test(a))return!1;var b=0,c=0,f=!1;a=a.replace(/\D/g,"");for(var g=a.length-1;0<=g;g--){c=a.charAt(g);c=parseInt(c,10);if(f&&9<(c*=2))c-=9;b+=c;f=!f}return 0===b%10},min:function(a,b){return a>=b},max:function(a,
b){return a<=b},range:function(a,b){return a>=b[0]&&a<=b[1]},minlength:function(a,b){return(c.isArray(a)?a.length:f.trim(""+a).length)>=b},maxlength:function(a,b){return(c.isArray(a)?a.length:f.trim(""+a).length)<=b},rangelength:function(a,b){var e=c.isArray(a)?a.length:f.trim(""+a).length;return e>=b[0]&&e<=b[1]},equalTo:function(a,b){return a===b}};return b});
handy.add("LocalStorage",["B.Browser","B.Events","B.Json"],function(f,c,b){c={_init:function(){!a&&f.ie()&&(e=document.getElementById("LocalStorageUserDataDiv"),e||(e=document.createElement("DIV"),e.style.display="none",e.id="LocalStorageUserDataDiv",e.addBehavior("#default#userData"),document.body.appendChild(e),e.load(h)))},getItem:function(c){c=a?d.getItem(c):e.getAttribute(c);return c=b.parseJson(c)},setItem:function(c,f){f=b.stringify(f);try{a?d.setItem(c,f):(e.setAttribute(c,f),e.save(h))}catch(j){return $D.error(j),
!1}return!0},removeItem:function(b){a?d.removeItem(b):(e.removeAttribute(b),e.save(h))},clear:function(){a?d.clear():e.unload()}};var a=window.localStorage&&window.localStorage.getItem,d=window.localStorage,e,h=document.domain;c._init();return c})(function(f){Hui=H=$H=f.noConflict();$D=$H.Debug;$HD=$H.Date;$Define=$H.Loader.define;$Require=$H.Loader.require;$G={config:{}};f=window.$;f.fn.remove=$H.intercept(f.fn.remove,function(){$H.trigger("removeEl",this.target)})})(handy);
